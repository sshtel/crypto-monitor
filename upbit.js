function accessibilityMode(){if(stxx.manageTouchAndMouse=!1,currentIndex=0,!isAndroid){var t=document.getElementById("chartContainer");new Hammer(t).on("swipeleft swiperight",function(t){"swipeleft"===t.type?accessibilitySwipe(t.type):"swiperight"===t.type&&accessibilitySwipe(t.type)})}}function accessibilitySwipe(t){(currentIndex<0||stxx.dataSegmentLength!==stxx.chart.dataSegment.length)&&(currentIndex=0,stxx.dataSegmentLength=stxx.chart.dataSegment.length);var e=currentIndex;t===RIGHT_SWIPE?e+1>stxx.dataSegmentLength-1?e=stxx.dataSegmentLength-1:e++:e-1<0?e=0:e--,currentIndex=e;for(var i=stxx.chart.dataSegment[e];!i;)currentIndex++,i=stxx.chart.dataSegment[currentIndex];var n=stxx.pixelFromBar(e),r=stxx.pixelFromPrice(i.Close);CIQ.appendClassName(stxx.container,"stx-crosshair-on"),stxx.mousemoveinner(stxx.resolveX(n),stxx.resolveY(r)),stxx.controls.crossX.style.left=n+"px",stxx.controls.crossY.style.top=r+"px",stxx.crossYActualPos=r,stxx.controls.crossX.style.display="",stxx.controls.crossY.style.display="",stxx.controls.floatDate.style.visibility="",stxx.chart.panel&&stxx.updateFloatHRLabel(stxx.chart.panel),stxx.floatCanvas.style.display="block";var a=["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date(i.DT.getTime()),s=o.getDate(),l=o.getMonth(),h=o.getFullYear(),c=a[l]+", "+s+", "+h;if("day"!==stxx.layout.interval){var u="pm",d=o.getHours();d<10&&(d="0"+d),d<12&&(u="am");var p=o.getMinutes();p<10&&(p="0"+p),c+=", "+d+":"+p+" "+u}var f=[c,"Close: "+i.Close,"Open: "+i.Open,"High: "+i.High,"Low: "+i.Low,"Volume: "+CIQ.commas(i.Volume)],m=f.join("||");if(isAndroid)return m;webkit.messageHandlers.accessibilityHandler.postMessage(m)}function determineOs(){var t=navigator.userAgent;/android/i.test(t)&&(isAndroid=!0)}function nativeQuoteFeed(t,e){var i=CIQ.uniqueID();"pullInitialData"===t.func&&(quoteFeedCallbacks[i]=e,isAndroid?QuoteFeed.pullInitialData(t.symbol,t.period,t.timeUnit,t.start.toISOString(),t.end.toISOString(),t,i):webkit.messageHandlers.pullInitialDataHandler.postMessage({cb:i,symbol:t.symbol,startDate:t.start.toISOString(),endDate:t.end.toISOString(),interval:t.timeUnit,period:t.period})),"pullUpdate"===t.func&&(quoteFeedCallbacks[i]=e,isAndroid?QuoteFeed.pullUpdate(t.symbol,t.period,t.timeUnit,t.start.toISOString(),t,i):webkit.messageHandlers.pullUpdateDataHandler.postMessage({cb:i,symbol:t.symbol,startDate:t.start.toISOString(),interval:t.timeUnit,period:t.period})),"pullPagination"===t.func&&(quoteFeedCallbacks[i]=e,isAndroid?QuoteFeed.pullPagination(t.symbol,t.period,t.timeUnit,t.start.toISOString(),t.end.toISOString(),t,i):webkit.messageHandlers.pullPaginationDataHandler.postMessage({cb:i,symbol:t.symbol,startDate:t.start.toISOString(),endDate:t.end.toISOString(),interval:t.timeUnit,period:t.period}))}function attachQuoteFeed(t){stxx.attachEngineQuoteFeed(quoteFeedNativeBridge,{refreshInterval:t})}function parseData(t,e){for(var i=JSON.parse(t),n=[],r=0;r<i.length;r++)n[r]={},n[r].DT=new Date(i[r].DT),n[r].Open=i[r].Open,n[r].High=i[r].High,n[r].Low=i[r].Low,n[r].Close=i[r].Close,n[r].Volume=i[r].Volume;if(e){(0,quoteFeedCallbacks[e])({quotes:n,moreAvailable:!0}),delete quoteFeedCallbacks[e]}else stxx.appendMasterData(n)}function getHudDetails(){var t={},e=stxx.barFromPixel(stxx.cx),i=stxx.chart.xaxis[e];return null!==i&&i.data&&(t.open=stxx.formatPrice(i.data.Open),t.close=stxx.formatPrice(i.data.Close),t.high=stxx.formatPrice(i.data.High),t.low=stxx.formatPrice(i.data.Low),t.volume=CIQ.condenseInt(i.data.Volume)),isAndroid?t:JSON.stringify(t)}function setPeriodicity(t,e,i){var n={period:t,interval:e,timeUnit:i};stxx.setPeriodicity(n)}function callNewChart(t,e){t||(t=stxx.chart.symbol);var i=$$$("cq-loader");i&&i.show();var n=function(){stxx.dataSegmentLength=stxx.chart.dataSegment.length,i&&i.hide()};isAndroid||(n=function(){stxx.dataSegmentLength=stxx.chart.dataSegment.length,i&&i.hide(),webkit.messageHandlers.newSymbolCallbackHandler.postMessage(t)}),stxx.newChart(t,e,null,n)}function setChartType(t){stxx.layout.aggregationType="",stxx.setChartType(t)}function setAggregationType(t){stxx.layout.aggregationType=t,stxx.setChartType("candle")}function getSymbol(){return stxx.chart.symbol}function enableCrosshairs(t){stxx.layout.crosshair=t}function getCurrentVectorParameters(){return stxx.currentVectorParameters}function setCurrentVectorParameters(t,e){stxx.currentVectorParameters[t]=e}function addSeries(t,e,i){var n={color:e,isComparison:i};stxx.addSeries(t,n)}function removeSeries(t){stxx.removeSeries(t)}function addStudy(t,e,i){CIQ.Studies.addStudy(stxx,t,e,i)}function removeStudy(t){var e=stxx.layout.studies;for(var i in e){var n=e[i];n.name===t&&CIQ.Studies.removeStudy(stxx,n)}}function removeAllStudies(){var t=stxx.layout.studies;for(var e in t){var i=t[e];CIQ.Studies.removeStudy(stxx,i)}}function getStudyList(){var t=[];for(var e in CIQ.Studies.studyLibrary)CIQ.Studies.studyLibrary[e].shortName=e,t.push(CIQ.Studies.studyLibrary[e]);return t}function getActiveStudies(){var t=[];for(var e in stxx.layout.studies)stxx.layout.studies[e].shortName=e,t.push(stxx.layout.studies[e]);if(isAndroid)return t;var i=[];return JSON.stringify(t,function(t,e){if(null!==e&&"object"==typeof e){if(i.indexOf(e)>=0)return;i.push(e)}return e})}function getAddedStudies(){function t(t){return function(e,i){if("object"==typeof i&&null!==i){if(-1!==t.indexOf(i))return;t.push(i)}return i}}var e=[],i=stxx.layout.studies,n=[],r=[];for(var a in i){var o=i[a],s=JSON.stringify(o.inputs,t(n)),l=JSON.stringify(o.outputs,t(r));e.push(o.name+"___"+s+"___"+JSON.stringify(l))}return e.join("|||")}function setStudy(t,e,i){var n=stxx.layout.studies,r={};for(var a in n){var o=n[a];o.name===t&&(r=o)}var s=new CIQ.Studies.DialogHelper({sd:r,stx:stxx}),l=!1,h={},c={};for(var u in s.inputs){var d=s.inputs[u];d.name===e&&(l=!0,"text"===d.type||"select"===d.type?h[e]=i:"number"===d.type?h[e]=parseInt(i):"checkbox"===d.type&&(h[parameter]="false"!=i))}if(!1===l)for(u in s.outputs){var p=s.outputs[u];p.name===e&&(c[e]=i)}l=!1,s.updateStudy({inputs:h,outputs:c})}function getStudyParameters(t,e){var i=new STX.Studies.DialogHelper({sd:stxx.layout.studies[t],stx:stxx}),n=i.outputs;return e&&(n=i.inputs),isAndroid?n:JSON.stringify(n)}function setStudyParameter(t,e,i,n){var r=new CIQ.Studies.DialogHelper({sd:stxx.layout.studies[t],stx:stxx});n?r.updateStudy({inputs:{key:i},outputs:{}}):r.updateStudy({inputs:{},outputs:{key:i}})}function addDrawingListener(){stxx.addEventListener("drawing",function(t){var e=t.drawings,i=[];for(var n in e){var r=e[n];i.push(r.serialize())}isAndroid||webkit.messageHandlers.drawingHandler.postMessage(JSON.stringify(i))})}function addLayoutListener(){stxx.addEventListener("layout",function(t){if(!isAndroid){var e=[];webkit.messageHandlers.layoutHandler.postMessage(JSON.stringify(t.layout,function(t,i){if(null!==i&&"object"==typeof i){if(e.indexOf(i)>=0)return;e.push(i)}return i}))}})}(function(){var t,e,i,n,r,a,o,s={}.hasOwnProperty,l=[].slice;o="undefined"!=typeof exports&&null!==exports?exports:this,e=function(t){this.message=t},e.prototype=new Error,a={prefix:"",default_url_options:{}},t={GROUP:1,CAT:2,SYMBOL:3,OR:4,STAR:5,LITERAL:6,SLASH:7,DOT:8},i=["anchor","trailing_slash","host","port","protocol"],n={default_serializer:function(t,e){var i,n,r,a,o,l,h;if(null==e&&(e=null),null==t)return"";if(!e&&"object"!==this.get_object_type(t))throw new Error("Url parameters should be a javascript hash");switch(h=[],this.get_object_type(t)){case"array":for(n=r=0,o=t.length;r<o;n=++r)i=t[n],h.push(this.default_serializer(i,e+"[]"));break;case"object":for(a in t)s.call(t,a)&&(l=t[a],null==l&&null!=e&&(l=""),null!=l&&(null!=e&&(a=e+"["+a+"]"),h.push(this.default_serializer(l,a))));break;default:null!=t&&h.push(encodeURIComponent(e.toString())+"="+encodeURIComponent(t.toString()))}return h.length?h.join("&"):""},custom_serializer:null,serialize:function(t){return null!=this.custom_serializer&&"function"===this.get_object_type(this.custom_serializer)?this.custom_serializer(t):this.default_serializer(t)},clean_path:function(t){var e;return t=t.split("://"),e=t.length-1,t[e]=t[e].replace(/\/+/g,"/"),t.join("://")},extract_options:function(t,e){var i;return i=e[e.length-1],e.length>t&&void 0===i||null!=i&&"object"===this.get_object_type(i)&&!this.looks_like_serialized_model(i)?e.pop()||{}:{}},looks_like_serialized_model:function(t){return"id"in t||"to_param"in t},path_identifier:function(t){var e;return 0===t?"0":t?(e=t,"object"===this.get_object_type(t)&&(e="to_param"in t?t.to_param:"id"in t?t.id:t,"function"===this.get_object_type(e)&&(e=e.call(t))),e.toString()):""},clone:function(t){var e,i,n;if(null==t||"object"!==this.get_object_type(t))return t;i=t.constructor();for(n in t)s.call(t,n)&&(e=t[n],i[n]=e);return i},merge:function(){var t,e;if(e=1<=arguments.length?l.call(arguments,0):[],t=function(t,e){return e(t),t},(null!=e?e.length:void 0)>0)return t({},function(t){var i,n,r,a,o,s;for(a=[],i=0,r=e.length;i<r;i++)s=e[i],a.push(function(){var e;e=[];for(n in s)o=s[n],e.push(t[n]=o);return e}());return a})},normalize_options:function(t,e,n,r){var o,l,h,c,u,d,p,f;if(u=this.extract_options(e.length,r),r.length>e.length)throw new Error("Too many parameters provided for path");u=this.merge(a.default_url_options,t,u),d={},p={},d.url_parameters=p;for(h in u)s.call(u,h)&&(f=u[h],this.indexOf(i,h)>=0?d[h]=f:p[h]=f);for(o=l=0,c=e.length;l<c;o=++l)f=e[o],o<r.length&&(p[f]=r[o]);return d},build_route:function(t,e,i,r,a,o){var s,l,h,c,u;return o=Array.prototype.slice.call(o),s=this.normalize_options(r,t,e,o),l=s.url_parameters,h=""+this.get_prefix()+this.visit(i,l),c=n.clean_path(h),!0===s.trailing_slash&&(c=c.replace(/(.*?)[\/]?$/,"$1/")),(u=this.serialize(l)).length&&(c+="?"+u),c+=s.anchor?"#"+s.anchor:"",a&&(c=this.route_url(s)+c),c},visit:function(i,n,r){var a,o,s,l,h,c;switch(null==r&&(r=!1),h=i[0],a=i[1],s=i[2],h){case t.GROUP:return this.visit(a,n,!0);case t.STAR:return this.visit_globbing(a,n,!0);case t.LITERAL:case t.SLASH:case t.DOT:return a;case t.CAT:return o=this.visit(a,n,r),l=this.visit(s,n,r),r&&(this.is_optional_node(a[0])&&!o||this.is_optional_node(s[0])&&!l)?"":""+o+l;case t.SYMBOL:if(null!=(c=n[a]))return delete n[a],this.path_identifier(c);if(r)return"";throw new e("Route parameter missing: "+a);default:throw new Error("Unknown Rails node type")}},is_optional_node:function(e){return this.indexOf([t.STAR,t.SYMBOL,t.CAT],e)>=0},build_path_spec:function(e,i){var n,r,a;switch(null==i&&(i=!1),a=e[0],n=e[1],r=e[2],a){case t.GROUP:return"("+this.build_path_spec(n)+")";case t.CAT:return""+this.build_path_spec(n)+this.build_path_spec(r);case t.STAR:return this.build_path_spec(n,!0);case t.SYMBOL:return!0===i?("*"===n[0]?"":"*")+n:":"+n;case t.SLASH:case t.DOT:case t.LITERAL:return n;default:throw new Error("Unknown Rails node type")}},visit_globbing:function(t,e,i){var n,r;return t[0],n=t[1],t[2],n.replace(/^\*/i,"")!==n&&(t[1]=n=n.replace(/^\*/i,"")),null==(r=e[n])?this.visit(t,e,i):(e[n]=function(){switch(this.get_object_type(r)){case"array":return r.join("/");default:return r}}.call(this),this.visit(t,e,i))},get_prefix:function(){var t;return t=a.prefix,""!==t&&(t=t.match("/$")?t:t+"/"),t},route:function(t,e,i,r,a){var o;return o=function(){return n.build_route(t,e,i,r,a,arguments)},o.required_params=t,o.toString=function(){return n.build_path_spec(i)},o},route_url:function(t){var e,i,r;return"string"==typeof t?t:(r=t.protocol||n.current_protocol(),e=t.host||window.location.hostname,i=t.port||(t.host?void 0:n.current_port()),i=i?":"+i:"",r+"://"+e+i)},has_location:function(){return"undefined"!=typeof window&&"undefined"!=typeof window.location},current_host:function(){return this.has_location()?window.location.hostname:null},current_protocol:function(){return this.has_location()&&""!==window.location.protocol?window.location.protocol.replace(/:$/,""):"http"},current_port:function(){return this.has_location()&&""!==window.location.port?window.location.port:""},_classToTypeCache:null,_classToType:function(){var t,e,i,n;if(null!=this._classToTypeCache)return this._classToTypeCache;for(this._classToTypeCache={},n="Boolean Number String Function Array Date RegExp Object Error".split(" "),t=0,e=n.length;t<e;t++)i=n[t],this._classToTypeCache["[object "+i+"]"]=i.toLowerCase();return this._classToTypeCache},get_object_type:function(t){return o.jQuery&&null!=o.jQuery.type?o.jQuery.type(t):null==t?""+t:"object"==typeof t||"function"==typeof t?this._classToType()[Object.prototype.toString.call(t)]||"object":typeof t},indexOf:function(t,e){return Array.prototype.indexOf?t.indexOf(e):this.indexOfImplementation(t,e)},indexOfImplementation:function(t,e){var i,n,r,a;for(a=-1,i=n=0,r=t.length;n<r;i=++n)t[i]===e&&(a=i);return a}},r=function(){var t;return t=function(e,i){var n,r;if(r=i?i.split("."):[],r.length)return n=r.shift(),e[n]=e[n]||{},t(e[n],r.join("."))},t(o,"Routes"),o.Routes={active_dormant_user_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"active_dormant_user",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),api_health_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"api",!1],[2,[7,"/",!1],[2,[6,"health",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),balances_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"balances",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),broker_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"broker",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),chartiq_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"chartiq",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),chat_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"chat",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),coin_list_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"coin_list",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),confirm_new_ip_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"confirm_new_ip",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),display_setting_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"display_setting",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),exchange_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"exchange",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),find_passwords_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"find_passwords",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),freeze_account_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"freeze_account",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),full_chart_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"full_chart",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),generate_new_two_factor_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"generate_new_two_factor",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),home_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"home",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),invalid_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"invalid",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),investments_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"investments",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),investments_balance_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"investments",!1],[2,[7,"/",!1],[2,[6,"balance",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),investments_history_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"investments",!1],[2,[7,"/",!1],[2,[6,"history",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),investments_profit_and_loss_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"investments",!1],[2,[7,"/",!1],[2,[6,"profit_and_loss",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),investments_wait_deposit_and_withdraws_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"investments",!1],[2,[7,"/",!1],[2,[6,"wait_deposit_and_withdraws",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),investments_wait_orders_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"investments",!1],[2,[7,"/",!1],[2,[6,"wait_orders",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),m_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"m",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),mypage_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),mypage_access_management_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"access_management",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_account_register_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"account_register",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_customer_info_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_customer_info_change_email_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[2,[7,"/",!1],[2,[6,"change_email",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_customer_info_change_fund_password_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[2,[7,"/",!1],[2,[6,"change_fund_password",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_customer_info_change_login_password_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[2,[7,"/",!1],[2,[6,"change_login_password",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_customer_info_change_mobile_phone_number_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[2,[7,"/",!1],[2,[6,"change_mobile_phone_number",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_customer_info_new_bank_account_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[2,[7,"/",!1],[2,[6,"new_bank_account",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_customer_info_new_residential_address_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[2,[7,"/",!1],[2,[6,"new_residential_address",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_customer_info_reset_fund_password_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[2,[7,"/",!1],[2,[6,"reset_fund_password",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_customer_info_withdrawal_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"customer_info",!1],[2,[7,"/",!1],[2,[6,"withdrawal",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_email_certification_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"email_certification",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_kakaopay_certification_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"kakaopay_certification",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_open_api_management_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"open_api_management",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_realname_certification_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"realname_certification",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_security_certificate_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_security_certificate_bank_account_verification_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"bank_account_verification",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_freeze_account_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"freeze_account",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_fund_password_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"fund_password",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_mobile_phone_number_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"mobile_phone_number",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_reactivate_account_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"reactivate_account",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_regenerate_secret_key_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"regenerate_secret_key",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_residential_address_verification_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"residential_address_verification",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_turn_off_whitelist_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"turn_off_whitelist",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_turn_on_whitelist_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"turn_on_whitelist",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_two_factor_authentication_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"two_factor_authentication",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_verify_identity_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"verify_identity",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_whitelist_management_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"whitelist_management",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),mypage_security_certificate_whitelist_management_add_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"security_certificate",!1],[2,[7,"/",!1],[2,[6,"whitelist_management",!1],[2,[7,"/",!1],[2,[6,"add",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]]]],{}),mypage_terminate_account_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"terminate_account",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),mypage_trade_fee_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"mypage",!1],[2,[7,"/",!1],[2,[6,"trade_fee",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),oauth_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"oauth",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),open_api_agreement_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"open_api_agreement",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),openbeta_event_notice_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"openbeta_event_notice",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),openbeta_notice_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"openbeta_notice",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),otp_certification_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"otp_certification",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),personal_information_collection_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"personal_information_collection",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),privacy_policy_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"privacy_policy",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),reset_login_password_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"reset_login_password",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),reset_two_factor_auth_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"reset_two_factor_auth",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),service_center_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),service_center_documents_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"documents",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_documents_identity_verification_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"documents",!1],[2,[7,"/",!1],[2,[6,"identity_verification",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),service_center_documents_initialize_withdrawal_account_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"documents",!1],[2,[7,"/",!1],[2,[6,"initialize_withdrawal_account",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),service_center_documents_proof_of_payment_another_account_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"documents",!1],[2,[7,"/",!1],[2,[6,"proof_of_payment_another_account",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),service_center_documents_proof_of_payment_my_account_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"documents",!1],[2,[7,"/",!1],[2,[6,"proof_of_payment_my_account",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),service_center_documents_reset_phone_number_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"documents",!1],[2,[7,"/",!1],[2,[6,"reset_phone_number",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]]]],{}),service_center_faq_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"faq",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_guide_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"guide",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_notice_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"notice",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_open_api_guide_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"open_api_guide",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_policy_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"policy",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_press_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"press",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_qna_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"qna",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_qna_list_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"qna_list",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_qna_post_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"qna_post",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),service_center_wallet_status_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"service_center",!1],[2,[7,"/",!1],[2,[6,"wallet_status",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]]]],{}),signin_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"signin",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),signup_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"signup",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),terms_and_policy_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"terms_and_policy",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),terms_of_service_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"terms_of_service",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),trends_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"trends",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),two_factor_auth_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"two_factor_auth",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),verify_email_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"verify_email",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),w_event_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"w_event",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{}),w_event_result_path:n.route([],["format"],[2,[7,"/",!1],[2,[6,"w_event_result",!1],[1,[2,[8,".",!1],[3,"format",!1]],!1]]],{})},o.Routes.options=a,o.Routes.default_serializer=function(t,e){return n.default_serializer(t,e)},o.Routes},"function"==typeof define&&define.amd?define([],function(){return r()}):r()}).call(this),/*!
 * jQuery JavaScript Library v1.12.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:17Z
 */
function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=!!t&&"length"in t&&t.length,i=pt.type(t);return"function"!==i&&!pt.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function n(t,e,i){if(pt.isFunction(e))return pt.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return pt.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(St.test(e))return pt.filter(e,t,i);e=pt.filter(e,t)}return pt.grep(t,function(t){return pt.inArray(t,e)>-1!==i})}function r(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}function a(t){var e={};return pt.each(t.match(_t)||[],function(t,i){e[i]=!0}),e}function o(){nt.addEventListener?(nt.removeEventListener("DOMContentLoaded",s),t.removeEventListener("load",s)):(nt.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(nt.addEventListener||"load"===t.event.type||"complete"===nt.readyState)&&(o(),pt.ready())}function l(t,e,i){if(i===undefined&&1===t.nodeType){var n="data-"+e.replace(Ft,"-$1").toLowerCase();if("string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Pt.test(i)?pt.parseJSON(i):i)}catch(t){}pt.data(t,e,i)}else i=undefined}return i}function h(t){var e;for(e in t)if(("data"!==e||!pt.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function c(t,e,i,n){if(It(t)){var r,a,o=pt.expando,s=t.nodeType,l=s?pt.cache:t,h=s?t[o]:t[o]&&o;if(h&&l[h]&&(n||l[h].data)||i!==undefined||"string"!=typeof e)return h||(h=s?t[o]=it.pop()||pt.guid++:o),l[h]||(l[h]=s?{}:{toJSON:pt.noop}),"object"!=typeof e&&"function"!=typeof e||(n?l[h]=pt.extend(l[h],e):l[h].data=pt.extend(l[h].data,e)),a=l[h],n||(a.data||(a.data={}),a=a.data),i!==undefined&&(a[pt.camelCase(e)]=i),"string"==typeof e?null==(r=a[e])&&(r=a[pt.camelCase(e)]):r=a,r}}function u(t,e,i){if(It(t)){var n,r,a=t.nodeType,o=a?pt.cache:t,s=a?t[pt.expando]:pt.expando;if(o[s]){if(e&&(n=i?o[s]:o[s].data)){pt.isArray(e)?e=e.concat(pt.map(e,pt.camelCase)):e in n?e=[e]:(e=pt.camelCase(e),e=e in n?[e]:e.split(" ")),r=e.length;for(;r--;)delete n[e[r]];if(i?!h(n):!pt.isEmptyObject(n))return}(i||(delete o[s].data,h(o[s])))&&(a?pt.cleanData([t],!0):ut.deleteExpando||o!=o.window?delete o[s]:o[s]=undefined)}}}function d(t,e,i,n){var r,a=1,o=20,s=n?function(){return n.cur()}:function(){return pt.css(t,e,"")},l=s(),h=i&&i[3]||(pt.cssNumber[e]?"":"px"),c=(pt.cssNumber[e]||"px"!==h&&+l)&&Ht.exec(pt.css(t,e));if(c&&c[3]!==h){h=h||c[3],i=i||[],c=+l||1;do{a=a||".5",c/=a,pt.style(t,e,c+h)}while(a!==(a=s()/l)&&1!==a&&--o)}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=r)),r}function p(t){var e=zt.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function f(t,e){var i,n,r=0,a="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):undefined;if(!a)for(a=[],i=t.childNodes||t;null!=(n=i[r]);r++)!e||pt.nodeName(n,e)?a.push(n):pt.merge(a,f(n,e));return e===undefined||e&&pt.nodeName(t,e)?pt.merge([t],a):a}function m(t,e){for(var i,n=0;null!=(i=t[n]);n++)pt._data(i,"globalEval",!e||pt._data(e[n],"globalEval"))}function g(t){Ut.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e,i,n,r){for(var a,o,s,l,h,c,u,d=t.length,v=p(e),y=[],x=0;x<d;x++)if((o=t[x])||0===o)if("object"===pt.type(o))pt.merge(y,o.nodeType?[o]:o);else if(Wt.test(o)){for(l=l||v.appendChild(e.createElement("div")),h=(Bt.exec(o)||["",""])[1].toLowerCase(),u=jt[h]||jt._default,l.innerHTML=u[1]+pt.htmlPrefilter(o)+u[2],a=u[0];a--;)l=l.lastChild;if(!ut.leadingWhitespace&&Vt.test(o)&&y.push(e.createTextNode(Vt.exec(o)[0])),!ut.tbody)for(o="table"!==h||qt.test(o)?"<table>"!==u[1]||qt.test(o)?0:l:l.firstChild,a=o&&o.childNodes.length;a--;)pt.nodeName(c=o.childNodes[a],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(pt.merge(y,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=v.lastChild}else y.push(e.createTextNode(o));for(l&&v.removeChild(l),ut.appendChecked||pt.grep(f(y,"input"),g),x=0;o=y[x++];)if(n&&pt.inArray(o,n)>-1)r&&r.push(o);else if(s=pt.contains(o.ownerDocument,o),l=f(v.appendChild(o),"script"),s&&m(l),i)for(a=0;o=l[a++];)Xt.test(o.type||"")&&i.push(o);return l=null,v}function y(){return!0}function x(){return!1}function b(){try{return nt.activeElement}catch(t){}}function C(t,e,i,n,r,a){var o,s;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=undefined);for(s in e)C(t,s,i,n,e[s],a);return t}if(null==n&&null==r?(r=i,n=i=undefined):null==r&&("string"==typeof i?(r=n,n=undefined):(r=n,n=i,i=undefined)),!1===r)r=x;else if(!r)return t;return 1===a&&(o=r,r=function(t){return pt().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=pt.guid++)),t.each(function(){pt.event.add(this,e,r,n,i)})}function w(t,e){return pt.nodeName(t,"table")&&pt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function S(t){return t.type=(null!==pt.find.attr(t,"type"))+"/"+t.type,t}function T(t){var e=ne.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function D(t,e){if(1===e.nodeType&&pt.hasData(t)){var i,n,r,a=pt._data(t),o=pt._data(e,a),s=a.events;if(s){delete o.handle,o.events={};for(i in s)for(n=0,r=s[i].length;n<r;n++)pt.event.add(e,i,s[i][n])}o.data&&(o.data=pt.extend({},o.data))}}function M(t,e){var i,n,r;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ut.noCloneEvent&&e[pt.expando]){r=pt._data(e);for(n in r.events)pt.removeEvent(e,n,r.handle);e.removeAttribute(pt.expando)}"script"===i&&e.text!==t.text?(S(e).text=t.text,T(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ut.html5Clone&&t.innerHTML&&!pt.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ut.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}}function k(t,e,i,n){e=at.apply([],e);var r,a,o,s,l,h,c=0,u=t.length,d=u-1,p=e[0],m=pt.isFunction(p);if(m||u>1&&"string"==typeof p&&!ut.checkClone&&ie.test(p))return t.each(function(r){var a=t.eq(r);m&&(e[0]=p.call(this,r,a.html())),k(a,e,i,n)});if(u&&(h=v(e,t[0].ownerDocument,!1,t,n),r=h.firstChild,1===h.childNodes.length&&(h=r),r||n)){for(s=pt.map(f(h,"script"),S),o=s.length;c<u;c++)a=h,c!==d&&(a=pt.clone(a,!0,!0),o&&pt.merge(s,f(a,"script"))),i.call(t[c],a,c);if(o)for(l=s[s.length-1].ownerDocument,pt.map(s,T),c=0;c<o;c++)a=s[c],Xt.test(a.type||"")&&!pt._data(a,"globalEval")&&pt.contains(l,a)&&(a.src?pt._evalUrl&&pt._evalUrl(a.src):pt.globalEval((a.text||a.textContent||a.innerHTML||"").replace(re,"")));h=r=null}return t}function _(t,e,i){for(var n,r=e?pt.filter(e,t):t,a=0;null!=(n=r[a]);a++)i||1!==n.nodeType||pt.cleanData(f(n)),n.parentNode&&(i&&pt.contains(n.ownerDocument,n)&&m(f(n,"script")),n.parentNode.removeChild(n));return t}function E(t,e){var i=pt(e.createElement(t)).appendTo(e.body),n=pt.css(i[0],"display");return i.detach(),n}function A(t){var e=nt,i=le[t];return i||(i=E(t,e),"none"!==i&&i||(se=(se||pt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(se[0].contentWindow||se[0].contentDocument).document,e.write(),e.close(),i=E(t,e),se.detach()),le[t]=i),i}function I(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function P(t){if(t in Se)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=we.length;i--;)if((t=we[i]+e)in Se)return t}function F(t,e){for(var i,n,r,a=[],o=0,s=t.length;o<s;o++)n=t[o],n.style&&(a[o]=pt._data(n,"olddisplay"),i=n.style.display,e?(a[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Ot(n)&&(a[o]=pt._data(n,"olddisplay",A(n.nodeName)))):(r=Ot(n),(i&&"none"!==i||!r)&&pt._data(n,"olddisplay",r?i:pt.css(n,"display"))));for(o=0;o<s;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?a[o]||"":"none"));return t}function L(t,e,i){var n=xe.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function H(t,e,i,n,r){for(var a=i===(n?"border":"content")?4:"width"===e?1:0,o=0;a<4;a+=2)"margin"===i&&(o+=pt.css(t,i+Nt[a],!0,r)),n?("content"===i&&(o-=pt.css(t,"padding"+Nt[a],!0,r)),"margin"!==i&&(o-=pt.css(t,"border"+Nt[a]+"Width",!0,r))):(o+=pt.css(t,"padding"+Nt[a],!0,r),"padding"!==i&&(o+=pt.css(t,"border"+Nt[a]+"Width",!0,r)));return o}function N(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,a=pe(t),o=ut.boxSizing&&"border-box"===pt.css(t,"boxSizing",!1,a);if(r<=0||null==r){if(r=fe(t,e,a),(r<0||null==r)&&(r=t.style[e]),ce.test(r))return r;n=o&&(ut.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+H(t,e,i||(o?"border":"content"),n,a)+"px"}function O(t,e,i,n,r){return new O.prototype.init(t,e,i,n,r)}function R(){return t.setTimeout(function(){Te=undefined}),Te=pt.now()}function U(t,e){var i,n={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)i=Nt[r],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function B(t,e,i){for(var n,r=(z.tweeners[e]||[]).concat(z.tweeners["*"]),a=0,o=r.length;a<o;a++)if(n=r[a].call(i,e,t))return n}function X(t,e,i){var n,r,a,o,s,l,h,c=this,u={},d=t.style,p=t.nodeType&&Ot(t),f=pt._data(t,"fxshow");i.queue||(s=pt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,pt.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],h=pt.css(t,"display"),"inline"===("none"===h?pt._data(t,"olddisplay")||A(t.nodeName):h)&&"none"===pt.css(t,"float")&&(ut.inlineBlockNeedsLayout&&"inline"!==A(t.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ut.shrinkWrapBlocks()||c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],Me.exec(r)){if(delete e[n],a=a||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||f[n]===undefined)continue;p=!0}u[n]=f&&f[n]||pt.style(t,n)}else h=undefined;if(pt.isEmptyObject(u))"inline"===("none"===h?A(t.nodeName):h)&&(d.display=h);else{f?"hidden"in f&&(p=f.hidden):f=pt._data(t,"fxshow",{}),a&&(f.hidden=!p),p?pt(t).show():c.done(function(){pt(t).hide()}),c.done(function(){var e;pt._removeData(t,"fxshow");for(e in u)pt.style(t,e,u[e])});for(n in u)o=B(p?f[n]:0,n,c),n in f||(f[n]=o.start,p&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function V(t,e){var i,n,r,a,o;for(i in t)if(n=pt.camelCase(i),r=e[n],a=t[i],pt.isArray(a)&&(r=a[1],a=t[i]=a[0]),i!==n&&(t[n]=a,delete t[i]),(o=pt.cssHooks[n])&&"expand"in o){a=o.expand(a),delete t[n];for(i in a)i in t||(t[i]=a[i],e[i]=r)}else e[n]=r}function z(t,e,i){var n,r,a=0,o=z.prefilters.length,s=pt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Te||R(),i=Math.max(0,h.startTime+h.duration-e),n=i/h.duration||0,a=1-n,o=0,l=h.tweens.length;o<l;o++)h.tweens[o].run(a);return s.notifyWith(t,[h,a,i]),a<1&&l?i:(s.resolveWith(t,[h]),!1)},h=s.promise({elem:t,props:pt.extend({},e),opts:pt.extend(!0,{specialEasing:{},easing:pt.easing._default},i),originalProperties:e,originalOptions:i,startTime:Te||R(),duration:i.duration,tweens:[],createTween:function(e,i){var n=pt.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)h.tweens[i].run(1);return e?(s.notifyWith(t,[h,1,0]),s.resolveWith(t,[h,e])):s.rejectWith(t,[h,e]),this}}),c=h.props;for(V(c,h.opts.specialEasing);a<o;a++)if(n=z.prefilters[a].call(h,t,c,h.opts))return pt.isFunction(n.stop)&&(pt._queueHooks(h.elem,h.opts.queue).stop=pt.proxy(n.stop,n)),n;return pt.map(c,B,h),pt.isFunction(h.opts.start)&&h.opts.start.call(t,h),pt.fx.timer(pt.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function j(t){return pt.attr(t,"class")||""}function W(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,a=e.toLowerCase().match(_t)||[];if(pt.isFunction(i))for(;n=a[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function q(t,e,i,n){function r(s){var l;return a[s]=!0,pt.each(t[s]||[],function(t,s){var h=s(e,i,n);return"string"!=typeof h||o||a[h]?o?!(l=h):void 0:(e.dataTypes.unshift(h),r(h),!1)}),l}var a={},o=t===Ze;return r(e.dataTypes[0])||!a["*"]&&r("*")}function Q(t,e){var i,n,r=pt.ajaxSettings.flatOptions||{};for(n in e)e[n]!==undefined&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&pt.extend(!0,t,i),t}function Y(t,e,i){for(var n,r,a,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),r===undefined&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in i)a=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){a=o;break}n||(n=o)}a=a||n}if(a)return a!==l[0]&&l.unshift(a),i[a]}function $(t,e,i,n){var r,a,o,s,l,h={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(a=c.shift();a;)if(t.responseFields[a]&&(i[t.responseFields[a]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=h[l+" "+a]||h["* "+a]))for(r in h)if(s=r.split(" "),s[1]===a&&(o=h[l+" "+s[0]]||h["* "+s[0]])){!0===o?o=h[r]:!0!==h[r]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}function G(t){return t.style&&t.style.display||pt.css(t,"display")}function Z(t){if(!pt.contains(t.ownerDocument||nt,t))return!0;for(;t&&1===t.nodeType;){if("none"===G(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}function K(t,e,i,n){var r;if(pt.isArray(e))pt.each(e,function(e,r){i||ii.test(t)?n(t,r):K(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)});else if(i||"object"!==pt.type(e))n(t,e);else for(r in e)K(t+"["+r+"]",e[r],i,n)}function J(){try{return new t.XMLHttpRequest}catch(t){}}function tt(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function et(t){return pt.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var it=[],nt=t.document,rt=it.slice,at=it.concat,ot=it.push,st=it.indexOf,lt={},ht=lt.toString,ct=lt.hasOwnProperty,ut={},dt="1.12.4",pt=function(t,e){return new pt.fn.init(t,e)},ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mt=/^-ms-/,gt=/-([\da-z])/gi,vt=function(t,e){return e.toUpperCase()};pt.fn=pt.prototype={jquery:dt,constructor:pt,selector:"",length:0,toArray:function(){return rt.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:rt.call(this)},pushStack:function(t){var e=pt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return pt.each(this,t)},map:function(t){return this.pushStack(pt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(rt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ot,sort:it.sort,splice:it.splice},pt.extend=pt.fn.extend=function(){var t,e,i,n,r,a,o=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[s]||{},s++),"object"==typeof o||pt.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(r=arguments[s]))for(n in r)t=o[n],i=r[n],o!==i&&(h&&i&&(pt.isPlainObject(i)||(e=pt.isArray(i)))?(e?(e=!1,a=t&&pt.isArray(t)?t:[]):a=t&&pt.isPlainObject(t)?t:{},o[n]=pt.extend(h,a,i)):i!==undefined&&(o[n]=i));return o},pt.extend({expando:"jQuery"+(dt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===pt.type(t)},isArray:Array.isArray||function(t){return"array"===pt.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!pt.isArray(t)&&e-parseFloat(e)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==pt.type(t)||t.nodeType||pt.isWindow(t))return!1;try{if(t.constructor&&!ct.call(t,"constructor")&&!ct.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(!ut.ownFirst)for(e in t)return ct.call(t,e);for(e in t);return e===undefined||ct.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?lt[ht.call(t)]||"object":typeof t},globalEval:function(e){e&&pt.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(mt,"ms-").replace(gt,vt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(i(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ft,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?pt.merge(n,"string"==typeof t?[t]:t):ot.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(st)return st.call(e,t,i);for(n=e.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;)t[r++]=e[n++];if(i!==i)for(;e[n]!==undefined;)t[r++]=e[n++];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,a=t.length,o=!i;r<a;r++)!e(t[r],r)!==o&&n.push(t[r]);return n},map:function(t,e,n){var r,a,o=0,s=[];if(i(t))for(r=t.length;o<r;o++)null!=(a=e(t[o],o,n))&&s.push(a);else for(o in t)null!=(a=e(t[o],o,n))&&s.push(a);return at.apply([],s)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(r=t[e],e=t,t=r),pt.isFunction(t)?(i=rt.call(arguments,2),n=function(){return t.apply(e||this,i.concat(rt.call(arguments)))},n.guid=t.guid=t.guid||pt.guid++,n):undefined},now:function(){return+new Date},support:ut}),"function"==typeof Symbol&&(pt.fn[Symbol.iterator]=it[Symbol.iterator]),pt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){lt["[object "+e+"]"]=e.toLowerCase()});var yt=/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){function e(t,e,i,n){var r,a,o,s,l,h,u,p,f=e&&e.ownerDocument,m=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==m&&9!==m&&11!==m)return i;if(!n&&((e?e.ownerDocument||e:B)!==P&&I(e),e=e||P,L)){if(11!==m&&(h=vt.exec(t)))if(r=h[1]){if(9===m){if(!(o=e.getElementById(r)))return i;if(o.id===r)return i.push(o),i}else if(f&&(o=f.getElementById(r))&&R(e,o)&&o.id===r)return i.push(o),i}else{if(h[2])return K.apply(i,e.getElementsByTagName(t)),i;if((r=h[3])&&C.getElementsByClassName&&e.getElementsByClassName)return K.apply(i,e.getElementsByClassName(r)),i}if(C.qsa&&!W[t+" "]&&(!H||!H.test(t))){if(1!==m)f=e,p=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(xt,"\\$&"):e.setAttribute("id",s=U),u=D(t),a=u.length,l=dt.test(s)?"#"+s:"[id='"+s+"']";a--;)u[a]=l+" "+d(u[a]);p=u.join(","),f=yt.test(t)&&c(e.parentNode)||e}if(p)try{return K.apply(i,f.querySelectorAll(p)),i}catch(t){}finally{s===U&&e.removeAttribute("id")}}}return k(t.replace(st,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>w.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[U]=!0,t}function r(t){var e=P.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e){for(var i=t.split("|"),n=i.length;n--;)w.attrHandle[i[n]]=e}function o(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Q)-(~t.sourceIndex||Q);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function s(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function h(t){return n(function(e){return e=+e,n(function(i,n){for(var r,a=t([],i.length,e),o=a.length;o--;)i[r=a[o]]&&(i[r]=!(n[r]=i[r]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function d(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,r=i&&"parentNode"===n,a=V++;return e.first?function(e,i,a){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,a)}:function(e,i,o){var s,l,h,c=[X,a];if(o){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(h=e[U]||(e[U]={}),l=h[e.uniqueID]||(h[e.uniqueID]={}),(s=l[n])&&s[0]===X&&s[1]===a)return c[2]=s[2];if(l[n]=c,c[2]=t(e,i,o))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var r=0,a=i.length;r<a;r++)e(t,i[r],n);return n}function g(t,e,i,n,r){for(var a,o=[],s=0,l=t.length,h=null!=e;s<l;s++)(a=t[s])&&(i&&!i(a,n,r)||(o.push(a),h&&e.push(s)));return o}function v(t,e,i,r,a,o){return r&&!r[U]&&(r=v(r)),a&&!a[U]&&(a=v(a,o)),n(function(n,o,s,l){var h,c,u,d=[],p=[],f=o.length,v=n||m(e||"*",s.nodeType?[s]:s,[]),y=!t||!n&&e?v:g(v,d,t,s,l),x=i?a||(n?t:f||r)?[]:o:y;if(i&&i(y,x,s,l),r)for(h=g(x,p),r(h,[],s,l),c=h.length;c--;)(u=h[c])&&(x[p[c]]=!(y[p[c]]=u));if(n){if(a||t){if(a){for(h=[],c=x.length;c--;)(u=x[c])&&h.push(y[c]=u);a(null,x=[],h,l)}for(c=x.length;c--;)(u=x[c])&&(h=a?tt(n,u):d[c])>-1&&(n[h]=!(o[h]=u))}}else x=g(x===o?x.splice(f,x.length):x),a?a(null,o,x,l):K.apply(o,x)})}function y(t){for(var e,i,n,r=t.length,a=w.relative[t[0].type],o=a||w.relative[" "],s=a?1:0,l=p(function(t){return t===e},o,!0),h=p(function(t){return tt(e,t)>-1},o,!0),c=[function(t,i,n){var r=!a&&(n||i!==_)||((e=i).nodeType?l(t,i,n):h(t,i,n));return e=null,r}];s<r;s++)if(i=w.relative[t[s].type])c=[p(f(c),i)];else{if(i=w.filter[t[s].type].apply(null,t[s].matches),i[U]){for(n=++s;n<r&&!w.relative[t[n].type];n++);return v(s>1&&f(c),s>1&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),i,s<n&&y(t.slice(s,n)),n<r&&y(t=t.slice(n)),n<r&&d(t))}c.push(i)}return f(c)}function x(t,i){var r=i.length>0,a=t.length>0,o=function(n,o,s,l,h){var c,u,d,p=0,f="0",m=n&&[],v=[],y=_,x=n||a&&w.find.TAG("*",h),b=X+=null==y?1:Math.random()||.1,C=x.length;for(h&&(_=o===P||o||h);f!==C&&null!=(c=x[f]);f++){if(a&&c){for(u=0,o||c.ownerDocument===P||(I(c),s=!L);d=t[u++];)if(d(c,o||P,s)){l.push(c);break}h&&(X=b)}r&&((c=!d&&c)&&p--,n&&m.push(c))}if(p+=f,r&&f!==p){for(u=0;d=i[u++];)d(m,v,o,s);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=G.call(l));v=g(v)}K.apply(l,v),h&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return h&&(X=b,_=y),m};return r?n(o):o}var b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U="sizzle"+1*new Date,B=t.document,X=0,V=0,z=i(),j=i(),W=i(),q=function(t,e){return t===e&&(A=!0),0},Q=1<<31,Y={}.hasOwnProperty,$=[],G=$.pop,Z=$.push,K=$.push,J=$.slice,tt=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+it+"*\\]",at=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",ot=new RegExp(it+"+","g"),st=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ht=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ut=new RegExp(at),dt=new RegExp("^"+nt+"$"),pt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,xt=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Ct=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},wt=function(){I()};try{K.apply($=J.call(B.childNodes),B.childNodes),$[B.childNodes.length].nodeType}catch(t){K={apply:$.length?function(t,e){Z.apply(t,J.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}C=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},I=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:B;return n!==P&&9===n.nodeType&&n.documentElement?(P=n,F=P.documentElement,L=!T(P),(i=P.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",wt,!1):i.attachEvent&&i.attachEvent("onunload",wt)),C.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),C.getElementsByTagName=r(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),C.getElementsByClassName=gt.test(P.getElementsByClassName),C.getById=r(function(t){return F.appendChild(t).id=U,!P.getElementsByName||!P.getElementsByName(U).length}),C.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&L){var i=e.getElementById(t);return i?[i]:[]}},w.filter.ID=function(t){var e=t.replace(bt,Ct);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(bt,Ct);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),w.find.TAG=C.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):C.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,a=e.getElementsByTagName(t);if("*"===t){for(;i=a[r++];)1===i.nodeType&&n.push(i);return n}return a},w.find.CLASS=C.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&L)return e.getElementsByClassName(t)},N=[],H=[],(C.qsa=gt.test(P.querySelectorAll))&&(r(function(t){F.appendChild(t).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&H.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||H.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+U+"-]").length||H.push("~="),t.querySelectorAll(":checked").length||H.push(":checked"),t.querySelectorAll("a#"+U+"+*").length||H.push(".#.+[+~]")}),r(function(t){var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&H.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),H.push(",.*:")})),(C.matchesSelector=gt.test(O=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&r(function(t){C.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),N.push("!=",at)}),H=H.length&&new RegExp(H.join("|")),N=N.length&&new RegExp(N.join("|")),e=gt.test(F.compareDocumentPosition),R=e||gt.test(F.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return A=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!C.sortDetached&&e.compareDocumentPosition(t)===i?t===P||t.ownerDocument===B&&R(B,t)?-1:e===P||e.ownerDocument===B&&R(B,e)?1:E?tt(E,t)-tt(E,e):0:4&i?-1:1)}:function(t,e){if(t===e)return A=!0,0;var i,n=0,r=t.parentNode,a=e.parentNode,s=[t],l=[e];if(!r||!a)return t===P?-1:e===P?1:r?-1:a?1:E?tt(E,t)-tt(E,e):0;if(r===a)return o(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;s[n]===l[n];)n++;return n?o(s[n],l[n]):s[n]===B?-1:l[n]===B?1:0},P):P},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==P&&I(t),i=i.replace(ct,"='$1']"),C.matchesSelector&&L&&!W[i+" "]&&(!N||!N.test(i))&&(!H||!H.test(i)))try{var n=O.call(t,i);if(n||C.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&I(t),R(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&I(t);var i=w.attrHandle[e.toLowerCase()],n=i&&Y.call(w.attrHandle,e.toLowerCase())?i(t,e,!L):undefined;return n!==undefined?n:C.attributes||!L?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(A=!C.detectDuplicates,E=!C.sortStable&&t.slice(0),t.sort(q),A){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return E=null,t},S=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=S(e);return i},w=e.selectors={cacheLength:50,createPseudo:n,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,Ct),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,Ct),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ut.test(i)&&(e=D(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,Ct).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var a=e.attr(r,t);return null==a?"!="===i:!i||(a+="","="===i?a===n:"!="===i?a!==n:"^="===i?n&&0===a.indexOf(n):"*="===i?n&&a.indexOf(n)>-1:"$="===i?n&&a.slice(-n.length)===n:"~="===i?(" "+a.replace(ot," ")+" ").indexOf(n)>-1:"|="===i&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,r){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,d,p,f,m=a!==o?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,x=!1;if(g){if(a){for(;m;){for(d=e;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(d=g,u=d[U]||(d[U]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),h=c[t]||[],p=h[0]===X&&h[1],x=p&&h[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(x=p=0)||f.pop();)if(1===d.nodeType&&++x&&d===e){c[t]=[X,p,x];break}}else if(y&&(d=e,u=d[U]||(d[U]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),h=c[t]||[],p=h[0]===X&&h[1],x=p),!1===x)for(;(d=++p&&d&&d[m]||(x=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++x||(y&&(u=d[U]||(d[U]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),c[t]=[X,x]),d!==e)););return(x-=r)===n||x%n==0&&x/n>=0}}},PSEUDO:function(t,i){var r,a=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return a[U]?a(i):a.length>1?(r=[t,t,"",i],w.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=a(t,i),o=r.length;o--;)n=tt(t,r[o]),t[n]=!(e[n]=r[o])}):function(t){return a(t,0,r)}):a}},pseudos:{not:n(function(t){var e=[],i=[],r=M(t.replace(st,"$1"));return r[U]?n(function(t,e,i,n){for(var a,o=r(t,null,n,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))}):function(t,n,a){return e[0]=t,r(e,null,a,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(bt,Ct),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:n(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,Ct).toLowerCase(),function(e){var i;do{if(i=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===F},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,i){return[i<0?i+e:i]}),even:h(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:h(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:h(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:h(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=l(b);return u.prototype=w.filters=w.pseudos,w.setFilters=new u,D=e.tokenize=function(t,i){var n,r,a,o,s,l,h,c=j[t+" "];if(c)return i?0:c.slice(0);for(s=t,l=[],h=w.preFilter;s;){n&&!(r=lt.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),n=!1,(r=ht.exec(s))&&(n=r.shift(),a.push({value:n,type:r[0].replace(st," ")}),s=s.slice(n.length));for(o in w.filter)!(r=pt[o].exec(s))||h[o]&&!(r=h[o](r))||(n=r.shift(),a.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return i?s.length:s?e.error(t):j(t,l).slice(0)},M=e.compile=function(t,e){var i,n=[],r=[],a=W[t+" "];if(!a){for(e||(e=D(t)),i=e.length;i--;)a=y(e[i]),a[U]?n.push(a):r.push(a);a=W(t,x(r,n)),a.selector=t}return a},k=e.select=function(t,e,i,n){var r,a,o,s,l,h="function"==typeof t&&t,u=!n&&D(t=h.selector||t);if(i=i||[],1===u.length){if(a=u[0]=u[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&C.getById&&9===e.nodeType&&L&&w.relative[a[1].type]){if(!(e=(w.find.ID(o.matches[0].replace(bt,Ct),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(r=pt.needsContext.test(t)?0:a.length;r--&&(o=a[r],!w.relative[s=o.type]);)if((l=w.find[s])&&(n=l(o.matches[0].replace(bt,Ct),yt.test(a[0].type)&&c(e.parentNode)||e))){if(a.splice(r,1),!(t=n.length&&d(a)))return K.apply(i,n),i;break}}return(h||M(t,u))(n,e,!L,i,!e||yt.test(t)&&c(e.parentNode)||e),i},C.sortStable=U.split("").sort(q).join("")===U,C.detectDuplicates=!!A,I(),C.sortDetached=r(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||a("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),C.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||a("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||a(et,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);pt.find=yt,pt.expr=yt.selectors,pt.expr[":"]=pt.expr.pseudos,pt.uniqueSort=pt.unique=yt.uniqueSort,pt.text=yt.getText,pt.isXMLDoc=yt.isXML,pt.contains=yt.contains;var xt=function(t,e,i){for(var n=[],r=i!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&pt(t).is(i))break;n.push(t)}return n},bt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},Ct=pt.expr.match.needsContext,wt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,St=/^.[^:#\[\.,]*$/;pt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?pt.find.matchesSelector(n,t)?[n]:[]:pt.find.matches(t,pt.grep(e,function(t){return 1===t.nodeType}))},pt.fn.extend({find:function(t){var e,i=[],n=this,r=n.length;if("string"!=typeof t)return this.pushStack(pt(t).filter(function(){for(e=0;e<r;e++)if(pt.contains(n[e],this))return!0}));for(e=0;e<r;e++)pt.find(t,n[e],i);return i=this.pushStack(r>1?pt.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&Ct.test(t)?pt(t):t||[],!1).length}});var Tt,Dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(pt.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||Tt,"string"==typeof t){if(!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:Dt.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof pt?e[0]:e,pt.merge(this,pt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:nt,!0)),wt.test(n[1])&&pt.isPlainObject(e))for(n in e)pt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if((r=nt.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return Tt.find(t);this.length=1,this[0]=r}return this.context=nt,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):pt.isFunction(t)?"undefined"!=typeof i.ready?i.ready(t):t(pt):(t.selector!==undefined&&(this.selector=t.selector,this.context=t.context),pt.makeArray(t,this))}).prototype=pt.fn,Tt=pt(nt);var Mt=/^(?:parents|prev(?:Until|All))/,kt={children:!0,contents:!0,next:!0,prev:!0};pt.fn.extend({has:function(t){var e,i=pt(t,this),n=i.length;return this.filter(function(){for(e=0;e<n;e++)if(pt.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,a=[],o=Ct.test(t)||"string"!=typeof t?pt(t,e||this.context):0;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&pt.find.matchesSelector(i,t))){a.push(i);break}return this.pushStack(a.length>1?pt.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?pt.inArray(this[0],pt(t)):pt.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(pt.uniqueSort(pt.merge(this.get(),pt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),pt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return xt(t,"parentNode")},parentsUntil:function(t,e,i){return xt(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return xt(t,"nextSibling")},prevAll:function(t){return xt(t,"previousSibling")},nextUntil:function(t,e,i){return xt(t,"nextSibling",i)},prevUntil:function(t,e,i){return xt(t,"previousSibling",i)},siblings:function(t){return bt((t.parentNode||{}).firstChild,t)},children:function(t){return bt(t.firstChild)},contents:function(t){return pt.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:pt.merge([],t.childNodes)}},function(t,e){pt.fn[t]=function(i,n){var r=pt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=pt.filter(n,r)),this.length>1&&(kt[t]||(r=pt.uniqueSort(r)),Mt.test(t)&&(r=r.reverse())),this.pushStack(r)}});var _t=/\S+/g;pt.Callbacks=function(t){t="string"==typeof t?a(t):pt.extend({},t);var e,i,n,r,o=[],s=[],l=-1,h=function(){for(r=t.once,n=e=!0;s.length;l=-1)for(i=s.shift();++l<o.length;)!1===o[l].apply(i[0],i[1])&&t.stopOnFalse&&(l=o.length,i=!1);t.memory||(i=!1),e=!1,r&&(o=i?[]:"")},c={add:function(){return o&&(i&&!e&&(l=o.length-1,s.push(i)),function e(i){pt.each(i,function(i,n){pt.isFunction(n)?t.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==pt.type(n)&&e(n)})}(arguments),i&&!e&&h()),this},remove:function(){return pt.each(arguments,function(t,e){for(var i;(i=pt.inArray(e,o,i))>-1;)o.splice(i,1),i<=l&&l--}),this},has:function(t){return t?pt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=!0,i||c.disable(),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=i||[],i=[t,i.slice?i.slice():i],s.push(i),e||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},pt.extend({Deferred:function(t){var e=[["resolve","done",pt.Callbacks("once memory"),"resolved"],["reject","fail",pt.Callbacks("once memory"),"rejected"],["notify","progress",pt.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return pt.Deferred(function(i){pt.each(e,function(e,a){var o=pt.isFunction(t[e])&&t[e];r[a[1]](function(){var t=o&&o.apply(this,arguments);t&&pt.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[a[0]+"With"](this===n?i.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?pt.extend(t,n):n}},r={};return n.pipe=n.then,pt.each(e,function(t,a){var o=a[2],s=a[3];n[a[1]]=o.add,s&&o.add(function(){i=s},e[1^t][2].disable,e[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?n:this,arguments),this},r[a[0]+"With"]=o.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,a=rt.call(arguments),o=a.length,s=1!==o||t&&pt.isFunction(t.promise)?o:0,l=1===s?t:pt.Deferred(),h=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?rt.call(arguments):r,n===e?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(o>1)for(e=new Array(o),i=new Array(o),n=new Array(o);r<o;r++)a[r]&&pt.isFunction(a[r].promise)?a[r].promise().progress(h(r,i,e)).done(h(r,n,a)).fail(l.reject):--s;return s||l.resolveWith(n,a),l.promise()}});var Et;pt.fn.ready=function(t){return pt.ready.promise().done(t),this},pt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?pt.readyWait++:pt.ready(!0)},ready:function(t){(!0===t?--pt.readyWait:pt.isReady)||(pt.isReady=!0,!0!==t&&--pt.readyWait>0||(Et.resolveWith(nt,[pt]),pt.fn.triggerHandler&&(pt(nt).triggerHandler("ready"),pt(nt).off("ready"))))}}),pt.ready.promise=function(e){if(!Et)if(Et=pt.Deferred(),"complete"===nt.readyState||"loading"!==nt.readyState&&!nt.documentElement.doScroll)t.setTimeout(pt.ready);else if(nt.addEventListener)nt.addEventListener("DOMContentLoaded",s),t.addEventListener("load",s);else{nt.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var i=!1;try{i=null==t.frameElement&&nt.documentElement}catch(t){}i&&i.doScroll&&function e(){if(!pt.isReady){try{i.doScroll("left")}catch(i){return t.setTimeout(e,50)}o(),pt.ready()}}()}return Et.promise(e)},pt.ready.promise();var At;for(At in pt(ut))break;ut.ownFirst="0"===At,ut.inlineBlockNeedsLayout=!1,pt(function(){var t,e,i,n;(i=nt.getElementsByTagName("body")[0])&&i.style&&(e=nt.createElement("div"),n=nt.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),"undefined"!=typeof e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ut.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=nt.createElement("div");ut.deleteExpando=!0;try{delete t.test}catch(t){ut.deleteExpando=!1}t=null}();var It=function(t){var e=pt.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||!0!==e&&t.getAttribute("classid")===e)},Pt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ft=/([A-Z])/g;pt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?pt.cache[t[pt.expando]]:t[pt.expando])&&!h(t)},data:function(t,e,i){return c(t,e,i)},removeData:function(t,e){return u(t,e)},_data:function(t,e,i){return c(t,e,i,!0)},_removeData:function(t,e){return u(t,e,!0)}}),pt.fn.extend({data:function(t,e){var i,n,r,a=this[0],o=a&&a.attributes;if(t===undefined){if(this.length&&(r=pt.data(a),1===a.nodeType&&!pt._data(a,"parsedAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=pt.camelCase(n.slice(5)),l(a,n,r[n])));pt._data(a,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){pt.data(this,t)}):arguments.length>1?this.each(function(){pt.data(this,t,e)}):a?l(a,t,pt.data(a,t)):undefined},removeData:function(t){return this.each(function(){pt.removeData(this,t)})}}),pt.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=pt._data(t,e),i&&(!n||pt.isArray(i)?n=pt._data(t,e,pt.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=pt.queue(t,e),n=i.length,r=i.shift(),a=pt._queueHooks(t,e),o=function(){pt.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete a.stop,r.call(t,o,a)),!n&&a&&a.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return pt._data(t,i)||pt._data(t,i,{empty:pt.Callbacks("once memory").add(function(){pt._removeData(t,e+"queue"),pt._removeData(t,i)})})}}),pt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?pt.queue(this[0],t):e===undefined?this:this.each(function(){var i=pt.queue(this,t,e);pt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&pt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){pt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=pt.Deferred(),a=this,o=this.length,s=function(){--n||r.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";o--;)(i=pt._data(a[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(e)}}),function(){var t;ut.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return(i=nt.getElementsByTagName("body")[0])&&i.style?(e=nt.createElement("div"),n=nt.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),"undefined"!=typeof e.style.zoom&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(nt.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var Lt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ht=new RegExp("^(?:([+-])=|)("+Lt+")([a-z%]*)$","i"),Nt=["Top","Right","Bottom","Left"],Ot=function(t,e){return t=e||t,"none"===pt.css(t,"display")||!pt.contains(t.ownerDocument,t)},Rt=function(t,e,i,n,r,a,o){var s=0,l=t.length,h=null==i;if("object"===pt.type(i)){r=!0;for(s in i)Rt(t,e,s,i[s],!0,a,o)}else if(n!==undefined&&(r=!0,pt.isFunction(n)||(o=!0),h&&(o?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(pt(t),i)})),e))for(;s<l;s++)e(t[s],i,o?n:n.call(t[s],s,e(t[s],i)));return r?t:h?e.call(t):l?e(t[0],i):a},Ut=/^(?:checkbox|radio)$/i,Bt=/<([\w:-]+)/,Xt=/^$|\/(?:java|ecma)script/i,Vt=/^\s+/,zt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var t=nt.createElement("div"),e=nt.createDocumentFragment(),i=nt.createElement("input");t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ut.leadingWhitespace=3===t.firstChild.nodeType,ut.tbody=!t.getElementsByTagName("tbody").length,ut.htmlSerialize=!!t.getElementsByTagName("link").length,ut.html5Clone="<:nav></:nav>"!==nt.createElement("nav").cloneNode(!0).outerHTML,i.type="checkbox",i.checked=!0,e.appendChild(i),ut.appendChecked=i.checked,t.innerHTML="<textarea>x</textarea>",ut.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),i=nt.createElement("input"),i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),ut.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ut.noCloneEvent=!!t.addEventListener,t[pt.expando]=1,ut.attributes=!t.getAttribute(pt.expando)}();var jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ut.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};jt.optgroup=jt.option,jt.tbody=jt.tfoot=jt.colgroup=jt.caption=jt.thead,jt.th=jt.td;var Wt=/<|&#?\w+;/,qt=/<tbody/i;!function(){var e,i,n=nt.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(ut[e]=i in t)||(n.setAttribute(i,"t"),ut[e]=!1===n.attributes[i].expando);n=null}();var Qt=/^(?:input|select|textarea)$/i,Yt=/^key/,$t=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Gt=/^(?:focusinfocus|focusoutblur)$/,Zt=/^([^.]*)(?:\.(.+)|)/;pt.event={global:{},add:function(t,e,i,n,r){var a,o,s,l,h,c,u,d,p,f,m,g=pt._data(t);if(g){for(i.handler&&(l=i,i=l.handler,r=l.selector),i.guid||(i.guid=pt.guid++),(o=g.events)||(o=g.events={}),(c=g.handle)||(c=g.handle=function(t){return void 0===pt||t&&pt.event.triggered===t.type?undefined:pt.event.dispatch.apply(c.elem,arguments)},c.elem=t),e=(e||"").match(_t)||[""],s=e.length;s--;)a=Zt.exec(e[s])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(h=pt.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=pt.event.special[p]||{},u=pt.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,
needsContext:r&&pt.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=o[p])||(d=o[p]=[],d.delegateCount=0,h.setup&&!1!==h.setup.call(t,n,f,c)||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),pt.event.global[p]=!0);t=null}},remove:function(t,e,i,n,r){var a,o,s,l,h,c,u,d,p,f,m,g=pt.hasData(t)&&pt._data(t);if(g&&(c=g.events)){for(e=(e||"").match(_t)||[""],h=e.length;h--;)if(s=Zt.exec(e[h])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(u=pt.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=d.length;a--;)o=d[a],!r&&m!==o.origType||i&&i.guid!==o.guid||s&&!s.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector)||(d.splice(a,1),o.selector&&d.delegateCount--,u.remove&&u.remove.call(t,o));l&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||pt.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)pt.event.remove(t,p+e[h],i,n,!0);pt.isEmptyObject(c)&&(delete g.handle,pt._removeData(t,"events"))}},trigger:function(e,i,n,r){var a,o,s,l,h,c,u,d=[n||nt],p=ct.call(e,"type")?e.type:e,f=ct.call(e,"namespace")?e.namespace.split("."):[];if(s=c=n=n||nt,3!==n.nodeType&&8!==n.nodeType&&!Gt.test(p+pt.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),o=p.indexOf(":")<0&&"on"+p,e=e[pt.expando]?e:new pt.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),i=null==i?[e]:pt.makeArray(i,[e]),h=pt.event.special[p]||{},r||!h.trigger||!1!==h.trigger.apply(n,i))){if(!r&&!h.noBubble&&!pt.isWindow(n)){for(l=h.delegateType||p,Gt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),c=s;c===(n.ownerDocument||nt)&&d.push(c.defaultView||c.parentWindow||t)}for(u=0;(s=d[u++])&&!e.isPropagationStopped();)e.type=u>1?l:h.bindType||p,a=(pt._data(s,"events")||{})[e.type]&&pt._data(s,"handle"),a&&a.apply(s,i),(a=o&&s[o])&&a.apply&&It(s)&&(e.result=a.apply(s,i),!1===e.result&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!h._default||!1===h._default.apply(d.pop(),i))&&It(n)&&o&&n[p]&&!pt.isWindow(n)){c=n[o],c&&(n[o]=null),pt.event.triggered=p;try{n[p]()}catch(t){}pt.event.triggered=undefined,c&&(n[o]=c)}return e.result}},dispatch:function(t){t=pt.event.fix(t);var e,i,n,r,a,o=[],s=rt.call(arguments),l=(pt._data(this,"events")||{})[t.type]||[],h=pt.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,t)){for(o=pt.event.handlers.call(this,t,l),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,(n=((pt.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,s))!==undefined&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,a,o=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(n=[],i=0;i<s;i++)a=e[i],r=a.selector+" ",n[r]===undefined&&(n[r]=a.needsContext?pt(r,this).index(l)>-1:pt.find(r,this,null,[l]).length),n[r]&&n.push(a);n.length&&o.push({elem:l,handlers:n})}return s<e.length&&o.push({elem:this,handlers:e.slice(s)}),o},fix:function(t){if(t[pt.expando])return t;var e,i,n,r=t.type,a=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=$t.test(r)?this.mouseHooks:Yt.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new pt.Event(a),e=n.length;e--;)i=n[e],t[i]=a[i];return t.target||(t.target=a.srcElement||nt),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,a):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,a=e.button,o=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||nt,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&o&&(t.relatedTarget=o===t.target?e.toElement:o),t.which||a===undefined||(t.which=1&a?1:2&a?3:4&a?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===b()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(pt.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return pt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i){var n=pt.extend(new pt.Event,i,{type:t,isSimulated:!0});pt.event.trigger(n,null,e),n.isDefaultPrevented()&&i.preventDefault()}},pt.removeEvent=nt.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)}:function(t,e,i){var n="on"+e;t.detachEvent&&("undefined"==typeof t[n]&&(t[n]=null),t.detachEvent(n,i))},pt.Event=function(t,e){if(!(this instanceof pt.Event))return new pt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?y:x):this.type=t,e&&pt.extend(this,e),this.timeStamp=t&&t.timeStamp||pt.now(),this[pt.expando]=!0},pt.Event.prototype={constructor:pt.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=y,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=y,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=y,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},pt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){pt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,a=t.handleObj;return r&&(r===n||pt.contains(n,r))||(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=e),i}}}),ut.submit||(pt.event.special.submit={setup:function(){if(pt.nodeName(this,"form"))return!1;pt.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=pt.nodeName(e,"input")||pt.nodeName(e,"button")?pt.prop(e,"form"):undefined;i&&!pt._data(i,"submit")&&(pt.event.add(i,"submit._submit",function(t){t._submitBubble=!0}),pt._data(i,"submit",!0))})},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&pt.event.simulate("submit",this.parentNode,t))},teardown:function(){if(pt.nodeName(this,"form"))return!1;pt.event.remove(this,"._submit")}}),ut.change||(pt.event.special.change={setup:function(){if(Qt.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(pt.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)}),pt.event.add(this,"click._change",function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),pt.event.simulate("change",this,t)})),!1;pt.event.add(this,"beforeactivate._change",function(t){var e=t.target;Qt.test(e.nodeName)&&!pt._data(e,"change")&&(pt.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||pt.event.simulate("change",this.parentNode,t)}),pt._data(e,"change",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return pt.event.remove(this,"._change"),!Qt.test(this.nodeName)}}),ut.focusin||pt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){pt.event.simulate(e,t.target,pt.event.fix(t))};pt.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=pt._data(n,e);r||n.addEventListener(t,i,!0),pt._data(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=pt._data(n,e)-1;r?pt._data(n,e,r):(n.removeEventListener(t,i,!0),pt._removeData(n,e))}}}),pt.fn.extend({on:function(t,e,i,n){return C(this,t,e,i,n)},one:function(t,e,i,n){return C(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,pt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=undefined),!1===i&&(i=x),this.each(function(){pt.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){pt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return pt.event.trigger(t,e,i,!0)}});var Kt=/ jQuery\d+="(?:null|\d+)"/g,Jt=new RegExp("<(?:"+zt+")[\\s/>]","i"),te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ee=/<script|<style|<link/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^true\/(.*)/,re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ae=p(nt),oe=ae.appendChild(nt.createElement("div"));pt.extend({htmlPrefilter:function(t){return t.replace(te,"<$1></$2>")},clone:function(t,e,i){var n,r,a,o,s,l=pt.contains(t.ownerDocument,t);if(ut.html5Clone||pt.isXMLDoc(t)||!Jt.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(oe.innerHTML=t.outerHTML,oe.removeChild(a=oe.firstChild)),!(ut.noCloneEvent&&ut.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||pt.isXMLDoc(t)))for(n=f(a),s=f(t),o=0;null!=(r=s[o]);++o)n[o]&&M(r,n[o]);if(e)if(i)for(s=s||f(t),n=n||f(a),o=0;null!=(r=s[o]);o++)D(r,n[o]);else D(t,a);return n=f(a,"script"),n.length>0&&m(n,!l&&f(t,"script")),n=s=r=null,a},cleanData:function(t,e){for(var i,n,r,a,o=0,s=pt.expando,l=pt.cache,h=ut.attributes,c=pt.event.special;null!=(i=t[o]);o++)if((e||It(i))&&(r=i[s],a=r&&l[r])){if(a.events)for(n in a.events)c[n]?pt.event.remove(i,n):pt.removeEvent(i,n,a.handle);l[r]&&(delete l[r],h||"undefined"==typeof i.removeAttribute?i[s]=undefined:i.removeAttribute(s),it.push(r))}}}),pt.fn.extend({domManip:k,detach:function(t){return _(this,t,!0)},remove:function(t){return _(this,t)},text:function(t){return Rt(this,function(t){return t===undefined?pt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||nt).createTextNode(t))},null,t,arguments.length)},append:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){w(this,t).appendChild(t)}})},prepend:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=w(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&pt.cleanData(f(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&pt.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return pt.clone(this,t,e)})},html:function(t){return Rt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(t===undefined)return 1===e.nodeType?e.innerHTML.replace(Kt,""):undefined;if("string"==typeof t&&!ee.test(t)&&(ut.htmlSerialize||!Jt.test(t))&&(ut.leadingWhitespace||!Vt.test(t))&&!jt[(Bt.exec(t)||["",""])[1].toLowerCase()]){t=pt.htmlPrefilter(t);try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(pt.cleanData(f(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return k(this,arguments,function(e){var i=this.parentNode;pt.inArray(this,t)<0&&(pt.cleanData(f(this)),i&&i.replaceChild(e,this))},t)}}),pt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){pt.fn[t]=function(t){for(var i,n=0,r=[],a=pt(t),o=a.length-1;n<=o;n++)i=n===o?this:this.clone(!0),pt(a[n])[e](i),ot.apply(r,i.get());return this.pushStack(r)}});var se,le={HTML:"block",BODY:"block"},he=/^margin/,ce=new RegExp("^("+Lt+")(?!px)[a-z%]+$","i"),ue=function(t,e,i,n){var r,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];r=i.apply(t,n||[]);for(a in e)t.style[a]=o[a];return r},de=nt.documentElement;!function(){function e(){var e,c,u=nt.documentElement;u.appendChild(l),h.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i=r=s=!1,n=o=!0,t.getComputedStyle&&(c=t.getComputedStyle(h),i="1%"!==(c||{}).top,s="2px"===(c||{}).marginLeft,r="4px"===(c||{width:"4px"}).width,h.style.marginRight="50%",n="4px"===(c||{marginRight:"4px"}).marginRight,e=h.appendChild(nt.createElement("div")),e.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",h.style.width="1px",o=!parseFloat((t.getComputedStyle(e)||{}).marginRight),h.removeChild(e)),h.style.display="none",a=0===h.getClientRects().length,a&&(h.style.display="",h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",h.childNodes[0].style.borderCollapse="separate",e=h.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",a=0===e[0].offsetHeight)),u.removeChild(l)}var i,n,r,a,o,s,l=nt.createElement("div"),h=nt.createElement("div");h.style&&(h.style.cssText="float:left;opacity:.5",ut.opacity="0.5"===h.style.opacity,ut.cssFloat=!!h.style.cssFloat,h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ut.clearCloneStyle="content-box"===h.style.backgroundClip,l=nt.createElement("div"),l.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.innerHTML="",l.appendChild(h),ut.boxSizing=""===h.style.boxSizing||""===h.style.MozBoxSizing||""===h.style.WebkitBoxSizing,pt.extend(ut,{reliableHiddenOffsets:function(){return null==i&&e(),a},boxSizingReliable:function(){return null==i&&e(),r},pixelMarginRight:function(){return null==i&&e(),n},pixelPosition:function(){return null==i&&e(),i},reliableMarginRight:function(){return null==i&&e(),o},reliableMarginLeft:function(){return null==i&&e(),s}}))}();var pe,fe,me=/^(top|right|bottom|left)$/;t.getComputedStyle?(pe=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},fe=function(t,e,i){var n,r,a,o,s=t.style;return i=i||pe(t),o=i?i.getPropertyValue(e)||i[e]:undefined,""!==o&&o!==undefined||pt.contains(t.ownerDocument,t)||(o=pt.style(t,e)),i&&!ut.pixelMarginRight()&&ce.test(o)&&he.test(e)&&(n=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=i.width,s.width=n,s.minWidth=r,s.maxWidth=a),o===undefined?o:o+""}):de.currentStyle&&(pe=function(t){return t.currentStyle},fe=function(t,e,i){var n,r,a,o,s=t.style;return i=i||pe(t),o=i?i[e]:undefined,null==o&&s&&s[e]&&(o=s[e]),ce.test(o)&&!me.test(e)&&(n=s.left,r=t.runtimeStyle,a=r&&r.left,a&&(r.left=t.currentStyle.left),s.left="fontSize"===e?"1em":o,o=s.pixelLeft+"px",s.left=n,a&&(r.left=a)),o===undefined?o:o+""||"auto"});var ge=/alpha\([^)]*\)/i,ve=/opacity\s*=\s*([^)]*)/i,ye=/^(none|table(?!-c[ea]).+)/,xe=new RegExp("^("+Lt+")(.*)$","i"),be={position:"absolute",visibility:"hidden",display:"block"},Ce={letterSpacing:"0",fontWeight:"400"},we=["Webkit","O","Moz","ms"],Se=nt.createElement("div").style;pt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=fe(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ut.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,a,o,s=pt.camelCase(e),l=t.style;if(e=pt.cssProps[s]||(pt.cssProps[s]=P(s)||s),o=pt.cssHooks[e]||pt.cssHooks[s],i===undefined)return o&&"get"in o&&(r=o.get(t,!1,n))!==undefined?r:l[e];if(a=typeof i,"string"===a&&(r=Ht.exec(i))&&r[1]&&(i=d(t,e,r),a="number"),null!=i&&i===i&&("number"===a&&(i+=r&&r[3]||(pt.cssNumber[s]?"":"px")),ut.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(o&&"set"in o&&(i=o.set(t,i,n))===undefined)))try{l[e]=i}catch(t){}}},css:function(t,e,i,n){var r,a,o,s=pt.camelCase(e);return e=pt.cssProps[s]||(pt.cssProps[s]=P(s)||s),o=pt.cssHooks[e]||pt.cssHooks[s],o&&"get"in o&&(a=o.get(t,!0,i)),a===undefined&&(a=fe(t,e,n)),"normal"===a&&e in Ce&&(a=Ce[e]),""===i||i?(r=parseFloat(a),!0===i||isFinite(r)?r||0:a):a}}),pt.each(["height","width"],function(t,e){pt.cssHooks[e]={get:function(t,i,n){if(i)return ye.test(pt.css(t,"display"))&&0===t.offsetWidth?ue(t,be,function(){return N(t,e,n)}):N(t,e,n)},set:function(t,i,n){var r=n&&pe(t);return L(t,i,n?H(t,e,n,ut.boxSizing&&"border-box"===pt.css(t,"boxSizing",!1,r),r):0)}}}),ut.opacity||(pt.cssHooks.opacity={get:function(t,e){return ve.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,r=pt.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===pt.trim(a.replace(ge,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=ge.test(a)?a.replace(ge,r):a+" "+r)}}),pt.cssHooks.marginRight=I(ut.reliableMarginRight,function(t,e){if(e)return ue(t,{display:"inline-block"},fe,[t,"marginRight"])}),pt.cssHooks.marginLeft=I(ut.reliableMarginLeft,function(t,e){if(e)return(parseFloat(fe(t,"marginLeft"))||(pt.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-ue(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}):0))+"px"}),pt.each({margin:"",padding:"",border:"Width"},function(t,e){pt.cssHooks[t+e]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+Nt[n]+e]=a[n]||a[n-2]||a[0];return r}},he.test(t)||(pt.cssHooks[t+e].set=L)}),pt.fn.extend({css:function(t,e){return Rt(this,function(t,e,i){var n,r,a={},o=0;if(pt.isArray(e)){for(n=pe(t),r=e.length;o<r;o++)a[e[o]]=pt.css(t,e[o],!1,n);return a}return i!==undefined?pt.style(t,e,i):pt.css(t,e)},t,e,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ot(this)?pt(this).show():pt(this).hide()})}}),pt.Tween=O,O.prototype={constructor:O,init:function(t,e,i,n,r,a){this.elem=t,this.prop=i,this.easing=r||pt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=a||(pt.cssNumber[i]?"":"px")},cur:function(){var t=O.propHooks[this.prop];return t&&t.get?t.get(this):O.propHooks._default.get(this)},run:function(t){var e,i=O.propHooks[this.prop];return this.options.duration?this.pos=e=pt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=pt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){pt.fx.step[t.prop]?pt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[pt.cssProps[t.prop]]&&!pt.cssHooks[t.prop]?t.elem[t.prop]=t.now:pt.style(t.elem,t.prop,t.now+t.unit)}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},pt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},pt.fx=O.prototype.init,pt.fx.step={};var Te,De,Me=/^(?:toggle|show|hide)$/,ke=/queueHooks$/;pt.Animation=pt.extend(z,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return d(i.elem,t,Ht.exec(e),i),i}]},tweener:function(t,e){pt.isFunction(t)?(e=t,t=["*"]):t=t.match(_t);for(var i,n=0,r=t.length;n<r;n++)i=t[n],z.tweeners[i]=z.tweeners[i]||[],z.tweeners[i].unshift(e)},prefilters:[X],prefilter:function(t,e){e?z.prefilters.unshift(t):z.prefilters.push(t)}}),pt.speed=function(t,e,i){var n=t&&"object"==typeof t?pt.extend({},t):{complete:i||!i&&e||pt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!pt.isFunction(e)&&e};return n.duration=pt.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in pt.fx.speeds?pt.fx.speeds[n.duration]:pt.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){pt.isFunction(n.old)&&n.old.call(this),n.queue&&pt.dequeue(this,n.queue)},n},pt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Ot).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=pt.isEmptyObject(t),a=pt.speed(e,i,n),o=function(){var e=z(this,pt.extend({},t),a);(r||pt._data(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=undefined),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",a=pt.timers,o=pt._data(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&ke.test(r)&&n(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=t&&a[r].queue!==t||(a[r].anim.stop(i),e=!1,a.splice(r,1));!e&&i||pt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=pt._data(this),n=i[t+"queue"],r=i[t+"queueHooks"],a=pt.timers,o=n?n.length:0;for(i.finish=!0,pt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),pt.each(["toggle","show","hide"],function(t,e){var i=pt.fn[e];pt.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(U(e,!0),t,n,r)}}),pt.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){pt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),pt.timers=[],pt.fx.tick=function(){var t,e=pt.timers,i=0;for(Te=pt.now();i<e.length;i++)(t=e[i])()||e[i]!==t||e.splice(i--,1);e.length||pt.fx.stop(),Te=undefined},pt.fx.timer=function(t){pt.timers.push(t),t()?pt.fx.start():pt.timers.pop()},pt.fx.interval=13,pt.fx.start=function(){De||(De=t.setInterval(pt.fx.tick,pt.fx.interval))},pt.fx.stop=function(){t.clearInterval(De),De=null},pt.fx.speeds={slow:600,fast:200,_default:400},pt.fn.delay=function(e,i){return e=pt.fx?pt.fx.speeds[e]||e:e,i=i||"fx",this.queue(i,function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}})},function(){var t,e=nt.createElement("input"),i=nt.createElement("div"),n=nt.createElement("select"),r=n.appendChild(nt.createElement("option"));i=nt.createElement("div"),i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=i.getElementsByTagName("a")[0],e.setAttribute("type","checkbox"),i.appendChild(e),t=i.getElementsByTagName("a")[0],t.style.cssText="top:1px",ut.getSetAttribute="t"!==i.className,ut.style=/top/.test(t.getAttribute("style")),ut.hrefNormalized="/a"===t.getAttribute("href"),ut.checkOn=!!e.value,ut.optSelected=r.selected,ut.enctype=!!nt.createElement("form").enctype,n.disabled=!0,ut.optDisabled=!r.disabled,e=nt.createElement("input"),e.setAttribute("value",""),ut.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ut.radioValue="t"===e.value}();var _e=/\r/g,Ee=/[\x20\t\r\n\f]+/g;pt.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=pt.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,pt(this).val()):t,null==r?r="":"number"==typeof r?r+="":pt.isArray(r)&&(r=pt.map(r,function(t){return null==t?"":t+""})),(e=pt.valHooks[this.type]||pt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&e.set(this,r,"value")!==undefined||(this.value=r))});if(r)return(e=pt.valHooks[r.type]||pt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&(i=e.get(r,"value"))!==undefined?i:(i=r.value,"string"==typeof i?i.replace(_e,""):null==i?"":i)}}}),pt.extend({valHooks:{option:{get:function(t){var e=pt.find.attr(t,"value");return null!=e?e:pt.trim(pt.text(t)).replace(Ee," ")}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,a="select-one"===t.type||r<0,o=a?null:[],s=a?r+1:n.length,l=r<0?s:a?r:0;l<s;l++)if(i=n[l],(i.selected||l===r)&&(ut.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!pt.nodeName(i.parentNode,"optgroup"))){if(e=pt(i).val(),a)return e;o.push(e)}return o},set:function(t,e){for(var i,n,r=t.options,a=pt.makeArray(e),o=r.length;o--;)if(n=r[o],pt.inArray(pt.valHooks.option.get(n),a)>-1)try{n.selected=i=!0}catch(t){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),r}}}}),pt.each(["radio","checkbox"],function(){pt.valHooks[this]={set:function(t,e){if(pt.isArray(e))return t.checked=pt.inArray(pt(t).val(),e)>-1}},ut.checkOn||(pt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ae,Ie,Pe=pt.expr.attrHandle,Fe=/^(?:checked|selected)$/i,Le=ut.getSetAttribute,He=ut.input;pt.fn.extend({attr:function(t,e){return Rt(this,pt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){pt.removeAttr(this,t)})}}),pt.extend({attr:function(t,e,i){var n,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof t.getAttribute?pt.prop(t,e,i):(1===a&&pt.isXMLDoc(t)||(e=e.toLowerCase(),r=pt.attrHooks[e]||(pt.expr.match.bool.test(e)?Ie:Ae)),i!==undefined?null===i?void pt.removeAttr(t,e):r&&"set"in r&&(n=r.set(t,i,e))!==undefined?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:(n=pt.find.attr(t,e),null==n?undefined:n))},attrHooks:{type:{set:function(t,e){if(!ut.radioValue&&"radio"===e&&pt.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n,r=0,a=e&&e.match(_t);if(a&&1===t.nodeType)for(;i=a[r++];)n=pt.propFix[i]||i,pt.expr.match.bool.test(i)?He&&Le||!Fe.test(i)?t[n]=!1:t[pt.camelCase("default-"+i)]=t[n]=!1:pt.attr(t,i,""),t.removeAttribute(Le?i:n)}}),Ie={set:function(t,e,i){return!1===e?pt.removeAttr(t,i):He&&Le||!Fe.test(i)?t.setAttribute(!Le&&pt.propFix[i]||i,i):t[pt.camelCase("default-"+i)]=t[i]=!0,i}},pt.each(pt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Pe[e]||pt.find.attr;He&&Le||!Fe.test(e)?Pe[e]=function(t,e,n){var r,a;return n||(a=Pe[e],Pe[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,Pe[e]=a),r}:Pe[e]=function(t,e,i){if(!i)return t[pt.camelCase("default-"+e)]?e.toLowerCase():null}}),He&&Le||(pt.attrHooks.value={set:function(t,e,i){if(!pt.nodeName(t,"input"))return Ae&&Ae.set(t,e,i);t.defaultValue=e}}),Le||(Ae={set:function(t,e,i){var n=t.getAttributeNode(i);if(n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i))return e}},Pe.id=Pe.name=Pe.coords=function(t,e,i){var n;if(!i)return(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},pt.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);if(i&&i.specified)return i.value},set:Ae.set},pt.attrHooks.contenteditable={set:function(t,e,i){Ae.set(t,""!==e&&e,i)}},pt.each(["width","height"],function(t,e){pt.attrHooks[e]={set:function(t,i){if(""===i)return t.setAttribute(e,"auto"),i}}})),ut.style||(pt.attrHooks.style={get:function(t){return t.style.cssText||undefined},set:function(t,e){return t.style.cssText=e+""}});var Ne=/^(?:input|select|textarea|button|object)$/i,Oe=/^(?:a|area)$/i;pt.fn.extend({prop:function(t,e){return Rt(this,pt.prop,t,e,arguments.length>1)},removeProp:function(t){return t=pt.propFix[t]||t,this.each(function(){try{this[t]=undefined,delete this[t]}catch(t){}})}}),pt.extend({prop:function(t,e,i){var n,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&pt.isXMLDoc(t)||(e=pt.propFix[e]||e,r=pt.propHooks[e]),i!==undefined?r&&"set"in r&&(n=r.set(t,i,e))!==undefined?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=pt.find.attr(t,"tabindex");return e?parseInt(e,10):Ne.test(t.nodeName)||Oe.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ut.hrefNormalized||pt.each(["href","src"],function(t,e){pt.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ut.optSelected||(pt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),pt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pt.propFix[this.toLowerCase()]=this}),ut.enctype||(pt.propFix.enctype="encoding");var Re=/[\t\r\n\f]/g;pt.fn.extend({addClass:function(t){var e,i,n,r,a,o,s,l=0;if(pt.isFunction(t))return this.each(function(e){pt(this).addClass(t.call(this,e,j(this)))});if("string"==typeof t&&t)for(e=t.match(_t)||[];i=this[l++];)if(r=j(i),n=1===i.nodeType&&(" "+r+" ").replace(Re," ")){for(o=0;a=e[o++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");s=pt.trim(n),r!==s&&pt.attr(i,"class",s)}return this},removeClass:function(t){var e,i,n,r,a,o,s,l=0;if(pt.isFunction(t))return this.each(function(e){pt(this).removeClass(t.call(this,e,j(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(_t)||[];i=this[l++];)if(r=j(i),n=1===i.nodeType&&(" "+r+" ").replace(Re," ")){for(o=0;a=e[o++];)for(;n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");s=pt.trim(n),r!==s&&pt.attr(i,"class",s)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):pt.isFunction(t)?this.each(function(i){pt(this).toggleClass(t.call(this,i,j(this),e),e)}):this.each(function(){var e,n,r,a;if("string"===i)for(n=0,r=pt(this),a=t.match(_t)||[];e=a[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else t!==undefined&&"boolean"!==i||(e=j(this),e&&pt._data(this,"__className__",e),pt.attr(this,"class",e||!1===t?"":pt._data(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+j(i)+" ").replace(Re," ").indexOf(e)>-1)return!0;return!1}}),pt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){pt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),pt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var Ue=t.location,Be=pt.now(),Xe=/\?/,Ve=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;pt.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,r=pt.trim(e+"");return r&&!pt.trim(r.replace(Ve,function(t,e,r,a){return i&&e&&(n=0),0===n?t:(i=r||e,n+=!a-!r,"")}))?Function("return "+r)():pt.error("Invalid JSON: "+e)},pt.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new t.DOMParser,i=n.parseFromString(e,"text/xml")):(i=new t.ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(t){i=undefined}
return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||pt.error("Invalid XML: "+e),i};var ze=/#.*$/,je=/([?&])_=[^&]*/,We=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,qe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Qe=/^(?:GET|HEAD)$/,Ye=/^\/\//,$e=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ge={},Ze={},Ke="*/".concat("*"),Je=Ue.href,ti=$e.exec(Je.toLowerCase())||[];pt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Je,type:"GET",isLocal:qe.test(ti[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":pt.parseJSON,"text xml":pt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Q(Q(t,pt.ajaxSettings),e):Q(pt.ajaxSettings,t)},ajaxPrefilter:W(Ge),ajaxTransport:W(Ze),ajax:function(e,i){function n(e,i,n,r){var a,u,y,x,C,S=i;2!==b&&(b=2,l&&t.clearTimeout(l),c=undefined,s=r||"",w.readyState=e>0?4:0,a=e>=200&&e<300||304===e,n&&(x=Y(d,w,n)),x=$(d,x,w,a),a?(d.ifModified&&(C=w.getResponseHeader("Last-Modified"),C&&(pt.lastModified[o]=C),(C=w.getResponseHeader("etag"))&&(pt.etag[o]=C)),204===e||"HEAD"===d.type?S="nocontent":304===e?S="notmodified":(S=x.state,u=x.data,y=x.error,a=!y)):(y=S,!e&&S||(S="error",e<0&&(e=0))),w.status=e,w.statusText=(i||S)+"",a?m.resolveWith(p,[u,S,w]):m.rejectWith(p,[w,S,y]),w.statusCode(v),v=undefined,h&&f.trigger(a?"ajaxSuccess":"ajaxError",[w,d,a?u:y]),g.fireWith(p,[w,S]),h&&(f.trigger("ajaxComplete",[w,d]),--pt.active||pt.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=undefined),i=i||{};var r,a,o,s,l,h,c,u,d=pt.ajaxSetup({},i),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?pt(p):pt.event,m=pt.Deferred(),g=pt.Callbacks("once memory"),v=d.statusCode||{},y={},x={},b=0,C="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!u)for(u={};e=We.exec(s);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=x[i]=x[i]||t,y[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(b<2)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||C;return c&&c.abort(e),n(0,e),this}};if(m.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||Je)+"").replace(ze,"").replace(Ye,ti[1]+"//"),d.type=i.method||i.type||d.method||d.type,d.dataTypes=pt.trim(d.dataType||"*").toLowerCase().match(_t)||[""],null==d.crossDomain&&(r=$e.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===ti[1]&&r[2]===ti[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(ti[3]||("http:"===ti[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=pt.param(d.data,d.traditional)),q(Ge,d,i,w),2===b)return w;h=pt.event&&d.global,h&&0==pt.active++&&pt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Qe.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Xe.test(o)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=je.test(o)?o.replace(je,"$1_="+Be++):o+(Xe.test(o)?"&":"?")+"_="+Be++)),d.ifModified&&(pt.lastModified[o]&&w.setRequestHeader("If-Modified-Since",pt.lastModified[o]),pt.etag[o]&&w.setRequestHeader("If-None-Match",pt.etag[o])),(d.data&&d.hasContent&&!1!==d.contentType||i.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ke+"; q=0.01":""):d.accepts["*"]);for(a in d.headers)w.setRequestHeader(a,d.headers[a]);if(d.beforeSend&&(!1===d.beforeSend.call(p,w,d)||2===b))return w.abort();C="abort";for(a in{success:1,error:1,complete:1})w[a](d[a]);if(c=q(Ze,d,i,w)){if(w.readyState=1,h&&f.trigger("ajaxSend",[w,d]),2===b)return w;d.async&&d.timeout>0&&(l=t.setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,c.send(y,n)}catch(t){if(!(b<2))throw t;n(-1,t)}}else n(-1,"No Transport");return w},getJSON:function(t,e,i){return pt.get(t,e,i,"json")},getScript:function(t,e){return pt.get(t,undefined,e,"script")}}),pt.each(["get","post"],function(t,e){pt[e]=function(t,i,n,r){return pt.isFunction(i)&&(r=r||n,n=i,i=undefined),pt.ajax(pt.extend({url:t,type:e,dataType:r,data:i,success:n},pt.isPlainObject(t)&&t))}}),pt._evalUrl=function(t){return pt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pt.fn.extend({wrapAll:function(t){if(pt.isFunction(t))return this.each(function(e){pt(this).wrapAll(t.call(this,e))});if(this[0]){var e=pt(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return pt.isFunction(t)?this.each(function(e){pt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=pt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=pt.isFunction(t);return this.each(function(i){pt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){pt.nodeName(this,"body")||pt(this).replaceWith(this.childNodes)}).end()}}),pt.expr.filters.hidden=function(t){return ut.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:Z(t)},pt.expr.filters.visible=function(t){return!pt.expr.filters.hidden(t)};var ei=/%20/g,ii=/\[\]$/,ni=/\r?\n/g,ri=/^(?:submit|button|image|reset|file)$/i,ai=/^(?:input|select|textarea|keygen)/i;pt.param=function(t,e){var i,n=[],r=function(t,e){e=pt.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===undefined&&(e=pt.ajaxSettings&&pt.ajaxSettings.traditional),pt.isArray(t)||t.jquery&&!pt.isPlainObject(t))pt.each(t,function(){r(this.name,this.value)});else for(i in t)K(i,t[i],e,r);return n.join("&").replace(ei,"+")},pt.fn.extend({serialize:function(){return pt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=pt.prop(this,"elements");return t?pt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!pt(this).is(":disabled")&&ai.test(this.nodeName)&&!ri.test(t)&&(this.checked||!Ut.test(t))}).map(function(t,e){var i=pt(this).val();return null==i?null:pt.isArray(i)?pt.map(i,function(t){return{name:e.name,value:t.replace(ni,"\r\n")}}):{name:e.name,value:i.replace(ni,"\r\n")}}).get()}}),pt.ajaxSettings.xhr=t.ActiveXObject!==undefined?function(){return this.isLocal?tt():nt.documentMode>8?J():/^(get|post|head|put|delete|options)$/i.test(this.type)&&J()||tt()}:J;var oi=0,si={},li=pt.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in si)si[t](undefined,!0)}),ut.cors=!!li&&"withCredentials"in li,li=ut.ajax=!!li,li&&pt.ajaxTransport(function(e){if(!e.crossDomain||ut.cors){var i;return{send:function(n,r){var a,o=e.xhr(),s=++oi;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)o[a]=e.xhrFields[a];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(a in n)n[a]!==undefined&&o.setRequestHeader(a,n[a]+"");o.send(e.hasContent&&e.data||null),i=function(t,n){var a,l,h;if(i&&(n||4===o.readyState))if(delete si[s],i=undefined,o.onreadystatechange=pt.noop,n)4!==o.readyState&&o.abort();else{h={},a=o.status,"string"==typeof o.responseText&&(h.text=o.responseText);try{l=o.statusText}catch(t){l=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=h.text?200:404}h&&r(a,l,h,o.getAllResponseHeaders())},e.async?4===o.readyState?t.setTimeout(i):o.onreadystatechange=si[s]=i:i()},abort:function(){i&&i(undefined,!0)}}}}),pt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return pt.globalEval(t),t}}}),pt.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),pt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=nt.head||pt("head")[0]||nt.documentElement;return{send:function(n,r){e=nt.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||r(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(undefined,!0)}}}});var hi=[],ci=/(=)\?(?=&|$)|\?\?/;pt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=hi.pop()||pt.expando+"_"+Be++;return this[t]=!0,t}}),pt.ajaxPrefilter("json jsonp",function(e,i,n){var r,a,o,s=!1!==e.jsonp&&(ci.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ci.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=pt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ci,"$1"+r):!1!==e.jsonp&&(e.url+=(Xe.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||pt.error(r+" was not called"),o[0]},e.dataTypes[0]="json",a=t[r],t[r]=function(){o=arguments},n.always(function(){a===undefined?pt(t).removeProp(r):t[r]=a,e[r]&&(e.jsonpCallback=i.jsonpCallback,hi.push(r)),o&&pt.isFunction(a)&&a(o[0]),o=a=undefined}),"script"}),pt.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||nt;var n=wt.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=v([t],e,r),r&&r.length&&pt(r).remove(),pt.merge([],n.childNodes))};var ui=pt.fn.load;pt.fn.load=function(t,e,i){if("string"!=typeof t&&ui)return ui.apply(this,arguments);var n,r,a,o=this,s=t.indexOf(" ");return s>-1&&(n=pt.trim(t.slice(s,t.length)),t=t.slice(0,s)),pt.isFunction(e)?(i=e,e=undefined):e&&"object"==typeof e&&(r="POST"),o.length>0&&pt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){a=arguments,o.html(n?pt("<div>").append(pt.parseHTML(t)).find(n):t)}).always(i&&function(t,e){o.each(function(){i.apply(this,a||[t.responseText,e,t])})}),this},pt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){pt.fn[e]=function(t){return this.on(e,t)}}),pt.expr.filters.animated=function(t){return pt.grep(pt.timers,function(e){return t===e.elem}).length},pt.offset={setOffset:function(t,e,i){var n,r,a,o,s,l,h,c=pt.css(t,"position"),u=pt(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),a=pt.css(t,"top"),l=pt.css(t,"left"),h=("absolute"===c||"fixed"===c)&&pt.inArray("auto",[a,l])>-1,h?(n=u.position(),o=n.top,r=n.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),pt.isFunction(e)&&(e=e.call(t,i,pt.extend({},s))),null!=e.top&&(d.top=e.top-s.top+o),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):u.css(d)}},pt.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){pt.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},r=this[0],a=r&&r.ownerDocument;if(a)return e=a.documentElement,pt.contains(e,r)?("undefined"!=typeof r.getBoundingClientRect&&(n=r.getBoundingClientRect()),i=et(a),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===pt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),pt.nodeName(t[0],"html")||(i=t.offset()),i.top+=pt.css(t[0],"borderTopWidth",!0),i.left+=pt.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-pt.css(n,"marginTop",!0),left:e.left-i.left-pt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&!pt.nodeName(t,"html")&&"static"===pt.css(t,"position");)t=t.offsetParent;return t||de})}}),pt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);pt.fn[t]=function(n){return Rt(this,function(t,n,r){var a=et(t);if(r===undefined)return a?e in a?a[e]:a.document.documentElement[n]:t[n];a?a.scrollTo(i?pt(a).scrollLeft():r,i?r:pt(a).scrollTop()):t[n]=r},t,n,arguments.length,null)}}),pt.each(["top","left"],function(t,e){pt.cssHooks[e]=I(ut.pixelPosition,function(t,i){if(i)return i=fe(t,e),ce.test(i)?pt(t).position()[e]+"px":i})}),pt.each({Height:"height",Width:"width"},function(t,e){pt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){pt.fn[n]=function(n,r){var a=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===r?"margin":"border");return Rt(this,function(e,i,n){var r;return pt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):n===undefined?pt.css(e,i,o):pt.style(e,i,n,o)},e,a?n:undefined,a,null)}})}),pt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),pt.fn.size=function(){return this.length},pt.fn.andSelf=pt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pt});var di=t.jQuery,pi=t.$;return pt.noConflict=function(e){return t.$===pt&&(t.$=pi),e&&t.jQuery===pt&&(t.jQuery=di),pt},e||(t.jQuery=t.$=pt),pt}),function(t,e){"use strict";t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return t("meta[name=csrf-token]").attr("content")},csrfParam:function(){return t("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=i.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){t('form input[name="'+i.csrfParam()+'"]').val(i.csrfToken())},fire:function(e,i,n){var r=t.Event(i);return e.trigger(r,n),!1!==r.result},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==e&&!1!==t.data("remote")},handleRemote:function(n){var r,a,o,s,l,h;if(i.fire(n,"ajax:before")){if(s=n.data("with-credentials")||null,l=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){r=n.data("ujs:submit-button-formmethod")||n.attr("method"),a=n.data("ujs:submit-button-formaction")||n.attr("action"),o=t(n[0]).serializeArray();var c=n.data("ujs:submit-button");c&&(o.push(c),n.data("ujs:submit-button",null)),n.data("ujs:submit-button-formmethod",null),n.data("ujs:submit-button-formaction",null)}else n.is(i.inputChangeSelector)?(r=n.data("method"),a=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(r=n.data("method")||"get",a=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(r=n.data("method"),a=i.href(n),o=n.data("params")||null);return h={type:r||"GET",data:o,dataType:l,beforeSend:function(t,r){if(r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),!i.fire(n,"ajax:beforeSend",[t,r]))return!1;n.trigger("ajax:send",t)},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:i.isCrossDomain(a)},s&&(h.xhrFields={withCredentials:s}),a&&(h.url=a),i.ajax(h)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var i=document.createElement("a");try{return i.href=t,i.href=i.href,!((!i.protocol||":"===i.protocol)&&!i.host||e.protocol+"//"+e.host==i.protocol+"//"+i.host)}catch(t){return!0}},handleMethod:function(n){var r=i.href(n),a=n.data("method"),o=n.attr("target"),s=i.csrfToken(),l=i.csrfParam(),h=t('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+a+'" type="hidden" />';l===e||s===e||i.isCrossDomain(r)||(c+='<input name="'+l+'" value="'+s+'" type="hidden" />'),o&&h.attr("target",o),h.hide().append(c).appendTo("body"),h.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),n!==e&&(t.data("ujs:enable-with",t[i]()),t[i](n)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var i=t.is("button")?"html":"val";t.data("ujs:enable-with")!==e&&(t[i](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,n=t.data("confirm"),r=!1;if(!n)return!0;if(i.fire(t,"confirm")){try{r=i.confirm(n)}catch(t){(console.error||console.log).call(console,t.stack||t)}e=i.fire(t,"confirm:complete",[r])}return r&&e},blankInputs:function(e,i,n){var r,a,o,s,l=t(),h=i||"input,textarea",c=e.find(h),u={};return c.each(function(){r=t(this),r.is("input[type=radio]")?(s=r.attr("name"),u[s]||(0===e.find('input[type=radio]:checked[name="'+s+'"]').length&&(o=e.find('input[type=radio][name="'+s+'"]'),l=l.add(o)),u[s]=s)):(a=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val())===n&&(l=l.add(r))}),!!l.length&&l},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");n!==e&&(t.data("ujs:enable-with",t.html()),t.html(n)),t.bind("click.railsDisable",function(t){return i.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableElement(e)})}),n.on("ajax:complete",i.linkDisableSelector,function(){i.enableElement(t(this))}),n.on("ajax:complete",i.buttonDisableSelector,function(){i.enableFormElement(t(this))}),n.on("click.rails",i.linkClickSelector,function(e){var n=t(this),r=n.data("method"),a=n.data("params"),o=e.metaKey||e.ctrlKey;if(!i.allowAction(n))return i.stopEverything(e);if(!o&&n.is(i.linkDisableSelector)&&i.disableElement(n),i.isRemote(n)){if(o&&(!r||"GET"===r)&&!a)return!0;var s=i.handleRemote(n);return!1===s?i.enableElement(n):s.fail(function(){i.enableElement(n)}),!1}return r?(i.handleMethod(n),!1):void 0}),n.on("click.rails",i.buttonClickSelector,function(e){var n=t(this);if(!i.allowAction(n)||!i.isRemote(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var r=i.handleRemote(n);return!1===r?i.enableFormElement(n):r.fail(function(){i.enableFormElement(n)}),!1}),n.on("change.rails",i.inputChangeSelector,function(e){var n=t(this);return i.allowAction(n)&&i.isRemote(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.on("submit.rails",i.formSubmitSelector,function(n){var r,a,o=t(this),s=i.isRemote(o);if(!i.allowAction(o))return i.stopEverything(n);if(o.attr("novalidate")===e)if(o.data("ujs:formnovalidate-button")===e){if((r=i.blankInputs(o,i.requiredInputSelector,!1))&&i.fire(o,"ajax:aborted:required",[r]))return i.stopEverything(n)}else o.data("ujs:formnovalidate-button",e);if(s){if(a=i.nonBlankInputs(o,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(o)},13);var l=i.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){i.enableFormElements(o)},13),l}return i.handleRemote(o),!1}setTimeout(function(){i.disableFormElements(o)},13)}),n.on("click.rails",i.formInputClickSelector,function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var r=n.attr("name"),a=r?{name:r,value:n.val()}:null,o=n.closest("form");0===o.length&&(o=t("#"+n.attr("form"))),o.data("ujs:submit-button",a),o.data("ujs:formnovalidate-button",n.attr("formnovalidate")),o.data("ujs:submit-button-formaction",n.attr("formaction")),o.data("ujs:submit-button-formmethod",n.attr("formmethod"))}),n.on("ajax:send.rails",i.formSubmitSelector,function(e){this===e.target&&i.disableFormElements(t(this))}),n.on("ajax:complete.rails",i.formSubmitSelector,function(e){this===e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),/*! (C) Andrea Giammarchi - @WebReflection - Mit Style License */
function(t,e){"use strict";function i(){var t=M.splice(0,M.length);for($t=0;t.length;)t.shift().call(null,t.shift())}function n(t,e){for(var i=0,n=t.length;i<n;i++)m(t[i],e)}function r(t){for(var e,i=0,n=t.length;i<n;i++)e=t[i],F(e,rt[o(e)])}function a(t){return function(e){Nt(e)&&(m(e,t),at.length&&n(e.querySelectorAll(at),t))}}function o(t){var e=Xt.call(t,"is"),i=t.nodeName.toUpperCase(),n=st.call(nt,e?tt+e.toUpperCase():J+i);return e&&-1<n&&!s(i,e)?-1:n}function s(t,e){return-1<at.indexOf(t+'[is="'+e+'"]')}function l(t){var e=t.currentTarget,i=t.attrChange,n=t.attrName,r=t.target,a=t[Q]||2,o=t[$]||3;ee&&(!r||r===e)&&e[X]&&"style"!==n&&(t.prevValue!==t.newValue||""===t.newValue&&(i===a||i===o))&&e[X](n,i===a?null:t.prevValue,i===o?null:t.newValue)}function h(t){var e=a(t);return function(t){M.push(e,t.target),$t&&clearTimeout($t),$t=setTimeout(i,1)}}function c(t){te&&(te=!1,t.currentTarget.removeEventListener(Z,c)),at.length&&n((t.target||S).querySelectorAll(at),t.detail===U?U:O),Lt&&p()}function u(t,e){var i=this;jt.call(i,t,e),k.call(i,{target:i})}function d(t,e){It(t,e),A?A.observe(t,Qt):(Jt&&(t.setAttribute=u,t[H]=E(t),t[N](K,k)),t[N](G,l)),t[W]&&ee&&(t.created=!0,t[W](),t.created=!1)}function p(){for(var t,e=0,i=Ot.length;e<i;e++)t=Ot[e],ot.contains(t)||(i--,Ot.splice(e--,1),m(t,U))}function f(t){throw new Error("A "+t+" type is already registered")}function m(t,e){var i,n=o(t);-1<n&&(P(t,rt[n]),n=0,e!==O||t[O]?e===U&&!t[U]&&(t[O]=!1,t[U]=!0,n=1):(t[U]=!1,t[O]=!0,n=1,Lt&&st.call(Ot,t)<0&&Ot.push(t)),n&&(i=t[e+R])&&i.call(t))}function g(){}function v(t,e,i){var n=i&&i[B]||"",r=e.prototype,a=At(r),o=e.observedAttributes||dt,s={prototype:a};Ht(a,W,{value:function(){if(Dt)Dt=!1;else if(!this[xt]){this[xt]=!0,new e(this),r[W]&&r[W].call(this);var t=Mt[_t.get(e)];(!Ct||t.create.length>1)&&b(this)}}}),Ht(a,X,{value:function(t){-1<st.call(o,t)&&r[X].apply(this,arguments)}}),r[z]&&Ht(a,V,{value:r[z]}),r[j]&&Ht(a,q,{value:r[j]}),n&&(s[B]=n),t=t.toUpperCase(),Mt[t]={constructor:e,create:n?[n,Et(t)]:[t]},_t.set(e,t),S[L](t.toLowerCase(),s),C(t),kt[t].r()}function y(t){var e=Mt[t.toUpperCase()];return e&&e.constructor}function x(t){return"string"==typeof t?t:t&&t.is||""}function b(t){for(var e,i=t[X],n=i?t.attributes:dt,r=n.length;r--;)e=n[r],i.call(t,e.name||e.nodeName,null,e.value||e.nodeValue)}function C(t){return t=t.toUpperCase(),t in kt||(kt[t]={},kt[t].p=new Tt(function(e){kt[t].r=e})),kt[t].p}function w(){bt&&delete t.customElements,ut(t,"customElements",{configurable:!0,value:new g}),ut(t,"CustomElementRegistry",{configurable:!0,value:g});for(var e=function(e){var i=t[e];if(i){t[e]=function(t){var e,n;return t||(t=this),t[xt]||(Dt=!0,e=Mt[_t.get(t.constructor)],n=Ct&&1===e.create.length,t=n?Reflect.construct(i,dt,e.constructor):S.createElement.apply(S,e.create),t[xt]=!0,Dt=!1,n||b(t)),t},t[e].prototype=i.prototype;try{i.prototype.constructor=t[e]}catch(n){yt=!0,ut(i,xt,{value:t[e]})}}},i=D.get(/^HTML[A-Z]*[a-z]/),n=i.length;n--;e(i[n]));S.createElement=function(t,e){var i=x(e);return i?qt.call(this,t,Et(i)):qt.call(this,t)},Gt||(Kt=!0,S[L](""))}var S=t.document,T=t.Object,D=function(t){var e,i,n,r,a=/^[A-Z]+[a-z]/,o=function(t){var e,i=[];for(e in l)t.test(e)&&i.push(e);return i},s=function(t,e){(e=e.toLowerCase())in l||(l[t]=(l[t]||[]).concat(e),l[e]=l[e.toUpperCase()]=t)},l=(T.create||T)(null),h={};for(i in t)for(r in t[i])for(n=t[i][r],l[r]=n,e=0;e<n.length;e++)l[n[e].toLowerCase()]=l[n[e].toUpperCase()]=r;return h.get=function(t){return"string"==typeof t?l[t]||(a.test(t)?[]:""):o(t)},h.set=function(t,e){return a.test(t)?s(t,e):s(e,t),h},h}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});e||(e="auto");var M,k,_,E,A,I,P,F,L="registerElement",H="__"+L+(1e5*t.Math.random()>>0),N="addEventListener",O="attached",R="Callback",U="detached",B="extends",X="attributeChanged"+R,V=O+R,z="connected"+R,j="disconnected"+R,W="created"+R,q=U+R,Q="ADDITION",Y="MODIFICATION",$="REMOVAL",G="DOMAttrModified",Z="DOMContentLoaded",K="DOMSubtreeModified",J="<",tt="=",et=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,it=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],nt=[],rt=[],at="",ot=S.documentElement,st=nt.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},lt=T.prototype,ht=lt.hasOwnProperty,ct=lt.isPrototypeOf,ut=T.defineProperty,dt=[],pt=T.getOwnPropertyDescriptor,ft=T.getOwnPropertyNames,mt=T.getPrototypeOf,gt=T.setPrototypeOf,vt=!!T.__proto__,yt=!1,xt="__dreCEv1",bt=t.customElements,Ct="force"!==e&&!!(bt&&bt.define&&bt.get&&bt.whenDefined),wt=T.create||T,St=t.Map||function(){var t,e=[],i=[];return{get:function(t){return i[st.call(e,t)]},set:function(n,r){t=st.call(e,n),t<0?i[e.push(n)-1]=r:i[t]=r}}},Tt=t.Promise||function(t){function e(t){for(n=!0;i.length;)i.shift()(t)}var i=[],n=!1,r={"catch":function(){return r},then:function(t){return i.push(t),n&&setTimeout(e,1),r}};return t(e),r},Dt=!1,Mt=wt(null),kt=wt(null),_t=new St,Et=function(t){return t.toLowerCase()},At=T.create||function t(e){return e?(t.prototype=e,new t):this},It=gt||(vt?function(t,e){return t.__proto__=e,t}:ft&&pt?function(){function t(t,e){for(var i,n=ft(e),r=0,a=n.length;r<a;r++)i=n[r],ht.call(t,i)||ut(t,i,pt(e,i))}return function(e,i){do{t(e,i)}while((i=mt(i))&&!ct.call(i,e));return e}}():function(t,e){for(var i in e)t[i]=e[i];return t}),Pt=t.MutationObserver||t.WebKitMutationObserver,Ft=(t.HTMLElement||t.Element||t.Node).prototype,Lt=!ct.call(Ft,ot),Ht=Lt?function(t,e,i){return t[e]=i.value,t}:ut,Nt=Lt?function(t){return 1===t.nodeType}:function(t){return ct.call(Ft,t)},Ot=Lt&&[],Rt=Ft.attachShadow,Ut=Ft.cloneNode,Bt=Ft.dispatchEvent,Xt=Ft.getAttribute,Vt=Ft.hasAttribute,zt=Ft.removeAttribute,jt=Ft.setAttribute,Wt=S.createElement,qt=Wt,Qt=Pt&&{attributes:!0,characterData:!0,attributeOldValue:!0},Yt=Pt||function(){Jt=!1,ot.removeEventListener(G,Yt)},$t=0,Gt=L in S,Zt=!0,Kt=!1,Jt=!0,te=!0,ee=!0;if(Gt||(gt||vt?(P=function(t,e){ct.call(e,t)||d(t,e)},F=d):(P=function(t,e){t[H]||(t[H]=T(!0),d(t,e))},F=P),Lt?(Jt=!1,function(){var t=pt(Ft,N),e=t.value,i=function(t){var e=new CustomEvent(G,{bubbles:!0});e.attrName=t,e.prevValue=Xt.call(this,t),e.newValue=null,e[$]=e.attrChange=2,zt.call(this,t),Bt.call(this,e)},n=function(t,e){var i=Vt.call(this,t),n=i&&Xt.call(this,t),r=new CustomEvent(G,{bubbles:!0});jt.call(this,t,e),r.attrName=t,r.prevValue=i?n:null,r.newValue=e,i?r[Y]=r.attrChange=1:r[Q]=r.attrChange=0,Bt.call(this,r)},r=function(t){var e,i=t.currentTarget,n=i[H],r=t.propertyName;n.hasOwnProperty(r)&&(n=n[r],e=new CustomEvent(G,{bubbles:!0}),e.attrName=n.name,e.prevValue=n.value||null,e.newValue=n.value=i[r]||null,null==e.prevValue?e[Q]=e.attrChange=0:e[Y]=e.attrChange=1,Bt.call(i,e))};t.value=function(t,a,o){t===G&&this[X]&&this.setAttribute!==n&&(this[H]={className:{name:"class",value:this.className}},this.setAttribute=n,this.removeAttribute=i,e.call(this,"propertychange",r)),e.call(this,t,a,o)},ut(Ft,N,t)}()):Pt||(ot[N](G,Yt),ot.setAttribute(H,1),ot.removeAttribute(H),Jt&&(k=function(t){var e,i,n,r=this;if(r===t.target){e=r[H],r[H]=i=E(r);for(n in i){if(!(n in e))return _(0,r,n,e[n],i[n],Q);if(i[n]!==e[n])return _(1,r,n,e[n],i[n],Y)}for(n in e)if(!(n in i))return _(2,r,n,e[n],i[n],$)}},_=function(t,e,i,n,r,a){var o={attrChange:t,currentTarget:e,attrName:i,prevValue:n,newValue:r};o[a]=t,l(o)},E=function(t){for(var e,i,n={},r=t.attributes,a=0,o=r.length;a<o;a++)e=r[a],"setAttribute"!==(i=e.name)&&(n[i]=e.value);return n})),S[L]=function(t,e){if(i=t.toUpperCase(),Zt&&(Zt=!1,Pt?(A=function(t,e){function i(t,e){for(var i=0,n=t.length;i<n;e(t[i++]));}return new Pt(function(n){for(var r,a,o,s=0,l=n.length;s<l;s++)r=n[s],"childList"===r.type?(i(r.addedNodes,t),i(r.removedNodes,e)):(a=r.target,ee&&a[X]&&"style"!==r.attributeName&&(o=Xt.call(a,r.attributeName))!==r.oldValue&&a[X](r.attributeName,r.oldValue,o))})}(a(O),a(U)),I=function(t){return A.observe(t,{childList:!0,subtree:!0}),t},I(S),Rt&&(Ft.attachShadow=function(){return I(Rt.apply(this,arguments))})):(M=[],S[N]("DOMNodeInserted",h(O)),S[N]("DOMNodeRemoved",h(U))),S[N](Z,c),S[N]("readystatechange",c),Ft.cloneNode=function(t){var e=Ut.call(this,!!t),i=o(e);return-1<i&&F(e,rt[i]),t&&at.length&&r(e.querySelectorAll(at)),e}),Kt)return Kt=!1;if(-2<st.call(nt,tt+i)+st.call(nt,J+i)&&f(t),!et.test(i)||-1<st.call(it,i))throw new Error("The type "+t+" is invalid");var i,s,l=function(){return d?S.createElement(p,i):S.createElement(p)},u=e||lt,d=ht.call(u,B),p=d?e[B].toUpperCase():i;return d&&-1<st.call(nt,J+p)&&f(p),s=nt.push((d?tt:J)+i)-1,at=at.concat(at.length?",":"",d?p+'[is="'+t.toLowerCase()+'"]':p),l.prototype=rt[s]=ht.call(u,"prototype")?u.prototype:At(Ft),at.length&&n(S.querySelectorAll(at),O),l},S.createElement=qt=function(t,e){var i=x(e),n=i?Wt.call(S,t,Et(i)):Wt.call(S,t),r=""+t,a=st.call(nt,(i?tt:J)+(i||r).toUpperCase()),o=-1<a;return i&&(n.setAttribute("is",i=i.toLowerCase()),o&&(o=s(r.toUpperCase(),i))),ee=!S.createElement.innerHTMLHelper,o&&F(n,rt[a]),n}),g.prototype={constructor:g,define:Ct?function(t,e,i){if(i)v(t,e,i);else{var n=t.toUpperCase();Mt[n]={constructor:e,create:[n]},_t.set(e,n),bt.define(t,e)}}:v,get:Ct?function(t){return bt.get(t)||y(t)}:y,whenDefined:Ct?function(t){return Tt.race([bt.whenDefined(t),C(t)])}:C},bt&&"force"!==e)try{!function(e,i,n){if(i[B]="a",e.prototype=At(HTMLAnchorElement.prototype),e.prototype.constructor=e,t.customElements.define(n,e,i),Xt.call(S.createElement("a",{is:n}),"is")!==n||Ct&&Xt.call(new e,"is")!==n)throw i}(function t(){return Reflect.construct(HTMLAnchorElement,[],t)},{},"document-register-element-a")}catch(t){w()}else w();try{Wt.call(S,"a","a")}catch(t){Et=function(t){return{is:t.toLowerCase()}}}}(window),function(){var t,e=undefined,i="2019/09/01",n=["127.0.0.1","localhost","upbit.com"],r=!1;if(e?t=new Date(e).getTime():i&&(t=new Date(i).getTime()),t){var a=(new Date).getTime();if(t<=a)e&&alert("This license has expired!"),console.error("This license has expired!");else if(e){var o=Math.round((t-a)/864e5);o<3&&(alert("This trial license expires in "+o+" days!"),console.log("WARNING: This trial license expires in "+o+" days!"))}}if((!0!==r||"file:"!=document.location.protocol)&&n&&n.length>2){for(var s=document.location.href,l=!1,h=0;h<n.length;h++)if(s.indexOf(n[h])>-1){l=!0;break}l||(alert("ERROR: Not licensed for domain "+s),console.error("ERROR: Not licensed for domain "+s))}}(),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():e(t)}(this,function(_exports){function g7DD(){}function U8EE(){}function U6HH(){}var __js_drawing_=function(t){var e=t.CIQ,i=t.timezoneJS;return e.Drawing=function(){this.chartsOnly=!1,this.penDown=!1},e.Drawing.getDrawingParameters=function(t,i){var n;try{n=new e.Drawing[i]}catch(t){}if(!n)return null;n.stx=t,n.copyConfig();for(var r={},a=n.configs,o=0;o<a.length;o++)r[a[o]]=n[a[o]];return r},e.Drawing.prototype.copyConfig=function(){e.Drawing.copyConfig(this)},e.Drawing.copyConfig=function(t){for(var i=t.configs,n=0;n<i.length;n++){var r=i[n],a=t.stx.currentVectorParameters;"color"==r?t.color=a.currentColor:"parameters"==r?t.parameters=a.fibonacci:"font"==r?t.font=e.clone(a.annotation.font):t[r]=a[r]}},e.Drawing.prototype.dragToDraw=!1,e.Drawing.prototype.abort=function(){},e.Drawing.prototype.measure=function(){},e.Drawing.prototype.construct=function(t,e){this.stx=t,this.panelName=e.name},e.Drawing.prototype.render=function(){alert("must implement render function!")},e.Drawing.prototype.click=function(){alert("must implement click function!")},e.Drawing.prototype.move=function(){alert("must implement move function!")},e.Drawing.prototype.reposition=function(){},e.Drawing.prototype.intersected=function(){alert("must implement intersected function!")},e.Drawing.prototype.reconstruct=function(){alert("must implement reconstruct function!")},e.Drawing.prototype.serialize=function(){alert("must implement serialize function!")},e.Drawing.prototype.adjust=function(){alert("must implement adjust function!")},e.Drawing.prototype.highlight=function(t){return t&&!this.highlighted?this.highlighted=t:!t&&this.highlighted&&(this.highlighted=t),this.highlighted},e.Drawing.prototype.littleCircleRadius=function(){return 6},e.Drawing.prototype.littleCircle=function(t,i,n,r){var a=this.stx.defaultColor,o=e.chooseForegroundColor(a);t.beginPath(),t.lineWidth=1,t.arc(i,n,this.littleCircleRadius(),0,2*Math.PI,!1),t.fillStyle=r?a:o,t.strokeStyle=a,t.fill(),t.stroke(),t.closePath()},e.Drawing.prototype.rotator=function(t,e,i,n){var r=this.littleCircleRadius(),a=this.stx.defaultColor;t.beginPath(),t.lineWidth=2,n||(t.globalAlpha=.5);var o=4+r;t.arc(e,i,o,0,3*Math.PI/2,!1),t.moveTo(e+2+o,i+2),t.lineTo(e+o,i),t.lineTo(e-2+o,i+2),t.moveTo(e-2,i+2-o),t.lineTo(e,i-o),t.lineTo(e-2,i-2-o),t.strokeStyle=a,t.stroke(),t.closePath(),t.globalAlpha=1},e.Drawing.prototype.mover=function(t,e,i,n){var r=this.littleCircleRadius(),a=this.stx.defaultColor,o=5,s=r+1;t.save(),t.lineWidth=2,t.strokeStyle=a,t.translate(e,i),n||(t.globalAlpha=.5);for(var l=0;l<4;l++)t.rotate(Math.PI/2),t.beginPath(),t.moveTo(0,s),t.lineTo(0,s+o),t.moveTo(-2,s+o-2),t.lineTo(0,s+o),t.lineTo(2,s+o-2),t.closePath(),t.stroke();t.globalAlpha=1,t.restore()},e.Drawing.prototype.resizer=function(t,e,i,n){var r=this.littleCircleRadius(),a=this.stx.defaultColor,o=5*Math.sqrt(2),s=r+1;t.save(),t.lineWidth=2,t.strokeStyle=a,t.translate(e,i),t.rotate(-e*i/Math.abs(e*i)*Math.PI/4),n||(t.globalAlpha=.5);for(var l=0;l<2;l++)t.rotate(Math.PI),t.beginPath(),t.moveTo(0,s),t.lineTo(0,s+o),t.moveTo(-2,s+o-2),t.lineTo(0,s+o),t.lineTo(2,s+o-2),t.closePath(),t.stroke();t.globalAlpha=1,t.restore()},e.Drawing.prototype.pointIntersection=function(t,e,i){return!!this.stx.panels[this.panelName]&&t>=i.x0&&t<=i.x1&&e>=i.y1&&e<=i.y0},e.Drawing.prototype.setPoint=function(t,i,n,r){var a=null,o=null;"number"==typeof i?a=i:i.length>=8?o=i:a=Number(i),(n||0===n)&&(this["v"+t]=n);var s;if(null!==a)s=this.stx.dateFromTick(a,r,!0),this["tzo"+t]=s.getTimezoneOffset(),this["d"+t]=e.yyyymmddhhmmssmmm(s),this["p"+t]=[a,n];else if(null!==o){s=e.strToDateTime(o),this["tzo"+t]||0===this["tzo"+t]||(this["tzo"+t]=s.getTimezoneOffset()),this["d"+t]=o;var l=this["tzo"+t]-s.getTimezoneOffset();s.setMinutes(s.getMinutes()+l),this["p"+t]=[this.stx.tickFromDate(e.yyyymmddhhmmssmmm(s),r),n]}},e.Drawing.BaseTwoPoint=function(){this.p0=null,this.p1=null,this.color=""},e.Drawing.BaseTwoPoint.ciqInheritsFrom(e.Drawing),e.Drawing.BaseTwoPoint.prototype.configs=[],e.Drawing.BaseTwoPoint.prototype.lineIntersection=function(t,i,n,r){return!(!this.p0||!this.p1)&&(this.stx.layout.semiLog||"log"==this.stx.layout.chartScale?e.boxIntersects(n.x0,e.log10(n.y0),n.x1,e.log10(n.y1),this.p0[0],e.log10(this.p0[1]),this.p1[0],e.log10(this.p1[1]),r):e.boxIntersects(n.x0,n.y0,n.x1,n.y1,this.p0[0],this.p0[1],this.p1[0],this.p1[1],r))},e.Drawing.BaseTwoPoint.prototype.boxIntersection=function(t,e){return!(!this.p0||!this.p1)&&(!(t>Math.max(this.p0[0],this.p1[0])||t<Math.min(this.p0[0],this.p1[0]))&&!(e>Math.max(this.p0[1],this.p1[1])||e<Math.min(this.p0[1],this.p1[1])))},e.Drawing.BaseTwoPoint.prototype.accidentalClick=function(t,e){var i=this.stx.panels[this.panelName],n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(t,i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,t,e),s=Math.abs(r-n),l=Math.abs(o-a);if(Math.sqrt(s*s+l*l)<10)return this.penDown=!1,this.dragToDraw&&this.stx.undo(),!0},e.Drawing.BaseTwoPoint.prototype.click=function(t,e,i){this.copyConfig();var n=this.stx.panels[this.panelName];return this.penDown?this.accidentalClick(e,i)?this.dragToDraw:(this.setPoint(1,e,i,n.chart),this.penDown=!1,!0):(this.setPoint(0,e,i,n.chart),this.penDown=!0,!1)},e.Drawing.BaseTwoPoint.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart))},e.Drawing.BaseTwoPoint.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),this.p1=[e,i],this.render(t))},e.Drawing.BaseTwoPoint.prototype.measure=function(){this.stx.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0)},e.Drawing.BaseTwoPoint.prototype.reposition=function(t,e,i,n){if(e){var r=this.stx.panels[this.panelName],a=e.tick-i,o=e.value-n;"move"==e.action?(this.setPoint(0,e.p0[0]-a,e.p0[1]-o,r.chart),this.setPoint(1,e.p1[0]-a,e.p1[1]-o,r.chart),this.render(t)):"drag"==e.action&&(this[e.point]=[i,n],this.setPoint(0,this.p0[0],this.p0[1],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.render(t))}},e.Drawing.annotation=function(){this.name="annotation",this.arr=[],this.w=0,this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={}},e.Drawing.annotation.ciqInheritsFrom(e.Drawing.BaseTwoPoint),e.Drawing.annotation.prototype.getFontString=function(){this.fontDef={style:null,weight:null,size:"12px",family:null};var t=this.stx.canvasStyle("stx_annotation");t&&(t.fontStyle&&(this.fontDef.style=t.fontStyle),t.fontWeight&&(this.fontDef.weight=t.fontWeight),t.fontSize&&(this.fontDef.size=t.fontSize),t.fontFamily&&(this.fontDef.family=t.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="";var e=!1;for(var i in this.fontDef)this.fontDef[i]&&(e?e=!0:this.fontString+=" ",this.fontString+=this.fontDef[i])},e.Drawing.annotation.prototype.configs=["color","font"],e.Drawing.annotation.prototype.measure=function(){},e.Drawing.annotation.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]);t.font=this.fontString,t.textBaseline="top";var a=n,o=r,s=this.w,l=this.h,h=this.color;if(("auto"==h||e.isTransparent(h))&&(h=this.stx.defaultColor),this.highlighted&&(h=this.stx.getCanvasColor("stx_highlight_vector")),this.stem){var c,u,d,p;this.stem.d?(c=this.stx.pixelFromTick(this.stem.t),d=this.stx.pixelFromValueAdjusted(i,this.stem.t,this.stem.v),u=a+s/2,p=o+l/2):this.stem.x&&(c=a,d=o,a+=this.stem.x,o+=this.stem.y,u=a+s/2,p=o+l/2),t.beginPath(),this.borderColor?t.strokeStyle=this.borderColor:t.strokeStyle=h,t.moveTo(c,d),t.lineTo(u,p),t.stroke()}this.highlighted?(this.stx.canvasColor("stx_annotation_highlight_bg",t),t.fillRect(a,o,s,l)):this.fillColor?(t.fillStyle=this.fillColor,t.fillRect(a,o,s,l)):this.stem&&(t.fillStyle=this.stx.containerColor,t.fillRect(a,o,s,l)),this.borderColor&&(t.beginPath(),t.strokeStyle=this.borderColor,t.rect(a,o,s,l),t.stroke()),this.highlighted?this.stx.canvasColor("stx_annotation_highlight",t):t.fillStyle=h,o+=this.padding;for(var f=0;f<this.arr.length;f++)t.fillText(this.arr[f],a+this.padding,o),o+=this.fontSize;t.textBaseline="alphabetic"}},e.Drawing.annotation.prototype.onChange=function(){},e.Drawing.annotation.prototype.edit=function(){function t(t){return function(i){t.manageTouchAndMouse&&e.ChartEngine.drawingLine&&t.mouseup(i)}}function i(t){return function(){t.stx.editingAnnotation=!1,t.stx.undo(),t.stx.cancelTouchSingleClick=!0}}function n(t){return function(){""!==t.ta.value&&(t.stx.editingAnnotation=!1,t.text=t.ta.value,t.adjust(),t.stx.addDrawing(t),t.stx.changeOccurred("vector"),t.stx.undo(),t.stx.cancelTouchSingleClick=!0)}}function r(t){return function(i){if(i){switch(window.event?event.keyCode:i.keyCode){case 27:return void t.stx.undo()}}var n=t.stx,r=t.ta,a=n.controls.annotationSave,o=n.controls.annotationCancel,s=r.value.split("\n"),l=0;n.chart.context.font=t.fontString;for(var h=0;h<s.length;h++){var c=n.chart.context.measureText(s[h]).width;c>l&&(l=c)}var u=(s.length+1)*(t.fontSize+3);l<50&&(l=50),r.style.width=l+30+"px",r.style.height=u+"px";var d=parseInt(e.stripPX(r.style.top),10),p=e.stripPX(r.style.left);l=r.clientWidth,u=r.clientHeight,p+l+100<t.stx.chart.canvasWidth?(a.style.top=d+"px",o.style.top=d+"px",a.style.left=p+l+10+"px",o.style.left=p+l+60+"px"):d+u+30<t.stx.chart.canvasHeight?(a.style.top=d+u+10+"px",o.style.top=d+u+10+"px",a.style.left=p+"px",o.style.left=p+50+"px"):(a.style.top=d-35+"px",o.style.top=d-35+"px",a.style.left=p+"px",o.style.left=p+50+"px")}}var a=this.stx.panels[this.panelName];if(a){this.stx.editingAnnotation=!0,this.stx.undisplayCrosshairs(),this.stx.openDialog="annotation",this.ta||(this.ta=document.createElement("TEXTAREA"),this.ta.className="stx_annotation",this.ta.onkeyup=r(this),this.ta.onmouseup=t(this.stx),this.ta.setAttribute("wrap","hard"),e.isIOS7or8&&this.ta.setAttribute("placeholder","Enter Text"),this.stx.chart.container.appendChild(this.ta),this.ta.style.position="absolute",this.ta.style.width="100px",this.ta.style.height="20px",e.ipad&&(this.ta.ontouchstart=function(t){t.stopPropagation()}));var o=this;if(this.ta.oninput=function(t){o.onChange(t)},this.ta.style.font=this.fontString,this.color)if("transparent"==this.color||"auto"==this.color){var s=getComputedStyle(this.ta);s&&e.isTransparent(s.backgroundColor)?this.ta.style.color=this.stx.defaultColor:this.ta.style.color="#000"}else this.ta.style.color=this.color;var l=this.stx.pixelFromTick(this.p0[0],a.chart),h=this.stx.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]);if(this.ta.style.left=l+140<this.stx.chart.canvasRight?l+"px":this.stx.chart.canvasRight-200+"px",this.ta.style.top=h+60<this.stx.chart.canvasHeight?h+"px":h-60+"px","callout"==this.name&&(this.ta.style.left=l-(isNaN(this.w)?this.defaultWidth:this.w/2)+"px",this.ta.style.top=h-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px"),this.stx.controls.annotationSave.style.display="inline-block",this.stx.controls.annotationCancel.style.display="inline-block",e.safeClickTouch(this.stx.controls.annotationSave,n(this)),e.safeClickTouch(this.stx.controls.annotationCancel,i(this)),r(this)(),this.ta.focus(),e.isAndroid&&!e.is_chrome){this.priorBottom=this.stx.chart.container.style.bottom;var c=400,u=this.stx.resolveY(h)+100;if(u>e.pageHeight()-c){var d=e.pageHeight()-u,p=c-d;this.stx.chart.container.style.bottom=p+"px"}}}},e.Drawing.annotation.prototype.click=function(t,e,i){if(!this.stx.overXAxis&&!this.stx.overYAxis){var n=this.stx.panels[this.panelName];return this.copyConfig(),this.getFontString(),this.setPoint(0,e,i,n.chart),this.adjust(),this.edit(t),!1}},e.Drawing.annotation.prototype.reposition=function(t,e,i,n){if(e){var r=this.stx.panels[this.panelName],a=e.tick-i,o=e.value-n;this.setPoint(0,e.p0[0]-a,e.p0[1]-o,r.chart),this.render(t)}},e.Drawing.annotation.prototype.intersected=function(t,i){var n=this.stx.panels[this.panelName];if(!this.p0)return null;var r=this.stx.pixelFromTick(this.p0[0],n.chart),a=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[1]),o=r+this.w,s=a+this.h;this.stem&&this.stem.x&&(r+=this.stem.x,o+=this.stem.x,a+=this.stem.y,s+=this.stem.y);var l=this.stx.pixelFromTick(t,n.chart),h=this.stx.pixelFromValueAdjusted(n,t,i);return l>=r&&l<=o&&h>=a&&h<=s&&(this.highlighted=!0,{p0:e.clone(this.p0),tick:t,value:i})},e.Drawing.annotation.prototype.abort=function(){this.stx.controls.annotationSave.style.display="none",this.stx.controls.annotationCancel.style.display="none",this.ta&&this.stx.chart.container.removeChild(this.ta),this.ta=null,this.stx.openDialog="",this.stx.showCrosshairs(),this.stx.editingAnnotation=!1,e.clearCanvas(this.stx.chart.tempCanvas,this.stx),e.isAndroid&&!e.is_chrome&&(this.stx.chart.container.style.bottom=this.priorBottom),e.fixScreen()},e.Drawing.annotation.prototype.reconstruct=function(t,i){this.stx=t,this.color=i.col,this.panelName=i.pnl,this.d0=i.d0,this.tzo0=i.tzo0,this.v0=i.v0,this.text=unescape(i.text),this.stem=i.stem,this.borderColor=i.bc,this.fillColor=i.bg,this.lineWidth=i.lw,this.pattern=i.ptrn,this.font=e.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},e.Drawing.annotation.prototype.serialize=function(){var t={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,text:escape(this.text)};if(this.font){var i=e.removeNullValues(e.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"}));e.isEmpty(i)||(t.fnt=i)}return this.stem&&(t.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(t.bc=this.borderColor),this.fillColor&&(t.bg=this.fillColor),this.lineWidth&&(t.lw=this.lineWidth),this.pattern&&(t.ptrn=this.pattern),t},e.Drawing.annotation.prototype.adjust=function(){this.getFontString();var t=this.stx.panels[this.panelName];if(t){this.setPoint(0,this.d0,this.v0,t.chart),this.arr=this.text.split("\n");var i=0;this.stx.chart.context.font=this.fontString;for(var n=0;n<this.arr.length;n++){var r=this.stx.chart.context.measureText(this.arr[n]).width;r>i&&(i=r)}0===i&&(i=2*this.defaultWidth),this.fontSize=e.stripPX(this.fontDef.size);var a=this.arr.length*this.fontSize;e.touchDevice&&(a+=5),this.w=i+2*this.padding,this.h=a+2*this.padding;var o=this.stx.pixelFromTick(this.p0[0],t.chart)+i,s=this.stx.pixelFromPrice(this.p0[1],t)+a;this.p1=[this.stx.tickFromPixel(o,t.chart),this.stx.valueFromPixel(s,t)],this.stem&&this.stem.d&&(this.stem.t=this.stx.tickFromDate(this.stem.d,t.chart))}},e.Drawing.segment=function(){this.name="segment"},e.Drawing.segment.ciqInheritsFrom(e.Drawing.BaseTwoPoint),e.Drawing.segment.prototype.render=function(t){var n=this.stx.panels[this.panelName];if(n){var r=this.stx.pixelFromTick(this.p0[0],n.chart),a=this.stx.pixelFromTick(this.p1[0],n.chart),o=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(n,this.p1[0],this.p1[1]),l=this.color;("auto"==l||e.isTransparent(l))&&(l=this.stx.defaultColor);var h=this.lineWidth;this.highlighted&&(l=this.stx.getCanvasColor("stx_highlight_vector"));var c={pattern:this.pattern,lineWidth:h};if(this.stx.plotLine(r,a,o,s,l,this.name,t,n,c),this.axisLabel&&!this.highlighted)if("horizontal"==this.name){this.stx.endClip();var u=this.p0[1];n.chart.transformFunc&&(u=n.chart.transformFunc(this.stx,n.chart,u)),u=n.yAxis.priceFormatter?n.yAxis.priceFormatter(this.stx,n,u):this.stx.formatYAxisPrice(u,n),this.stx.createYAxisLabel(n,u,o,l),this.stx.startClip(n.name)}else if("vertical"==this.name&&this.p0[0]>=0&&!e.ChartEngine.hideDates()){var d,p;if(d=this.stx.dateFromTick(this.p0[0],n.chart,!0),this.stx.isDailyInterval(this.stx.layout.interval))d.setHours(0,0,0,0);else{var f=1e3*d.getSeconds()+d.getMilliseconds();this.stx.dataZone&&(p=new i.Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),this.stx.dataZone),d=new Date(p.getTime()+f)),this.stx.displayZone&&(p=new i.Date(d.getTime(),this.stx.displayZone),d=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes()),d=new Date(d.getTime()+f))}var m=e.mmddhhmm(e.yyyymmddhhmm(d));if(n.chart.xAxis.formatter)m=n.chart.xAxis.formatter(d);else if(this.stx.internationalizer){var g;0!==d.getHours()||0!==d.getMinutes()?(g=this.stx.internationalizer.monthDay.format(d),g+=" "+this.stx.internationalizer.hourMinute.format(d)):g=this.stx.internationalizer.yearMonthDay.format(d),m=g}this.stx.endClip(),this.stx.createXAxisLabel(n,m,r,l,null,!0),this.stx.startClip(n.name)}if(this.highlighted&&"horizontal"!=this.name&&"vertical"!=this.name){var v="p0"==this.highlighted,y="p1"==this.highlighted;this.littleCircle(t,r,o,v),this.littleCircle(t,a,s,y)}}},e.Drawing.segment.prototype.abort=function(){this.stx.setMeasure(null,null,null,null,!1)},e.Drawing.segment.prototype.intersected=function(t,i,n){if(!this.p0||!this.p1)return null;if("horizontal"!=this.name&&"vertical"!=this.name&&"gartley"!=this.name){if(this.pointIntersection(this.p0[0],this.p0[1],n))return this.highlighted="p0",{action:"drag",point:"p0"};if(this.pointIntersection(this.p1[0],this.p1[1],n))return this.highlighted="p1",{action:"drag",point:"p1"}}return this.lineIntersection(t,i,n,this.name)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:i}):null},e.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],e.Drawing.segment.prototype.copyConfig=function(){e.Drawing.copyConfig(this),"none"==this.pattern&&(this.pattern="solid")},e.Drawing.segment.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.adjust()},e.Drawing.segment.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},e.Drawing.continuous=function(){this.name="continuous",this.dragToDraw=!1,this.maxSegments=null},e.Drawing.continuous.ciqInheritsFrom(e.Drawing.segment),e.Drawing.continuous.prototype.click=function(t,i,n){var r=this.stx.panels[this.panelName];if(r){if(this.copyConfig(),!this.penDown)return this.setPoint(0,i,n,r.chart),this.penDown=!0,!1;if(this.accidentalClick(i,n))return this.stx.undo(),!0;this.setPoint(1,i,n,r.chart);var a=e.Drawing.segment,o=new a,s=this.serialize(this.stx);return o.reconstruct(this.stx,s),(this.stx.addDrawing(o),this.stx.changeOccurred("vector"),this.stx.draw(),this.segment++,this.maxSegments&&this.segment>this.maxSegments)?!0:(this.setPoint(0,i,n,r.chart),!1)}},e.Drawing.line=function(){this.name="line"},e.Drawing.line.prototype.dragToDraw=!1,e.Drawing.line.ciqInheritsFrom(e.Drawing.segment),e.Drawing.line.prototype.calculateOuterSet=function(t){if(this.p0[0]!=this.p1[0]&&this.p0[1]!=this.p1[1]&&!this.stx.isDailyInterval(this.stx.layout.interval)){var i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]}
;i.x0>i.x1&&(i={x0:this.p1[0],y0:this.p1[1],x1:this.p0[0],y1:this.p0[1]});var n=i.x0-1e3,r=i.x1+1e3;this.v0B=e.yIntersection(i,n),this.v1B=e.yIntersection(i,r),this.d0B=this.stx.dateFromTick(n,t.chart),this.d1B=this.stx.dateFromTick(r,t.chart)}},e.Drawing.line.prototype.click=function(t,e,i){var n=this.stx.panels[this.panelName];if(n)return this.copyConfig(),this.penDown?(this.setPoint(1,e,i,n.chart),this.calculateOuterSet(n),this.penDown=!1,!0):(this.setPoint(0,e,i,n.chart),this.penDown=!0,!1)},e.Drawing.line.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.v0=e.v0,this.v1=e.v1,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,e.d0B&&(this.d0B=e.d0B,this.d1B=e.d1B,this.v0B=e.v0B,this.v1B=e.v1B),this.adjust()},e.Drawing.line.prototype.serialize=function(){var t={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1};return this.d0B&&(t.d0B=this.d0B,t.d1B=this.d1B,t.v0B=this.v0B,t.v1B=this.v1B),t},e.Drawing.line.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.stx.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,t.chart),this.setPoint(1,this.d1B,this.v1B,t.chart)))},e.Drawing.ray=function(){this.name="ray"},e.Drawing.ray.ciqInheritsFrom(e.Drawing.line),e.Drawing.ray.prototype.calculateOuterSet=function(t){if(this.p0[0]!=this.p1[0]&&this.p0[1]!=this.p1[1]&&!this.stx.isDailyInterval(this.stx.layout.interval)){var i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]},n=i.x1+1e3;i.x0>i.x1&&(n=i.x1-1e3),this.v0B=this.v0,this.v1B=e.yIntersection(i,n),this.d0B=this.d0,this.d1B=this.stx.dateFromTick(n,t.chart)}},e.Drawing.ray.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.stx.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,t.chart))},e.Drawing.horizontal=function(){this.name="horizontal"},e.Drawing.horizontal.prototype.dragToDraw=!1,e.Drawing.horizontal.ciqInheritsFrom(e.Drawing.segment),e.Drawing.horizontal.prototype.measure=function(){},e.Drawing.horizontal.prototype.click=function(t,e,i){var n=this.stx.panels[this.panelName];if(n)return this.copyConfig(),this.setPoint(0,e,i,n.chart),!0},e.Drawing.horizontal.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.v0=e.v0,this.d0=e.d0,this.tzo0=e.tzo0,this.axisLabel=e.al,this.adjust()},e.Drawing.horizontal.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel}},e.Drawing.horizontal.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.p1=[this.p0[0]+100,this.p0[1]])},e.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],e.Drawing.horizontal.prototype.copyConfig=function(){e.Drawing.copyConfig(this),"none"==this.pattern&&(this.pattern="solid")},e.Drawing.vertical=function(){this.name="vertical"},e.Drawing.vertical.ciqInheritsFrom(e.Drawing.horizontal),e.Drawing.vertical.prototype.measure=function(){},e.Drawing.vertical.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.p1=[this.p0[0],this.p0[1]+1])},e.Drawing.measure=function(){this.name="measure"},e.Drawing.measure.ciqInheritsFrom(e.Drawing.segment),e.Drawing.measure.prototype.click=function(t,e,i){return this.copyConfig(),this.penDown?(this.stx.undo(),this.penDown=!1,!0):(this.p0=[e,i],this.penDown=!0,!1)},e.Drawing.rectangle=function(){this.name="rectangle"},e.Drawing.rectangle.ciqInheritsFrom(e.Drawing.BaseTwoPoint),e.Drawing.rectangle.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),s=Math.round(Math.min(n,r))+.5,l=Math.min(a,o),h=Math.max(n,r)-s,c=Math.max(a,o)-l,u=this.color;this.highlighted&&(u=this.stx.getCanvasColor("stx_highlight_vector"));var d=this.fillColor;d&&!e.isTransparent(d)&&"auto"!=d&&(t.beginPath(),t.rect(s,l,h,c),t.fillStyle=d,t.globalAlpha=.2,t.fill(),t.closePath(),t.globalAlpha=1);var p={pattern:this.pattern,lineWidth:this.lineWidth};if(this.highlighted&&"none"==p.pattern&&(p.pattern="solid",.1==p.lineWidth&&(p.lineWidth=1)),this.stx.plotLine(n,r,a,a,u,"segment",t,i,p),this.stx.plotLine(r,r,a-.5,o+.5,u,"segment",t,i,p),this.stx.plotLine(r,n,o,o,u,"segment",t,i,p),this.stx.plotLine(n,n,o+.5,a-.5,u,"segment",t,i,p),this.highlighted){var f="p0"==this.highlighted,m="p1"==this.highlighted;this.littleCircle(t,n,a,f),this.littleCircle(t,r,o,m)}}},e.Drawing.rectangle.prototype.intersected=function(t,i,n){return this.p0&&this.p1?this.pointIntersection(this.p0[0],this.p0[1],n)?(this.highlighted="p0",{action:"drag",point:"p0"}):this.pointIntersection(this.p1[0],this.p1[1],n)?(this.highlighted="p1",{action:"drag",point:"p1"}):this.boxIntersection(t,i)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:i}):null:null},e.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.rectangle.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.adjust()},e.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},e.Drawing.ellipse=function(){this.name="ellipse"},e.Drawing.ellipse.ciqInheritsFrom(e.Drawing.BaseTwoPoint),e.Drawing.ellipse.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),s=n-(r-n),l=r,h=a,c=o,u=a-(o-a),d=(c-u)/6,p=this.lineWidth;p||(p=1.1);var f=this.color;("auto"==f||e.isTransparent(f))&&(f=this.stx.defaultColor),this.highlighted&&(f=this.stx.getCanvasColor("stx_highlight_vector"),.1==p&&(p=1.1));var m=this.fillColor;if(t.beginPath(),t.moveTo(s,h),t.bezierCurveTo(s,c+d,l,c+d,l,h),t.bezierCurveTo(l,u-d,s,u-d,s,h),m&&!e.isTransparent(m)&&"auto"!=m&&(t.fillStyle=m,t.globalAlpha=.2,t.fill(),t.globalAlpha=1),f&&"none"!=this.pattern){if(t.strokeStyle=f,t.lineWidth=p,t.setLineDash){var g=[];"dotted"==this.pattern?g=[p,p]:"dashed"==this.pattern&&(g=[5*p,5*p]),t.setLineDash(g),t.lineDashOffset=0}t.stroke()}if(t.closePath(),this.highlighted){var v="p1"==this.highlighted;this.littleCircle(t,r,o,v)}}},e.Drawing.ellipse.prototype.intersected=function(t,i,n){if(!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],n))return this.highlighted="p1",{action:"drag",point:"p1"};var r=this.p0[0]-(this.p1[0]-this.p0[0]),a=this.p1[0],o=this.p1[1],s=this.p0[1]-(this.p1[1]-this.p0[1]);return!(t>Math.max(r,a)||t<Math.min(r,a))&&(!(i>Math.max(s,o)||i<Math.min(s,o))&&(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:i}))},e.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.ellipse.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.adjust()},e.Drawing.ellipse.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},e.Drawing.fibonacci=function(){this.name="fibonacci",this.configurator="fibonacci"},e.Drawing.fibonacci.ciqInheritsFrom(e.Drawing.BaseTwoPoint),e.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz"},e.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth","parameters"],e.Drawing.fibonacci.prototype.setOuter=function(){this.outer={p0:e.clone(this.p0),p1:e.clone(this.p1)};for(var t=this.p0[1],i=this.p1[1],n=this.p0[0],r=this.p1[0],a=Math.min(i,t),o=Math.max(i,t),s=o-a,l=(i-t)/(r-n)>0,h=0,c=1,u=0;u<this.parameters.fibs.length;u++){var d=this.parameters.fibs[u];if(!(d.level>=h&&d.level<=c)&&d.display){var p=l?o-s*d.level:a+s*d.level,f=e.xIntersection({x0:n,x1:r,y0:t,y1:i},p);d.level<h?(h=d.level,l?(this.outer.p0[1]=p,this.outer.p0[0]=f):(this.outer.p1[1]=p,this.outer.p1[0]=f)):d.level>c&&(c=d.level,l?(this.outer.p1[1]=p,this.outer.p1[0]=f):(this.outer.p0[1]=p,this.outer.p0[0]=f))}}},e.Drawing.fibonacci.prototype.click=function(t,i,n){var r=this.stx.panels[this.panelName];if(r)return this.copyConfig(),this.penDown?this.accidentalClick(i,n)?this.dragToDraw:(this.setPoint(1,i,n,r.chart),this.setOuter(),this.parameters=e.clone(this.parameters),this.penDown=!1,!0):(this.setPoint(0,i,n,r.chart),this.penDown=!0,!1)},e.Drawing.fibonacci.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=i.yAxis;if(this.p1){var r=Math.max(this.p0[1],this.p1[1]),a=Math.min(this.p0[1],this.p1[1]),o=r-a,s=this.stx.pixelFromTick(this.p0[0],i.chart),l=this.stx.pixelFromTick(this.p1[0],i.chart),h=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),c=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),u=Math.min(c,h),d=Math.max(c,h),p=d-u,f=(c-h)/(l-s)>0,m={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}};this.parameters.trend||(this.parameters.trend=m);var g=this.parameters.trend.color;("auto"==g||e.isTransparent(g))&&(g=this.stx.defaultColor),this.highlighted&&(g=this.stx.getCanvasColor("stx_highlight_vector")),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t);var v=t.measureText("161.8%").width+10,y=Number.MAX_VALUE,x=Number.MAX_VALUE,b=-1*Number.MAX_VALUE,C=-1*Number.MAX_VALUE,w=this.color;("auto"==w||e.isTransparent(w))&&(w=this.stx.defaultColor);for(var S=0;S<this.parameters.fibs.length;S++){t.textAlign="left",t.fillStyle=w;var T=this.parameters.fibs[S],D=this.stx.pixelFromValueAdjusted(i,this.p0[0],c<h?r-o*T.level:a+o*T.level),M=e.xIntersection({x0:s,x1:l,y0:h,y1:c},D),k=this.parameters.extendLeft?0:M,_=this.stx.chart.left+this.stx.chart.width;if(this.parameters.printLevels){var E=Math.round(1e3*T.level)/10+"%";_-=v,this.parameters.printValues&&(t.fillStyle=w,this.stx.canvasFont("stx_yaxis",t)),_<k&&(t.textAlign="right"),t.fillText(E,_,D),_<k?_+=5:_-=5}if(this.parameters.printValues&&M<this.stx.chart.width){var A=this.stx.valueFromPixel(D,i);A=n.priceFormatter?n.priceFormatter(this.stx,i,A):this.stx.formatYAxisPrice(A,i),t==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,A,D,w,null,t),t==this.stx.chart.context&&this.stx.startClip(i.name)}var I=T.color;("auto"==I||e.isTransparent(I))&&(I=this.color),("auto"==I||e.isTransparent(I))&&(I=this.stx.defaultColor);var P=T.color;("auto"==P||e.isTransparent(P))&&(P=this.fillColor),("auto"==P||e.isTransparent(P))&&(P=this.stx.defaultColor),t.fillStyle=P,this.stx.plotLine(k,_,D,D,I,"segment",t,i,T.parameters),t.globalAlpha=.05,t.beginPath(),t.moveTo(_,D),t.lineTo(k,D),k?t.lineTo(Math.max(s,l),f?d:u):t.lineTo(k,f?d:u),t.lineTo(_,f?d:u),void 0!==P&&t.fill(),t.globalAlpha=1,D<x&&(y=M,x=D),D>C&&(b=M,C=D)}for(var F in{0:0,1:1}){var L=f?d-p*F:u+p*F;L=Math.round(L),L<x&&(y=e.xIntersection({x0:s,x1:l,y0:h,y1:c},L),x=L),L>C&&(b=e.xIntersection({x0:s,x1:l,y0:h,y1:c},L),C=L)}if(this.stx.plotLine(y,b,x,C,g,"segment",t,i,this.parameters.trend.parameters),this.highlighted){var H="p0"==this.highlighted,N="p1"==this.highlighted;this.littleCircle(t,s,h,H),this.littleCircle(t,l,c,N)}}}},e.Drawing.fibonacci.prototype.reposition=function(t,i){i&&(e.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},e.Drawing.fibonacci.prototype.intersected=function(t,i,n){return this.p0&&this.p1&&e.boxIntersects(n.x0,n.y0,n.x1,n.y1,this.outer.p0[0],this.outer.p0[1],this.outer.p1[0],this.outer.p1[1],"segment")?this.pointIntersection(this.p0[0],this.p0[1],n)?(this.highlighted="p0",{action:"drag",point:"p0"}):this.pointIntersection(this.p1[0],this.p1[1],n)?(this.highlighted="p1",{action:"drag",point:"p1"}):(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:i}):null},e.Drawing.fibonacci.prototype.reconstruct=function(t,i){i=e.replaceFields(i,e.reverseObject(e.Drawing.fibonacci.mapping)),this.stx=t,this.parameters=i.parameters,this.parameters||(this.parameters=e.clone(this.stx.currentVectorParameters.fibonacci)),this.color=i.col,this.fillColor=i.fc,this.panelName=i.pnl,this.d0=i.d0,this.d1=i.d1,this.tzo0=i.tzo0,this.tzo1=i.tzo1,this.v0=i.v0,this.v1=i.v1,this.adjust()},e.Drawing.fibonacci.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setOuter())},e.Drawing.fibonacci.prototype.serialize=function(){var t={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1};return e.replaceFields(t,e.Drawing.fibonacci.mapping)},e.Drawing.retracement=function(){this.name="retracement"},e.Drawing.retracement.ciqInheritsFrom(e.Drawing.fibonacci),e.Drawing.getDrawingToolList=function(t){var i={},n={ciqInheritsFrom:!0,stxInheritsFrom:!0,copyConfig:!0,getDrawingParameters:!0,getDrawingToolList:!0,BaseTwoPoint:!0,shape:!0};e.extend(n,t);for(var r in e.Drawing)n[r]||(i[(new e.Drawing[r]).name]=r);return i},t},__js_i18n_=function(t){var e=t.CIQ,i=t.$$;return e.I18N=function(){},e.I18N.hereDoc=function(t){return t.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")},e.I18N.language="en",e.I18N.longMonths={zh:!0,ja:!0},e.I18N.findAllTextNodes=function(t){if(t||(t=document.body),t==document.body&&!i("stashedTextNodes")){var n=document.createElement("div");n.id="stashedTextNodes",n.style.display="none",t.appendChild(n);for(var r=document.querySelectorAll("input,textarea,.editable_content"),a=0;a<r.length;a++){var o=r[a].getAttribute("placeholder");if(o){var s=n.appendChild(document.createElement("translate"));s.setAttribute("original",o),s.placeholderFor=r[a],s.appendChild(document.createTextNode(o))}}}for(var l=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),h=l.nextNode(),c=new RegExp("^\\s*$"),u={},d={SCRIPT:!0,STYLE:!0};h;){var p=h.nodeValue;if(!c.test(p)){var f=h.parentNode,m=f.tagName;if(!d[m]){if("TRANSLATE"!=m){var g=f.insertBefore(document.createElement("translate"),h);g.setAttribute("original",p),g.appendChild(h)}else p=f.getAttribute("original");u[p]||(u[p]=[]),u[p].push(h)}}h=l.nextNode()}if(t==document.body){var v=e.Studies?e.Studies.studyLibrary:null;if(v)for(var y in v){null===u[y]&&(u[y]=[]);var x=v[y];if(x.inputs)for(var b in x.inputs)u[b]||(u[b]=[]);if(x.outputs)for(var C in x.outputs)u[C]||(u[C]=[])}}return u},e.I18N.missingWordList=function(t){t||(t=e.I18N.language);var i=e.I18N.findAllTextNodes(),n={},r=e.I18N.wordLists[t];r||(r={});for(var a in i)"undefined"==typeof r[a]&&(n[a]="");return n},e.I18N.printableMissingWordList=function(t){var i=JSON.stringify(e.I18N.missingWordList(t));return i=i.replace(/","/g,'",\n"')},e.I18N.translateUI=function(t,i){if(e.I18N.wordLists){t||(t=e.I18N.language);var n=e.I18N.findAllTextNodes(i),r=e.I18N.wordLists[t];if(r)for(var a in n)for(var o=r[a],s=n[a],l=0;l<s.length;l++){var h=s[l],c=h.parentNode,u=c.getAttribute("original");o||(o=u);var d=c.placeholderFor;d?d.placeholder=o:h.data=o}}},e.I18N.translate=function(t,i){if(i||(i=e.I18N.language),!e.I18N.wordLists)return console.log("Must include translations.js in order to use CIQ.I18N.translate()"),t;var n=e.I18N.wordLists[i],r=null;return n&&(r=n[t]),r||t},e.I18N.convertCSV=function(t){var i=e.I18N.wordLists;t||(t=e.I18N.csv);for(var n=t.split("\n"),r=n[0],a=r.split(","),o=0;o<a.length;o++){var s=a[o];i[s]||(i[s]={})}for(var l=1;l<n.length;l++)for(var h=n[l].match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g)||[],c=h[0],u=1;u<h.length;u++)i[a[u]][c]=h[u]},e.I18N.setLanguage=function(t,i,n,r,a){e.I18N.convertCSV(r),e.I18N.language=i,e.I18N.translateUI(i,a),n||(n=e.I18N.translate),t.translationCallback=n},e.I18N.setLocale=function(t,e,i,n,r){if(!Intl.__addLocaleData)return t.setLocale(e,r),void(i&&i(null));n=void 0===n?"locale-data/jsonp":n;var a=n+"/"+e+".js",o=document.createElement("SCRIPT");o.async=!0,o.src=a;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(o,s.nextSibling),o.onload=function(){t.setLocale(e,r),i&&i(null)},o.onerror=function(){i&&i("cannot load script")}},e.I18N.createMonthArrays=function(t,i,n){t.monthAbv=[],t.monthLetters=[];var r=new Date,a=!0;e.I18N.longMonths&&e.I18N.longMonths[n]&&(a=!1);for(var o=0;o<12;o++){r.setDate(1),r.setMonth(o);var s=i.format(r);if(a){for(var l="",h=0;h<s.length;h++){var c=s.charAt(h);c.charCodeAt(0)<65||(l+=c)}t.monthAbv[o]=l,t.monthLetters[o]=l[0]}else t.monthAbv[o]=s,t.monthLetters[o]=s}},t},__js_markers_=function(t){var e=t.CIQ;return e.ChartEngine.prototype.makeMarkerHelper=function(){this.markerHelper={chartMap:{},classMap:{}}},e.ChartEngine.prototype.addToHolder=function(t){var i=this.panels[t.params.panelName];if(i){e.derivedFrom(t.params.node,e.Marker.NodeCreator)?(t.stxNodeCreator=t.params.node,t.node=t.stxNodeCreator.node):t.node=t.params.node,this.markerHelper||this.makeMarkerHelper(),t.params.chartContainer?this.container.appendChild(t.node):t.params.includeAxis?i.holder.appendChild(t.node):i.subholder.appendChild(t.node);var n=t.params.label;this.markers[n]||(this.markers[n]=[]),this.markers[n].push(t),t.chart=i.chart,this.markerHelper.chartMap[t.chart.name]||(this.markerHelper.chartMap[t.chart.name]={dataSetLength:0,markers:[]}),this.markerHelper.chartMap[t.chart.name].markers.push(t),t.className||console.log("Marker objects must have a member className");var r=this.markerHelper.classMap[t.className];r||(r=this.markerHelper.classMap[t.className]={}),r[t.params.panelName]||(r[t.params.panelName]=[]),r[t.params.panelName].push(t),this.setMarkerTick(t)}},e.ChartEngine.prototype.getMarkerArray=function(t,e){var i=[];for(var n in this.markers)for(var r=0;r<this.markers[n].length;r++){var a=this.markers[n][r];"panelName"==t?a.params.panelName==e&&i.push(a):"label"==t?n==e&&i.push(a):"all"==t&&i.push(a)}return i},e.ChartEngine.prototype.removeFromHolder=function(t){var e=this.panels[t.params.panelName];e&&(t.node.parentNode==e.holder?e.holder.removeChild(t.node):t.node.parentNode==e.subholder?e.subholder.removeChild(t.node):t.node.parentNode==this.container&&this.container.removeChild(t.node));var i=this.markers[t.params.label];if(i){var n;for(n=0;n<i.length;n++)if(i[n]===t){i.splice(n,1);break}var r=this.markerHelper.chartMap[t.chart.name];if(r)for(n=0;n<r.markers.length;n++)if(r.markers[n]===t){r.markers.splice(n,1);break}var a=this.markerHelper.classMap[t.className];if(a){var o=a[t.params.panelName];if(o)for(n=0;n<o.length;n++)if(o[n]===t){o.splice(n,1);break}}}},e.ChartEngine.prototype.moveMarkers=function(t,e){for(var i=this.getMarkerArray("panelName",t),n=0;n<i.length;n++)i[n].params.panelName=e;for(var r in this.markerHelper.classMap){var a=this.markerHelper.classMap[r][t];a&&(this.markerHelper.classMap[r][e]=a,delete this.markerHelper.classMap[r][t])}},e.ChartEngine.prototype.establishMarkerTicks=function(){this.markerHelper||this.makeMarkerHelper();var t=this.markerHelper.chartMap;for(var e in t){var i=t[e];if(i.dataSetLength!=this.charts[e].dataSet.length)for(var n=0;n<i.markers.length;n++)this.setMarkerTick(i.markers[n])}},e.ChartEngine.prototype.futureTickIfDisplayed=function(t){var e=t.chart;if(!(e.dataSet.length<1)){var i=e.xaxis[e.xaxis.length-1].DT;if(i=new Date(i.getTime()-6e4*this.timeZoneOffset),!(t.params.x>i))for(var n,r,a=e.maxTicks-e.dataSegment.length,o=e.dataSet.length+a,s=new Date(+e.dataSet[e.dataSet.length-1].DT),l=this.standardMarketIterator(s,null,e),h=t.params.x.getTime(),c=e.dataSet.length;c<o;c++){if(n=s.getTime(),s=l.next(),(r=s.getTime())==h)return void(t.tick=c);if(r>h&&n<h)return void(t.tick=Math.max(c-1,0))}}},e.ChartEngine.prototype.setMarkerTick=function(t){var e=t.chart;if("master"==t.params.xPositioner&&t.params.x)return void(t.tick=Math.floor(t.params.x/this.layout.periodicity));if("date"==t.params.xPositioner&&t.params.x){for(var i,n,r=t.params.x.getTime(),a=0;a<e.dataSet.length;a++){if(n=e.dataSet[a].DT.getTime(),i=n,a>0&&(i=e.dataSet[a-1].DT.getTime()),n==r)return void(t.tick=a);if(n>r&&i<r)return void(t.tick=Math.max(a-1,0));if(r<n)return void(t.tick=null)}if(e.dataSet.length<1)return;new Date(+e.dataSet[a-1].DT).getTime()<r&&(t.params.future=!0),t.tick=null}},e.ChartEngine.prototype.positionMarkers=function(){function t(){if(!e.runPrepend("positionMarkers",arguments)){e.markerTimeout=null;for(var t in e.markerHelper.classMap)for(var i in e.markerHelper.classMap[t]){var n=e.markerHelper.classMap[t][i],r=e.panels[i];if(n.length){var a={stx:e,arr:n,panel:r};a.firstTick=r.chart.dataSet.length-r.chart.scroll,a.lastTick=a.firstTick+r.chart.dataSegment.length;var o=n[0].constructor.placementFunction;o?o(a):e.defaultMarkerPlacement(a)}}e.runAppend("positionMarkers",arguments)}}var e=this;e.markerHelper&&(this.markerDelay||0===this.markerDelay?this.markerTimeout||(this.markerTimeout=setTimeout(t,this.markerDelay)):t())},e.Marker=function(t){if(this.params={xPositioner:"date",yPositioner:"value",panelName:"chart",permanent:!1,label:"generic",includeAxis:!1},e.extend(this.params,t),this.params.node||(this.params.node=document.createElement("DIV")),!this.params.stx)return void console.log("Marker created without specifying stx");this.className||(this.className="CIQ.Marker"),this.params.stx.addToHolder(this)},e.Marker.prototype.remove=function(){this.params.stx.removeFromHolder(this)},e.Marker.prototype.render=function(){var t=[this],e={stx:this.params.stx,arr:t,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass};this.constructor.placementFunction(e)},e.Marker.removeByLabel=function(t,e){for(var i=t.getMarkerArray("label",e),n=0;n<i.length;n++)t.removeFromHolder(i[n])},e.ChartEngine.prototype.getBarBounds=function(t){var e,i=(this.layout.chartType,this.layout.aggregationType);return e="pandf"==i?{high:Math.max(t.pfOpen,t.pfClose),low:Math.min(t.pfOpen,t.pfClose)}:{high:t.High,low:t.Low},t.markerHigh&&(e.high=markerHigh),t.markerLow&&(e.low=markerLow),e},e.ChartEngine.prototype.defaultMarkerPlacement=function(t){var i=t.panel,n=t.yAxis?t.yAxis:t.panel.yAxis,r=i.chart,a=t.stx,o=e.ChartEngine.chartShowsHighs(a.layout.chartType),s=r.defaultPlotField;s&&!o||(s="Close");for(var l={},h=0;h<t.arr.length;h++){var c=t.arr[h],u=c.params,d=c.node;c.clientWidth||(c.clientWidth=d.clientWidth),c.clientHeight||(c.clientHeight=d.clientHeight);var p=null,f=u.xPositioner,m=u.yPositioner,g=c.tick,v=r.dataSet,y=c.clientWidth;if("none"!=f){if("bar"==f&&u.x){if(u.x<r.xaxis.length){var x=r.xaxis[u.x];x&&(p=x.data)}d.style.left=Math.round(a.pixelFromBar(u.x,r)-y/2)+1+"px"}else{if(!g&&0!==g){if(!(u.future&&r.scroll<r.maxTicks)){d.style.left="-1000px";continue}if(a.futureTickIfDisplayed(c),!(g=c.tick)&&0!==g){d.style.left="-1000px";continue}}if(g<v.length&&(p=v[g]),g<t.firstTick&&c.rightEdge<0)continue;c.leftpx=Math.round(a.pixelFromTick(g,r)-r.left-y/2),c.rightEdge=c.leftpx+y,d.style.left=c.leftpx+"px"}p||(p=v[v.length-1])}else if(m.indexOf("candle")>-1&&(left=getComputedStyle(d).left,left)){var b=a.barFromPixel(parseInt(left,10),r);b>=0&&((p=r.xaxis[b].data)||(p=v[v.length-1]))}var C,w=u.y,S=d.clientHeight;if("none"!=m){var T=u.chartContainer?a.height:i.yAxis.bottom,D=0,M=0;"undefined"==typeof l[d.style.left]&&(l[d.style.left]=0),M=l[d.style.left],l[d.style.left]+=S,"value"==m&&w?D=Math.round(T-a.pixelFromPriceTransform(w,i,n)-S/2)+"px":"under_candle"==m&&p?(C=p[s],o&&(C=a.getBarBounds(p).low),D=Math.round(T-a.pixelFromPriceTransform(C,i,n)-S-M)+"px"):"on_candle"==m&&p?(C=p[s],o&&(C=(p.Low+p.High)/2),D=Math.round(T-a.pixelFromPriceTransform(C,i,n)-S/2-M)+"px"):"top"==m?D=Math.round(T-S-M)+"px":"bottom"==m?D=Math.round(M)+"px":p&&(C=p[s],o&&(C=a.getBarBounds(p).high),D=Math.round(T-a.pixelFromPriceTransform(C,i,n)+M)+"px"),d.style.bottom!=D&&(d.style.bottom=D)}}},e.Marker.NodeCreator=function(){},e.Marker.NodeCreator.toNode=function(){return this.node},e.Marker.Simple=function(t){var i=this.node=document.createElement("div");i.className="stx-marker",e.appendClassName(i,t.type),t.category&&e.appendClassName(i,t.category);var n=e.newChild(i,"div","stx-visual");e.newChild(i,"div","stx-stem");var r;if("callout"==t.type){var a=e.newChild(n,"div","stx-marker-content");e.newChild(a,"h4",null,t.headline),r=e.newChild(a,"div","stx-marker-expand"),e.newChild(r,"p",null,t.story)}else r=e.newChild(i,"div","stx-marker-expand"),e.newChild(r,"h4",null,t.headline),e.newChild(r,"p",null,t.story),e.safeClickTouch(r,function(){e.toggleClassName(i,"highlight")});e.safeClickTouch(n,function(){e.toggleClassName(i,"highlight")})},e.Marker.Simple.ciqInheritsFrom(e.Marker.NodeCreator,!1),t},__js_quoteFeed_=function(t){function e(){}var i=t.CIQ;return e.fetchInitialData=function(){},e.fetchUpdateData=function(){},e.fetchPaginationData=function(){},e.subscribe=function(){},e.unsubscribe=function(){},i.QuoteFeed=function(){},i.QuoteFeed.prototype.fetch=function(){this.v2QuoteFeed||console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()")},i.QuoteFeed.prototype.announceError=function(t,e){t.suppressErrors||e.suppressAlert||t.startDate||t.endDate||e.error},i.QuoteFeed.prototype.multiFetch=function(t,e){function n(t,e,i){return function(n){if(e.results.push({dataCallback:n,params:t}),++e.counter>=e.finished){var r=e.results;e.results=[],i(r)}}}0===t.length&&e([]);for(var r={counter:0,finished:t.length,results:[]},a=0;a<t.length;a++){var o=t[a];o.stx.isEquationChart(o.symbol)?i.fetchEquationChart(o,n(o,r,e)):i.ChartEngine.Driver.fetchData(i.QuoteFeed.SERIES,this,o,n(o,r,e))}},i.QuoteFeed.Subscriptions=function(){this.subscriptions=[]},i.QuoteFeed.Subscriptions.ciqInheritsFrom(i.QuoteFeed),i.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(t){for(var e,i,n=t.getSymbols(),r=0;r<this.subscriptions.length;r++)this.subscriptions[r].match=!1;for(var a=0;a<n.length;a++){i=n[a];var o=i.interval;for("month"!=o&&"week"!=o||t.dontRoll||(o="day"),i.interval=o,i.period=1,i.match=!1,isNaN(i.interval)||(i.period=i.interval,i.interval=i.timeUnit,i.interval||(i.interval="minute")),delete i.periodicity,delete i.timeUnit,delete i.setSpan,r=0;r<this.subscriptions.length;r++)if(e=this.subscriptions[r],e.symbol==i.symbol){i.match=!0,e.match=!0;break}}var s=this;this.subscriptions=this.subscriptions.filter(function(t){return t.match||s.unsubscribe(t),t.match}),n.forEach(function(t){t.match||(s.subscribe(t),s.subscriptions.push(t))})},i.QuoteFeed.Subscriptions.prototype.fetch=function(t,e){var i=this;this.fetchFromSource(t,function(n){n.error||i.checkSubscriptions(t.stx),e(n)})},i.QuoteFeed.Subscriptions.prototype.subscribe=function(t){console.log("subscribe",t)},i.QuoteFeed.Subscriptions.prototype.unsubscribe=function(t){console.log("unsubscribe",t)},i.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(){console.log("Please provide implementation of fetchFromSource")},i.QuoteFeed.prototype.requiresImmediateRefresh=function(){return!1},i.ChartEngine.prototype.attachQuoteFeed=function(t,e){if(e||(e={}),this.quoteDriver&&this.quoteDriver.die(),"function"!=typeof t.fetchInitialData&&"function"!=typeof t.fetchUpdateData&&"function"!=typeof t.fetchPaginationData)return void(this.quoteDriver=new i.ChartEngine.Driver(this,t,e));"function"!=typeof t.fetchPaginationData&&"function"!=typeof t.fetchUpdateData&&(e.noLoadMore=!0),t.v2QuoteFeed=!0,t.multiFetch=i.QuoteFeed.prototype.multiFetch,t.announceError=i.QuoteFeed.prototype.announceError,t.requiresImmediateRefresh=i.QuoteFeed.prototype.requiresImmediateRefresh,"function"==typeof t.subscribe&&(t.checkSubscriptions=i.QuoteFeed.Subscriptions.prototype.checkSubscriptions,t.subscriptions=[]),this.quoteDriver=new i.ChartEngine.Driver(this,t,e)},i.ChartEngine.prototype.attachEngineQuoteFeed=function(t,e){this.attachQuoteFeed(t,e)},i.ChartEngine.prototype.attachTagAlongQuoteFeed=function(t){if(!t.label)return void console.log("Attempt to attachTagAlongQuoteFeed without assigning a label");this.quoteDriver.attachTagAlongQuoteFeed(t)},i.ChartEngine.prototype.detachTagAlongQuoteFeed=function(t){if(!t.label)return void console.log("Attempt to detachTagAlongQuoteFeed without assigning a label");this.quoteDriver.detachTagAlongQuoteFeed(t)},i.ChartEngine.Driver=function(t,e,i){this.tagalongs={},this.stx=t,this.quoteFeed=e,this.behavior=i,this.loadingNewChart=!1,this.intervalTimer=null,this.updatingChart=!1,this.updateChartLoop()},i.ChartEngine.Driver.prototype.die=function(){this.intervalTimer&&(window.clearInterval(this.intervalTimer),this.intervalTimer=-1)},i.ChartEngine.Driver.prototype.updateSubscriptions=function(){this.quoteFeed.checkSubscriptions&&this.quoteFeed.checkSubscriptions(this.stx)},i.ChartEngine.Driver.prototype.attachTagAlongQuoteFeed=function(t){t.label&&(this.tagalongs[t.label]||(this.tagalongs[t.label]={label:t.label,quoteFeed:t.quoteFeed,behavior:t.behavior?t.behavior:{},count:0}),this.tagalongs[t.label].count++)},i.ChartEngine.Driver.prototype.detachTagAlongQuoteFeed=function(t){if(t.label){var e=this.tagalongs[t.label];e.count--,e.count||(this.tagalongs[t.label]=null)}},i.ChartEngine.Driver.prototype.loadDependents=function(t,e){function n(e){for(var n=o.masterData.length-1;n>=0;n--)if(o.masterData[n]&&"undefined"!=typeof o.masterData[n][e])return i.strToDateTime(o.masterData[n].Date);return t.startDate}var r,a,o=t.stx,s=t.chart,l=s.series,h=new i.ChartEngine.SymbolDependencies;for(r in l)a=l[r],a.parameters.data&&!a.parameters.data.useDefaultQuoteFeed||h.addDependency(a.parameters.symbolObject);for(var c,u=s.studySymbols.getSymbols(),d=0;d<u.length;d++)c=u[d],"object"!=typeof c&&(c={symbol:c}),h.addDependency(c);for(var p=[],f=h.getSymbols(),m=0;m<f.length;m++){c=f[m];var g=i.shallowClone(t.originalState);g.symbol=c.symbol,g.symbolObject=c,a=l[r],g.update?g.startDate=n(r):(g.startDate||(g.startDate=t.startDate),g.endDate||(g.endDate=o.convertToDataZone(new Date)),g.ticks=t.ticks),p.push(g)}if(!p.length)return o.createDataSet(null,null,{appending:t.originalState.update}),t.nodraw||o.draw(),void(e&&e(null));this.quoteFeed.multiFetch(p,function(n){for(var r=0;r<n.length;r++){var s=n[r],l=s.dataCallback.error;if(!l&&0!==l){var h=null,c=s.params.symbol,u=s.dataCallback.quotes;a=o.chart.series[c],a&&(a.moreAvailable=u.length>0&&!1!==s.dataCallback.moreAvailable,h=a.parameters.field),i.addMemberToMasterdata(o,c,u,null,null,h)}}o.createDataSet(null,null,{appending:t.originalState.update}),t.nodraw||o.draw(),e&&e(null)})},i.ChartEngine.Driver.prototype.executeTagAlongs=function(t){function e(t,e,n){return function(a){if(n.count--,!a.error){var o=t.fields;o||(o=null),i.addMemberToMasterdata(r.stx,e.label,a.quotes,o)}-1==n.count&&(r.stx.createDataSet(null,null,{appending:t.originalState.update}),r.stx.draw())}}var n={count:i.objLength(this.taglongs)},r=this;for(var a in this.tagalongs){var o=this.tagalongs[a],s=i.shallowClone(o.behavior);i.extend(s,t,!0),i.ChartEngine.Driver.fetchData(null,o.quoteFeed,s,e(s,o,n))}},i.ChartEngine.Driver.prototype.updateChart=function(){function t(t,i,o){return t.behavior.prefetchAction&&t.behavior.prefetchAction("updateChart"),function(s){n++;var l=t.stx,h=i.chart,c=h.masterData;if(o==h.symbol&&r==l.layout.interval&&a==l.layout.timeUnit){if(s.error)t.quoteFeed.announceError(i.originalState,s);else{var u=s.quotes,d=!1;if(!i.missingBarsCreated){if(c&&c.length&&u&&u.length>0){var p=c[c.length-1],f=u[0];(f.DT&&p.DT<f.DT||f.Date&&p.Date<f.Date)&&(u.unshift(p),d=!0)}s.quotes=u=l.doCleanupGaps(u,h),d&&u.shift()}l.appendMasterData(u,h,{noCreateDataSet:!0}),h.attribution=s.attribution}n==e&&(t.updatingChart=!1),t.executeTagAlongs(i),
t.behavior.callback&&t.behavior.callback(i),t.loadDependents(i)}}}if(!this.updatingChart&&!this.loadingNewChart){var e=i.objLength(this.stx.charts),n=0,r=this.stx.layout.interval,a=this.stx.layout.timeUnit;for(var o in this.stx.charts){var s=this.stx.charts[o];if(s.symbol){var l=this.makeParams(s.symbol,s.symbolObject,s);s.masterData&&s.masterData.length&&(l.startDate=s.masterData[s.masterData.length-1].DT),l.update=!0,l.originalState=i.shallowClone(l),this.updatingChart=!0;var h=t(this,l,s.symbol);this.stx.isEquationChart(l.symbol)?i.fetchEquationChart(l,h):i.ChartEngine.Driver.fetchData(i.QuoteFeed.UPDATE,this.quoteFeed,l,h)}}}},i.ChartEngine.Driver.prototype.updateChartLoop=function(t){function e(t){return function(){t.behavior.noUpdate||t.updateChart()}}-1!=this.intervalTimer&&(this.intervalTimer&&window.clearInterval(this.intervalTimer),this.behavior.noUpdate||(t||0===t||(t=this.behavior.refreshInterval),t&&(this.intervalTimer=window.setInterval(e(this),1e3*t))))},i.ChartEngine.Driver.prototype.resetRefreshInterval=function(t){this.behavior.refreshInterval=t,this.updateChartLoop()},i.ChartEngine.Driver.prototype.loadAll=function(t,e){function i(){return function(a){a?e(a):t.moreAvailable?t.loadingMore?e(null):r++>20?e("error, moreAvailable not implemented correctly in QuoteFeed"):n.checkLoadMore(t,!0,!0,i()):e(null)}}var n=this,r=0;i()()},i.ChartEngine.Driver.prototype.checkLoadMore=function(t,e,n,r,a){function o(e){t.loadingMore=!1,r&&r(e)}function s(t,e){return t.behavior.prefetchAction&&t.behavior.prefetchAction("checkLoadMore"),function(n){var o=t.stx,s=e.chart;if(e.symbol==s.symbol&&c==o.layout.interval&&u==o.layout.timeUnit)if(e.loadMore||(e.chart.loadingMore=!1),n.error)t.quoteFeed.announceError(e.originalState,n),e.chart.loadingMore=!1,r&&r(n.error);else{if(n.quotes||(n.quotes=[]),n.quotes.length){var l=n.quotes[n.quotes.length-1];!l.DT&&l.Date&&(l.DT=i.strToDateTime(l.Date)),l.DT&&+l.DT==+s.masterData[0].DT&&n.quotes.pop()}e.missingBarsCreated||(n.quotes.push(s.masterData[0]),n.quotes=o.doCleanupGaps(n.quotes,s),n.quotes.pop()),n.quotes.length?s.moreAvailable=!1!==n.moreAvailable:s.moreAvailable=!1,s.loadingMore=!1;var h=e.loadMoreReplace?n.quotes:n.quotes.concat(s.masterData);o.setMasterData(h,s),o.createDataSet(),a||o.draw(),e.endDate=s.masterData[0].DT,t.executeTagAlongs(e),t.behavior.callback&&t.behavior.callback(e),t.loadDependents(e),r&&r()}}}if(t.loadingMore)return t.initialScroll=t.scroll,void(r&&r(null));var l;if(!t.moreAvailable){if(t.dataSet.length>0&&t.scroll>=t.dataSet.length||e)for(var h in t.series)if(!1!==t.series[h].moreAvailable)return l=this.makeParams(t.symbol,t.symbolObject,t),t.masterData&&t.masterData.length?l.endDate=t.masterData[0].DT:l.endDate=this.stx.convertToDataZone(new Date),l.originalState=i.shallowClone(l),l.nodraw=a,t.loadingMore=!0,void this.loadDependents(l,o);return void(r&&r(null))}var c=this.stx.layout.interval,u=this.stx.layout.timeUnit,d=!1;if(!this.behavior.noLoadMore&&(!this.stx.maxDataSetSize||t.dataSet.length<this.stx.maxDataSetSize)&&(t.scroll>=t.dataSet.length||e)){t.initialScroll=t.scroll,t.loadingMore=!0,l=this.makeParams(t.symbol,t.symbolObject,t),t.masterData&&t.masterData.length?l.endDate=t.masterData[0].DT:l.endDate=this.stx.convertToDataZone(new Date),l.originalState=i.shallowClone(l),l.nodraw=a,this.stx.fetchMaximumBars[this.stx.layout.aggregationType]&&(n=!0),n&&(l.fetchMaximumBars=!0,l.ticks=Math.max(2e4,l.ticks));var p=s(this,l);this.stx.isEquationChart(l.symbol)?i.fetchEquationChart(l,p):i.ChartEngine.Driver.fetchData(i.QuoteFeed.PAGINATION,this.quoteFeed,l,p),d=!0}!d&&r&&r(null)},i.ChartEngine.Driver.prototype.barsToFetch=function(t){if(t.isSeries)return t.stx.masterData.length;var e=this.stx.layout.interval,i=t.stx.layout.periodicity;return"month"!=e&&"week"!=e||this.stx.dontRoll||(i*="week"==e?7:30),t.stx.chart.maxTicks*i*2},i.ChartEngine.Driver.prototype.makeParams=function(t,e,n){var r=this.stx.layout.interval,a=this.barsToFetch({stx:this.stx});"month"!=r&&"week"!=r||this.stx.dontRoll||(r="day");var o=i.shallowClone(this.behavior);return i.extend(o,{stx:this.stx,symbol:t,symbolObject:e,chart:n,interval:r,extended:this.stx.layout.extended,period:1,feed:"delayed",ticks:a},!0),o.symbolObject||(o.symbolObject={symbol:t}),isNaN(o.interval)||(o.period=parseInt(o.interval,10),o.interval=this.stx.layout.timeUnit,o.interval||(o.interval="minute")),o},i.ChartEngine.Driver.prototype.newChart=function(t,e){function n(i,n){return i.behavior.prefetchAction&&i.behavior.prefetchAction("newChart"),function(l){var h,c=n.chart;if(a!=c.symbol||o!=r.layout.interval||s!=r.layout.timeUnit)return void(e&&e("orphaned"));l.error?i.quoteFeed.announceError(n.originalState,l):(n.missingBarsCreated||(h=l.quotes=r.doCleanupGaps(l.quotes,c)),r.setMasterData(h,c),c.moreAvailable=!!h&&!1!==l.moreAvailable,c.attribution=l.attribution,t.initializeChart&&r.initializeChart(),r.createDataSet(),n.nodraw||r.home()),i.loadingNewChart=!1;var u=c.masterData;u&&u.length&&(n.startDate=u[0].DT,n.endDate=u[u.length-1].DT),i.executeTagAlongs(n),i.behavior.callback&&i.behavior.callback(n),i.loadDependents(n),e&&e(l.error),i.stx.dispatch("newChart",{stx:i.stx,symbol:i.stx.chart.symbol,symbolObject:i.stx.chart.symbolObject,moreAvailable:i.stx.chart.moreAvailable,quoteDriver:i}),i.resetRefreshInterval(i.behavior.refreshInterval)}}var r=this.stx,a=t.symbol,o=r.layout.interval,s=r.layout.timeUnit,l=t.chart;l.moreAvailable=!0,l.attribution=null;var h=this.makeParams(a,t.symbolObject,l);i.extend(h,t,!0),(r.fetchMaximumBars[r.layout.aggregationType]||t.fetchMaximumBars)&&(h.ticks=Math.max(2e4,h.ticks),h.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,h.originalState=i.shallowClone(h);var c=n(this,h);this.stx.isEquationChart(h.symbol)?i.fetchEquationChart(h,c):i.ChartEngine.Driver.fetchData(i.QuoteFeed.INITIAL,this.quoteFeed,h,c)},i.QuoteFeed.INITIAL=1,i.QuoteFeed.UPDATE=2,i.QuoteFeed.PAGINATION=3,i.QuoteFeed.SERIES=4,i.ChartEngine.Driver.fetchData=function(t,e,n,r){e.v2QuoteFeed?"function"!=typeof e.subscribe?i.ChartEngine.Driver.fetchDataInContext(t,e,n,r):i.ChartEngine.Driver.fetchDataInContext(t,e,n,function(t){t.error||e.checkSubscriptions(n.stx),r(t)}):e.fetch(n,r)},i.ChartEngine.Driver.fetchDataInContext=function(t,e,n,r){var a,o,s,l;switch(t===i.QuoteFeed.SERIES&&(n.series=!0,t=i.QuoteFeed.INITIAL,n.endDate&&!n.startDate?t=i.QuoteFeed.PAGINATION:n.startDate&&!n.endDate&&(t=i.QuoteFeed.UPDATE)),t){case i.QuoteFeed.UPDATE:var h;n.startDate?h=n.startDate:(h=new Date,h.setHours(0,0,0,0)),"function"==typeof e.fetchUpdateData&&e.fetchUpdateData(n.symbol,h,n,r);break;case i.QuoteFeed.INITIAL:l=new Date,l.setMilliseconds(0),a={begin:l,interval:"tick"==n.interval?1:n.interval,periodicity:"tick"==n.interval?n.stx.chart.xAxis.futureTicksInterval:n.period,inZone:n.stx.dataZone,outZone:n.stx.dataZone},o=n.stx.chart.market.newIterator(a),s=n.startDate?n.startDate:o.previous(n.ticks),l=n.endDate?n.endDate:l,"function"==typeof e.fetchInitialData&&e.fetchInitialData(n.symbol,s,l,n,r);break;case i.QuoteFeed.PAGINATION:a={begin:n.endDate,interval:"tick"==n.interval?1:n.interval,periodicity:"tick"==n.interval?n.stx.chart.xAxis.futureTicksInterval:n.period,inZone:n.stx.dataZone,outZone:n.stx.dataZone},o=n.stx.chart.market.newIterator(a);var c=n.ticks;if(e.maxTicks&&(c=Math.min(c,e.maxTicks)),s=o.previous(c),"function"==typeof e.fetchPaginationData){if(n.stx.maxMasterDataSize&&n.stx.maxMasterDataSize<=n.stx.masterData.length)return;e.fetchPaginationData(n.symbol,s,n.endDate,n,r)}break;default:console.error("Illegal fetchData constant")}},t},__js_span_=function(t){var e=t.CIQ;return e.ChartEngine.prototype.setRange=function(t,i){function n(e){void 0===e&&(e=null);var n=0,r=0,a=new Date,o=t.base,c=t.periodicity,d=s.dataSet,p=d.length;if(!d||0===p)return void(i&&i(e));if("day"===o&&c&&"day"===c.interval){var f=t.multiplier;n=p<f?0:p-f,r=p-1}else if("today"===o&&d[p-1].DT.getDate()!=a.getDate()){for(var m=new Date(d[p-1].DT.getTime()),g=new Date(m.getTime()),v=p-1;v>=0;v--)if(d[v]&&d[v].DT.getDate()!=m.getDate()){m=new Date(+d[v+1].DT);break}g.getTime()==m.getTime()&&(m=new Date(+d[0].DT)),n=u.tickFromDate(m,s,null,!0),r=u.tickFromDate(g,s)}else n=l.getTime()>=d[0].DT.getTime()||t.goIntoPast?u.tickFromDate(l,s,null,!0):0,r=h.getTime()<=d[p-1].DT.getTime()||t.goIntoFuture?u.tickFromDate(h,s):p-1;var y=r-n+1;if(y<1)return void(i&&i(e));u.setCandleWidth((u.chart.width-t.padding)/y,s),s.scroll=p-n,u.micropixels=0,u.draw(),u.changeOccurred("layout"),i&&i(e)}function r(t){return t&&0===d?(u.chart.scroll=k,u.setCandleWidth(_),u.layout.interval=E,u.layout.periodicity=A,u.layout.timeUnit=I,void(i&&i(t))):++d>10?(console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),void n()):void(s.moreAvailable&&s.masterData[0].DT>l?u.quoteDriver.checkLoadMore(s,!0,!1,function(t){t?n(t):r()},!0):n())}function a(t,i,n,r){var a=0,o=t-i;return a=e.ChartEngine.isDailyInterval(n)?"month"==n?o/e.MONTH/r:"week"==n?o/e.WEEK/r:o/e.DAY/r:isNaN(n)?"millisecond"==n?o/r:"second"==n?o/e.SECOND/r:"hour"==n?o/e.HOUR/r:o/e.MINUTE/r:o/(e.MINUTE*n)/r,Math.round(a)}e.isEmpty(t)&&(t={dtLeft:arguments[0],dtRight:arguments[1],padding:arguments[2],chart:arguments[3],goIntoFuture:!1},i=arguments[4]),t.chart||(t.chart=this.chart),"undefined"==typeof t.padding&&(t.padding=this.preferences.whitespace);var o=!1,s=t.chart,l=t.dtLeft,h=this.convertToDataZone(new Date);if(t.dtRight&&(h=t.dtRight),!l){var c=this.standardMarketIterator(h,null,s);l=c.previous(s.maxTicks),t.periodicity||(o=!0)}var u=this,d=0;if(this.quoteDriver){var p,f,m;if(o)p=this.layout.interval,m=this.layout.timeUnit,f=this.layout.periodicity;else if(t.periodicity)p=t.periodicity.interval,m=t.periodicity.timeUnit,f=t.periodicity.period;else{var g=h.getTime()-l.getTime();if(this.autoPickCandleWidth.turnOn){var v=0;if(this.autoPickCandleWidth.candleWidth)v=this.autoPickCandleWidth.candleWidth;else switch(this.layout.chartType){case"line":case"colored_line":case"mountain":case"colored_mountain":case"baseline_delta":case"baseline_delta_mountain":case"wave":v=2;break;case"candle":case"bar":case"colored_bar":case"hollow_candle":case"volume_candle":case"scatterplot":v=5}var y=s.width/v,x=this.dynamicRangePeriodicityMap;p=x[0].interval,f=1;for(var b,C=0;C<x.length;C++){var w=g/x[C].rangeInMS;if(w<y){x[C-1]?(p=x[C-1].interval,f=Math.ceil(b/y)):(p=x[C].interval,f=1);break}b=w}}else{for(var S=this.staticRangePeriodicityMap,T=null,D=0;D<S.length;D++){var M=S[D];if(g/M.rangeInMS<1.001){T=M;break}}p=T.interval,f=T.periodicity,m=T.timeUnit}}var k=this.chart.scroll,_=this.layout.candleWidth,E=this.layout.interval,A=this.layout.periodicity,I=this.layout.timeUnit;this.chart.scroll=this.chart.maxTicks=a(h.getTime(),l.getTime(),p,f,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks;var P=this.layout.timeUnit!=m&&("seconds"==m||"milliseconds"==m);if(P||e.ChartEngine.isDailyInterval(this.layout.interval)===e.ChartEngine.isDailyInterval(p)?e.ChartEngine.isDailyInterval(this.layout.interval)||this.layout.interval==p||(P=!0):P=!0,this.chart.masterData&&this.chart.masterData.length&&!P)this.layout.interval==p&&this.layout.periodicity==f||(this.layout.interval=p,this.layout.periodicity=f,this.createDataSet()),r();else{this.layout.interval=p,this.layout.periodicity=f,this.layout.timeUnit=m,this.layout.timeUnit||(e.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:"second"==this.layout.interval?this.layout.timeUnit="second":"tick"!=this.layout.interval&&(this.layout.timeUnit="minute"));var F={symbol:s.symbol,symbolObject:s.symbolObject,chart:s,nodraw:!0};"tick"==this.layout.interval&&(F.startDate=l,F.endDate=h),this.displayInitialized||(F.initializeChart=!0),this.quoteDriver.newChart(F,r)}}else n()},e.ChartEngine.prototype.setSpan=function(t,i){function n(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}var r=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];if("object"==typeof t?(r=t.period?t.period:t.multiplier?t.multiplier:1,a=t.interval?t.interval:t.base?t.base:t.span?t.span:t.period,o=t.padding,s=t.chart):(t={period:r,interval:a,padding:o,chart:s},i=arguments[5]),t.padding||(t.padding=0),s||(s=this.chart),"all"==(a=a.toLowerCase()))return void this.displayAll(t,i);var l=a,h=1;"today"==a?l="day":"year"==a&&(l="month",h=12);var c=e.shallowClone(t);c.goIntoFuture=!1;var u,d={begin:new Date,interval:l,period:h,outZone:this.dataZone};"ytd"!==a&&(u=s.market.newIterator(d));var p=this.convertToDataZone(new Date);if("ytd"===a)p=n(p),p.setMonth(0),p.setDate(1);else if("today"===a)u.next(),(p=u.previous())>d.begin&&(p=u.previous());else if("month"===a)p=n(new Date),p.setMonth(p.getMonth()-r);else if("year"===a)p=n(new Date),p.setFullYear(p.getFullYear()-r);else if("week"===a)p=n(new Date),p.setDate(p.getDate()-7*r);else if("day"===a&&1==r){var f=p.getHours(),m=p.getMinutes(),g=p.getSeconds(),v=p.getMilliseconds();p=u.previous(),p.setHours(f),p.setMinutes(m),p.setSeconds(g),p.setMilliseconds(v)}else p=u.previous(r-1);c.dtLeft=p,"today"===a&&(c.goIntoFuture=!0,c.dtRight=new Date(+p),c.dtRight.setDate(p.getDate()+1),c.dtRight=s.market._convertFromMarketTZ(c.dtRight,this.dataZone),c.dtLeft.setHours(u.market.zopen_hour),c.dtLeft.setMinutes(u.market.zopen_minute),c.dtLeft.setSeconds(0),c.dtLeft=s.market._convertFromMarketTZ(c.dtLeft,this.dataZone)),c.maintainPeriodicity&&(c.periodicity={},c.periodicity.interval=this.layout.interval,c.periodicity.period=this.layout.periodicity),s.spanLock=!1;var y=this;this.setRange(c,function(e){t.maintainPeriodicity||(y.layout.setSpan={base:t.base,multiplier:t.multiplier},y.changeOccurred("layout")),"today"==a&&(s.spanLock=!0),i&&i(e)})},e.ChartEngine.prototype.getSpanCandleWidth=function(t){var e=t.split(",");if(!(e.length<2)){var i=parseFloat(e[0]),n=new Date,r=new Date;"year"==e[1]?r.setFullYear(r.getFullYear()-i):"month"==e[1]?r.setMonth(r.getMonth()-i):"day"==e[1]?r.setDate(r.getDate()-i):"week"==e[1]&&r.setDate(r.getDate()-7*i);var a=(n.getTime()-r.getTime())/1e3/60/60/24;a=5*a/7;return this.chart.width/a}},e.ChartEngine.prototype.displayAll=function(t,i){function n(){if(a.masterData&&a.masterData.length){var n=e.clone(t);n.dtLeft=a.masterData[0].DT,n.dtRight=a.masterData[a.masterData.length-1].DT,t.maintainPeriodicity?(n.periodicity={},n.periodicity.interval=o.layout.interval,n.periodicity.period=o.layout.periodicity):t.periodicity&&(n.periodicity=t.periodicity),o.setRange(n,function(e){t.maintainPeriodicity||(o.layout.setSpan={base:t.base,multiplier:t.multiplier},o.changeOccurred("layout")),o.home({whitespace:0}),i&&i(e)})}}function r(){o.quoteDriver.loadAll(a,n)}var a=this.chart;t&&t.chart&&(a=t.chart);var o=this;if(!this.quoteDriver)return void n();var s=e.ChartEngine.isDailyInterval(this.layout.interval),l=t.maintainPeriodicity?{periodicity:this.layout.periodicity,interval:this.layout.interval}:{periodicity:1,interval:"month"};l=t.periodicity?t.periodicity:l,l.period&&(l.periodicity=l.period),this.layout.periodicity=l.periodicity,this.layout.interval=l.interval,this.layout.timeUnit=null;var h=e.ChartEngine.isDailyInterval(this.layout.interval);t.forceLoad||h!=s?this.quoteDriver.newChart({noDraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},r):a.moreAvailable?r():(this.createDataSet(),n())},t},__js_studies_=function(t){var e=t.CIQ;return e.Studies=function(){},e.Studies.DEFAULT_INPUTS={Period:14},e.Studies.DEFAULT_OUTPUTS={Result:"auto"},e.Studies.actualOutputs=[],e.Studies.studyPanelMap={},e.Studies.colorPickerDiv=null,e.Studies.StudyDescriptor=function(t,i,n,r,a,o){this.name=t,this.type=i,this.panel=n,this.inputs=r,this.outputs=a,this.parameters=o,this.outputMap={},this.min=null,this.max=null,this.startFrom=0;var s=e.Studies.studyLibrary[i];s||(s={},("chart"==n||!n&&o&&"chart"==o.chartName)&&(this.overlay=!0)),"undefined"==typeof s.inputs&&(s.inputs=e.clone(e.Studies.DEFAULT_INPUTS)),"undefined"==typeof s.outputs&&(s.outputs=e.clone(e.Studies.DEFAULT_OUTPUTS)),this.study=s,this.libraryEntry=s},e.Studies.generateID=function(t,i,n,r){var a=i;t&&(a=t.translateIf(a));var o=e.Studies.studyLibrary[i];if(o&&(o.customRemoval||e.isEmpty(o.inputs)))return a;var s=a+" (",l=!1;for(var h in n)if("id"!=h&&"display"!=h&&"Shading"!=h){var c=n[h];"field"!=c&&(c=c.toString(),e.Studies.prettify[c]!==undefined&&(c=e.Studies.prettify[c]),l?c&&(s+=","):l=!0,s+=c)}if(s+=")",r&&0===r.indexOf(s))return r;if(t.layout.studies&&t.layout.studies[s])for(var u=2;u<50;u++){var d=s+"-"+u;if(!t.layout.studies[d]){s=d;break}}return s},e.Studies.DialogHelper=function(t){var i=this.stx=t.stx,n=this.sd=t.sd;this.name=n?n.type:t.name,this.inputs=[],this.outputs=[],this.parameters=[];var r=this.libraryEntry=n?n.study:e.Studies.studyLibrary[t.name];"undefined"==typeof r.inputs&&(r.inputs=e.clone(e.Studies.DEFAULT_INPUTS)),"undefined"==typeof r.outputs&&(r.outputs=e.clone(e.Studies.DEFAULT_OUTPUTS));var a=n&&i.panels[n.panel]?i.panels[n.panel]:{chart:i.chart},o=a.chart;this.title=i.translateIf(r.name),this.attributes=r.attributes,this.attributes||(this.attributes={});for(var s in r.inputs){var l={};this.inputs.push(l),l.name=s,l.heading=i.translateIf(s);var h=r.inputs[s];if(n&&n.inputs&&"undefined"!=typeof n.inputs[s]&&null!==n.inputs[s]?l.value=n.inputs[s]:l.value=r.inputs[s],l.defaultInput=r.inputs[s],this.attributes[s]||(this.attributes[s]=e.Studies.inputAttributeDefaultGenerator(l.defaultInput)),h.constructor==Number)l.type="number";else if(h.constructor==String){var c=e.Studies.movingAverageHelper(i,l.defaultInput);if(c){l.type="select",l.defaultInput=c;var u=e.Studies.movingAverageHelper(i,l.value);u||(u=l.value),l.value=u,l.options=e.Studies.movingAverageHelper(i,"options")}else if("field"==h){l.type="select",l.options={};t:for(var d in o.dataSet[o.dataSet.length-1]){if(-1==["Open","High","Low","Close","Adj_Close","hl/2","hlc/3","hlcc/4","ohlc/4",o.defaultPlotField].indexOf(d)){if(-1==e.Studies.actualOutputs.indexOf(d))continue;if(t.sd)for(var p in t.sd.outputMap)if(-1!=d.indexOf(p)&&-1==d.indexOf(p+"-"))continue t}l.options[d]=i.translateIf(d)}"field"==l.value&&(l.value="Close"),"field"==l.defaultInput&&(l.defaultInput="Close")}else l.type="text"}else if(h.constructor==Boolean)l.type="checkbox",!0!==l.value&&"true"!=l.value&&"on"!=l.value||(l.value=!0);else if(h.constructor==Array){l.type="select",l.options={};for(var f=0;f<h.length;f++)l.options[h[f]]=i.translateIf(h[f]);l.value.constructor==Array&&(l.value=l.value[0]),l.defaultInput=h[0]}}for(s in r.outputs){var m={name:s,heading:i.translateIf(s)};this.outputs.push(m),m.color=m.defaultOutput=r.outputs[s],n&&n.outputs&&n.outputs[s]&&(m.color=n.outputs[s]),"auto"==m.color&&(m.color=i.defaultColor)}if(r.parameters&&"studyOverZones"==r.parameters.template){var g=r.parameters.init;if(g){var v;v={name:"studyOverZones",heading:i.translateIf("Show Zones"),defaultValue:g.studyOverZonesEnabled,value:g.studyOverZonesEnabled};var y=n?n.parameters:null;y&&(y.studyOverZonesEnabled||!1===y.studyOverZonesEnabled)&&(v.value=y.studyOverZonesEnabled),this.parameters.push(v),v={name:"studyOverBought",heading:i.translateIf("OverBought"),defaultValue:g.studyOverBoughtValue,value:g.studyOverBoughtValue,defaultColor:g.studyOverBoughtColor,color:g.studyOverBoughtColor},y&&y.studyOverBoughtValue&&(v.value=y.studyOverBoughtValue),y&&y.studyOverBoughtColor&&(v.color=y.studyOverBoughtColor),"auto"==v.color&&(v.color=i.defaultColor),this.parameters.push(v),v={name:"studyOverSold",heading:i.translateIf("OverSold"),defaultValue:g.studyOverSoldValue,value:g.studyOverSoldValue,defaultColor:g.studyOverSoldColor,color:g.studyOverSoldColor},y&&y.studyOverSoldValue&&(v.value=y.studyOverSoldValue),y&&y.studyOverSoldColor&&(v.color=y.studyOverSoldColor),"auto"==v.color&&(v.color=i.defaultColor),this.parameters.push(v),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})}}},e.Studies.DialogHelper.prototype.updateStudy=function(t){var i={},n=this.sd,r=this.libraryEntry;r||(r={}),n||(n=r),i.inputs=e.shallowClone(n.inputs),i.outputs=e.shallowClone(n.outputs),i.parameters=e.shallowClone(n.parameters),e.extend(i,t),i.parameters||(i.parameters={}),i.inputs&&i.inputs.id?this.sd=e.Studies.replaceStudy(this.stx,i.inputs.id,this.name,i.inputs,i.outputs,i.parameters,null,n.study):this.sd=e.Studies.addStudy(this.stx,this.name,i.inputs,i.outputs,i.parameters,null,n.study)},e.Studies.prepareStudy=function(t,i,n,r){if("undefined"==typeof i.calculateFN&&(i.useRawValues=!0),r&&r.replaceID&&(e.Studies.rejiggerDerivedStudies(t,r.replaceID,n.inputs.id,n.panel),delete r.replaceID),e.isEmpty(n.outputMap))for(var a in n.outputs)i.useRawValues?n.outputMap[a]=a:n.outputMap[a+" "+n.name]=a;(n.overlay||n.underlay)&&(t.overlays[n.name]=n),i.feed?t.attachTagAlongQuoteFeed(i.feed):(n.chart.dataSet&&t.createDataSet(),t.draw())},e.Studies.rejiggerDerivedStudies=function(t,i,n){var r=t.layout.studies;t.overlays;for(var a in r){var o=r[a],s=o.inputs,l=s.id;if(-1!=s.id.indexOf(i)&&-1==s.id.indexOf(i+"-")){for(var h=(s.id.replace(i,n),!1),c=e.Studies.getFieldInputs(o),u=0;u<c.length;u++)if(-1!=s[c[u]].indexOf(i)){o.name;s[c[u]]=s[c[u]].replace(i,n),s.id=s.id.replace(i,n),s.display=s.display.replace(i,n),o.name=o.name.replace(i,n),o.outputMap={};for(var d in o.outputs)o.study.useRawValues?o.outputMap[d]=d:o.outputMap[d+" "+o.name]=d;h=!0}h&&e.Studies.replaceStudy(t,l,o.type,o.inputs,o.outputs,o.parameters)}}},e.Studies.checkSymbolChanged=function(t,i,n){if(i.symbols)for(var r=t.chart.studySymbols,a=0;a<i.symbols.length;a++){var o=i.symbols[a];1==e.objLength(r.getDependencies(o))&&t.dispatch("symbolChange",{stx:t,symbol:o,action:n})}},e.Studies.removeStudySymbols=function(t){t.chart.studySymbols.removeDependency(t.name)},e.Studies.replaceStudy=function(t,i,n,r,a,o,s,l){o||(o={}),i&&(o.replaceID=i),r.id==r.display&&delete r.display,delete r.id;var h=t.layout.studies[o.replaceID];return e.Studies.checkSymbolChanged(h,"remove-study"),e.Studies.removeStudySymbols(h,t),t.quoteDriver&&t.quoteDriver.updateSubscriptions(),e.Studies.addStudy(t,n,r,a,o,s,l)},e.Studies.addStudy=function(t,i,n,r,a,o,s){var l=s||e.Studies.studyLibrary[i];if(l){if(l.inputs){var h=e.shallowClone(l.inputs);for(var c in h)h[c]instanceof Array&&(h[c]=h[c][0]);n=e.extend(h,n)}l.outputs&&(r=e.extend(e.shallowClone(l.outputs),r));var u=l.parameters;u&&u.init&&(a=e.extend(e.shallowClone(u.init),a))}n||(n=e.clone(e.Studies.DEFAULT_INPUTS)),r||(r=e.clone(e.Studies.DEFAULT_OUTPUTS)),a||(a={}),a.chartName||(a.chartName="chart"),n.Period<1&&(n.Period=1),n.id||(n.id=e.Studies.generateID(t,i,n,a.replaceID));var d=null;if(!(d=l&&l.initializeFN?l.initializeFN(t,i,n,r,a,o,s):e.Studies.initializeFN(t,i,n,r,a,o,s)))return void console.log("CIQ.Studies.addStudy: initializeFN() returned null for "+i);s=d.study,d.chart=t.charts[a.chartName],t.layout.studies||(t.layout.studies={}),t.layout.studies[d.inputs.id]=d,d.type=i,d.permanent=s.permanent,d.customLegend=s.customLegend;var p=t.panels[d.panel];e.Studies.prepareStudy(t,s,d,a),t.currentlyImporting||e.Studies.checkSymbolChanged(t,d,"add-study"),t.quoteDriver&&t.quoteDriver.updateSubscriptions(),t.changeOccurred("layout");var f=!1,m=!(d.overlay||d.underlay);if(m&&s.horizontalCrosshairFieldFN&&(p.horizontalCrosshairField=s.horizontalCrosshairFieldFN(t,d)),t.editCallback?f=!0:m?(t.callbacks.studyPanelEdit||t.callbackListeners.studyPanelEdit&&t.callbackListeners.studyPanelEdit.length)&&(f=!0):(t.callbacks.studyOverlayEdit||t.callbackListeners.studyOverlayEdit&&t.callbackListeners.studyOverlayEdit.length)&&(f=!0),f){a.editMode=!0;var g=!1;for(var v in d.inputs)if("id"!=v&&"display"!=v){g=!0;break}if(!g)for(var y in d.outputs){g=!0;break}if(g){var x;"undefined"!=typeof d.study.edit?d.study.edit&&(x=function(t,e,i,n){return function(){e.study.edit(e,{stx:t,inputs:i,outputs:n,parameters:a})}}(t,d,n,r),t.setPanelEdit(p,x),d.editFunction=x):!m&&t.callbacks.studyOverlayEdit?(x=function(t,e,i,n,r){return function(a){t.dispatch("studyOverlayEdit",{stx:t,sd:e,inputs:i,outputs:n,parameters:r,forceEdit:a})}}(t,d,n,r,a),d.editFunction=x):t.editCallback?(x=function(t,n,r,o){return function(){var s=t.editCallback(t,n);e.Studies.studyDialog(t,i,s,{inputs:r,outputs:o,parameters:a})}}(t,d,n,r),"chart"!=p.name&&t.setPanelEdit(p,x)):(x=function(t,e,i,n,r){return function(){t.dispatch("studyPanelEdit",{stx:t,sd:e,inputs:i,outputs:n,parameters:r})}}(t,d,n,r,a),"chart"!=p.name&&(t.setPanelEdit(p,x),d.editFunction=x))}}return d},e.Studies.quickAddStudy=e.Studies.addStudy,e.Studies.removeStudy=function(t,e){if(e.overlay||e.underlay)t.removeOverlay(e.name),t.draw();else{var i=t.panels[e.panel];i&&t.panelClose(i)}},e.Studies.displayStudies=function(t,i,n){var r=t.layout.studies;if(r){n&&(e.Studies.actualOutputs=[]);var a={};a[i.name]=!0;for(var o in r){var s=r[o],l=s.study;if(l){if(n){if(!s.underlay&&!l.underlay)continue}else if(s.underlay||l.underlay)continue;var h=t.panels[s.panel];if(h){if(h.chart==i&&("bypass"!=s.study.range&&(h.min=null),!h.hidden)){if(!a[h.name]){var c=s.permanent;h.closeX?h.closeX.style.display=c?"none":"":h.close.style.display=c?"none":"",a[h.name]=c}var u=s.chart.dataSegment;for(var d in s.outputMap)e.Studies.actualOutputs.push(d);for(var p=e.Studies.getFieldInputs(s),f=0;f<p.length;f++)if(s.panel==s.parameters.chartName&&s.inputs[p[f]]){var m=e.Studies.studyPanelMap[s.inputs[p[f]]];if(m){s.panel=m.panel;break}}"undefined"==typeof l.seriesFN?(e.Studies.displaySeriesAsLine(t,s,u),h&&e.Studies.displayError(t,s)):l.seriesFN&&h&&(l.seriesFN(t,s,u),e.Studies.displayError(t,s))}}else delete r[o]}}}},e.Studies.displayError=function(t,e){if(e.error&&("undefined"==typeof practiceMode||!practiceMode)){var i="";i=!0===e.error?t.translateIf("Not enough data to compute ")+t.translateIf(e.study.name):t.translateIf(e.error),t.watermark(e.panel,"center","bottom",t.translateIf(i))}},e.Studies.calculateMinMaxForDataPoint=function(t,e,i){for(var n=Number.MAX_VALUE,r=-1*Number.MAX_VALUE,a=0;a<i.length;a++){var o=i[a][e];null!==o&&void 0!==o&&(isNaN(o)||(n=Math.min(o,n),r=Math.max(o,r)))}return{min:n,max:r}},e.Studies.determineMinMax=function(t,e,i){var n=t.panels[e.panel];if(n){if(!n.min&&0!==n.min){var r=e.study;if(e.min||0===e.min)n.min=e.min,n.max=e.max;else{if("0 to 100"==r.range)n.min=0,n.max=100;else if("-1 to 1"==r.range)n.min=-1,n.max=1;else if("bypass"!=r.range){n.min=Number.MAX_VALUE,n.max=-1*Number.MAX_VALUE;for(var a=0;a<i.length;a++){var o=i[a];if(o){var s;for(var l in e.outputMap)null!==(s=o[l])&&void 0!==s&&(isNaN(s)||(n.min=Math.min(s,n.min),n.max=Math.max(s,n.max)));for(var h=0;h<=5;h++)null!==(s=o[e.name+"_hist"+(h||"")])&&void 0!==s&&(isNaN(s)||(n.min=Math.min(s,n.min),n.max=Math.max(s,n.max)))}}}"0 to max"==r.range&&(n.min=Math.min(0,n.min))}}(n.highValue||0===n.highValue)&&n.highValue>n.max&&(n.max=n.highValue),(n.lowValue||0===n.lowValue)&&n.lowValue<n.min&&(n.min=n.lowValue);var c=n.yAxis;(c.max||0===c.max)&&(n.max=c.max),(c.min||0===c.min)&&(n.min=c.min),n.max==n.min&&(n.max=2*n.max,n.min=0),n.shadow=n.max-n.min,n.max>0&&n.min<0&&(n.shadow=n.max+-1*n.min),c.high=n.max,c.low=n.min,c.shadow=c.high-c.low}},e.Studies.createYAxis=function(t,i,n,r){if(!r.axisDrawn){r.height=r.bottom-r.top,e.Studies.determineMinMax(t,i,n);var a,o=i.study;o.yaxis||o.yAxisFN?(a={noDraw:!0},t.createYAxis(r,a),t.drawYAxis(r,a),o.yaxis&&o.yaxis(t,i),o.yAxisFN&&o.yAxisFN(t,i)):(a={noDraw:i.parameters&&i.parameters.studyOverZonesEnabled},"0 to 100"==o.range?a.range=[0,100]:"-1 to 1"==o.range&&(a.range=[-1,1]),o.yAxis&&o.yAxis.ground&&(a.ground=!0),t.createYAxis(r,a),t.drawYAxis(r,a)),i.error||(o.centerline?e.Studies.drawHorizontal(t,i,n,o.centerline):r.min<0&&r.max>0&&e.Studies.drawHorizontal(t,i,n,0)),r.axisDrawn=!0}},e.Studies.displaySeriesAsLine=function(t,i,n){if(n.length){var r=t.panels[i.panel];if(r&&!r.hidden){r.name==i.chart.name||i.underlay||e.Studies.createYAxis(t,i,n,r),e.Studies.drawZones(t,i,n);for(var a in i.outputMap)e.Studies.studyPanelMap[a]=i,e.Studies.displayIndividualSeriesAsLine(t,i,r,a,n)}}},e.Studies.displaySeriesAsHistogram=function(t,i,n){if(n.length){var r=t.panels[i.panel];if(r&&!r.hidden){var a=[];for(var o in i.outputMap){var s=i.outputs[i.outputMap[o]],l={field:o,fill_color_up:s,border_color_up:s,fill_color_down:s,border_color_down:s};a.push(l)}var h=i.inputs,c={name:i.name,type:h.HistogramType?h.HistogramType:"overlaid",panel:i.panel,heightPercentage:h.HeightPercentage?h.HeightPercentage:.25,widthFactor:h.WidthFactor?h.WidthFactor:.5};i.study&&i.study.parameters&&i.study.parameters.excludeYAxis||e.Studies.createYAxis(t,i,i.chart.dataSegment,t.panels[i.panel]),t.drawHistogram(c,a)}}},e.Studies.displayIndividualSeriesAsLine=function(t,e,i,n,r){i.height||(i.height=i.bottom-i.top);var a=t.chart.context;a.lineWidth=1,e.highlight&&(a.lineWidth=3);var o=e.outputs[e.outputMap[n]];"auto"==o&&(o=t.defaultColor),a.strokeStyle=o;var s=0,l=e.study,h=i.yAxis;h.shadow<1e3&&(s=2),h.shadow<5&&(s=4),(e.overlay||e.underlay)&&(s=null),(h.decimalPlaces||0===h.decimalPlaces)&&(s=h.decimalPlaces);var c=e.parameters.label,u=l.parameters;u&&(u.noLabels&&(c=!1),e.noSlopes||!1===e.noSlopes||(e.noSlopes=u.noSlopes));var d=c||t.preferences.labels&&!1!==c;t.plotLineChart(i,r,n,{skipTransform:t.panels[e.panel].name!=e.chart.name,label:d,labelDecimalPlaces:s,noSlopes:e.noSlopes}),l.appendDisplaySeriesAsLine&&l.appendDisplaySeriesAsLine(t,e,r,n,i),a.lineWidth=1},e.Studies.drawHorizontal=function(t,e,i,n){var r=t.panels[e.panel];if(r){var a=t.pixelFromPrice(n,r);a>r.top&&a<r.yAxis.bottom&&t.plotLine(r.left,r.right,a,a,"#DDDDDD","segment",t.chart.context,!1,{})}},e.Studies.displayHistogramWithSeries=function(t,i,n){var r=t.panels[i.panel];e.Studies.createYAxis(t,i,n,r),e.Studies.createHistogram(t,i,n,!1,.4),e.Studies.displaySeriesAsLine(t,i,n)},e.Studies.drawZones=function(t,i,n){if(i.parameters&&i.parameters.studyOverZonesEnabled){var r=parseFloat(i.parameters.studyOverSoldValue),a=parseFloat(i.parameters.studyOverBoughtValue),o=i.parameters.studyOverSoldColor,s=i.parameters.studyOverBoughtColor,l=i.zoneOutput;l||(l="Result");var h=i.outputs[l];h&&"auto"!=h&&!e.isTransparent(h)||(h=t.defaultColor),o||(o=h),o&&"auto"!=o&&!e.isTransparent(o)||(o=t.defaultColor),s||(s=h),s&&"auto"!=s&&!e.isTransparent(s)||(s=t.defaultColor);var c=t.panels[i.panel],u=c.yAxis.displayBorder;!1===t.axisBorders&&(u=!1),!0===t.axisBorders&&(u=!0);var d=Math.round(c.right)+.5,p=u?d-.5:c.right,f=u?3:0,m=t.chart.context,g=m.fillStyle;t.chart.context.globalAlpha=.2,t.startClip(c.name,!0);var v=c.yAxis,y=v.yAxisPlotter=new e.Plotter;y.newSeries("border","stroke",t.canvasStyle("stx_grid_border")),m.beginPath();var x=Math.round(t.pixelFromPrice(a,c))+.5;m.strokeStyle=s,m.moveTo(c.left,x),m.lineTo(p,x),m.stroke(),m.closePath(),t.chart.context.beginPath();var b=Math.round(t.pixelFromPrice(r,c))+.5;if(m.strokeStyle=o,m.moveTo(c.left,b),m.lineTo(p,b),m.stroke(),m.closePath(),u&&(y.moveTo("border",d-.5,x),y.lineTo("border",d+f,x),y.moveTo("border",d-.5,b),y.lineTo("border",d+f,b)),m.fillStyle=g,e.preparePeakValleyFill(t,n,{panelName:i.panel,band:l+" "+i.name,threshold:a,direction:1,color:s}),e.preparePeakValleyFill(t,n,{panelName:i.panel,band:l+" "+i.name,threshold:r,direction:-1,color:o}),m.globalAlpha=1,!i.study||!i.study.yaxis){if(u){var C=Math.round(v.bottom)+.5;y.moveTo("border",d,v.top),y.lineTo("border",d,C),y.draw(t.chart.context,"border")}t.canvasFont("stx_yaxis"),t.canvasColor("stx_yaxis");var w=v.left+f+3;m.fillText(a,w,x),m.fillText(r,w,b),c.axisDrawn=!0}t.endClip(),m.globalAlpha=1}},e.Studies.createHistogram=function(t,e,i,n,r){var a=t.panels[e.panel];t.startClip(a.name);var o=t.layout.candleWidth-2;o<2&&(o=1);var s=t.pixelFromPrice(0,a);a.min>0&&(s=t.pixelFromPrice(a.min,a)),n&&(s=Math.floor(a.top+a.height/2));var l=t.chart.context,h=e.name+"_hist";e.outputs["Decreasing Bar"]||e.outputs["Negative Bar"]?l.globalAlpha=r||1:t.canvasColor("stx_histogram");for(var c=null,u=null,d=e.outputs,p=0;p<i.length;p++){var f=i[p];if(f){f.candleWidth&&(o=Math.floor(Math.max(1,f.candleWidth-2)));var m=Math.floor(t.pixelFromBar(p,a.chart)-o/2),g=Math.floor(o);if(null===c){var v=t.tickFromPixel(m,a.chart)-1;c=v<0?u:t.pixelFromPrice(t.chart.dataSet[v][h],a)-s}else c=u;u=t.pixelFromPrice(f[h],a)-s,d["Decreasing Bar"]&&u>c?l.fillStyle=d["Decreasing Bar"]:d["Increasing Bar"]&&u<c?l.fillStyle=d["Increasing Bar"]:d["Positive Bar"]&&u<0?l.fillStyle=d["Positive Bar"]:d["Negative Bar"]&&u>0&&(l.fillStyle=d["Negative Bar"]),l.fillRect(m,s,g,Math.floor(u))}}l.globalAlpha=1,t.endClip()},
e.Studies.volumeChart=function(t,e,i,n){var r,a,o=-1*Number.MAX_VALUE;for(r in i)for(var s=0;s<i[r].length;s++)(a=i[r][s])&&a>o&&(o=a);var l=t.panels[e.panel],h=Math.floor(l.yAxis.bottom)+.5,c=Math.floor(l.yAxis.top)+.5,u=h-c,d=t.layout.candleWidth,p=null;e.parameters&&e.parameters.displayBorder||(n=null);var f=0;n||(f=(d-t.chart.tmpWidth)/2);var m=t.chart.context;m.lineWidth=1,t.startClip(e.panel);for(r in i){n&&(p=n[r]),m.fillStyle=r,p&&(m.strokeStyle=p),m.beginPath();for(var g,v=h+.5,y=Math.floor(t.pixelFromBar(0,l.chart)),x=0;x<i[r].length;x++)if(t.chart.dataSegment[x]&&t.chart.dataSegment[x].candleWidth?(d=t.chart.dataSegment[x].candleWidth,n||(f=d/4)):(d=t.layout.candleWidth,n||(f=(d-t.chart.tmpWidth)/2)),0===x&&(y-=d/2,g=y),a=i[r][x]){var b,C,w=a*(u/o),S=Math.min(Math.floor(h-u+(u-w))+.5,h);b=Math.floor(g+f),C=Math.floor(g+d-f),b=Math.max(b,y),m.moveTo(b,h),m.lineTo(C,h),m.lineTo(C,S),m.lineTo(b,S),n?(v>S||0===x)&&m.lineTo(b,v):m.lineTo(b,h),v=S,g+=d}else v=h,g+=d;m.fill(),m.strokeStyle=p,n&&t.layout.candleWidth>=2&&m.stroke(),m.closePath()}t.endClip()},e.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema","time series":"tsma",triangular:"tma",variable:"vma",VIDYA:"vdma",weighted:"wma","welles wilder":"smma","true":"y","false":"n"},e.Studies.prettyRE=/^.*\((.*?)\).*$/,e.Studies.prettyDisplay=function(t){var i=e.Studies.prettyRE.exec(t);if(!i)return t;var n=i[1];if(n){for(var r in e.Studies.prettify)n=n.replace(r,e.Studies.prettify[r]);t=t.replace(i[1],n)}return t},e.Studies.getFieldInputs=function(t){var e=[],i=t.study.inputs;for(var n in i)"field"==i[n]&&e.push(n);return e},e.Studies.initializeFN=function(t,i,n,r,a,o,s){function l(i,n,r){for(var a=null,o=e.Studies.getFieldInputs(h),s=0;s<o.length;s++){var l=e.Studies.studyPanelMap[i[o[s]]];if(l){a=l.panel;break}"Volume"!=i[o[s]]||"Volume"==t.chart.defaultPlotField&&!e.ChartEngine.chartShowsHighs(t.layout.chartType)||(a=r.vchart?"vchart":"volume")}return a||(a=n.chartName),a}n||(n={id:i}),a||(a={}),n.display||(n.display=n.id);var h=new e.Studies.StudyDescriptor(n.id,i,n.id,n,r,a);n.Period&&(h.days=Math.max(1,parseInt(h.inputs.Period,10))),s?(s.inputs||(s.inputs=h.study.inputs),s.outputs||(s.outputs=h.study.outputs),h.study=s):s=h.study,s.display&&(n.display=s.display),o||(o=n.id);var c=h.overlay||s.overlay||n.Overlay,u=h.underlay||s.underlay||n.Underlay;if(u&&(h.underlay=!0),c&&(h.overlay=!0),a.replaceID&&(t.panelExists(a.replaceID)||c||u)){var d=t.layout.studies[a.replaceID];if(c||u)h.panel=l(n,a,t.panels),a.replaceID!=h.inputs.id&&(delete t.layout.studies[a.replaceID],delete t.overlays[a.replaceID],e.deleteRHS(e.Studies.studyPanelMap,d));else{h.panel=o;var p={};for(var f in t.panels)if(f==a.replaceID){var m=t.panels[f];m.name=o,m.display=n.display,p[o]=m,a.replaceID!=o&&e.deleteRHS(e.Studies.studyPanelMap,d),t.moveMarkers&&t.moveMarkers(a.replaceID,o)}else p[f]=t.panels[f];t.panels=p,a.replaceID!=h.inputs.id&&delete t.layout.studies[a.replaceID]}}else if(t.panelExists(o))h.panel=o,h.underlay||h.panel!=t.chart.name||(h.overlay=!0);else if(c||u)h.panel=l(n,a,t.panels);else{var g=s.panelHeight?s.panelHeight:null;t.createPanel(n.display,n.id,g,a.chartName),s.yAxis||(t.panels[n.id].yAxis.displayGridLines=t.displayGridLinesInStudies)}var v=t.panels[h.panel];if(v&&v.chart.name!=v.name){var y=s?s.yAxis:null,x=s?s.parameters:null;y?(e.extend(v.yAxis,y),y.ground&&(v.yAxis.initialMarginBottom=0),(y.ground||y.initialMarginTop||0===y.initialMarginTop||y.initialMarginBottom||0===y.initialMarginBottom)&&t.calculateYAxisMargins(v.yAxis)):x&&(x.zoom||0===x.zoom)?v.yAxis.zoom=x.zoom:v.yAxis.zoom=10}return h},e.Studies.overZones=function(t,i,n){if(n.length){var r=t.panels[i.panel];if(r&&!r.hidden){e.Studies.displaySeriesAsLine(t,i,n);var a=i.parameters;if(a&&a.studyOverZonesEnabled){var o=t.chart.context,s=parseFloat(a.studyOverBoughtValue),l=parseFloat(a.studyOverSoldValue),h=r.height/r.shadow,c=r.bottom-h*s,u=r.bottom-h*l,d={lineWidth:1};if(o.globalAlpha=.2,t.plotLine(r.left,r.right-5,c,c,a.studyOverBoughtColor,"segment",o,!1,d),o.globalAlpha=.2,t.plotLine(r.left,r.right-5,u,u,a.studyOverSoldColor,"segment",o,!1,d),!i.study||!i.study.yaxis){var p=t.getCanvasFontSize("stx_yaxis");t.canvasFont("stx_yaxis"),t.canvasColor("stx_yaxis"),o.fillText(s,r.yAxis.left,c+p/2),o.fillText(l,r.yAxis.left,u+p/2),r.axisDrawn=!0}}}}},e.Studies.displayPSAR2=function(t,e,i){var n=t.panels[e.panel],r=n.name==n.chart.name;t.startClip(n.name);var a=t.chart.context,o="squarewave"==e.inputs["Plot Type"];for(var s in e.outputs){var l=s+" "+e.name;a.beginPath();for(var h=t.layout.candleWidth,c=Math.max(3,Math.floor(t.chart.tmpWidth/2)),u=0;u<i.length;u++){var d=i[u];if(d&&(d[l]||0===d[l])){d.candleWidth&&(h=d.candleWidth),r&&d.transform&&(d=d.transform);var p=t.pixelFromBar(u,n.chart);o&&(p-=h/2);var f=t.pixelFromPrice(d[l],n);if(0!==u&&i[u-1]&&(i[u-1][l]||0===i[u-1][l])||a.moveTo(p,f),o){if(a.lineTo(p,f),a.lineTo(p+h,f),i[u+1]){var m=i[u+1];r&&m.transform&&(m=m.transform),m[l]||0===m[l]||a.lineTo(p+h,t.pixelFromPrice(m[e.referenceOutput+" "+e.name],t.panels[e.panel]))}}else a.moveTo(p-c/2,f),a.lineTo(p+c/2,f)}}a.lineWidth=1,e.highlight&&(a.lineWidth=3);var g=e.outputs[s];"auto"==g&&(g=t.defaultColor),a.strokeStyle=g,a.stroke(),a.closePath(),a.lineWidth=1}t.endClip()},e.Studies.initializeStochastics=function(t,i,n){return n.display="Stoch ("+n.Period+")",e.Studies.initializeFN.apply(null,arguments)},e.Studies.calculateVolume=function(t,i){var n=i.outputs;if("vchart"==i.name||"volume"==i.name)t.setStyle("stx_volume_up","color",n["Up Volume"]),t.setStyle("stx_volume_down","color",n["Down Volume"]);else{if(!t||!t.chart.dataSet)return;var r=t.layout,a=i.parameters.removeStudy,o=r.volumeUnderlay;r.volumeUnderlay=!a,o!=r.volumeUnderlay&&t.changeOccurred("layout"),a?e.Studies.removeStudy(t,i):(t.setStyle("stx_volume_underlay_up","color",n["Up Volume"]),t.setStyle("stx_volume_underlay_down","color",n["Down Volume"]),n["Up Border"]&&t.setStyle("stx_volume_underlay_up","border-left-color",n["Up Border"]),n["Down Border"]&&t.setStyle("stx_volume_underlay_down","border-left-color",n["Down Border"]))}},e.Studies.MA=function(t,i,n,r,a,o,s){var l=new e.Studies.StudyDescriptor(a+" "+s.name,"ma",s.panel);l.chart=s.chart,l.days=parseInt(i,10),l.startFrom=s.startFrom,l.inputs={},t&&(l.inputs.Type=t),n&&(l.inputs.Field=n),r&&(l.inputs.Offset=parseInt(r,10)),e.Studies.calculateMovingAverage(o,l)},e.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tsma:"time series",tma:"triangular",vma:"variable",vdma:"vidya",wma:"weighted",smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential","time series":"Time Series",triangular:"Triangular",variable:"Variable",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tsma:"TimeSeries","time series":"TimeSeries",tma:"Triangular",triangular:"Triangular",vma:"Variable",variable:"Variable",vdma:"Variable",vidya:"Variable",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},e.Studies.movingAverageHelper=function(t,i){if("options"==i){var n={};for(var r in e.Studies.movingAverage.translations)n[r]=t.translateIf(e.Studies.movingAverage.translations[r]);return n}return e.Studies.movingAverage.conversions[i]},e.Studies.volUnderlay=function(t,i){var n=[{field:"Volume",fill_color_up:t.canvasStyle("stx_volume_underlay_up").color,border_color_up:t.canvasStyle("stx_volume_underlay_up").borderLeftColor,opacity_up:t.canvasStyle("stx_volume_underlay_up").opacity,fill_color_down:t.canvasStyle("stx_volume_underlay_down").color,border_color_down:t.canvasStyle("stx_volume_underlay_down").borderLeftColor,opacity_down:t.canvasStyle("stx_volume_underlay_down").opacity}],r=i.inputs,a={name:"Volume",panel:i.panel,heightPercentage:.25,widthFactor:1};e.extend(a,i.study.parameters),e.extend(a,i.parameters),r.HeightPercentage&&(a.heightPercentage=r.HeightPercentage),t.drawHistogram(a,n)},e.Studies.createVolumeChart=function(t,i){var n=[{field:"Volume",fill_color_up:t.canvasStyle("stx_volume_up").color,border_color_up:t.canvasStyle("stx_volume_up").borderLeftColor,opacity_up:1,fill_color_down:t.canvasStyle("stx_volume_down").color,border_color_down:t.canvasStyle("stx_volume_down").borderLeftColor,opacity_down:1}];"rgb(184, 44, 12)"===n[0].border_color_down&&(n[0].border_color_down="#000000",n[0].border_color_up="#000000");var r={name:"Volume",panel:i.panel,widthFactor:1,bindToYAxis:!0};e.extend(r,i.study.parameters),e.extend(r,i.parameters),i.outputMap.Volume="transparent",e.Studies.createYAxis(t,i,i.chart.dataSegment,t.panels[i.panel]),t.drawHistogram(r,n)},e.Studies.calculateRSI=function(t,e){function i(t,e){return 0===e?100:100-100/(1+t/e)}var n=e.chart.scrubbed;if(n.length<e.days+1)return void(e.error=!0);for(var r=e.startFrom;r<n.length;r++)if(r){var a=n[r],o=n[r-1],s=a.Close-o.Close,l=Math.min(r,e.days),h=o["_avgG "+e.name];h||(h=0),h-=h/l;var c=o["_avgL "+e.name];c||(c=0),c-=c/l,s>0?h+=s/l:c-=s/l,r>=e.days&&(a["RSI "+e.name]=i(h,c)),a["_avgG "+e.name]=h,a["_avgL "+e.name]=c}e.zoneOutput="RSI"},e.Studies.calculateMACD=function(t,i){var n=i.chart.scrubbed,r=i.inputs,a=i.name;if(i.macd1Days||(i.macd1Days=parseFloat(r["Fast MA Period"])),i.macd2Days||(i.macd2Days=parseFloat(r["Slow MA Period"])),i.signalDays||(i.signalDays=parseFloat(r["Signal Period"])),i.days||(i.days=Math.max(i.macd1Days,i.macd2Days,i.signalDays)),n.length<i.days+1)return void(i.error=!0);var o=i.inputs.Field;o&&"field"!=o||(o="Close");var s=r["Moving Average Type"];s||(s="exponential"),e.Studies.MA(s,i.macd1Days,o,0,"_MACD1",t,i),e.Studies.MA(s,i.macd2Days,o,0,"_MACD2",t,i);var l,h,c=Math.max(i.startFrom,i.days-1);for(l=c;l<n.length;l++)h=n[l],h["MACD "+a]=h["_MACD1 "+a]-h["_MACD2 "+a];var u=r["Signal MA Type"];u||(u="exponential"),e.Studies.MA(u,i.signalDays,"MACD "+a,0,"Signal",t,i);var d=a+"_hist";for(l=c;l<n.length;l++){h=n[l];var p=h["Signal "+a];(p||0===p)&&(h[d]=h["MACD "+a]-h["Signal "+a])}},e.Studies.calculateStandardDeviation=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);var r=i.inputs.Field;r&&"field"!=r||(r="Close");var a=i.inputs["Moving Average Type"];a||(a=i.inputs.Type),e.Studies.MA(a,i.days,r,i.inputs.Offset,"_MA",t,i);var o=0,s=0,l=0,h=Number(i.inputs["Standard Deviations"]);h<0&&(h=2);var c=i.name;for(var u in i.outputs)c=u+" "+c;var d,p,f;for(d=i.startFrom-1,f=0;d>=0&&f<i.days;d--,f++)p=n[d][r],isNaN(p)&&(p=0),o+=Math.pow(p,2),s+=p;for(d=i.startFrom;d<n.length;d++){var m=n[d];if(p=m[r],isNaN(p)&&(p=0),o+=Math.pow(p,2),s+=p,!(d<i.days-1)){if(d>=i.days){var g=n[d-i.days][r];isNaN(g)&&(g=0),o-=Math.pow(g,2),s-=g}l=m["_MA "+i.name],m[c]=Math.sqrt((o+i.days*Math.pow(l,2)-2*l*s)/i.days)*h}}},e.Studies.calculateMovingAverage=function(t,i){if(i.chart.scrubbed){var n=i.inputs.Type;"ma"!=n&&n||(n="simple");var r=e.Studies.movingAverage.typeMap;if(n in r)return e.Studies["calculateMovingAverage"+r[n]](t,i);if("simple"===n){var a=i.chart.scrubbed,o=0,s=[],l=i.name;for(var h in i.outputs)l=h+" "+l;var c=i.inputs.Field;c&&"field"!=c||(c="Close");var u=parseInt(i.inputs.Offset,10);isNaN(u)&&(u=0);var d,p,f=i.startFrom,m=u;for(d=i.startFrom-1;d>=0;d--)if((p=a[d][c])||0===p)if(m>0)m--,f=d;else{if(s.length==i.days-1)break;o+=p,s.unshift(p)}for(s.length<i.days-1&&(s=[],f=0),d=f;d<a.length;d++){p=a[d][c];var g=d+u>=0&&d+u<a.length,v=g?a[d+u]:null;p||0===p?(o+=p,s.push(p),s.length>i.days&&(o-=s.shift()),v&&(v[l]=s.length==i.days?o/i.days:null)):v&&(v[l]=null)}}}},e.Studies.calculateMovingAverageExponential=function(t,e){var i=e.inputs.Type,n=e.chart.scrubbed,r=0,a=0,o=0,s=2/(e.days+1);"welles wilder"==i&&(s=1/e.days);var l=null,h=e.name;for(var c in e.outputs)h=c+" "+h;var u=e.inputs.Field;u&&"field"!=u||(u="Close");var d=parseInt(e.inputs.Offset,10);isNaN(d)&&(d=0);var p,f,m=e.startFrom,g=d;for(p=e.startFrom-1;p>=0;p--)if((f=n[p][h])||0===f){if(null===l&&(l=f),g<=0)break;g--,m=p}for(null===l&&(l=m=0),p=m;p<n.length;p++){f=n[p][u];var v=p+d>=0&&p+d<n.length,y=v?n[p+d]:null;f||0===f?(l||0===l?(a=(f-l)*s+l,y&&(y[h]=a)):o==e.days-1?(r+=f,a=r/e.days,y&&(y[h]=a)):0===o?(r+=f,a=r,y&&(y[h]=null)):(r+=f,a=r/(o+1),y&&(y[h]=null)),l=a,o++):y&&(y[h]=null)}},e.Studies.calculateMovingAverageVariable=function(t,i){var n=i.inputs.Type,r=i.chart.scrubbed,a=2/(i.days+1),o=null,s=i.name;for(var l in i.outputs)s=l+" "+s;var h=i.inputs.Field;h&&"field"!=h||(h="Close"),"vidya"==n?(i.std=new e.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=5,i.std.startFrom=i.startFrom,i.std.inputs={Field:h,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},e.Studies.calculateStandardDeviation(t,i.std),e.Studies.MA("ma",20,"_STD "+i.name,0,"_MASTD",t,i)):(i.cmo=new e.Studies.StudyDescriptor(i.name,"cmo",i.panel),i.cmo.chart=i.chart,i.cmo.days=9,i.cmo.startFrom=i.startFrom,i.cmo.outputs={_CMO:null},e.Studies.calculateChandeMomentum(t,i.cmo));var c=parseInt(i.inputs.Offset,10);isNaN(c)&&(c=0);var u,d,p=i.startFrom,f=c;for(u=i.startFrom-1;u>=0;u--)if((d=r[u][s])||0===d){if(null===o&&(o=d),f<=0)break;f--,p=u}for(null===o&&(o=p=0),u=p;u<r.length;u++){var m=r[u];d=m[h];var g=u+c>=0&&u+c<r.length,v=g?r[u+c]:null;if(d||0===d){var y;if("vidya"==n){if(!m["_MASTD "+i.name])continue;y=m["_STD "+i.name]/m["_MASTD "+i.name]}else{if(!m["_CMO "+i.name])continue;y=Math.abs(m["_CMO "+i.name])/100}var x=a*y*d+(1-a*y)*o;v&&(v[s]=x),o=x}else v&&(v[s]=null)}},e.Studies.calculateMovingAverageTimeSeries=function(t,i){i.ma=new e.Studies.StudyDescriptor(i.name,"ma",i.panel),i.ma.chart=i.chart,i.ma.days=i.days,i.ma.startFrom=i.startFrom,i.ma.inputs=i.inputs,e.Studies.calculateLinearRegressionIndicator(t,i.ma);var n=i.name;for(var r in i.outputs)n=r+" "+n;var a=parseInt(i.inputs.Offset,10);isNaN(a)&&(a=0);for(var o=i.chart.scrubbed,s=a,l=i.startFrom-1;l>=0;l--){var h=o[l][n];if(h||0===h){if(!(s>0))break;s--}}for(l++;l<o.length;l++){var c=o[l];l+a>=0&&l+a<o.length&&(o[l+a][n]=c["Forecast "+i.name])}},e.Studies.calculateMovingAverageTriangular=function(t,i){var n=i.chart.scrubbed,r=i.inputs.Field;r&&"field"!=r||(r="Close");var a=Math.ceil(i.days/2);e.Studies.MA("simple",a,i.inputs.Field,0,"TRI1",t,i),i.days%2==0&&a++,e.Studies.MA("simple",a,"TRI1 "+i.name,0,"TRI2",t,i);var o=i.name;for(var s in i.outputs)o=s+" "+o;var l=parseInt(i.inputs.Offset,10);isNaN(l)&&(l=0);for(var h=l,c=i.startFrom-1;c>=0;c--){var u=n[c][o];if(u||0===u){if(!(h>0))break;h--}}for(c++;c<n.length;c++)c+l>=0&&c+l<n.length&&(n[c+l][o]=n[c]["TRI2 "+i.name])},e.Studies.calculateMovingAverageWeighted=function(t,e){var i=e.chart.scrubbed,n=0,r=0,a=e.inputs.Field;a&&"field"!=a||(a="Close");var o=e.days*(e.days+1)/2,s=e.name;for(var l in e.outputs)s=l+" "+s;var h=parseInt(e.inputs.Offset,10);isNaN(h)&&(h=0);var c,u,d=[],p=e.startFrom,f=h;for(c=e.startFrom-1;c>=0;c--)if((u=i[c][a])||0===u)if(f>0)f--,p=c;else{if(d.length==e.days-1)break;d.unshift(u)}for(d.length<e.days-1&&(d=[],p=0),c=0;c<d.length;c++)n+=(c+1)*d[c],r+=d[c];for(c=p;c<i.length;c++){u=i[c][a];var m=c+h>=0&&c+h<i.length,g=m?i[c+h]:null;u||0===u?(d.push(u),d.length>e.days&&(n-=r,r-=d.shift()),n+=d.length*u,r+=u,c<e.days-1?g&&(g[s]=null):g&&(g[s]=n/o)):g&&(g[s]=null)}},e.Studies.calculateKlinger=function(t,i){var n=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),a=Number(i.inputs["Long Cycle"]);if(n.length<Math.max(r,a)+1)return void(i.error=!0);var o,s=i.name+"_hist",l="Klinger "+i.name,h="KlingerSignal "+i.name,c="_SV "+i.name,u="_EMA-S "+i.name,d="_EMA-L "+i.name;for(o=Math.max(1,i.startFrom);o<n.length;o++){var p=n[o].Volume;n[o]["hlc/3"]<n[o-1]["hlc/3"]&&(p*=-1),n[o][c]=p}for(e.Studies.MA("exponential",r,c,0,"_EMA-S",t,i),e.Studies.MA("exponential",a,c,0,"_EMA-L",t,i),o=Math.max(a,i.startFrom);o<n.length;o++)n[o][l]=n[o][u]-n[o][d];for(e.Studies.MA("exponential",Number(i.inputs["Signal Periods"]),l,0,"KlingerSignal",t,i),o=i.startFrom;o<n.length;o++)n[o][s]=n[o][l]-n[o][h]},e.Studies.calculateStochastics=function(t,i){function n(t,e,i){for(var n=t-i+1,r=-1*Number.MAX_VALUE,a=Number.MAX_VALUE,s=n;s<=t;s++)a=Math.min(a,o[s].Low),r=Math.max(r,o[s].High);return(o[t][e]-a)/(r-a)*100}i.smooth||(i.smooth=i.inputs.Smooth);var r=i.inputs.Field;r&&"field"!=r||(r="Close");var a=i.inputs["%K Periods"];a||(a=i.days);var o=i.chart.scrubbed;if(o.length<Math.max(a,i.days)+1)return void(i.error=!0);var s=i.inputs["%K Smoothing Periods"];s?i.smooth=!0:i.smooth&&(s=3);var l=i.inputs["%D Periods"];l||(l=3),i.outputMap={},i.outputMap["%K "+i.name]="Fast",i.outputMap["%D "+i.name]="Slow";for(var h=Math.max(a,i.startFrom);h<o.length;h++)o[h][i.name]=n(h,r,a);e.Studies.MA("simple",i.smooth?s:1,i.name,0,"%K",t,i),e.Studies.MA("simple",l,"%K "+i.name,0,"%D",t,i)},e.Studies.calculateStudyATR=function(t,e){var i=e.chart.scrubbed,n=e.days;if(i.length<n+1)return void(e.error=!0);for(var r=0,a=e.name,o=Math.max(e.startFrom,1);o<i.length;o++){var s=i[o],l=i[o-1],h=s.trueRange;l["Sum True Range "+a]&&(r=l["Sum True Range "+a]),r+=h,o>n&&(r-=i[o-n]["True Range "+a]),s["True Range "+a]=h,s["Sum True Range "+a]=r,o==n?s["ATR "+a]=r/n:o>n&&(s["ATR "+a]=(l["ATR "+a]*(n-1)+h)/n)}},e.Studies.calculatePSAR=function(t,e){function i(){r=0,a=null,o=!o}var n=e.chart.scrubbed,r=0,a=null,o=!1,s=0,l=parseFloat(e.inputs["Minimum AF"]),h=parseFloat(e.inputs["Maximum AF"]);if(e.startFrom>0){s=n[e.startFrom-1]["Result "+e.name];var c=n[e.startFrom-1]["_state "+e.name];c&&3==c.length&&(r=c[0],a=c[1],o=c[2])}for(var u=e.startFrom-1;u<n.length-1;u++)if(!(u<0)){var d=s;if(o){(!a||a<n[u].High)&&(a=n[u].High,r=Math.min(r+l,h)),s=d+r*(a-d);var p=Math.min(n[Math.max(1,u)-1].Low,n[u].Low);s>n[u+1].Low?(s=a,i()):s>p&&(s=p)}else{(!a||a>n[u].Low)&&(a=n[u].Low,r=Math.min(r+l,h)),s=d+r*(a-d);var f=Math.max(n[Math.max(1,u)-1].High,n[u].High);s<n[u+1].High?(s=a,i()):s<f&&(s=f)}n[u+1]["Result "+e.name]=s,n[u+1]["_state "+e.name]=[r,a,o]}},e.Studies.calculateTRIX=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);for(var r=i.name,a=["Close","_MA1 "+r,"_MA2 "+r,"_MA3 "+r],o=0;o<a.length-1;o++)e.Studies.MA("exponential",i.days,a[o],0,"_MA"+(o+1).toString(),t,i);for(var s=a[3],l=Math.max(1,i.startFrom);l<n.length;l++){var h=n[l-1][s];h&&(n[l]["Result "+r]=100*(n[l][s]/h-1))}},e.Studies.calculateIntradayMomentum=function(t,e){var i=e.chart.scrubbed,n=e.days;if(i.length<n+1)return void(e.error=!0);var r=0,a=0;e.startFrom>1&&(r=i[e.startFrom-1]["_totUp "+e.name],a=i[e.startFrom-1]["_totDn "+e.name]);for(var o=e.startFrom;o<i.length;o++){var s=i[o].Close-i[o].Open;if(s>0?r+=s:a-=s,o>=n){var l=i[o-n].Close-i[o-n].Open;l>0?r-=l:a+=l}i[o]["Result "+e.name]=100*r/(r+a),i[o]["_totUp "+e.name]=r,i[o]["_totDn "+e.name]=a}},e.Studies.calculateQStick=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);for(var r=i.startFrom;r<n.length;r++)n[r]["_Close-Open "+i.name]=n[r].Close-n[r].Open;e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Close-Open "+i.name,0,"Result",t,i)},e.Studies.calculateSchaff=function(t,i){function n(t,e,n){for(var a=null,o=null,s=e-t+1;s<=e;s++){var l=r[s][n+" "+i.name];l&&(a=null===a?l:Math.min(a,l),o=null===o?l:Math.max(o,l))}return[a,o]}var r=i.chart.scrubbed,a=i.days,o=Number(i.inputs["Short Cycle"]),s=Number(i.inputs["Long Cycle"]);if(r.length<Math.max(a,o,s)+1)return void(i.error=!0);var l=i.inputs.Field;l&&"field"!=l||(l="Close");var h=.5;e.Studies.MA(i.inputs["Moving Average Type"],o,l,0,"_MACD1",t,i),e.Studies.MA(i.inputs["Moving Average Type"],s,l,0,"_MACD2",t,i);for(var c=0,u=0,d=i.startFrom;d<r.length;d++){var p=r[d];if(p["Result "+i.name]=u,!(d<s-1||(p["_MACD "+i.name]=p["_MACD1 "+i.name]-p["_MACD2 "+i.name],d<s+(a-1)))){var f=n(a,d,"_MACD");c=f[1]>f[0]?100*(p["_MACD "+i.name]-f[0])/(f[1]-f[0]):c,p["_PF "+i.name]=r[d-1]["_PF "+i.name]?r[d-1]["_PF "+i.name]+h*(c-r[d-1]["_PF "+i.name]):c,d<s+2*(a-1)||(f=n(a,d,"_PF"),u=f[1]>f[0]?100*(p["_PF "+i.name]-f[0])/(f[1]-f[0]):u,p["Result "+i.name]=r[d-1]["Result "+i.name]?r[d-1]["Result "+i.name]+h*(u-r[d-1]["Result "+i.name]):u)}}},e.Studies.calculateStochMomentum=function(t,i){function n(t,e){for(var i=null,n=null,r=e-t+1;r<=e;r++)l[r]&&l[r].Low&&l[r].High&&(i=null===i?l[r].Low:Math.min(i,l[r].Low),n=null===n?l[r].High:Math.max(n,l[r].High));return[i,n]}var r=Number(i.inputs["%K Periods"]),a=Number(i.inputs["%K Smoothing Periods"]),o=Number(i.inputs["%K Double Smoothing Periods"]),s=Number(i.inputs["%D Periods"]),l=i.chart.scrubbed;if(l.length<r+a+o-1||l.length<s)return void(i.error=!0);var h;for(h=Math.max(r,i.startFrom)-1;h<l.length;h++){var c=l[h],u=n(r,h);c["_H "+i.name]=c.Close-(u[0]+u[1])/2,c["_DHL "+i.name]=u[1]-u[0]}for(e.Studies.MA("exponential",a,"_H "+i.name,0,"_HS1",t,i),e.Studies.MA("exponential",o,"_HS1 "+i.name,0,"_HS2",t,i),e.Studies.MA("exponential",a,"_DHL "+i.name,0,"_DHL1",t,i),e.Studies.MA("exponential",o,"_DHL1 "+i.name,0,"_DHL2",t,i),h=r-1;h<l.length;h++)l[h]["%K "+i.name]=l[h]["_HS2 "+i.name]/(.5*l[h]["_DHL2 "+i.name])*100;e.Studies.MA(i.inputs["%D Moving Average Type"],s,"%K "+i.name,0,"%D",t,i),i.zoneOutput="%K"},e.Studies.calculateEhlerFisher=function(t,e){function i(t,e){for(var i=Number.MAX_VALUE,r=-1*Number.MAX_VALUE,a=e-t+1;a<=e;a++)if(n[a]&&n[a].Low&&n[a].High){var o=(n[a].High+n[a].Low)/2;i=Math.min(i,o),r=Math.max(r,o)}return[i,r]}var n=e.chart.scrubbed;if(n.length<e.days+1)return void(e.error=!0);var r=0;e.startFrom>1&&(r=n[e.startFrom-1]["_n "+e.name]);for(var a=e.startFrom;a<n.length;a++){var o=n[a];if(a<e.days-1)o["EF "+e.name]=o["EF Trigger "+e.name]=r;else{var s=i(e.days,a);r=.66*(((n[a].High+n[a].Low)/2-s[0])/Math.max(1e-6,s[1]-s[0])-.5)+.67*r,r>0?r=Math.min(r,.9999):r<0&&(r=Math.max(r,-.9999));var l=a?n[a-1]["EF "+e.name]:0;o["EF "+e.name]=.5*Math.log((1+r)/(1-r))+.5*l,o["EF Trigger "+e.name]=l,o["_n "+e.name]=r}}},e.Studies.calculatePrettyGoodOscillator=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);e.Studies.MA("exponential",i.days,"trueRange",0,"_EMA",t,i),e.Studies.MA("simple",i.days,"Close",0,"_SMA",t,i);for(var r=Math.max(1,i.startFrom);r<n.length;r++)n[r]["_SMA "+i.name]&&n[r]["_EMA "+i.name]&&(n[r]["Result "+i.name]=(n[r].Close-n[r]["_SMA "+i.name])/n[r]["_EMA "+i.name])},e.Studies.calculateUltimateOscillator=function(t,e){var i=e.chart.scrubbed,n=[e.inputs["Cycle 1"],e.inputs["Cycle 2"],e.inputs["Cycle 3"]],r=Math.max(n[0],n[1],n[2]);if(i.length<r+1)return void(e.error=!0);var a=n[0]*n[1],o=n[0]*n[2],s=n[1]*n[2],l=[0,0,0],h=[0,0,0];e.startFrom&&(i[e.startFrom-1]["_accbp "+e.name]&&(l=i[e.startFrom-1]["_accbp "+e.name].slice()),i[e.startFrom-1]["_acctr "+e.name]&&(h=i[e.startFrom-1]["_acctr "+e.name].slice()));for(var c=Math.max(1,e.startFrom);c<i.length;c++){for(var u=Math.min(i[c].Low,i[c-1].Close),d=i[c].Close-u,p=Math.max(i[c].High,i[c-1].Close)-u,f=0;f<n.length;f++)if(l[f]+=d,h[f]+=p,c>n[f]){var m=Math.min(i[c-n[f]].Low,i[c-n[f]-1].Close),g=i[c-n[f]].Close-m,v=Math.max(i[c-n[f]].High,i[c-n[f]-1].Close)-m;l[f]-=g,h[f]-=v}if(i[c]["_accbp "+e.name]=l.slice(),i[c]["_acctr "+e.name]=h.slice(),!(c<r)){var y=s*l[0]/h[0]+o*l[1]/h[1]+a*l[2]/h[2],x=s+o+a;i[c]["Result "+e.name]=100*y/x}}},e.Studies.calculatePriceVolumeTrend=function(t,e){var i=e.inputs.Field;i&&"field"!=i||(i="Close");var n=e.chart.scrubbed,r=0;e.startFrom>1&&(r=n[e.startFrom-1]["Result "+e.name]);for(var a=Math.max(1,e.startFrom);a<n.length;a++)n[a][i]&&n[a-1][i]&&(r+=n[a].Volume*(n[a][i]-n[a-1][i])/n[a-1][i],n[a]["Result "+e.name]=r)},e.Studies.calculateOnBalanceVolume=function(t,e){var i=e.inputs.Field;i&&"field"!=i||(i="Close");var n=e.inputs["Min Tick Value"],r=!1;n||0===n||(r=!0,n=0);for(var a,o,s=e.chart.scrubbed,l=0,h=e.startFrom;h<s.length;h++)if(a=s[h],h&&a[i]&&(s[h-1][i]&&(o=s[h-1]),o)){a[i]-o[i]>n?l=1:o[i]-a[i]>n?l=-1:r&&(l=0);var c=o["Result "+e.name];c||(c=0),c+=a.Volume*l,a["Result "+e.name]=c}},e.Studies.calculateVolumeIndex=function(t,i){var n=i.inputs.Field;n&&"field"!=n||(n="Close");var r=i.chart.scrubbed;if(r.length<i.days+1)return void(i.error=!0);var a=100;i.startFrom>1&&(a=r[i.startFrom-1]["Index "+i.name]);for(var o=Math.max(1,i.startFrom);o<r.length;o++)r[o][n]&&r[o-1][n]&&(("Pos Vol"==i.type&&r[o].Volume>r[o-1].Volume||"Neg Vol"==i.type&&r[o].Volume<r[o-1].Volume)&&(a*=r[o][n]/r[o-1][n]),r[o]["Index "+i.name]=a);e.Studies.MA(i.inputs["Moving Average Type"],i.days,"Index "+i.name,0,"MA",t,i)},e.Studies.calculateHistoricalVolatility=function(t,e){function i(e){return isNaN(e)&&(e=365),"day"==t.layout.interval?e:"week"==t.layout.interval?52:"month"==t.layout.interval?12:e}var n=e.chart.scrubbed;if(n.length<e.days+1)return void(e.error=!0);var r=e.inputs.Field;r&&"field"!=r||(r="Close");var a=e.inputs["Standard Deviations"];a<0&&(a=1);var o=100*Math.sqrt(i(e.inputs["Days Per Year"]))*a,s=[],l=0;e.startFrom>1&&(l=n[e.startFrom-1]["_state "+e.name][0],s=n[e.startFrom-1]["_state "+e.name][1].slice());for(var h=Math.max(1,e.startFrom);h<n.length;h++){var c=n[h-1][r];if(c){var u=Math.log(n[h][r]/c);if(s.push(u),l+=u,h>=e.days){var d=0;l/=e.days;for(var p=0;p<s.length;p++)d+=Math.pow(s[p]-l,2);l*=e.days,l-=s.shift(),n[h]["Result "+e.name]=Math.sqrt(d/e.days)*o}}n[h]["_state "+e.name]=[l,s.slice()]}},e.Studies.calculateSwingIndex=function(t,e){var i=e.inputs["Limit Move Value"];(null===i||isNaN(i))&&(i=99999);var n=e.chart.scrubbed,r=0;e.startFrom>1&&(r=n[e.startFrom-1]["Result "+e.name]);for(var a=Math.max(1,e.startFrom);a<n.length;a++){var o=Math.abs(n[a].High-n[a-1].Close),s=Math.abs(n[a].Low-n[a-1].Close),l=Math.abs(n[a].High-n[a].Low),h=Math.abs(n[a-1].Close-n[a-1].Open),c=Math.max(o,s),u=Math.max(l,c),d=u+.25*h;u==o?d-=.5*s:u==s&&(d-=.5*o);var p=50*(n[a].Close-n[a-1].Close+.5*(n[a].Close-n[a].Open)+.25*(n[a-1].Close-n[a-1].Open))/d*(c/i);0!==d&&0!==i||(p=0),"Swing"==e.type&&(r=0),r+=p,n[a]["Result "+e.name]=r}},e.Studies.calculateADX=function(t,i){e.Studies.calculateStudyATR(t,i);var n=i.chart.scrubbed,r=i.days,a=parseInt(i.inputs["Smoothing Period"],10);if(a||0===a||(a=r),n.length<i.days+1)return void(i.error=!0);for(var o,s=0,l=0,h=0,c=0,u=Math.max(1,i.startFrom);u<n.length;u++){o=n[u];var d=Math.max(0,o.High-n[u-1].High),p=Math.max(0,n[u-1].Low-o.Low);if(d>p?p=0:d=p>d?0:p=0,u<=r?(l+=d,h+=p,s+=o["True Range "+i.name]):(l=n[u-1]["_sm+DM "+i.name]*(r-1)/r+d,h=n[u-1]["_sm-DM "+i.name]*(r-1)/r+p,s=n[u-1]["_smTR "+i.name]*(r-1)/r+o["True Range "+i.name]),o["_sm+DM "+i.name]=l,o["_sm-DM "+i.name]=h,o["_smTR "+i.name]=s,!(u<r)){var f=100*l/s,m=100*h/s,g=100*Math.abs(f-m)/(f+m);if(o["+DI "+i.name]=f,o["-DI "+i.name]=m,!1!==i.inputs.Series&&a)if(u<r+a-1){if(u==i.startFrom)for(var v=r;v<i.startFrom;v++)c+=100*Math.abs(n[v]["+DI "+i.name]-n[v]["-DI "+i.name])/(n[v]["+DI "+i.name]+n[v]["-DI "+i.name]);c+=g}else o["ADX "+i.name]=u==r+a-1?c/a:(n[u-1]["ADX "+i.name]*(a-1)+g)/a;if(i.inputs.Histogram){var y=i.name+"_hist";if(!o["+DI "+i.name]&&0!==o["+DI "+i.name])continue;if(!o["-DI "+i.name]&&0!==o["-DI "+i.name])continue;o[y]=o["+DI "+i.name]-o["-DI "+i.name],!1===i.inputs.Series&&(o["+DI "+i.name]=null,o["-DI "+i.name]=null)}}}},e.Studies.calculateRandomWalk=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days+1)return void(e.error=!0);for(var n=Math.max(2,e.startFrom);n<i.length;n++){for(var r=0,a=i[n].High,o=i[n].Low,s=0,l=0,h=1;h<=e.days;h++){if(n<=h){s=l=0;break}r+=i[n-h].trueRange;var c=r/h*Math.sqrt(h);if(c){var u=(a-i[n-h].Low)/c,d=(i[n-h].High-o)/c;s=Math.max(s,u),l=Math.max(l,d)}}i[n]["Random Walk High "+e.name]=s,i[n]["Random Walk Low "+e.name]=l}},e.Studies.calculateRateOfChange=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days+1)return void(e.error=!0);var n=e.inputs.Field;"Vol ROC"==e.type?n="Volume":n&&"field"!=n||(n="Close");var r=e.name;for(var a in e.outputs)r=a+" "+r;var o=e.inputs["Center Line"];o=o?parseInt(o,10):0;for(var s=Math.max(e.startFrom,e.days);s<i.length;s++)if("Momentum"==e.type)i[s][r]=i[s][n]-i[s-e.days][n]+o;else{var l=i[s-e.days][n];l&&(i[s][r]=100*(i[s][n]/l-1)+o)}},e.Studies.calculateTypicalPrice=function(t,e){var i=e.chart.scrubbed,n=e.days;if(i.length<n+1)return void(e.overlay||(e.error=!0));var r=e.name;for(var a in e.outputs)r=a+" "+r;var o="hlc/3";"Med Price"==e.type?o="hl/2":"Weighted Close"==e.type&&(o="hlcc/4");var s=0;e.startFrom<=n&&(e.startFrom=0);for(var l=e.startFrom;l<i.length;l++)l&&i[l-1][r]&&(s=i[l-1][r]*n),s+=i[l][o],l>=n&&(s-=i[l-n][o],i[l][r]=s/n)},e.Studies.calculateElderRay=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days)return void(i.error=!0);e.Studies.MA("exponential",i.days,"Close",0,"_EMA",t,i);for(var r=Math.max(i.startFrom,i.days-1);r<n.length;r++)n[r][i.name+"_hist1"]=n[r].High-n[r]["_EMA "+i.name],n[r][i.name+"_hist2"]=n[r].Low-n[r]["_EMA "+i.name]},e.Studies.calculateElderForce=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days)return void(i.error=!0);for(var r=Math.max(1,i.startFrom);r<n.length;r++)n[r]["_EF1 "+i.name]=n[r].Volume*(n[r].Close-n[r-1].Close);e.Studies.MA("exponential",i.days,"_EF1 "+i.name,0,"Result",t,i)},e.Studies.calculateCenterOfGravity=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days)return void(e.error=!0);var n=e.inputs.Field;n&&"field"!=n||(n="Close");for(var r=Math.max(e.startFrom,e.days-1);r<i.length;r++){for(var a=0,o=0,s=0;s<e.days;s++)a-=(s+1)*i[r-s][n],o+=i[r-s][n];o&&(i[r]["Result "+e.name]=a/o)}},e.Studies.calculateEaseOfMovement=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days)return void(i.error=!0);for(var r=Math.max(1,i.startFrom);r<n.length;r++){var a=(n[r].High+n[r].Low)/2,o=(n[r-1].High+n[r-1].Low)/2,s=a-o,l=n[r].Volume/1e8/(n[r].High-n[r].Low);n[r]["_EOM1 "+i.name]=0===l?NaN:s/l}e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_EOM1 "+i.name,0,"Result",t,i)},e.Studies.calculateChaikinVolatility=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days)return void(i.error=!0);var r;for(r=i.startFrom;r<n.length;r++)n[r]["_High-Low "+i.name]=n[r].High-n[r].Low;e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_High-Low "+i.name,0,"_MA",t,i);var a=i.inputs["Rate Of Change"];for(a||(a=i.days),r=Math.max(i.startFrom,a);r<n.length;r++)n[r-a]["_MA "+i.name]&&(n[r]["Result "+i.name]=100*(n[r]["_MA "+i.name]/n[r-a]["_MA "+i.name]-1))},e.Studies.calculateChaikinMoneyFlow=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days)return void(e.error=!0);var n=0,r=0,a=i[e.startFrom-1];a&&(a["_sumMF "+e.name]&&(n=a["_sumMF "+e.name]),a["_sumV "+e.name]&&(r=a["_sumV "+e.name]));for(var o=e.startFrom;o<i.length;o++)i[o].High==i[o].Low?i[o]["_MFV "+e.name]=0:i[o]["_MFV "+e.name]=i[o].Volume*(2*i[o].Close-i[o].High-i[o].Low)/(i[o].High-i[o].Low),n+=i[o]["_MFV "+e.name],r+=i[o].Volume,o>e.days-1&&(n-=i[o-e.days]["_MFV "+e.name],(r-=i[o-e.days].Volume)&&(i[o]["Result "+e.name]=n/r)),i[o]["_sumMF "+e.name]=n,i[o]["_sumV "+e.name]=r},e.Studies.calculateTwiggsMoneyFlow=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days)return void(e.error=!0);var n=0,r=0,a=i[e.startFrom-1];a&&(a["_sumMF "+e.name]&&(n=a["_sumMF "+e.name]),a["_sumV "+e.name]&&(r=a["_sumV "+e.name]));for(var o=Math.max(1,e.startFrom);o<i.length;o++){var s=Math.max(i[o-1].Close,i[o].High),l=Math.min(i[o-1].Close,i[o].Low);i[o]["_MFV "+e.name]=i[o].Volume*(2*i[o].Close-s-l)/(s-l==0?999999:s-l),o>e.days-1&&(n*=(e.days-1)/e.days,r*=(e.days-1)/e.days),n+=i[o]["_MFV "+e.name],r+=i[o].Volume,o>e.days-1&&r&&(i[o]["Result "+e.name]=n/(r>0?r:999999)),i[o]["_sumMF "+e.name]=n,i[o]["_sumV "+e.name]=r}},e.Studies.calculateMassIndex=function(t,i){var n=i.chart.scrubbed;if(n.length<Math.max(9,i.days+1))return void(i.error=!0);for(var r=i.startFrom;r<n.length;r++)n[r]["_High-Low "+i.name]=n[r].High-n[r].Low;e.Studies.MA("exponential",9,"_High-Low "+i.name,0,"_EMA",t,i),e.Studies.MA("exponential",9,"_EMA "+i.name,0,"_EMA2",t,i);var a=0;n[i.startFrom-1]&&n[i.startFrom-1]["_total "+i.name]&&(a=n[i.startFrom-1]["_total "+i.name]);for(var o=Math.max(17,i.startFrom);o<n.length;o++)a+=n[o]["_EMA "+i.name]/n[o]["_EMA2 "+i.name],o>=17+i.days-1&&(n[o]["Result "+i.name]=a,a-=n[o-i.days+1]["_EMA "+i.name]/n[o-i.days+1]["_EMA2 "+i.name]),n[o]["_total "+i.name]=a},e.Studies.calculateMoneyFlowIndex=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days+1)return void(e.error=!0);var n=0,r=0,a=i[e.startFrom-1],o="_rawMF "+e.name,s="_cumMF "+e.name,l="Result "+e.name;a&&a[s]&&(n=a[s][0],r=a[s][1]);for(var h=e.startFrom;h<i.length;h++){var c=i[h]["hlc/3"];if(h>0){var u=i[h-1]["hlc/3"],d=c*i[h].Volume;if(c>u?n+=d:c<u?(d*=-1,r-=d):d=0,h>e.days){var p=i[h-e.days][o];p>0?n-=p:r+=p,i[h][l]=0===r?100:100-100/(1+n/r)}i[h][o]=d,i[h][s]=[n,r]}}},e.Studies.calculateChandeMomentum=function(t,e){var i=e.name;for(var n in e.outputs)i=n+" "+i;var r=e.chart.scrubbed;if(r.length<e.days+1)return void(e.error=!0);for(var a=0,o=0,s=[],l=e.startFrom-e.days+1;l<r.length;l++)if(!(l<1)){
var h=r[l].Close-r[l-1].Close;if(s.push(h),a+=h,o+=Math.abs(h),s.length==e.days){r[l][i]=100*a/o;var c=s.shift();a-=c,o-=Math.abs(c)}}},e.Studies.calculateChandeForecast=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);var r=i.inputs.Field;r&&"field"!=r||(r="Close"),e.Studies.MA("time series",i.days,r,0,"MA",t,i);for(var a=Math.max(1,i.startFrom);a<n.length;a++)n[a]["Result "+i.name]=100*(1-n[a]["MA "+i.name]/n[a][r])},e.Studies.calculateDetrendedPrice=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);var r=i.inputs.Field;r&&"field"!=r||(r="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,r,0,"MA",t,i);for(var a=Math.max(i.startFrom-Math.floor(i.days/2+1),Math.floor(i.days/2-1));a<n.length-Math.floor(i.days/2+1);a++)n[a]["Result "+i.name]=n[a][r]-n[a+Math.floor(i.days/2+1)]["MA "+i.name]},e.Studies.calculateAroon=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days+1)return void(e.error=!0);var n=0,r=0,a=null,o=null;if(e.startFrom>0){var s=i[e.startFrom-1]["_state "+e.name];s&&(n=s[0],r=s[1],a=s[2],o=s[3])}for(var l,h=e.startFrom;h<i.length;h++){if(null===a&&(a=i[h].High),null===o&&(o=i[h].Low),(a=Math.max(a,i[h].High))==i[h].High)n=0;else if(++n>e.days)for(a=i[h].High,n=0,l=1;l<=e.days;l++)(a=Math.max(a,i[h-l].High))==i[h-l].High&&(n=l);if((o=Math.min(o,i[h].Low))==i[h].Low)r=0;else if(++r>e.days)for(o=i[h].Low,r=0,l=1;l<=e.days;l++)(o=Math.min(o,i[h-l].Low))==i[h-l].Low&&(r=l);i[h]["Aroon Up "+e.name]=100*(1-n/e.days),i[h]["Aroon Down "+e.name]=100*(1-r/e.days),i[h]["Aroon Oscillator "+e.name]=i[h]["Aroon Up "+e.name]-i[h]["Aroon Down "+e.name],i[h]["_state "+e.name]=[n,r,a,o]}},e.Studies.calculatePrimeNumber=function(t,e){function i(t){if(t<=0)return!1;if(t!=Math.floor(t))return!1;if(!0===n[t]||!1===n[t])return n[t];for(var e=parseInt(Math.sqrt(t),10),i=2;i<=e;i++)if(t%i==0)return n[t]=!1,!1;return n[t]=!0,!0}for(var n=[],r=e.chart.scrubbed,a=e.startFrom;a<r.length;a++){var o=r[a];if(o){for(var s=o.High,l=0;s>0&&s<=10;l++)s*=10;for(i(s)&&(s+=2),s=Math.ceil(s),s%2==0&&s++;!i(s);)s+=2;s/=Math.pow(10,l);for(var h=o.Low,c=0;h>0&&h<=10;c++)h*=10;if(i(h)&&(h-=2),h=Math.floor(h),h%2==0&&h--,h>0){for(;!i(h);)h-=2;h/=Math.pow(10,c)}if("Prime Number Bands"==e.type)o["Prime Bands Top "+e.name]=s,o["Prime Bands Bottom "+e.name]=Math.max(0,h);else{var u=0,d=e.inputs["Tolerance Percentage"]*(s-h)/100,p=s+h-2*o.Close;p<d?u=1:p>d&&(u=-1),u&&(o["Result "+e.name]=u)}}}},e.Studies.calculateVerticalHorizontalFilter=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);i.mhml=new e.Studies.StudyDescriptor(i.name,i.type,i.panel),i.mhml.chart=i.chart,i.mhml.days=i.days,i.mhml.startFrom=i.startFrom,i.mhml.inputs={},i.mhml.outputs={_MHML:null},e.Studies.calculateMaxHighMinLow(t,i.mhml);for(var r=0,a=[],o=Math.max(1,i.startFrom-i.days);o<n.length;o++){var s=Math.abs(n[o].Close-n[o-1].Close);a.push(s),r+=s,a.length==i.days&&(n[o]["Result "+i.name]=n[o]["_MHML "+i.name]/r,r-=a.shift())}},e.Studies.calculatePriceOscillator=function(t,i){var n=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),a=Number(i.inputs["Long Cycle"]);if(n.length<Math.max(r,a)+1)return void(i.error=!0);var o=i.inputs.Field,s=i.inputs["Moving Average Type"];s||(s="simple"),o&&"field"!=o||(i.parameters.isVolume?(o="Volume",s="exponential"):o="Close");var l=i.inputs["Points Or Percent"];l||(l="Percent"),e.Studies.MA(s,r,o,0,"_Short MA",t,i),e.Studies.MA(s,a,o,0,"_Long MA",t,i);for(var h=Math.max(a,i.startFrom);h<n.length;h++){var c=n[h];c&&(c["Result "+i.name]="Points"==l?c["_Short MA "+i.name]-c["_Long MA "+i.name]:100*(c["_Short MA "+i.name]/c["_Long MA "+i.name]-1),i.outputs["Increasing Bar"]&&(c[i.name+"_hist"]=c["Result "+i.name]))}},e.Studies.calculateKeltner=function(t,i){e.Studies.MA(i.inputs["Moving Average Type"],i.days,"Close",0,"MA",t,i),e.Studies.calculateStudyATR(t,i),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},e.Studies.calculateCoppock=function(t,i){var n=i.chart.scrubbed,r=i.inputs.Field;r&&"field"!=r||(r="Close");var a=parseInt(i.inputs["Long RoC"],10);a||(a=14);var o=parseInt(i.inputs["Short RoC"],10);o||(o=11);var s=i.days;if(s||(s=10),!(a<o)){if(n.length<Math.max(o,a,s)+1)return void(i.error=!0);for(var l=Math.max(i.startFrom,a);l<n.length;l++){var h=n[l-o][r],c=n[l-a][r];h&&c&&(n[l]["_Sum "+i.name]=100*(n[l][r]/h+n[l][r]/c-2))}e.Studies.MA("weighted",s,"_Sum "+i.name,0,"Result",t,i)}},e.Studies.calculateLinearRegressionIndicator=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days+1)return void(e.error=!0);var n=e.inputs.Field;n&&"field"!=n||(n="Close");var r=e.days*(e.days+1)/2,a=Math.pow(r,2),o=r*(2*e.days+1)/3,s=0,l=0,h=0;if(e.startFrom){var c=i[e.startFrom-1]["_sums "+e.name];c&&(l=c[0],s=c[1],h=c[2])}for(var u=e.startFrom;u<i.length;u++)if((i[u][n]||0===i[u][n])&&(l+=e.days*i[u][n]-s,s+=i[u][n],h+=Math.pow(i[u][n],2),!(u<e.days-1))){if(u>e.days-1){if(!i[u-e.days][n]&&0!==i[u-e.days][n])continue;s-=i[u-e.days][n],h-=Math.pow(i[u-e.days][n],2)}var d=(e.days*l-r*s)/(e.days*o-a);i[u]["Slope "+e.name]=d;var p=(s-d*r)/e.days;i[u]["Intercept "+e.name]=p,i[u]["Forecast "+e.name]=p+d*e.days;var f=(e.days*o-a)/(e.days*h-Math.pow(s,2));i[u]["RSquared "+e.name]=d*d*f,i[u]["_sums "+e.name]=[l,s,h]}},e.Studies.calculateBollinger=function(t,i){var n=i.inputs.Field;n&&"field"!=n||(n="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,n,0,"_MA",t,i),i.std=new e.Studies.StudyDescriptor(i.name,"STD Dev",i.panel),i.std.chart=i.chart,i.std.startFrom=i.startFrom,i.std.days=i.days,i.std.inputs={Field:n,"Standard Deviations":1,Type:i.inputs["Moving Average Type"]},i.std.outputs={"_STD Dev":null},e.Studies.calculateStandardDeviation(t,i.std),e.Studies.calculateGenericEnvelope(t,i,i.inputs["Standard Deviations"],"_MA "+i.name,"_STD Dev "+i.name),"Boll %b"==i.type&&(i.zoneOutput="%b")},e.Studies.calculateMAEnvelope=function(t,i){var n=i.inputs.Field;n&&"field"!=n||(n="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,n,0,"MA",t,i);var r=i.inputs["Shift Type"],a=i.inputs.Shift;r||(r="percent",a=i.inputs["Shift Percentage"]),"percent"==r?e.Studies.calculateGenericEnvelope(t,i,a/100,"MA "+i.name):"points"==r&&e.Studies.calculateGenericEnvelope(t,i,null,"MA "+i.name,null,Number(a))},e.Studies.calculateGenericEnvelope=function(t,e,i,n,r,a){i||(i=0),a||(a=0),r||(r="Close"),n||(n="Close");for(var o=e.chart.scrubbed,s=e.startFrom;o&&s<o.length;s++){var l=o[s];if(l&&l[n]){var h=i*l[r]+a;l[e.type+" Top "+e.name]=l[n]+h,l[e.type+" Bottom "+e.name]=l[n]-h,l[e.type+" Median "+e.name]=l[n],l["Bandwidth "+e.name]=200*h/l[n],l["%b "+e.name]=50*((l.Close-l[n])/h+1)}}},e.Studies.calculateMaxHighMinLow=function(t,e){var i=e.chart.scrubbed,n=e.days,r=e.days;if(e.inputs["High Period"]&&(n=e.inputs["High Period"]),e.inputs["Low Period"]&&(r=e.inputs["Low Period"]),i.length<Math.max(n,r)+1)return void(e.error=!0);var a,o=Number.MAX_VALUE,s=-1*Number.MAX_VALUE;if(e.startFrom>1){for(a=1;a<n;a++)s=Math.max(s,i[e.startFrom-a].High);for(a=1;a<r;a++)o=Math.min(o,i[e.startFrom-a].Low)}for(var l=Math.max(0,e.startFrom-1);l<i.length;l++){if(s=Math.max(s,i[l].High),o=Math.min(o,i[l].Low),l>=n&&i[l-n].High==s)for(s=i[l].High,a=1;a<n;a++)s=Math.max(s,i[l-a].High);if(l>=r&&i[l-r].Low==o)for(o=i[l].Low,a=1;a<r;a++)o=Math.min(o,i[l-a].Low);var h=0;if("HHV"==e.type)h=s;else if("LLV"==e.type)h=o;else if("Donchian Width"==e.type)h=s-o;else if("GAPO"==e.type||"Gopala"==e.type)h=Math.log(s-o)/Math.log(r);else{if("VT HZ Filter"==e.type){h=s-o,i[l]["_MHML "+e.name]=h;continue}if("Williams %R"==e.type){h=-100*(s-i[l].Close)/(s-o),i[l]["Result "+e.name]=h;continue}}if(l==i.length-1)break;"Donchian Channel"==e.type?(i[l+1]["Donchian High "+e.name]=s,i[l+1]["Donchian Low "+e.name]=o,i[l+1]["Donchian Median "+e.name]=(s+o)/2):i[l+1]["Result "+e.name]=h}},e.Studies.calculateAccumulationDistribution=function(t,e){for(var i=e.chart.scrubbed,n=e.startFrom;n<i.length;n++)if(n){var r=i[n],a=i[n-1],o=0;r.Close>a.Close?o=r.Close-Math.min(r.Low,a.Close):r.Close<a.Close&&(o=r.Close-Math.max(r.High,a.Close)),e.inputs["Use Volume"]&&(o*=r.Volume);var s=a["Result "+e.name];s||(s=0),s+=o,r["Result "+e.name]=s}},e.Studies.calculateCCI=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);e.Studies.MA("simple",i.days,"hlc/3",0,"MA",t,i);for(var r=Math.max(i.startFrom,i.days-1);r<n.length;r++){var a=n[r];if(a){for(var o=0,s=0;s<i.days;s++)o+=Math.abs(n[r-s]["hlc/3"]-a["MA "+i.name]);o/=i.days,Math.abs(o)<1e-8?a["Result "+i.name]=0:a["Result "+i.name]=(a["hlc/3"]-a["MA "+i.name])/(.015*o)}}},e.Studies.calculateFractalChaos=function(t,e){var i=e.chart.scrubbed,n=0,r=0,a=0;e.startFrom&&"Fractal Chaos Bands"==e.type&&(n=i[e.startFrom-1]["Fractal High "+e.name],r=i[e.startFrom-1]["Fractal Low "+e.name]);for(var o=Math.max(4,e.startFrom);o<i.length;o++){i[o]["Result "+e.name]=0;var s;for(a=0,s=0;s<=o&&i[o-s]&&!(i[o-s].High>i[o-2].High)&&!(s<2&&i[o-s].High==i[o-2].High);s++)if(i[o-s].High<i[o-2].High&&a++,4==a){n=i[o-2].High;break}for("Fractal Chaos Bands"==e.type?i[o]["Fractal High "+e.name]=n>0?n:null:4==a&&(i[o]["Result "+e.name]=1),a=0,s=0;s<=o&&i[o-s]&&!(i[o-s].Low<i[o-2].Low)&&!(s<2&&i[o-s].Low==i[o-2].Low);s++)if(i[o-s].Low>i[o-2].Low&&a++,4==a){r=i[o-2].Low;break}"Fractal Chaos Bands"==e.type?i[o]["Fractal Low "+e.name]=r>0?r:null:4==a&&(i[o]["Result "+e.name]=-1)}},e.Studies.displayPrettyGoodOscillator=function(t,i,n){e.Studies.displaySeriesAsLine(t,i,n);var r=-3,a=3,o=t.panels[i.panel],s=t.chart.context.strokeStyle;t.chart.context.globalAlpha=.2,t.chart.context.strokeStyle=i.outputs.Result,t.chart.context.beginPath();var l=t.pixelFromPrice(a,o);t.chart.context.moveTo(0,l),t.chart.context.lineTo(t.chart.width,l);var h=t.pixelFromPrice(r,o);t.chart.context.moveTo(0,h),t.chart.context.lineTo(t.chart.width,h),t.chart.context.stroke(),t.chart.context.closePath(),e.preparePeakValleyFill(t,n,{panelName:i.panel,band:"Result "+i.name,threshold:a,direction:1,color:i.outputs.Result}),e.preparePeakValleyFill(t,n,{panelName:i.panel,band:"Result "+i.name,threshold:r,direction:-1,color:i.outputs.Result}),t.chart.context.strokeStyle=s,t.chart.context.globalAlpha=1},e.Studies.displayRAVI=function(t,i,n){var r;e.Studies.determineMinMax(t,i,n);var a=t.panels[i.panel];a.yAxis.low=a.min=Math.min(0,a.min),a.yAxis.high=a.max=Math.max(0,a.max),e.Studies.displaySeriesAsLine(t,i,n);var o=t.pixelFromPrice(0,a),s=t.layout.candleWidth-2;s<2&&(s=1);var l=i.outputs["Increasing Bar"],h=i.outputs["Decreasing Bar"];for(t.canvasColor("stx_histogram"),t.chart.context.globalAlpha=1,t.startClip(i.panel),r=0;r<n.length;r++){var c=n[r];if(c&&n[r-1]){var u=0,d=0;i.parameters&&i.parameters.studyOverZonesEnabled&&(u=parseFloat(i.parameters.studyOverBoughtValue),d=parseFloat(i.parameters.studyOverSoldValue)),0===r?t.chart.context.fillStyle="#CCCCCC":c[i.name+"_hist"]>u&&n[r-1][i.name+"_hist"]<c[i.name+"_hist"]?t.chart.context.fillStyle=l:c[i.name+"_hist"]<d&&n[r-1][i.name+"_hist"]>c[i.name+"_hist"]?t.chart.context.fillStyle=h:t.chart.context.fillStyle="#CCCCCC",c.candleWidth&&(s=Math.floor(Math.max(1,c.candleWidth-2))),t.chart.context.fillRect(Math.floor(t.pixelFromBar(r,a.chart)-s/2),Math.floor(o),Math.floor(s),Math.floor(t.pixelFromPrice(c[i.name+"_hist"],a)-o))}}t.endClip()},e.Studies.displayElderForce=function(t,i,n){e.Studies.displaySeriesAsLine(t,i,n),e.preparePeakValleyFill(t,n,{panelName:i.panel,band:"Result "+i.name,threshold:0,direction:1,color:i.outputs.Result}),e.preparePeakValleyFill(t,n,{panelName:i.panel,band:"Result "+i.name,threshold:0,direction:-1,color:i.outputs.Result})},e.Studies.displayElderRay=function(t,i,n){function r(e,n,r,l){t.chart.context.fillStyle=i.outputs[r],t.chart.context.fillRect(Math.floor(t.pixelFromBar(e,a.chart)-s/2+s*n),Math.floor(o),Math.floor(s*(1-2*n)),Math.floor(t.pixelFromPrice(c[i.name+l],a)-o))}e.Studies.determineMinMax(t,i,n);var a=t.panels[i.panel];a.yAxis.low=a.min=Math.min(0,a.min),a.yAxis.high=a.max=Math.max(0,a.max),e.Studies.displaySeriesAsLine(t,i,n);var o=t.pixelFromPrice(0,a),s=t.layout.candleWidth-2;s<2&&(s=1),t.canvasColor("stx_histogram");var l=t.chart.context.fillStyle;t.chart.context.globalAlpha=1,t.startClip(i.panel);for(var h=0;h<n.length;h++){var c=n[h];c&&(c.candleWidth&&(s=Math.floor(Math.max(1,c.candleWidth-2))),c[i.name+"_hist1"]>0&&r(h,0,"Elder Bull Power","_hist1"),c[i.name+"_hist2"]<0&&r(h,0,"Elder Bear Power","_hist2"),c[i.name+"_hist1"]<0&&r(h,.1,"Elder Bull Power","_hist1"),c[i.name+"_hist2"]>0&&r(h,.1,"Elder Bear Power","_hist2"))}t.endClip(),t.chart.context.fillStyle=l},e.Studies.displayADX=function(t,i,n){if(e.Studies.createYAxis(t,i,n,t.panels[i.panel]),i.inputs.Series&&i.inputs.Shading){var r={topBand:"+DI "+i.name,bottomBand:"-DI "+i.name};t.chart.context.globalAlpha=.3,e.fillIntersecting(t,i,n,r),t.chart.context.globalAlpha=1}var a=i.inputs.Series?.4:1;i.inputs.Histogram&&e.Studies.createHistogram(t,i,n,!1,a),!1!==i.inputs.Series?e.Studies.displaySeriesAsLine(t,i,n):i.inputs.Series||i.inputs.Histogram||t.watermark(i.panel,"center","bottom",t.translateIf("Nothing to display"))},e.Studies.displayMassIndex=function(t,i,n){e.Studies.displaySeriesAsLine(t,i,n);var r=i.inputs["Bulge Threshold"],a=t.panels[i.panel],o=t.chart.context.strokeStyle;t.chart.context.globalAlpha=.2,t.chart.context.strokeStyle=i.outputs.Result,t.chart.context.beginPath();var s=t.pixelFromPrice(r,a);t.chart.context.moveTo(0,s),t.chart.context.lineTo(t.chart.width,s),t.chart.context.stroke(),t.chart.context.closePath(),e.preparePeakValleyFill(t,n,{panelName:i.panel,band:"Result "+i.name,threshold:r,direction:1,color:i.outputs.Result}),t.chart.context.strokeStyle=o,t.chart.context.globalAlpha=1},e.Studies.displayChannel=function(t,i,n){if(e.Studies.displaySeriesAsLine(t,i,n),i.inputs["Channel Fill"]){var r={panelName:i.panel};for(var a in i.outputs){var o=a.split(" ").pop();"Top"==o||"High"==o?r.topBand=a+" "+i.name:"Bottom"==o||"Low"==o?r.bottomBand=a+" "+i.name:"Median"!=o&&"Channel"!=o||(r.color=i.outputs[a])}e.prepareChannelFill(t,n,r)}},e.Studies.inputAttributeDefaultGenerator=function(t){return(t||0===t)&&t.constructor==Number?Math.floor(t)==t?t>0?{min:1,step:1}:{step:1}:t>0?{min:0,step:.01}:{step:.01}:{}},e.Studies.getStudyList=function(t){var i={},n={Directional:!0,Gopala:!0,vchart:!0};e.extend(n,t);for(var r in e.Studies.studyLibrary)n[r]||(i[e.Studies.studyLibrary[r].name]=r);return i},e.Studies.studyLibrary={rsi:{name:"RSI",inputs:{Period:14},calculateFN:e.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},ma:{name:"Moving Average",overlay:!0,range:"bypass",calculateFN:e.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:"ma",Offset:0,Underlay:!1},outputs:{MA:"#FF0000"}},macd:{name:"MACD",calculateFN:e.Studies.calculateMACD,seriesFN:e.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},stochastics:{name:"Stochastics",range:"0 to 100",initializeFN:e.Studies.initializeStochastics,calculateFN:e.Studies.calculateStochastics,inputs:{Period:14,Smooth:!0},outputs:{Fast:"auto",Slow:"#FF0000"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Aroon:{name:"Aroon",range:"0 to 100",calculateFN:e.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:e.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:e.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},TRIX:{name:"TRIX",calculateFN:e.Studies.calculateTRIX},"STD Dev":{name:"Standard Deviation",calculateFN:e.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Trade Vol":{name:"Trade Volume Index",calculateFN:e.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},Swing:{name:"Swing Index",calculateFN:e.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},"Acc Swing":{name:"Accumulative Swing Index",calculateFN:e.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},"Price ROC":{name:"Price Rate of Change",calculateFN:e.Studies.calculateRateOfChange,inputs:{Field:"field",Period:14}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:e.Studies.calculateRateOfChange},Momentum:{name:"Momentum Indicator",calculateFN:e.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0},"Price Vol":{name:"Price Volume Trend",calculateFN:e.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Pos Vol":{name:"Positive Volume Index",calculateFN:e.Studies.calculateVolumeIndex,inputs:{Field:"field","Moving Average Type":"ma",Period:255},outputs:{Index:"auto",MA:"#FF0000"}},"Neg Vol":{name:"Negative Volume Index",calculateFN:e.Studies.calculateVolumeIndex,inputs:{Field:"field","Moving Average Type":"ma",Period:255},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:e.Studies.calculateOnBalanceVolume,inputs:{}},"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:e.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},"Hist Vol":{name:"Historical Volatility",calculateFN:e.Studies.calculateHistoricalVolatility,inputs:{Field:"field",Period:10,"Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Pretty Good":{name:"Pretty Good Oscillator",seriesFN:e.Studies.displayPrettyGoodOscillator,calculateFN:e.Studies.calculatePrettyGoodOscillator},Ultimate:{name:"Ultimate Oscillator",calculateFN:e.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}},"Vol Osc":{name:"Volume Oscillator",calculateFN:e.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},Twiggs:{name:"Twiggs Money Flow",calculateFN:e.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}},"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:e.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:e.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}},"Price Osc":{name:"Price Oscillator",calculateFN:e.Studies.calculatePriceOscillator,inputs:{Field:"field","Long Cycle":26,"Short Cycle":12,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},EOM:{name:"Ease of Movement",calculateFN:e.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}},CCI:{name:"Commodity Channel Index",calculateFN:e.Studies.calculateCCI,inputs:{Period:20},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}},Detrended:{name:"Detrended Price Oscillator",calculateFN:e.Studies.calculateDetrendedPrice,inputs:{Field:"field",Period:14,"Moving Average Type":"ma"}},"True Range":{name:"True Range",calculateFN:e.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},ATR:{name:"Average True Range",calculateFN:e.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:e.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}},Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:e.Studies.calculateSchaff,inputs:{Field:"field",Period:10,"Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}},QStick:{name:"QStick",calculateFN:e.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}},Coppock:{name:"Coppock Curve",calculateFN:e.Studies.calculateCoppock,inputs:{Field:"field","Short RoC":11,"Long RoC":14,Period:10}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:e.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}},"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:e.Studies.calculateChandeForecast,inputs:{Field:"field",Period:14}},"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:e.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}},RAVI:{name:"RAVI",seriesFN:e.Studies.displayRAVI,calculateFN:e.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}},"Random Walk":{name:"Random Walk Index",calculateFN:e.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}},ADX:{name:"ADX/DMS",calculateFN:e.Studies.calculateADX,seriesFN:e.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:function(t,i){i.inputs["Moving Average Type"]="triangular",e.Studies.calculateMAEnvelope(t,i)},inputs:{Field:"field",Period:10,"Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}},"High-Low":{name:"High Minus Low",calculateFN:function(t,e){for(var i=e.chart.scrubbed,n=e.startFrom;n<i.length;n++)i[n]["Result "+e.name]=i[n].High-i[n].Low},inputs:{}},"Med Price":{name:"Median Price",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14,Overlay:!1}},"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateMAEnvelope,inputs:{Field:"field",Period:50,"Shift Type":["percent","points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:e.Studies.calculateFractalChaos,seriesFN:e.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}},"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:e.Studies.calculateFractalChaos,inputs:{},centerline:20},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:e.Studies.calculateMaxHighMinLow},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:e.Studies.calculatePrimeNumber,seriesFN:e.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}},"Prime Number":{name:"Prime Number Oscillator",range:"-1 to 1",calculateFN:e.Studies.calculatePrimeNumber,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:e.Studies.calculateBollinger,seriesFN:e.Studies.displayChannel,inputs:{Field:"field",Period:20,"Standard Deviations":2,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:e.Studies.calculateMaxHighMinLow,seriesFN:e.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},HHV:{name:"Highest High Value",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Mass Idx":{name:"Mass Index",seriesFN:e.Studies.displayMassIndex,calculateFN:e.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}},Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:e.Studies.calculatePSAR,seriesFN:e.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}},Klinger:{name:"Klinger Volume Oscillator",seriesFN:e.Studies.displayHistogramWithSeries,calculateFN:e.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"Elder Ray":{name:"Elder Ray Index",seriesFN:e.Studies.displayElderRay,calculateFN:e.Studies.calculateElderRay,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Force":{name:"Elder Force Index",calculateFN:e.Studies.calculateElderForce,seriesFN:e.Studies.displayElderForce,inputs:{Period:13}},"LR Slope":{name:"Linear Reg Slope",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},COG:{name:"Center Of Gravity",calculateFN:e.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}},"Typical Price":{name:"Typical Price",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14,Overlay:!1}},"Weighted Close":{name:"Weighted Close",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14,Overlay:!1}},"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:e.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},"Williams %R":{name:"Williams %R",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:e.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}},volume:{name:"Volume Chart",display:"Volume",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0},seriesFN:e.Studies.createVolumeChart,calculateFN:e.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{zoom:0,widthFactor:1}},"vol undr":{name:"Volume Underlay",underlay:!0,seriesFN:e.Studies.volUnderlay,calculateFN:e.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(t){t.layout.volumeUnderlay=!1,t.changeOccurred("layout")},parameters:{init:{heightPercentage:.25},widthFactor:1}}},t},__js_advanced_drawingAdvanced_=function(t){var e=t.CIQ,i=t.timezoneJS;return e.Drawing.channel=function(){this.name="channel",this.dragToDraw=!1,this.p2=null},e.Drawing.channel.ciqInheritsFrom(e.Drawing.segment),e.Drawing.channel.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.channel.prototype.move=function(t,e,i){if(this.penDown){if(this.copyConfig(),null===this.p2)this.p1=[e,i];else{var n=i-(this.p1[1]-this.p0[1])/(this.p1[0]-this.p0[0])*(e-this.p1[0]);this.p2=[this.p1[0],n]}this.render(t)}},e.Drawing.channel.prototype.click=function(t,e,i){var n=this.stx.panels[this.panelName];if(n)return this.copyConfig(),this.penDown?this.accidentalClick(e,i)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],n.chart),!0):(this.setPoint(1,e,i,n.chart),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,e,i,n.chart),this.penDown=!0,!1)},e.Drawing.channel.prototype.boxIntersection=function(t,e){return!!(this.p0&&this.p1&&this.p2)&&(!(t>Math.max(this.p0[0],this.p1[0])||t<Math.min(this.p0[0],this.p1[0]))&&((this.p1[0]-this.p0[0])*(e-this.p0[1])-(this.p1[1]-this.p0[1])*(t-this.p0[0]))*((this.p2[0]-this.p0[0])*(e-(this.p0[1]+this.p2[1]-this.p1[1]))-(this.p1[1]-this.p0[1])*(t-this.p0[0]))<0)},e.Drawing.channel.prototype.intersected=function(t,i,n){return this.p0&&this.p1&&this.p2?this.pointIntersection(this.p0[0],this.p0[1],n)?(this.highlighted="p0",{action:"drag",point:"p0"}):this.pointIntersection(this.p1[0],this.p1[1],n)?(this.highlighted="p1",{action:"drag",point:"p1"}):this.pointIntersection(this.p2[0],this.p2[1],n)?(this.highlighted="p2",{action:"drag",point:"p2"}):this.boxIntersection(t,i)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),p2:e.clone(this.p2),tick:t,value:i}):null:null},e.Drawing.channel.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),s=null;this.p2&&(s=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1]));var l=this.color;("auto"==l||e.isTransparent(l))&&(l=this.stx.defaultColor);var h=this.lineWidth;this.highlighted&&(l=this.stx.getCanvasColor("stx_highlight_vector"));var c=this.fillColor;this.p2&&c&&!e.isTransparent(c)&&"auto"!=c&&(t.beginPath(),t.moveTo(n,a),t.lineTo(r,o),t.lineTo(r,s),t.lineTo(n,a+(s-o)),t.closePath(),t.globalAlpha=.2,t.fillStyle=c,t.fill(),t.globalAlpha=1);var u={pattern:this.pattern,lineWidth:h};if(this.stx.plotLine(n,r,a,o,l,"segment",t,i,u),this.p2&&this.stx.plotLine(n,r,a+(s-o),s,l,"segment",t,i,u),this.highlighted){var d="p0"==this.highlighted,p="p1"==this.highlighted,f="p2"==this.highlighted;this.littleCircle(t,n,a,d),this.littleCircle(t,r,o,p),this.littleCircle(t,r,s,f)}}},e.Drawing.channel.prototype.reposition=function(t,e,i,n){if(e){var r=this.stx.panels[this.panelName],a=e.tick-i,o=e.value-n;"move"==e.action?(this.setPoint(0,e.p0[0]-a,e.p0[1]-o,r.chart),this.setPoint(1,e.p1[0]-a,e.p1[1]-o,r.chart),this.setPoint(2,e.p2[0]-a,e.p2[1]-o,r.chart),this.render(t)):"drag"==e.action&&(this[e.point]=[i,n],this.setPoint(0,this.p0[0],this.p0[1],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.setPoint(2,this.p2[0],this.p2[1],r.chart),this.render(t))}},e.Drawing.channel.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setPoint(2,this.d1,this.v2,t.chart))},e.Drawing.channel.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,
this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.v2=e.v2,this.adjust()},e.Drawing.channel.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2}},e.Drawing.pitchfork=function(){this.name="pitchfork",this.dragToDraw=!1,this.p2=null},e.Drawing.pitchfork.ciqInheritsFrom(e.Drawing.channel),e.Drawing.pitchfork.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[e,i]:this.p2=[e,i],this.render(t))},e.Drawing.pitchfork.prototype.lineIntersection=function(t,i,n,r){return!(!this.p0||!this.p1)&&(this.stx.layout.semiLog||"log"==this.stx.layout.chartScale?e.boxIntersects(n.x0,e.log10(n.y0),n.x1,e.log10(n.y1),this.p0[0],e.log10(this.p0[1]),(this.p1[0]+this.p2[0])/2,e.log10((this.p1[1]+this.p2[1])/2),r):e.boxIntersects(n.x0,n.y0,n.x1,n.y1,this.p0[0],this.p0[1],(this.p1[0]+this.p2[0])/2,(this.p1[1]+this.p2[1])/2,r))},e.Drawing.pitchfork.prototype.intersected=function(t,i,n){return this.p0&&this.p1&&this.p2?this.pointIntersection(this.p0[0],this.p0[1],n)?(this.highlighted="p0",{action:"drag",point:"p0"}):this.pointIntersection(this.p1[0],this.p1[1],n)?(this.highlighted="p1",{action:"drag",point:"p1"}):this.pointIntersection(this.p2[0],this.p2[1],n)?(this.highlighted="p2",{action:"drag",point:"p2"}):this.lineIntersection(t,i,n,"ray")?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),p2:e.clone(this.p2),tick:t,value:i}):null:null},e.Drawing.pitchfork.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=this.p2;n||(n=this.p1);var r=this.stx.pixelFromTick(this.p0[0],i.chart),a=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromTick(n[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),h=this.stx.pixelFromValueAdjusted(i,n[0],n[1]),c=this.color;("auto"==c||e.isTransparent(c))&&(c=this.stx.defaultColor);var u=this.lineWidth;this.highlighted&&(c=this.stx.getCanvasColor("stx_highlight_vector"));var d={pattern:this.pattern,lineWidth:u},p=50,f=2*s-l-h,m=2*r-a-o;if(m<0&&(p*=-1),f=p*f/m,this.stx.plotLine(r,(a+o)/2,s,(l+h)/2,c,"ray",t,i,d),this.stx.plotLine(a,o,l,h,c,"segment",t,i,d),a==o&&l==h||(this.stx.plotLine(a,a-p,l,l-f,c,"ray",t,i,d),this.stx.plotLine(o,o-p,h,h-f,c,"ray",t,i,d)),this.highlighted){var g="p0"==this.highlighted,v="p1"==this.highlighted,y="p2"==this.highlighted;this.littleCircle(t,r,s,g),this.littleCircle(t,a,l,v),this.littleCircle(t,o,h,y)}}},e.Drawing.pitchfork.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setPoint(2,this.d2,this.v2,t.chart))},e.Drawing.pitchfork.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.d2=e.d2,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.tzo2=e.tzo2,this.v0=e.v0,this.v1=e.v1,this.v2=e.v2,this.adjust()},e.Drawing.pitchfork.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2}},e.Drawing.gartley=function(){this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,this.shape=null,this.points=[]},e.Drawing.gartley.ciqInheritsFrom(e.Drawing.continuous),e.Drawing.gartley.prototype.check=function(t,e){if(!e)return!0;if(t[0]>=e[0]||t[1]==e[1])return!1;if(1==this.segment)t[1]<e[1]?this.shape="M":this.shape="W";else if(2==this.segment){if("M"==this.shape&&t[1]<e[1])return!1;if("W"==this.shape&&t[1]>e[1])return!1;if((e[1]-t[1])/(this.points[0][1]-t[1])<.618)return!1;if((e[1]-t[1])/(this.points[0][1]-t[1])>=.786)return!1}else if(3==this.segment){if("M"==this.shape&&t[1]>e[1])return!1;if("W"==this.shape&&t[1]<e[1])return!1;if((e[1]-t[1])/(this.points[1][1]-t[1])<.618)return!1;if((e[1]-t[1])/(this.points[1][1]-t[1])>=.786)return!1}else if(4==this.segment){if("M"==this.shape&&(t[1]<e[1]||e[1]<this.points[0][1]))return!1;if("W"==this.shape&&(t[1]>e[1]||e[1]>this.points[0][1]))return!1;if((this.points[1][1]-e[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-e[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return!0},e.Drawing.gartley.prototype.click=function(t,e,i){var n=this.stx.panels[this.panelName];if(n){if(this.copyConfig(),!this.penDown)return this.setPoint(0,e,i,n.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(this.accidentalClick(e,i))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(1==this.segment&&this.points.push(this.p0),this.points.push(this.p1),this.drawDropZones=!0,this.setPoint(1,e,i,n.chart),++this.segment>this.maxSegments)return this.setPoint(0,this.points[0][0],this.points[0][1],n.chart),!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,e,i,n.chart)}return!1}},e.Drawing.gartley.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]);if(2==this.segment)this.drawDropZone(t,.618*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]);else if(3==this.segment)this.drawDropZone(t,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[0]);else if(4==this.segment){var s=1.618*this.points[2][1]-.618*this.points[1][1];s="M"==this.shape?Math.max(s,this.points[0][1]):Math.min(s,this.points[0][1]),this.drawDropZone(t,s,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0])}var l=this.color;("auto"==l||e.isTransparent(l))&&(l=this.stx.defaultColor);var h=this.lineWidth;this.highlighted&&(l=this.stx.getCanvasColor("stx_highlight_vector"));var c={pattern:this.pattern,lineWidth:h};this.segment<=this.maxSegments&&this.stx.plotLine(n,r,a,o,l,this.name,t,i,c);var u=this.fillColor,d=[];if(this.points.length){t.beginPath();for(var p=1;p<this.points.length&&p<=4;p++){var f=this.stx.pixelFromTick(this.points[p-1][0],i.chart),m=this.stx.pixelFromTick(this.points[p][0],i.chart),g=this.stx.pixelFromValueAdjusted(i,this.points[p-1][0],this.points[p-1][1]),v=this.stx.pixelFromValueAdjusted(i,this.points[p][0],this.points[p][1]);1==p&&d.push(f,g),d.push(m,v),this.stx.plotLine(f,m,g,v,l,this.name,t,i,c)}if(2!=this.points.length&&4!=this.points.length||d.push(r,o),this.points[2]&&d.push(this.stx.pixelFromTick(this.points[2][0],i.chart),this.stx.pixelFromValueAdjusted(i,this.points[2][0],this.points[2][1])),u&&"auto"!=u&&!e.isTransparent(u)){for(var y=0;y<d.length;y+=2)0===y&&t.moveTo(d[0],d[1]),t.lineTo(d[y],d[y+1]);t.fillStyle=u,t.globalAlpha=.2,t.closePath(),t.fill(),t.globalAlpha=1}}}},e.Drawing.gartley.prototype.lineIntersection=function(t,i,n){if(this.points.length!=this.maxSegments+1)return!1;for(var r=0;r<this.points.length-1;r++)if(this.stx.layout.semiLog||"log"==this.stx.layout.chartScale){if(e.boxIntersects(n.x0,e.log10(n.y0),n.x1,e.log10(n.y1),this.points[r][0],e.log10(this.points[r][1]),this.points[r+1][0],e.log10(this.points[r+1][1]),"segment"))return!0}else if(e.boxIntersects(n.x0,n.y0,n.x1,n.y1,this.points[r][0],this.points[r][1],this.points[r+1][0],this.points[r+1][1],"segment"))return!0;return!1},e.Drawing.gartley.prototype.boxIntersection=function(t,e){if(!this.p0||!this.p1)return!1;if(t>Math.max(this.p0[0],this.p1[0])||t<Math.min(this.p0[0],this.p1[0]))return!1;for(var i=Math.min(this.p0[1],this.p1[1]),n=Math.max(this.p0[1],this.p1[1]),r=0;r<this.points.length;r++)i=Math.min(i,this.points[r][1]),n=Math.max(n,this.points[r][1]);return!(e>n||e<i)},e.Drawing.gartley.prototype.reposition=function(t,e,i,n){if(e){var r=this.stx.panels[this.panelName],a=e.tick-i;e.tick=i;var o=e.value-n;if(e.value=n,"move"==e.action){this.pts=[];for(var s=0;s<this.points.length;s++)this.points[s][0]-=a,this.points[s][1]-=o,this.setPoint(1,this.points[s][0],this.points[s][1],r.chart),s&&s<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[s]=this.p1;this.setPoint(0,this.points[0][0],this.points[0][1],r.chart),this.render(t)}}},e.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.gartley.prototype.drawDropZone=function(t,e,i,n){var r=this.stx.panels[this.panelName];if(r){var a=this.stx.pixelFromPrice(e,r),o=this.stx.pixelFromPrice(i,r)-a,s=this.stx.pixelFromTick(n,r.chart),l=this.stx.chart.width-s;t.fillStyle="#008000",t.globalAlpha=.2,t.fillRect(s,a,l,o),t.globalAlpha=1}},e.Drawing.gartley.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.reconstructPoints(),this.setPoint(0,this.d0,this.v0,t.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,t.chart),this.points.push(this.p1))},e.Drawing.gartley.prototype.reconstructPoints=function(){var t=this.stx.panels[this.panelName];if(t){this.points=[];for(var i=0;i<this.pts.length;i+=3){var n=e.strToDateTime(this.pts[i]);n.setMinutes(n.getMinutes()+Number(this.pts[i+1])-n.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(e.yyyymmddhhmmssmmm(n),t.chart),this.pts[i+2]])}}},e.Drawing.gartley.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.pts=e.pts.split(","),this.adjust()},e.Drawing.gartley.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,pts:this.pts.join(",")}},e.Drawing.freeform=function(){this.name="freeform",this.splineTension=.3,this.dragToDraw=!0},e.Drawing.freeform.ciqInheritsFrom(e.Drawing.segment),e.Drawing.freeform.prototype.measure=function(){},e.Drawing.freeform.prototype.intersected=function(t,e){return!(t>this.hiX||t<this.lowX)&&!(e>this.hiY||e<this.lowY)},e.Drawing.freeform.prototype.click=function(t,i,n){var r=this.stx.panels[this.panelName];if(r){if(!1===this.penDown){this.copyConfig(),this.startX=Math.round(this.stx.resolveX(this.stx.pixelFromTick(i,r.chart))),this.startY=Math.round(this.stx.resolveY(this.stx.pixelFromValueAdjusted(r,i,n)));var a=this.stx.dateFromTick(i,r.chart,!0);return this.d0=e.yyyymmddhhmmssmmm(a),this.tzo0=a.getTimezoneOffset(),this.v0=n,this.p0=[e.ChartEngine.crosshairX-this.startX,e.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=this.stx.layout.candleWidth,this.multiplier=r.yAxis.multiplier,this.interval=this.stx.layout.interval,this.periodicity=this.stx.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,document.body.style.cursor="pointer",this.penDown=!0,!1}return this.penDown=!1,this.splineTension=this.tempSplineTension,document.body.style.cursor="auto",!0}},e.Drawing.freeform.prototype.move=function(t,i,n){if(this.penDown){var r=this.stx.panels[this.panelName],a=this.stx.dateFromTick(i,r.chart,!0);return this.d1=e.yyyymmddhhmmssmmm(a),this.tzo1=a.getTimezoneOffset(),this.v1=n,this.p1=[e.ChartEngine.crosshairX-this.startX,e.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,this.nodes.length-=2):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,this.nodes.length-=2)),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(t),!1}},e.Drawing.freeform.prototype.intervalRatio=function(t,i,n,r,a,o){function s(){return 5}function l(){return 5}function h(){return 30}function c(t,i){return e.Market.Symbology.isForexSymbol(i)?1440:390}var u=0;return t==i?u=1:isNaN(t)||isNaN(i)?isNaN(t)?"month"==t?"week"==i?u=s(a,o):"day"==i?u=h(a,o):isNaN(i)||(u=h(a,o)*c(a,o)/i):"week"==t?("month"==i&&(u=1/s(a,o)),"day"==i?u=l(a,o):isNaN(i)||(u=l(a,o)*c(a,o)/i)):"day"==t&&("week"==i?u=1/l(a,o):"month"==i?u=1/h(a,o):isNaN(i)||(u=c(a,o)/i)):isNaN(t)||("month"==i?u=t/(h(a,o)*c(a,o)):"week"==i?u=t/(l(a,o)*c(a,o)):"day"==i&&(u=t/c(a,o))):u=t/i,u*=n/r},e.Drawing.freeform.prototype.render=function(t){var e=this.stx.panels[this.panelName];if(e){var i=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,e.chart.symbol);if(0!==i){var n=this.stx.layout.candleWidth/this.candleWidth,r=e.yAxis.multiplier/this.multiplier;this.setPoint(0,this.d0,this.v0,e.chart);var a=this.stx.pixelFromTick(this.p0[0],e.chart),o=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),s=[],l=this.color,h=this.lineWidth;this.highlighted&&(l=this.stx.getCanvasColor("stx_highlight_vector"));for(var c={pattern:this.pattern,lineWidth:h},u=0;u<this.pNodes.length;u++){var d=i*n*this.pNodes[u][0]+a,p=r*this.pNodes[u][1]+o;s.push(d,p)}s.length&&(this.splineTension<0?this.stx.connectTheDots(s,l,this.name,t,e,c):this.stx.plotSpline(s,this.splineTension,l,this.name,t,!0,c))}}},e.Drawing.freeform.prototype.adjust=function(){var t=this.stx.panels[this.panelName];if(t){var e=[this.nodes[0],this.nodes[1]];this.pNodes=[e],this.lowX=this.nodes[0],this.hiX=this.nodes[0],this.lowY=this.nodes[1],this.hiY=this.nodes[1];for(var i=2;i<this.nodes.length;i+=2){var n=[this.nodes[i],this.nodes[i+1]];this.pNodes.push(n),this.lowX=Math.min(this.lowX,n[0]),this.hiX=Math.max(this.hiX,n[0]),this.lowY=Math.max(this.lowY,n[1]),this.hiY=Math.min(this.hiY,n[1])}var r=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,t.chart.symbol);if(0!==r){var a=this.stx.layout.candleWidth/this.candleWidth,o=t.yAxis.multiplier/this.multiplier;this.setPoint(0,this.d0,this.v0,t.chart);var s=this.stx.pixelFromTick(this.p0[0],t.chart),l=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]);this.lowX=this.stx.tickFromPixel(Math.floor(r*a*this.lowX)+s,t.chart),this.hiX=this.stx.tickFromPixel(Math.ceil(r*a*this.hiX)+s,t.chart),this.lowY=this.stx.valueFromPixel(Math.floor(o*this.lowY)+l,t),this.hiY=this.stx.valueFromPixel(Math.ceil(o*this.hiY)+l,t)}}},e.Drawing.freeform.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes}},e.Drawing.freeform.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.candleWidth=e.cw,this.multiplier=e.mlt,this.d0=e.d0,this.tzo0=e.tzo0,this.v0=e.v0,this.interval=e.inter,this.periodicity=e.pd,this.nodes=e.nodes,this.adjust()},e.Drawing.callout=function(){this.name="callout",this.arr=[],this.w=0,this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={},this.stemEntry="",this.defaultWidth=50,this.defaultHeight=10},e.Drawing.callout.ciqInheritsFrom(e.Drawing.annotation),e.Drawing.callout.prototype.configs=["color","fillColor","lineWidth","pattern","font"],e.Drawing.callout.prototype.copyConfig=function(){e.Drawing.copyConfig(this),this.borderColor=this.color},e.Drawing.callout.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),this.p0=[e,i],this.render(t))},e.Drawing.callout.prototype.onChange=function(t){if(this.stx.panels[this.panelName]){var i=t.target;this.w=i.clientWidth,this.h=i.clientHeight;var n=this.context||this.stx.chart.tempCanvas.context;e.clearCanvas(n.canvas,this.stx),this.render(n),this.edit(n)}},e.Drawing.callout.prototype.render=function(t){this.context=t;var i=this.stx.panels[this.panelName];if(i){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]);if(!isNaN(r)){t.font=this.fontString,t.textBaseline="top";var a=n,o=r,s=this.w/2,l=this.h/2;this.penDown&&(s=this.defaultWidth,(l=this.defaultHeight)||(l=this.fontSize));var h=this.lineWidth;h||(h=1.1);var c=this.color;("auto"==c||e.isTransparent(c))&&(c=this.stx.defaultColor);var u=this.borderColor;("auto"==u||e.isTransparent(u))&&(u=this.stx.defaultColor),this.highlighted&&(u=this.stx.getCanvasColor("stx_highlight_vector"));var d,p,f,m,g=Math.min(Math.min(s,l)/2,8);if(this.stem){this.stem.d?(d=this.stx.pixelFromTick(this.stem.t),f=this.stx.pixelFromValueAdjusted(i,this.stem.t,this.stem.v)):this.stem.x&&(d=a,f=o,a+=this.stem.x,o+=this.stem.y);var v="";d>=a+s?(p=a+s,v="r"):d>a-s&&d<a+s?(p=a,v="c"):d<=a-s&&(p=a-s,v="l"),f>=o+l?(m=o+l,v+="b"):f>o-l&&f<o+l?(m=o,v+="m"):f<=o-l&&(m=o-l,v+="t"),this.stemEntry=v,"cm"!=v&&(d=Math.round(d),p=Math.round(p),f=Math.round(f),m=Math.round(m))}if(this.highlighted?this.stx.canvasColor("stx_annotation_highlight_bg",t):this.fillColor?(t.fillStyle=this.fillColor,t.globalAlpha=.4):this.stem&&(t.fillStyle=this.stx.containerColor),t.strokeStyle=u,t.setLineDash){var y=[];"dotted"==this.pattern?y=[h,h]:"dashed"==this.pattern&&(y=[5*h,5*h]),t.setLineDash(y),t.lineDashOffset=0}u&&(t.beginPath(),t.lineWidth=h,t.moveTo(a+s-g,o-l),"rt"!=this.stemEntry?t.quadraticCurveTo(a+s,o-l,a+s,o-l+g):(t.lineTo(d,f),t.lineTo(a+s,o-l+g)),t.lineTo(a+s,o-g/2),"rm"==this.stemEntry&&t.lineTo(d,f),t.lineTo(a+s,o+g/2),t.lineTo(a+s,o+l-g),"rb"!=this.stemEntry?t.quadraticCurveTo(a+s,o+l,a+s-g,o+l):(t.lineTo(d,f),t.lineTo(a+s-g,o+l)),t.lineTo(a+g/2,o+l),"cb"==this.stemEntry&&t.lineTo(d,f),t.lineTo(a-g/2,o+l),t.lineTo(a-s+g,o+l),"lb"!=this.stemEntry?t.quadraticCurveTo(a-s,o+l,a-s,o+l-g):(t.lineTo(d,f),t.lineTo(a-s,o+l-g)),t.lineTo(a-s,o+g/2),"lm"==this.stemEntry&&t.lineTo(d,f),t.lineTo(a-s,o-g/2),t.lineTo(a-s,o-l+g),"lt"!=this.stemEntry?t.quadraticCurveTo(a-s,o-l,a-s+g,o-l):(t.lineTo(d,f),t.lineTo(a-s+g,o-l)),t.lineTo(a-g/2,o-l),"ct"==this.stemEntry&&t.lineTo(d,f),t.lineTo(a+g/2,o-l),t.lineTo(a+s-g,o-l),t.fill(),t.globalAlpha=1,t.stroke()),this.highlighted?this.stx.canvasColor("stx_annotation_highlight",t):t.fillStyle=c,o+=this.padding;for(var x=0;x<this.arr.length;x++)t.fillText(this.arr[x],a-s+this.padding,o-l),o+=this.fontSize;if(t.textBaseline="alphabetic",this.highlighted){var b="p0"==this.highlighted;this.littleCircle(t,d,f,b)}}}},e.Drawing.callout.prototype.click=function(t,e,i){if(!this.stx.overXAxis&&!this.stx.overYAxis){var n=this.stx.panels[this.panelName];return this.copyConfig(),(this.getFontString(),this.setPoint(0,e,i,n.chart),this.penDown)?(this.adjust(),this.edit(t),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)}},e.Drawing.callout.prototype.reposition=function(t,e,i,n){if(e){var r=this.stx.panels[this.panelName],a=e.tick-i,o=e.value-n;e.stem?("drag"==e.action?this.stem={d:this.stx.dateFromTick(i,r.chart,!0),v:n}:"move"==e.action&&(this.setPoint(0,e.p0[0]-a,e.p0[1]-o,r.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(e.stem.d,r.chart)-a),v:e.stem.v-o}),this.adjust()):this.setPoint(0,e.p0[0]-a,e.p0[1]-o,r.chart),this.render(t)}},e.Drawing.callout.prototype.lineIntersection=function(t,i,n,r){var a=this.stx.panels[this.panelName];if(!this.p0||!this.stem)return!1;var o=this.stx.tickFromDate(this.stem.d,a.chart);return this.stx.layout.semiLog||"log"==this.stx.layout.chartScale?e.boxIntersects(n.x0,e.log10(n.y0),n.x1,e.log10(n.y1),this.p0[0],e.log10(this.p0[1]),o,e.log10(this.stem.v),r):e.boxIntersects(n.x0,n.y0,n.x1,n.y1,this.p0[0],this.p0[1],o,this.stem.v,r)},e.Drawing.callout.prototype.intersected=function(t,i,n){var r=this.stx.panels[this.panelName];if(!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,n))return this.highlighted="p0",{action:"drag",stem:!0};var a=this.stx.pixelFromTick(this.p0[0],r.chart)-this.w/2,o=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1])-this.h/2,s=a+this.w,l=o+this.h;this.stem&&this.stem.x&&(a+=this.stem.x,s+=this.stem.x,o+=this.stem.y,l+=this.stem.y);var h=this.stx.pixelFromTick(t,r.chart),c=this.stx.pixelFromValueAdjusted(r,t,i);return h>=a&&h<=s&&c>=o&&c<=l?(this.highlighted=!0,{p0:e.clone(this.p0),tick:t,value:i}):this.lineIntersection(t,i,n,"segment")?(this.highlighted=!0,{action:"move",stem:e.clone(this.stem),p0:e.clone(this.p0),tick:t,value:i}):null},e.Drawing.fibarc=function(){this.name="fibarc"},e.Drawing.fibarc.ciqInheritsFrom(e.Drawing.fibonacci),e.Drawing.fibarc.prototype.setOuter=function(){this.outer={p0:e.clone(this.p0),p1:e.clone(this.p1)};var t=this.p0[1],i=this.p1[1],n=this.p0[0],r=this.p1[0],a=2*(t-i)+i,o=e.xIntersection({x0:n,x1:r,y0:t,y1:i},a);this.outer.p0[1]=a,this.outer.p0[0]=o},e.Drawing.fibarc.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=i.yAxis;if(this.p1){var r=this.stx.pixelFromTick(this.p0[0],i.chart),a=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=s<o,h=Math.abs((s-o)/(a-r)),c=this.parameters.trend.color;("auto"==c||e.isTransparent(c))&&(c=this.stx.defaultColor),this.highlighted&&(c=this.stx.getCanvasColor("stx_highlight_vector")),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t);var u=this.color;("auto"==u||e.isTransparent(u))&&(u=this.stx.defaultColor);for(var d=0;d<this.parameters.fibs.length;d++){t.fillStyle=u;var p=this.parameters.fibs[d];if(!(p.level<0)&&p.display){var f=Math.abs(this.p1[1]-this.p0[1])*Math.sqrt(2)*p.level,m=this.p1[1]+f*(l?-1:1),g=this.stx.pixelFromValueAdjusted(i,this.p0[0],m),v=e.xIntersection({x0:r,x1:a,y0:o,y1:s},g);if(this.parameters.printLevels){t.textAlign="center";var y=Math.round(1e3*p.level)/10+"%";this.parameters.printValues&&(t.fillStyle=u,this.stx.canvasFont("stx_yaxis",t)),t.fillText(y,a,Math.round(g-5))}if(t.textAlign="left",this.parameters.printValues&&v<this.stx.chart.width){var x=m;x=n.priceFormatter?n.priceFormatter(this.stx,i,x):this.stx.formatYAxisPrice(x,i),t==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,x,g,u,null,t),t==this.stx.chart.context&&this.stx.startClip(i.name)}var b=p.color;("auto"==b||e.isTransparent(b))&&(b=this.color),("auto"==b||e.isTransparent(b))&&(b=this.stx.defaultColor),t.strokeStyle=b;var C=p.color;if(("auto"==C||e.isTransparent(C))&&(C=this.fillColor),("auto"==C||e.isTransparent(C))&&(C=this.stx.defaultColor),t.fillStyle=C,t.globalAlpha=p.parameters.opacity,t.lineWidth=p.parameters.lineWidth,t.setLineDash){var w=[];"dotted"==p.parameters.pattern?w=[t.lineWidth,t.lineWidth]:"dashed"==p.parameters.pattern&&(w=[5*t.lineWidth,5*t.lineWidth]),t.setLineDash(w),t.lineDashOffset=0}t.save(),t.beginPath(),t.scale(1/h,1),t.arc(a*h,s,Math.abs(g-s),0,Math.PI,!l),t.stroke(),t.globalAlpha=.05,t.fill(),t.restore(),t.setLineDash&&t.setLineDash([]),t.globalAlpha=1}}if(t.textAlign="left",this.stx.plotLine(a,2*r-a,s,2*o-s,c,"segment",t,i,this.parameters.trend.parameters),this.highlighted){var S="p0"==this.highlighted,T="p1"==this.highlighted;this.littleCircle(t,r,o,S),this.littleCircle(t,a,s,T)}}}},e.Drawing.fibfan=function(){this.name="fibfan"},e.Drawing.fibfan.ciqInheritsFrom(e.Drawing.fibonacci),e.Drawing.fibfan.prototype.setOuter=function(){this.outer={p0:e.clone(this.p0),p1:e.clone(this.p1)};for(var t=this.p0[1],i=this.p1[1],n=this.p0[0],r=this.p1[0],a=0,o=0;o<this.parameters.fibs.length;o++){var s=this.parameters.fibs[o];if(!(s.level>=a)&&s.display){var l=(t-i)*s.level+i,h=e.xIntersection({x0:n,x1:r,y0:t,y1:i},l);a=s.level,this.outer.p1[1]=l,this.outer.p1[0]=h}}},e.Drawing.fibfan.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i){var n=i.yAxis;if(this.p1){var r=this.stx.pixelFromTick(this.p0[0],i.chart),a=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=Math.min(s,o),h=Math.max(s,o),c=h-l,u=(s-o)/(a-r)>0,d=this.parameters.trend.color;("auto"==d||e.isTransparent(d))&&(d=this.stx.defaultColor),this.highlighted&&(d=this.stx.getCanvasColor("stx_highlight_vector")),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t);var p=t.measureText("161.8%").width+10,f=Number.MAX_VALUE,m=-1*Number.MAX_VALUE,g=this.color;("auto"==g||e.isTransparent(g))&&(g=this.stx.defaultColor);for(var v=0;v<this.parameters.fibs.length;v++){t.fillStyle=g;var y=this.parameters.fibs[v];if(y.display){var x=this.stx.pixelFromValueAdjusted(i,this.p0[0],(this.p0[1]-this.p1[1])*y.level+this.p1[1]),b=e.xIntersection({x0:a,x1:a,y0:o,y1:s},x),C=this.stx.chart.left;a>r&&(C+=this.stx.chart.width);var w=(C-r)*(x-o)/(b-r)+o;if(!(r>C-(this.parameters.printLevels?p+5:0)&&a>r||r<C+(this.parameters.printLevels?p+5:0)&&a<r)){if(this.parameters.printLevels){var S=Math.round(1e3*y.level)/10+"%";a>r?(C-=p,t.textAlign="left"):(C+=p,t.textAlign="right"),this.parameters.printValues&&(t.fillStyle=g,this.stx.canvasFont("stx_yaxis",t)),w=(C-r)*(x-o)/(b-r)+o,t.fillText(S,C,w),a>r?C-=5:C+=5}if(t.textAlign="left",this.parameters.printValues&&b<this.stx.chart.width){var T=this.stx.valueFromPixel(x,i);T=n.priceFormatter?n.priceFormatter(this.stx,i,T):this.stx.formatYAxisPrice(T,i),t==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,T,x,g,null,t),t==this.stx.chart.context&&this.stx.startClip(i.name)}var D=y.color;("auto"==D||e.isTransparent(D))&&(D=this.color),("auto"==D||e.isTransparent(D))&&(D=this.stx.defaultColor);var M=y.color;("auto"==M||e.isTransparent(M))&&(M=this.fillColor),("auto"==M||e.isTransparent(M))&&(M=this.stx.defaultColor),t.fillStyle=M,this.parameters.printLevels&&(w=(C-r)*(x-o)/(b-r)+o),this.stx.plotLine(r,C,o,w,y.level||!this.highlighted?D:d,"segment",t,i,y.parameters),t.globalAlpha=.05,t.beginPath(),t.moveTo(C,w),t.lineTo(r,o),t.lineTo(C,o),t.fill(),t.globalAlpha=1,x<f&&(f=x),x>m&&(m=x)}}}for(var k in{0:0,1:1}){var _=u?h-c*k:l+c*k;_=Math.round(_),_<f&&(f=_),_>m&&(m=_)}if(this.highlighted){var E="p0"==this.highlighted,A="p1"==this.highlighted;this.littleCircle(t,r,o,E),this.littleCircle(t,a,s,A)}}}},e.Drawing.fibtimezone=function(){this.name="fibtimezone"},e.Drawing.fibtimezone.ciqInheritsFrom(e.Drawing.fibonacci),e.Drawing.fibtimezone.prototype.render=function(t){var i=this.stx.panels[this.panelName];if(i&&this.p1){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),s=[1,0],l=this.parameters.trend.color;("auto"==l||e.isTransparent(l))&&(l=this.stx.defaultColor),this.highlighted&&(l=this.stx.getCanvasColor("stx_highlight_vector")),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t);var h=20,c=this.p1[0]-this.p0[0],u=this.color;("auto"==u||e.isTransparent(u))&&(u=this.stx.defaultColor),t.textAlign="center";var d=n,p=this.stx.chart.panel.yAxis.height,f=0,m=this.parameters.timezone.color;("auto"==m||e.isTransparent(m))&&(m=this.color),("auto"==m||e.isTransparent(m))&&(m=this.stx.defaultColor);var g=this.parameters.timezone.color;("auto"==g||e.isTransparent(g))&&(g=this.fillColor),("auto"==g||e.isTransparent(g))&&(g=this.stx.defaultColor),this.parameters.printLevels&&(p-=h-7);do{if(d=this.stx.pixelFromTick(this.p0[0]+f*c,i.chart),n<r&&d>this.stx.chart.left+this.stx.chart.width)break;if(n>r&&d<this.stx.chart.left)break;this.parameters.printLevels&&(t.fillStyle=u,t.fillText(r>n?f:-1*f,d,p+7)),t.fillStyle=g,this.stx.plotLine(d,d,0,p,m,"segment",t,i,this.parameters.timezone.parameters),t.globalAlpha=.05,t.beginPath(),t.moveTo(n,0),t.lineTo(d,0),t.lineTo(d,p),t.lineTo(n,p),t.fill(),t.globalAlpha=1,f=s[0]+s[1],s.unshift(f)}while(c);if(t.textAlign="left",this.stx.plotLine(n,r,a,o,l,"segment",t,i,this.parameters.trend.parameters),this.highlighted){var v="p0"==this.highlighted,y="p1"==this.highlighted;this.littleCircle(t,n,a,v),this.littleCircle(t,r,o,y)}}},e.Drawing.shape=function(){this.name="shape",this.radians=0,this.a=0,this.rotating=!1,this.textMeasure=!1,this.configurator="shape",this.dimension=[0,0],this.points=[]},e.Drawing.shape.ciqInheritsFrom(e.Drawing.BaseTwoPoint),e.Drawing.shape.prototype.measure=function(){},e.Drawing.shape.prototype.render=function(t){if(this.points.length){var i=this.stx.panels[this.panelName];if(i){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]);if(this.p1){var a=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]);t.globalAlpha=.5,t.fillStyle="#000000",this.rotating?(this.radians=Math.atan((o-r)/(a-n)),a<n?this.radians+=Math.PI:o<r&&(this.radians+=2*Math.PI),this.a=5*parseInt((36*this.radians/Math.PI).toFixed(0),10),this.a%=360,this.radians=this.a*Math.PI/180,this.textMeasure&&t.fillText(this.a+"\xb0",a+10,o+10)):this.penDown&&(this.sx=Math.max(1,parseFloat(Math.abs(2*(a-n)/this.dimension[0]).toFixed(1))),a<n&&(this.sx*=-1),this.sy=Math.max(1,parseFloat(Math.abs(2*(o-r)/this.dimension[1]).toFixed(1))),o<r&&(this.sy*=-1),this.textMeasure&&t.fillText(this.sx+"x,"+this.sy+"x",a+this.sx+5,o+this.sy+5)),t.globalAlpha=1}var s=this.lineWidth;s||(s=1.1);var l={pattern:this.pattern,lineWidth:s};this.highlighted&&"none"==l.pattern&&(l.pattern="solid",.1==l.lineWidth&&(l.lineWidth=1));var h=this.color;("auto"==h||e.isTransparent(h))&&(h=this.stx.defaultColor),this.highlighted&&(h=this.stx.getCanvasColor("stx_highlight_vector"),.1==s&&(s=1.1));var c=this.fillColor;s/=2*Math.abs(this.sx*this.sy)/(Math.abs(this.sx)+Math.abs(this.sy)),t.save(),t.translate(n,r),t.rotate(this.radians),t.scale(this.sx,this.sy);var u,d;for(u=0;u<this.points.length;u++){for(t.beginPath(),d=0;d<this.points[u].length;d++){var p,f,m,g,v,y;"M"==this.points[u][d]?(p=this.points[u][++d]-(this.dimension[0]-1)/2,f=this.points[u][++d]-(this.dimension[1]-1)/2,t.moveTo(p,f)):"L"==this.points[u][d]?(p=this.points[u][++d]-(this.dimension[0]-1)/2,f=this.points[u][++d]-(this.dimension[1]-1)/2,t.lineTo(p,f)):"Q"==this.points[u][d]?(m=this.points[u][++d]-(this.dimension[0]-1)/2,v=this.points[u][++d]-(this.dimension[1]-1)/2,p=this.points[u][++d]-(this.dimension[0]-1)/2,f=this.points[u][++d]-(this.dimension[1]-1)/2,t.quadraticCurveTo(m,v,p,f)):"B"==this.points[u][d]&&(m=this.points[u][++d]-(this.dimension[0]-1)/2,v=this.points[u][++d]-(this.dimension[1]-1)/2,g=this.points[u][++d]-(this.dimension[0]-1)/2,y=this.points[u][++d]-(this.dimension[1]-1)/2,p=this.points[u][++d]-(this.dimension[0]-1)/2,f=this.points[u][++d]-(this.dimension[1]-1)/2,t.bezierCurveTo(m,v,g,y,p,f))}if(t.closePath(),c&&!e.isTransparent(c)&&"auto"!=c&&(t.fillStyle=c,t.fill()),h&&"none"!=this.pattern){if(t.strokeStyle=h,t.lineWidth=s,t.setLineDash){var x=[];"dotted"==this.pattern?x=[s,s]:"dashed"==this.pattern&&(x=[5*s,5*s]),t.setLineDash(x),t.lineDashOffset=0}t.stroke()}}if(t.restore(),t.save(),t.translate(n,r),t.rotate(this.radians),this.highlighted){var b="p0"==this.highlighted,C="p1"==this.highlighted,w="p2"==this.highlighted;this.littleCircle(t,0,0,b),this.mover(t,0,0,b),this.littleCircle(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,C),this.resizer(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,C),this.littleCircle(t,this.sx*this.dimension[0]/2,0,w),this.rotator(t,this.sx*this.dimension[0]/2,0,w),t.globalAlpha=.5,t.fillStyle="#000000",this.textMeasure&&(t.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),t.fillText(this.a+"\xb0",this.sx*this.dimension[0]/2+12,5)),t.globalAlpha=1}else this.penDown&&(this.rotating?this.rotator(t,this.sx*this.dimension[0]/2,0,!0):this.resizer(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0));t.restore()}}},e.Drawing.shape.prototype.reposition=function(t,e,i,n){if(e){var r=this.stx.panels[this.panelName];if("move"==e.action){var a=e.tick-i,o=e.value-n;this.setPoint(0,e.p0[0]-a,e.p0[1]-o,r.chart),this.render(t)}else{var s=this.stx.pixelFromTick(this.p0[0],r.chart),l=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),h=this.stx.pixelFromTick(i,r.chart),c=this.stx.pixelFromValueAdjusted(r,i,n);"scale"==e.action?(this[e.point]=[i,n],this.sx=parseFloat((((h-s)*Math.cos(this.radians)+(c-l)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((c-l)*Math.cos(this.radians)-(h-s)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(t)):"rotate"==e.action&&(this[e.point]=[i,n],this.radians=Math.atan((c-l)/(h-s)),
h<s?this.radians+=Math.PI:c<l&&(this.radians+=2*Math.PI),this.a=5*parseInt((36*this.radians/Math.PI).toFixed(0),10),this.sx<0&&(this.a=this.a+180),this.a%=360,this.radians=this.a*Math.PI/180,this.render(t))}}},e.Drawing.shape.prototype.intersected=function(t,i){if(!this.p0)return null;if(this.stx.repositioningDrawing==this&&this.stx.repositioningDrawing.repositioner)return this.stx.repositioningDrawing.repositioner;var n=this.stx.panels[this.panelName],r=this.stx.pixelFromTick(this.p0[0],n.chart),a=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[1]),o=this.stx.pixelFromTick(t,n.chart),s=this.stx.pixelFromValueAdjusted(n,t,i);o-=r,s-=a;var l=s,h=o;o=Math.cos(this.radians)*h+Math.sin(this.radians)*l,s=Math.cos(this.radians)*l-Math.sin(this.radians)*h,o/=this.sx,s/=this.sy;var c=Math.pow(e.touchDevice?25:5+this.littleCircleRadius(),2),u=Math.abs(c/(this.sx*this.sy)),d=Math.pow(this.dimension[0]/2,2)+Math.pow(this.dimension[1]/2,2)>Math.pow(o,2)+Math.pow(s,2),p=(c-(Math.pow(o*this.sx,2)+Math.pow(s*this.sy,2)))/Math.abs(this.sx*this.sy),f=u-(Math.pow(o-this.dimension[0]/2,2)+Math.pow(s-this.dimension[1]/2,2)),m=u-(Math.pow(o-this.dimension[0]/2,2)+Math.pow(s,2));return f>0&&f>=m&&f>=p?(this.highlighted="p1",{action:"scale"}):m>0&&m>=f&&m>=p?(this.highlighted="p2",{action:"rotate"}):p>0&&p>=f&&p>=m?(this.highlighted="p0",{action:"move",p0:e.clone(this.p0),tick:t,value:i}):d?(this.highlighted=!0,{}):null},e.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.shape.prototype.littleCircleRadius=function(){return 3},e.Drawing.shape.prototype.click=function(t,e,i){if(!this.points.length)return!1;this.copyConfig();var n=this.stx.panels[this.panelName];return this.penDown?(this.setPoint(1,e,i,n.chart),this.rotating?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(this.setPoint(0,e,i,n.chart),this.penDown=!0,!1)},e.Drawing.shape.prototype.adjust=function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.radians=Math.round(this.a/5)*Math.PI/36)},e.Drawing.shape.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.v0=e.v0,this.tzo0=e.tzo0,this.a=e.a,this.sx=e.sx,this.sy=e.sy,this.adjust()},e.Drawing.shape.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy}},e.Drawing.xcross=function(){this.name="xcross",this.dimension=[7,7],this.points=[["M",1,0,"L",3,2,"L",5,0,"L",6,1,"L",4,3,"L",6,5,"L",5,6,"L",3,4,"L",1,6,"L",0,5,"L",2,3,"L",0,1,"L",1,0]]},e.Drawing.xcross.ciqInheritsFrom(e.Drawing.shape),e.Drawing.arrow=function(){this.name="arrow",this.dimension=[11,11],this.points=[["M",3,0,"L",7,0,"L",7,5,"L",10,5,"L",5,10,"L",0,5,"L",3,5,"L",3,0]]},e.Drawing.arrow.ciqInheritsFrom(e.Drawing.shape),e.Drawing.check=function(){this.name="check",this.dimension=[8,9],this.points=[["M",1,5,"L",0,6,"L",2,8,"L",7,1,"L",6,0,"L",2,6,"L",1,5]]},e.Drawing.check.ciqInheritsFrom(e.Drawing.shape),e.Drawing.star=function(){this.name="star",this.dimension=[12,12],this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",7,4,"L",11,4,"L",8,7,"L",9,11,"L",5.5,9,"L",2,11,"L",3,7,"L",0,4]]},e.Drawing.star.ciqInheritsFrom(e.Drawing.shape),e.Drawing.heart=function(){this.name="heart",this.dimension=[23,20],this.points=[["M",11,3,"B",11,2.4,10,0,6,0,"B",0,0,0,7.5,0,7.5,"B",0,11,4,15.4,11,19,"B",18,15.4,22,11,22,7.5,"B",22,7.5,22,0,16,0,"B",13,0,11,2.4,11,3]]},e.Drawing.heart.ciqInheritsFrom(e.Drawing.shape),e.Drawing.focusarrow=function(){this.name="focusarrow",this.dimension=[7,5],this.points=[["M",0,0,"L",2,2,"L",0,4,"L",0,0],["M",6,0,"L",4,2,"L",6,4,"L",6,0]]},e.Drawing.focusarrow.ciqInheritsFrom(e.Drawing.shape),e.Drawing.crossline=function(){this.name="crossline"},e.Drawing.crossline.ciqInheritsFrom(e.Drawing.horizontal),e.extend(e.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(){return!1},adjust:function(){var t=this.stx.panels[this.panelName];t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.p1=e.clone(this.p0))},intersected:function(t,i,n){if(!this.p0||!this.p1)return null;this.p1[0]+=1;var r=this.lineIntersection(t,i,n,"horizontal");return this.p1=e.clone(this.p0),r||(this.p1[1]+=1,r=this.lineIntersection(t,i,n,"vertical"),this.p1=e.clone(this.p0),r)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:i}):null},render:function(t){var n=this.stx.panels[this.panelName];if(n){var r=this.stx.pixelFromTick(this.p0[0],n.chart),a=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[1]),o=this.color;("auto"==o||e.isTransparent(o))&&(o=this.stx.defaultColor),this.highlighted&&(o=this.stx.getCanvasColor("stx_highlight_vector"));var s={pattern:this.pattern,lineWidth:this.lineWidth};if(this.stx.plotLine(r,r+100,a,a,o,"horizontal",t,n,s),this.stx.plotLine(r,r,a,a+100,o,"vertical",t,n,s),this.axisLabel&&!this.highlighted){this.stx.endClip();var l=this.p0[1];if(n.chart.transformFunc&&(l=n.chart.transformFunc(this.stx,n.chart,l)),l=n.yAxis.priceFormatter?n.yAxis.priceFormatter(this.stx,n,l):this.stx.formatYAxisPrice(l,n),this.stx.createYAxisLabel(n,l,a,o),this.stx.startClip(n.name),this.p0[0]>=0&&!e.ChartEngine.hideDates()){var h,c;if(h=this.stx.dateFromTick(this.p0[0],n.chart,!0),this.stx.isDailyInterval(this.stx.layout.interval))h.setHours(0,0,0,0);else{var u=1e3*h.getSeconds()+h.getMilliseconds();this.stx.dataZone&&(c=new i.Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),this.stx.dataZone),h=new Date(c.getTime()+u)),this.stx.displayZone&&(c=new i.Date(h.getTime(),this.stx.displayZone),h=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes()),h=new Date(h.getTime()+u))}var d=e.mmddhhmm(e.yyyymmddhhmm(h));if(n.chart.xAxis.formatter)d=n.chart.xAxis.formatter(h);else if(this.stx.internationalizer){var p;0!==h.getHours()||0!==h.getMinutes()?(p=this.stx.internationalizer.monthDay.format(h),p+=" "+this.stx.internationalizer.hourMinute.format(h)):p=this.stx.internationalizer.yearMonthDay.format(h),d=p}this.stx.endClip(),this.stx.createXAxisLabel(n,d,r,o,null,!0),this.stx.startClip(n.name)}}}}}),e.Drawing.speedarc=function(){this.name="speedarc",this.printLevels=!0},e.Drawing.speedarc.ciqInheritsFrom(e.Drawing.segment),e.extend(e.Drawing.speedarc.prototype,{lineIntersection:function(t,i,n){return!(!this.p0||!this.p1)&&(this.stx.layout.semiLog||"log"==this.stx.layout.chartScale?e.boxIntersects(n.x0,e.log10(n.y0),n.x1,e.log10(n.y1),this.p0[0],e.log10(this.p0[1]),this.p1[0],e.log10(this.p1[1]),"segment"):e.boxIntersects(n.x0,n.y0,n.x1,n.y1,this.p0[0],this.p0[1],this.p1[0],this.p1[1],"segment"))},copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},render:function(t){var i=this.stx.panels[this.panelName];if(i&&this.p1){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),s=o<a,l=Math.abs((o-a)/(r-n)),h=this.color;("auto"==h||e.isTransparent(h))&&(h=this.stx.defaultColor),t.strokeStyle=h;var c=this.fillColor;if(("auto"==c||e.isTransparent(c))&&(c=this.stx.defaultColor),t.fillStyle=c,t.setLineDash){var u=[];"dotted"==this.pattern?u=[this.lineWidth,this.lineWidth]:"dashed"==this.pattern&&(u=[5*this.lineWidth,5*this.lineWidth]),t.setLineDash(u),t.lineDashOffset=0}this.stx.canvasFont("stx_yaxis",t);for(var d=1;d<3;d++){var p=Math.abs(this.p1[1]-this.p0[1])*Math.sqrt(2)*d/3,f=this.p1[1]+p*(s?-1:1),m=this.stx.pixelFromValueAdjusted(i,this.p0[0],f);if(t.save(),t.beginPath(),t.scale(1/l,1),t.arc(r*l,o,Math.abs(m-o),0,Math.PI,!s),t.stroke(),t.globalAlpha=.1,t.fill(),t.restore(),t.globalAlpha=1,this.printLevels){t.fillStyle=h,t.textAlign="center";var g=d+"/3";t.fillText(g,r,Math.round(m-5)),t.fillStyle=c}}t.textAlign="left";var v=this.color;("auto"==v||e.isTransparent(v))&&(v=this.stx.defaultColor),this.highlighted&&(v=this.stx.getCanvasColor("stx_highlight_vector"));var y={pattern:this.pattern,lineWidth:this.lineWidth};if(this.stx.plotLine(n,r,a,o,v,"segment",t,i,y),t.setLineDash&&t.setLineDash([]),this.highlighted){var x="p0"==this.highlighted,b="p1"==this.highlighted;this.littleCircle(t,n,a,x),this.littleCircle(t,r,o,b)}}},reconstruct:function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}}}),e.Drawing.speedline=function(){this.name="speedline",this.printLevels=!0},e.Drawing.speedline.ciqInheritsFrom(e.Drawing.speedarc),e.extend(e.Drawing.speedline.prototype,{render:function(t){var i=this.stx.panels[this.panelName];if(i&&this.p1){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]);this.stx.canvasFont("stx_yaxis",t);var s=this.color;("auto"==s||e.isTransparent(s))&&(s=this.stx.defaultColor),this.highlighted&&(s=this.stx.getCanvasColor("stx_highlight_vector"));var l=this.color;("auto"==l||e.isTransparent(l))&&(l=this.stx.defaultColor),t.strokeStyle=l;var h=this.fillColor;("auto"==h||e.isTransparent(h))&&(h=this.stx.defaultColor),t.fillStyle=h;for(var c,u,d={pattern:this.pattern,lineWidth:this.lineWidth},p=["1","2/3","1/3","3/2","3"],f=[1,2/3,1/3,1.5,3],m=[],g=0;g<f.length;g++){var v=f[g];if(!(v>1)||this.extension){var y,x=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*v);v>1?(y=e.xIntersection({x0:n,x1:r,y0:a,y1:x},o),m.push(y)):(y=e.xIntersection({x0:r,x1:r,y0:a,y1:o},x),m.push(x));var b=v>1?y:r,C=v>1?o:x;if(this.confineToGrid||(b=this.stx.chart.left,r>n&&(b+=this.stx.chart.width),C=(b-n)*(x-a)/(r-n)+a),this.printLevels&&(1!=v||this.extension)){t.fillStyle=l;var w=0,S=0;a>o?(S=-5,t.textBaseline="bottom"):(S=5,t.textBaseline="top"),n>r?(w=5,t.textAlign="right"):(w=-5,t.textAlign="left"),v>1?t.fillText(p[g],y+(this.confineToGrid?0:w),o):t.fillText(p[g],r,x+(this.confineToGrid?0:S)),t.fillStyle=h}this.stx.plotLine(n,b,a,C,g||!this.highlighted?l:s,"segment",t,i,d),1==v&&(c=b,u=C),t.globalAlpha=.1,t.beginPath(),t.moveTo(b,C),t.lineTo(n,a),t.lineTo(c,u),t.fill(),t.globalAlpha=1}}if(t.textAlign="left",t.textBaseline="middle",this.confineToGrid&&(t.globalAlpha=.3,t.beginPath(),t.moveTo(n,a),t.lineTo(n,o),t.lineTo(r,o),t.lineTo(r,a),t.lineTo(n,a),t.moveTo(n,m[1]),t.lineTo(r,m[1]),t.moveTo(n,m[2]),t.lineTo(r,m[2]),this.extension&&(t.moveTo(m[3],a),t.lineTo(m[3],o),t.moveTo(m[4],a),t.lineTo(m[4],o)),t.stroke(),t.globalAlpha=1),this.highlighted){var T="p0"==this.highlighted,D="p1"==this.highlighted;this.littleCircle(t,n,a,T),this.littleCircle(t,r,o,D)}}}}),e.Drawing.gannfan=function(){this.name="gannfan",this.printLevels=!0},e.Drawing.gannfan.ciqInheritsFrom(e.Drawing.speedarc),e.extend(e.Drawing.gannfan.prototype,{render:function(t){var i=this.stx.panels[this.panelName];if(i&&this.p1){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]);this.stx.canvasFont("stx_yaxis",t);var s=this.color;("auto"==s||e.isTransparent(s))&&(s=this.stx.defaultColor),this.highlighted&&(s=this.stx.getCanvasColor("stx_highlight_vector"));var l=this.color;("auto"==l||e.isTransparent(l))&&(l=this.stx.defaultColor),t.strokeStyle=l;var h=this.fillColor;("auto"==h||e.isTransparent(h))&&(h=this.stx.defaultColor),t.fillStyle=h;for(var c,u,d={pattern:this.pattern,lineWidth:this.lineWidth},p=[1,2,3,4,8,.5,1/3,.25,1/8],f=0;f<p.length;f++){var m=p[f],g=n+(r-n)/m,v=a-m*(a-o),y=this.stx.chart.left;r>n&&(y+=this.stx.chart.width);var x=(y-n)*(v-a)/(r-n)+a;if(this.printLevels){t.fillStyle=l;var b=0,C=0;a>o?(C=5,t.textBaseline="top"):(C=-5,t.textBaseline="botttom"),n>r?(b=5,t.textAlign="left"):(b=-5,t.textAlign="right"),m>1?t.fillText(m+"x1",g+b,o):t.fillText("1x"+1/m,r,v+C),t.fillStyle=h}this.stx.plotLine(n,y,a,x,f||!this.highlighted?l:s,"segment",t,i,d),1==m&&(c=y,u=x),t.globalAlpha=.1,t.beginPath(),t.moveTo(y,x),t.lineTo(n,a),t.lineTo(c,u),t.fill(),t.globalAlpha=1}if(t.textAlign="left",t.textBaseline="middle",this.highlighted){var w="p0"==this.highlighted,S="p1"==this.highlighted;this.littleCircle(t,n,a,w),this.littleCircle(t,r,o,S)}}}}),e.Drawing.timecycle=function(){this.name="timecycle",this.printLevels=!0},e.Drawing.timecycle.ciqInheritsFrom(e.Drawing.speedarc),e.extend(e.Drawing.timecycle.prototype,{render:function(t){var i=this.stx.panels[this.panelName];if(i&&this.p1){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),s=0,l=this.color;("auto"==l||e.isTransparent(l))&&(l=this.stx.defaultColor),this.highlighted&&(l=this.stx.getCanvasColor("stx_highlight_vector")),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t);var h=20,c=this.p1[0]-this.p0[0];t.textAlign="center";var u=n,d=this.stx.chart.panel.yAxis.height,p=this.color;("auto"==p||e.isTransparent(p))&&(p=this.stx.defaultColor);var f=this.fillColor;("auto"==f||e.isTransparent(f))&&(f=this.stx.defaultColor),this.printLevels&&(d-=h-7);var m={pattern:this.pattern,lineWidth:this.lineWidth},g=[];t.save(),t.fillStyle=f,t.globalAlpha=.1,t.globalCompositeOperation="destination-over";do{if(u=this.stx.pixelFromTick(this.p0[0]+s*c,i.chart),s++,n<r&&u>this.stx.chart.left+this.stx.chart.width)break;if(n>r&&u<this.stx.chart.left)break;u<this.stx.chart.left||u>this.stx.chart.left+this.stx.chart.width||(t.beginPath(),t.moveTo(n,0),t.lineTo(u,0),t.lineTo(u,d),t.lineTo(n,d),t.fill(),g.push({c:s,x:u}))}while(c);t.globalAlpha=1;for(var v=0,y=0;y<g.length;y++)if(this.stx.plotLine(g[y].x,g[y].x,0,d,p,"segment",t,i,m),this.printLevels){t.fillStyle=p;var x=this.stx.chart.context.measureText(g[y].c).width+3;x<this.stx.layout.candleWidth+v?(t.fillText(g[y].c,g[y].x,d+7),v=0):v+=this.stx.layout.candleWidth}if(t.restore(),t.textAlign="left",this.stx.plotLine(n,r,a,o,l,"segment",t,i,m),this.highlighted){var b="p0"==this.highlighted,C="p1"==this.highlighted;this.littleCircle(t,n,a,b),this.littleCircle(t,r,o,C)}}}}),e.Drawing.regression=function(){this.name="regression"},e.Drawing.regression.ciqInheritsFrom(e.Drawing.segment),e.extend(e.Drawing.regression.prototype,{click:function(t,e,i){if(!(e<0)){this.copyConfig();var n=this.stx.panels[this.panelName];return this.penDown?this.accidentalClick(e,i)?this.dragToDraw:(this.setPoint(1,e,i,n.chart),this.penDown=!1,!0):(this.setPoint(0,e,i,n.chart),this.penDown=!0,!1)}},lineIntersection:function(t,i,n){return!(!this.p0||!this.p1)&&(this.stx.layout.semiLog||"log"==this.stx.layout.chartScale?e.boxIntersects(n.x0,e.log10(n.y0),n.x1,e.log10(n.y1),this.p0[0],e.log10(this.p0[1]),this.p1[0],e.log10(this.p1[1]),"segment"):e.boxIntersects(n.x0,n.y0,n.x1,n.y1,this.p0[0],this.p0[1],this.p1[0],this.p1[1],"segment"))},render:function(t){var i=this.stx.panels[this.panelName];if(i&&this.p1&&!(this.p0[0]<0||this.p1[0]<0)){var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart);if(!(n<this.stx.chart.left&&r<this.stx.chart.left||n>this.stx.chart.right&&r>this.stx.chart.right)){for(var a=[],o=0,s=0,l=0,h=Math.min(this.p1[0],this.p0[0]);h<=Math.max(this.p1[0],this.p0[0]);h++){if(this.stx.chart.dataSet[h]){var c=this.stx.chart.dataSet[h].Close;(c||0===c)&&a.push(c)}l++}for(h=0;h<a.length;h++)s+=a.length*a[h]-o,o+=a[h];var u,d,p=a.length,f=p*(p+1)/2,m=Math.pow(f,2),g=f*(2*p+1)/3,v=(p*s-f*o)/(p*g-m),y=(o-v*f)/p;this.p0[0]<this.p1[0]?(u=this.stx.pixelFromValueAdjusted(i,this.p0[0],y),d=this.stx.pixelFromValueAdjusted(i,this.p1[0],v*l+y)):(u=this.stx.pixelFromValueAdjusted(i,this.p0[0],v*l+y),d=this.stx.pixelFromValueAdjusted(i,this.p1[0],y));var x=this.color;("auto"==x||e.isTransparent(x))&&(x=this.stx.defaultColor),this.highlighted&&(x=this.stx.getCanvasColor("stx_highlight_vector"));var b={pattern:this.pattern,lineWidth:this.lineWidth};if(this.stx.plotLine(n,r,u,d,x,"segment",t,i,b),this.stx.plotLine(n,n,u-20,u+20,x,"segment",t,i,b),this.stx.plotLine(r,r,d-20,d+20,x,"segment",t,i,b),this.highlighted){var C="p0"==this.highlighted,w="p1"==this.highlighted;this.littleCircle(t,n,u,C),this.littleCircle(t,r,d,w)}else this.p0[0]<this.p1[0]?(this.setPoint(0,this.p0[0],y,i.chart),this.setPoint(1,this.p1[0],v*l+y,i.chart)):(this.setPoint(0,this.p0[0],v*l+y,i.chart),this.setPoint(1,this.p1[0],y,i.chart))}}}}),e.Drawing.quadrant=function(){this.name="quadrant"},e.Drawing.quadrant.ciqInheritsFrom(e.Drawing.speedarc),e.extend(e.Drawing.quadrant.prototype,{render:function(t){var i=this.stx.panels[this.panelName];if(i&&this.p1){for(var n=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),a=null,o=null,s=Math.min(this.p1[0],this.p0[0]);s<=Math.max(this.p1[0],this.p0[0]);s++)if(this.stx.chart.dataSet[s]){var l=this.stx.chart.dataSet[s].Close;(l||0===l)&&((null===a||l>a)&&(a=l),(null===o||l<o)&&(o=l))}var h=(a+o)/2,c=this.stx.pixelFromValueAdjusted(i,this.p0[0],a),u=this.stx.pixelFromValueAdjusted(i,this.p0[0],(a+h)/2),d=this.stx.pixelFromValueAdjusted(i,this.p0[0],(2*a+o)/3),p=this.stx.pixelFromValueAdjusted(i,this.p0[0],h),f=this.stx.pixelFromValueAdjusted(i,this.p0[0],(a+2*o)/3),m=this.stx.pixelFromValueAdjusted(i,this.p0[0],(o+h)/2),g=this.stx.pixelFromValueAdjusted(i,this.p0[0],o),v=this.color;("auto"==v||e.isTransparent(v))&&(v=this.stx.defaultColor),this.highlighted&&(v=this.stx.getCanvasColor("stx_highlight_vector"));var y=this.fillColor;("auto"==y||e.isTransparent(y))&&(y=this.stx.defaultColor),t.fillStyle=y;var x={pattern:this.pattern,lineWidth:this.lineWidth};if(this.stx.plotLine(n,r,c,c,v,"segment",t,i,x),this.stx.plotLine(n,r,g,g,v,"segment",t,i,x),"quadrant"==this.name?(this.stx.plotLine(n,r,u,u,v,"segment",t,i,x),this.stx.plotLine(n,r,m,m,v,"segment",t,i,x)):"tirone"==this.name&&(this.stx.plotLine(n,r,d,d,v,"segment",t,i,x),this.stx.plotLine(n,r,f,f,v,"segment",t,i,x)),this.stx.plotLine(n,n,c,g,v,"segment",t,i,x),this.stx.plotLine(r,r,c,g,v,"segment",t,i,x),this.stx.plotLine(n,r,p,p,v,"segment",t,i,e.extend(x,{opacity:"tirone"==this.name?.2:1})),t.globalAlpha=.1,t.beginPath(),t.fillRect(n,c,r-n,g-c),"quadrant"==this.name?t.fillRect(n,u,r-n,m-u):"tirone"==this.name&&t.fillRect(n,d,r-n,f-d),t.globalAlpha=1,this.highlighted){var b="p0"==this.highlighted,C="p1"==this.highlighted;this.littleCircle(t,n,p,b),this.littleCircle(t,r,p,C)}else this.setPoint(0,this.p0[0],h,i.chart),this.setPoint(1,this.p1[0],h,i.chart)}}}),e.Drawing.tirone=function(){this.name="tirone"},e.Drawing.tirone.ciqInheritsFrom(e.Drawing.quadrant),t},__js_advanced_equations_=function(t){var e=t.CIQ,i=function(){function t(t){function e(){}return e.prototype=t,new e}function e(t,e,i,n){this.type_=t,this.index_=e||0,this.prio_=i||0,this.number_=n!==undefined&&null!==n?n:0,this.toString=function(){switch(this.type_){case F:return this.number_;case L:case H:case N:return this.index_;case O:return"CALL";default:return"Invalid Token"}}}function i(t,e,i,n){this.tokens=t,this.ops1=e,this.ops2=i,this.functions=n}function n(t){return"string"==typeof t?(R.lastIndex=0,R.test(t)?"'"+t.replace(R,function(t){var e=U[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+t+"'"):t}function r(t,e){return Number(t)+Number(e)}function a(t,e){return t-e}function o(t,e){return t*e}function s(t,e){return t/e}function l(t,e){return t%e}function h(t,e){return""+t+e}function c(t,e){return t==e}function u(t,e){return t!=e}function d(t,e){return t>e}function p(t,e){return t<e}function f(t,e){return t>=e}function m(t,e){return t<=e}function g(t,e){return Boolean(t&&e)}function v(t,e){return Boolean(t||e)}function y(t){return Math.sinh?Math.sinh(t):(Math.exp(t)-Math.exp(-t))/2}function x(t){return Math.cosh?Math.cosh(t):(Math.exp(t)+Math.exp(-t))/2}function b(t){return Math.tanh?Math.tanh(t):t===Infinity?1:t===-Infinity?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function C(t){return Math.asinh?Math.asinh(t):t===-Infinity?t:Math.log(t+Math.sqrt(t*t+1))}function w(t){return Math.acosh?Math.acosh(t):Math.log(t+Math.sqrt(t*t-1))}function S(t){return Math.atanh?Math.atanh(t):Math.log((1+t)/(1-t))/2}function T(t){return Math.log(t)*Math.LOG10E}function D(t){return-t}function M(t){return Math.trunc?Math.trunc(t):t<0?Math.ceil(t):Math.floor(t)}function k(t){return Math.random()*(t||1)}function _(t){t=Math.floor(t);for(var e=t;t>1;)e*=--t;return e}function E(){if(Math.hypot)return Math.hypot.apply(this,arguments);for(var t=0,e=arguments.length,i=0;i<e;i++){if(arguments[i]===Infinity||arguments[i]===-Infinity)return Infinity;t+=arguments[i]*arguments[i]}return Math.sqrt(t)}function A(t,e,i){return t?e:i}function I(t,e){return"[object Array]"!=Object.prototype.toString.call(t)?[t,e]:(t=t.slice(),t.push(e),t)}function P(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:y,cosh:x,tanh:b,asinh:C,acosh:w,atanh:S,sqrt:Math.sqrt,log:Math.log,lg:T,log10:T,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:M,"-":D,exp:Math.exp},this.ops2={"+":r,"-":a,"*":o,"/":s,"%":l,"^":Math.pow,",":I,"||":h,"==":c,"!=":u,">":d,"<":p,">=":f,"<=":m,and:g,or:v},this.functions={random:k,fac:_,min:Math.min,max:Math.max,hypot:E,pyt:E,pow:Math.pow,atan2:Math.atan2,"if":A},this.consts={E:Math.E,PI:Math.PI}}var F=0,L=1,H=2,N=3,O=4,R=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,U={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};i.prototype={simplify:function(n){n=n||{};var r,a,o,s,l=[],h=[],c=this.tokens.length,u=0;for(u=0;u<c;u++){s=this.tokens[u];var d=s.type_;if(d===F)l.push(s);else if(d===N&&s.index_ in n)s=new e(F,0,0,n[s.index_]),l.push(s);else if(d===H&&l.length>1)a=l.pop(),r=l.pop(),o=this.ops2[s.index_],s=new e(F,0,0,o(r.number_,a.number_)),l.push(s);else if(d===L&&l.length>0)r=l.pop(),o=this.ops1[s.index_],s=new e(F,0,0,o(r.number_)),l.push(s);else{for(;l.length>0;)h.push(l.shift());h.push(s)}}for(;l.length>0;)h.push(l.shift());return new i(h,t(this.ops1),t(this.ops2),t(this.functions))},substitute:function(n,r){r instanceof i||(r=(new P).parse(String(r)));var a,o=[],s=this.tokens.length,l=0;for(l=0;l<s;l++){a=this.tokens[l];if(a.type_===N&&a.index_===n)for(var h=0;h<r.tokens.length;h++){var c=r.tokens[h],u=new e(c.type_,c.index_,c.prio_,c.number_);o.push(u)}else o.push(a)}return new i(o,t(this.ops1),t(this.ops2),t(this.functions))},evaluate:function(t){t=t||{};var e,i,n,r,a=[],o=this.tokens.length,s=0;for(s=0;s<o;s++){r=this.tokens[s];var l=r.type_;if(l===F)a.push(r.number_);else if(l===H)i=a.pop(),e=a.pop(),n=this.ops2[r.index_],a.push(n(e,i));else if(l===N)if(r.index_ in t)a.push(t[r.index_]);else{if(!(r.index_ in this.functions))throw new Error("undefined variable: "+r.index_);a.push(this.functions[r.index_])}else if(l===L)e=a.pop(),n=this.ops1[r.index_],a.push(n(e));else{if(l!==O)throw new Error("invalid Expression");if(e=a.pop(),n=a.pop(),!n.apply||!n.call)throw new Error(n+" is not a function");"[object Array]"==Object.prototype.toString.call(e)?a.push(n.apply(undefined,e)):a.push(n.call(undefined,e))}}if(a.length>1)throw new Error("invalid Expression (parity)");return a[0]},toString:function(t){var e,i,r,a,o=[],s=this.tokens.length,l=0;for(l=0;l<s;l++){a=this.tokens[l];var h=a.type_;if(h===F)o.push(n(a.number_));else if(h===H)i=o.pop(),e=o.pop(),r=a.index_,t&&"^"==r?o.push("Math.pow("+e+","+i+")"):o.push("("+e+r+i+")");else if(h===N)o.push(a.index_);else if(h===L)e=o.pop(),r=a.index_,"-"===r?o.push("("+r+e+")"):o.push(r+"("+e+")");else{if(h!==O)throw new Error("invalid Expression");e=o.pop(),r=o.pop(),o.push(r+"("+e+")")}}if(o.length>1)throw new Error("invalid Expression (parity)");return o[0]},variables:function(){for(var t=this.tokens.length,e=[],i=0;i<t;i++){var n=this.tokens[i];n.type_===N&&-1==e.indexOf(n.index_)&&e.push(n.index_)}return e}},P.parse=function(t){return(new P).parse(t)},P.evaluate=function(t,e){return P.parse(t).evaluate(e)},P.Expression=i,P.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:y,cosh:x,tanh:b,asinh:C,acosh:w,atanh:S,sqrt:Math.sqrt,log:Math.log,lg:T,log10:T,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:M,random:k,fac:_,exp:Math.exp,min:Math.min,max:Math.max,hypot:E,pyt:E,pow:Math.pow,atan2:Math.atan2,"if":A,E:Math.E,PI:Math.PI};var B=1,X=2,V=4,z=8,j=16,W=32,q=64,Q=128,Y=256;return P.prototype={parse:function(n){this.errormsg="",this.success=!0;var r=[],a=[];this.tmpprio=0;var o=B|z|V|q,s=0;for(this.expression=n,this.pos=0;this.pos<this.expression.length;){var l;if(this.isOperator())this.isSign()&&o&q?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",s++,this.addfunc(a,r,L)),o=B|z|V|q):this.isComment()||(0==(o&X)&&this.error_parsing(this.pos,"unexpected operator"),s+=2,this.addfunc(a,r,H),o=B|z|V|q);else if(this.isNumber())0==(o&B)&&this.error_parsing(this.pos,"unexpected number"),l=new e(F,0,0,this.tokennumber),a.push(l),o=X|j|W;else if(this.isString())0==(o&B)&&this.error_parsing(this.pos,"unexpected string"),l=new e(F,0,0,this.tokennumber),a.push(l),o=X|j|W;else if(this.isLeftParenth())0==(o&z)&&this.error_parsing(this.pos,'unexpected "("'),o&Q&&(s+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(a,r,O)),o=B|z|V|q|Y;else if(this.isRightParenth())o&Y?(l=new e(F,0,0,[]),a.push(l)):0==(o&j)&&this.error_parsing(this.pos,'unexpected ")"'),o=X|j|W|z|Q;else if(this.isComma())0==(o&W)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(a,r,H),s+=2,o=B|z|V|q;else if(this.isConst()){0==(o&B)&&this.error_parsing(this.pos,"unexpected constant");var h=new e(F,0,0,this.tokennumber);a.push(h),o=X|j|W}else if(this.isOp2())0==(o&V)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(a,r,H),s+=2,o=z;else if(this.isOp1())0==(o&V)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(a,r,L),s++,o=z;else if(this.isVar()){0==(o&B)&&this.error_parsing(this.pos,"unexpected variable");var c=new e(N,this.tokenindex,0,0);a.push(c),o=X|j|W|z|Q}else this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg))}for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');r.length>0;){var u=r.pop();a.push(u)}return s+1!==a.length&&this.error_parsing(this.pos,"parity"),new i(a,t(this.ops1),t(this.ops2),t(this.functions))},evaluate:function(t,e){return this.parse(t).evaluate(e)},error_parsing:function(t,e){throw this.success=!1,this.errormsg="parse error [column "+t+"]: "+e,this.column=t,new Error(this.errormsg)},addfunc:function(t,i,n){for(var r=new e(n,this.tokenindex,this.tokenprio+this.tmpprio,0);i.length>0&&r.prio_<=i[i.length-1].prio_;)t.push(i.pop());i.push(r)},isNumber:function(){for(var t=!1,e="";this.pos<this.expression.length;){var i=this.expression.charCodeAt(this.pos);if(!(i>=48&&i<=57||46===i))break;e+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(e),t=!0}return t},unescape:function(t,e){for(var i=[],n=!1,r=0;r<t.length;r++){var a=t.charAt(r);if(n){switch(a){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("\t");break;case"u":var o=parseInt(t.substring(r+1,r+5),16);i.push(String.fromCharCode(o)),r+=4;break;default:throw this.error_parsing(e+r,"Illegal escape sequence: '\\"+a+"'")}n=!1}else"\\"==a?n=!0:i.push(a)}return i.join("")},isString:function(){var t=!1,e="",i=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){var n=this.expression.charAt(this.pos);if("'"==n&&"\\"!=e.slice(-1)){this.pos++,this.tokennumber=this.unescape(e,i),t=!0;break}e+=this.expression.charAt(this.pos),this.pos++}return t},isConst:function(){var t;for(var e in this.consts){var i=e.length;if(t=this.expression.substr(this.pos,i),e===t)return this.tokennumber=this.consts[e],this.pos+=i,!0}return!1},isOperator:function(){var t=this.expression.charCodeAt(this.pos);if(43===t)this.tokenprio=2,this.tokenindex="+";else if(45===t)this.tokenprio=2,this.tokenindex="-";else if(62===t)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===t)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===t){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===t){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===t){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===t){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===t){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===t||8729===t||8226===t)this.tokenprio=3,this.tokenindex="*";else if(47===t)this.tokenprio=4,this.tokenindex="/";else if(37===t)this.tokenprio=4,this.tokenindex="%";else{if(94!==t)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var t=this.expression.charCodeAt(this.pos-1);return 45===t||43===t},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio+=10,!0)},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){return 44===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var t=this.expression.charCodeAt(this.pos);return(32===t||9===t||10===t||13===t)&&(this.pos++,!0)},isOp1:function(){for(var t="",e=this.pos;e<this.expression.length;e++){var i=this.expression.charAt(e);if(i.toUpperCase()===i.toLowerCase()&&(e===this.pos||"_"!=i&&(i<"0"||i>"9")))break;t+=i}return t.length>0&&t in this.ops1&&(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0)},isOp2:function(){for(var t="",e=this.pos;e<this.expression.length;e++){var i=this.expression.charAt(e);if(i.toUpperCase()===i.toLowerCase()&&(e===this.pos||"_"!=i&&(i<"0"||i>"9")))break;t+=i}return t.length>0&&t in this.ops2&&(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0)},isVar:function(){for(var t="",e=this.pos;e<this.expression.length;e++){var i=this.expression.charAt(e);if(i.toUpperCase()===i.toLowerCase()&&(e===this.pos||"_"!=i&&(i<"0"||i>"9")))break;t+=i}return t.length>0&&(this.tokenindex=t,this.tokenprio=4,this.pos+=t.length,!0)},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)}},P};return e.formatEquation=function(t){for(var e="",i=[],n="",r=!1,a=1;a<t.length;a++){var o=t[a].toUpperCase();"["!=o||r?"]"==o&&r?(r=!1,""!==n&&(i.push(n),e+="["+n+"]"),n=""):r?n+=o:"+"==o||"-"==o||"*"==o||"/"==o||":"==o||"%"==o||"("==o||")"==o?(""!==n&&isNaN(n)?(i.push(n),e+="["+n+"]"):e+=n,":"==o&&(o="/"),e+=o,n=""):" "!=o&&(n+=o):r=!0}return""!==n&&isNaN(n)?(i.push(n),e+="["+n+"]"):e+=n,{equation:e,symbols:i}},e.fetchEquationChart=function(t,i){var n=e.formatEquation(t.symbol),r=n.symbols,a=[],o=t.stx;t.stx=null;for(var s=0;s<r.length;s++){
var l=e.shallowClone(t);l.stx=o,l.symbol=r[s],a.push(l)}t.stx=o,o.quoteDriver.quoteFeed.multiFetch(a,function(r){var o={};t.loadMoreReplace=!0;for(var s={charge:0},l=0;l<r.length;l++){var h=r[l];if(h.dataCallback.error)return void i({error:h.dataCallback.error});o[h.params.symbol]=h.dataCallback.quotes,t.loadMoreReplace=t.loadMoreReplace&&h.params.loadMoreReplace,t.moreToLoad=t.moreToLoad||h.dataCallback.moreAvailable,h.dataCallback.attribution.charge&&(s.charge+=h.dataCallback.attribution.charge)}if(a.length||!t.loadMore&&!t.update)try{var c=e.computeEquationChart(n.equation,o);i({quotes:c,moreAvailable:t.moreToLoad,attribution:s})}catch(t){var u={error:"Invalid equation: "+n.equation};t.name&&"NoException"==t.name&&(u.suppressAlert=!0),i(u)}})},e.computeEquationChart=function(t,n){function r(t){if(t.i++,n[t.s]){if(t.i>=n[t.s].length)return 0;h=n[t.s][t.i]}return h.DT||(h.DT=e.strToDateTime(h.Date)),t.d=h.DT,1}function a(){var t=null,e=null;for(var i in d)e?d[i].d.getTime()<e.d.getTime()?t=e=d[i]:d[i].d.getTime()>e.d.getTime()&&(t=e):e=d[i];return t?r(t)?-1:0:1}t=t.replace(/[:]/,"/").toUpperCase();var o=0;for(var s in n){var l=new RegExp("\\["+s.replace("$","\\$").replace("^","\\^").replace(/[\+\-\*\/\%\(\)]/g,"\\$&")+"\\]","g");t=t.replace(l,"symbol"+o),o++}var h,c=i().parse(t),u=[],d={},p=0,f=null,m=!1;for(s in n)d[s]={i:0,s:s},n[s]?(p++,h=n[s][0]):1==p&&(m=s),h.DT||(h.DT=e.strToDateTime(h.Date)),d[s].d=h.DT,f||(f=d[s]);var g=0===p,v=1==p&&-1==t.indexOf("%");t:for(;;){var y=a();if(!y)break;if(1==y){var x;if(m){var b=c.evaluate({symbol0:n[f.s][f.i].Close,symbol1:n[f.s][f.i][m]});b=Number(b.toFixed(8)),x={DT:f.d,Close:b,Adj_Close:b},x[f.s]=n[f.s][f.i].Close,isNaN(b)||u.push(x)}else{if(g){var C=c.evaluate({});throw e.alert(t+"="+C),{name:"NoException",message:""}}o=0;var w={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}};for(s in n){for(var S in w)w[S]["symbol"+o]=n[s][d[s].i][S];o++}x={DT:f.d},x.Adj_Close=c.evaluate(w.Adj_Close),x.Close=c.evaluate(w.Close),x.Open=c.evaluate(w.Open),x.Volume=c.evaluate(w.Volume),isNaN(x.Volume)&&(x.Volume=0),v?(x.High=c.evaluate(w.High),x.Low=c.evaluate(w.Low)):(x.High=Math.max(x.Open,x.Close),x.Low=Math.min(x.Open,x.Close)),isNaN(x.Close)||u.push(x),isNaN(x.High)||(x.High=Number(x.High.toFixed(8))),isNaN(x.Low)||(x.Low=Number(x.Low.toFixed(8))),isNaN(x.Open)||(x.Open=Number(x.Open.toFixed(8))),isNaN(x.Close)||(x.Close=Number(x.Close.toFixed(8))),isNaN(x.Adj_Close)?x.Adj_Close=x.Close:x.Adj_Close=Number(x.Adj_Close.toFixed(8)),o=0;for(s in n)x[s]=w.Close["symbol"+o],o++}for(s in n)if(!r(d[s]))break t}}return u},t},__js_advanced_renderersAdvanced_=function(t){var e=t.CIQ;return e.Renderer.Shading=function(t){this.construct(t),this.shading=null,this.errTimeout=null},e.Renderer.Shading.ciqInheritsFrom(e.Renderer.Lines,!1),e.Renderer.Shading.prototype.setShading=function(t){t.constructor!=Array&&(t=[t]),this.shading=t},e.Renderer.Shading.prototype.draw=function(){if(!this.shading&&!this.errTimeout){console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set.");var t=this;this.errTimeout=setTimeout(function(){t.errTimeout=null},1e4)}var i,n=this.stx.panels[this.params.panel].chart,r={};for(i=0;i<this.seriesParams.length;i++)if(n.series[this.seriesParams[i].field]){var a=e.clone(n.series[this.seriesParams[i].field].parameters);r[this.seriesParams[i].field]={parameters:e.extend(e.extend(a,this.params),this.seriesParams[i]),yValueCache:this.caches[this.seriesParams[i].field],useChartLegend:!1}}this.stx.drawSeries(n,r,this.params.yAxis);for(i in r)this.caches[i]=r[i].yValueCache;for(i=0;i<this.shading.length;i++){var o=this.shading[i];if(o.greater||(o.greater=o.color),o.lesser||(o.lesser=o.color),o.primary||(o.primary="Close"),o.secondary||(o.secondary=this.seriesParams[0].field),o.secondary&&o.greater&&o.lesser&&(r[o.primary]||"Close"==o.primary)&&r[o.secondary]&&("Close"!=o.primary||this.params.yAxis==n.yAxis)){var s={panel:this.params.panel,outputs:{topBand:o.greater,bottomBand:o.lesser},outputMap:{}};s.outputMap[o.primary]="topBand",s.outputMap[o.secondary]="bottomBand";var l={topBand:o.primary,topAxis:this.params.yAxis,bottomBand:o.secondary,bottomAxis:"Close"==o.primary?null:this.params.yAxis};e.fillIntersecting(this.stx,s,n.dataSegment,l)}}},e.Renderer.Histogram=function(t){this.construct(t),this.params.type="histogram",this.params.highlightable=!1},e.Renderer.Histogram.ciqInheritsFrom(e.Renderer,!1),e.Renderer.Histogram.prototype.performCalculations=function(){if(this.params.yAxis){for(var t=this.stx.panels[this.params.panel],e=[],i=0;i<this.seriesParams.length;i++)e.push(this.seriesParams[i].field);var n=this.stx.determineMinMax(this.stx.chart.dataSegment,e,"stacked"==this.params.subtype,!0);this.stx.calculateYAxisRange(t,this.params.yAxis,0,n[1]);var r=this.params.heightPercentage?this.params.heightPercentage:1;this.params.yAxis.high=n[1]/r,this.params.yAxis.min=0,this.params.bindToYAxis=!0}},e.Renderer.Histogram.prototype.draw=function(){this.stx.drawHistogram(e.clone(this.params),this.seriesParams)},e.Renderer.Heatmap=function(t){this.construct(t),this.params.type="heatmap",this.params.highlightable=!1},e.Renderer.Heatmap.ciqInheritsFrom(e.Renderer,!1),e.Renderer.Heatmap.prototype.performCalculations=function(){for(var t=this.stx.panels[this.params.panel],e=this.params.yAxis?this.params.yAxis:t.yAxis,i=[],n=0;n<this.seriesParams.length;n++)i.push(this.seriesParams[n].field);var r=this.stx.determineMinMax(this.stx.chart.dataSegment,i,!1,!0);this.params.yAxis?this.stx.calculateYAxisRange(t,e,r[0],r[1]):this.params.panel==this.stx.chart.panel.name?(this.stx.chart.lowValue=Math.min(this.stx.chart.lowValue,r[0]),this.stx.chart.highValue=Math.max(this.stx.chart.highValue,r[1])):(this.stx.calculateYAxisRange(t,e,r[0],r[1]),t.lowValue=t.yAxis.low,t.highValue=t.yAxis.high)},e.Renderer.Heatmap.prototype.draw=function(){this.stx.drawHeatmap(e.clone(this.params),this.seriesParams)},t},__js_advanced_share_=function(t){function e(t,e,i){e||(e={});for(var n=[],a=document.querySelectorAll("[cq-no-html2canvas]"),o=0;o<a.length;o++){var s=a[o];"none"!==s.style.display&&(n.push({element:s,prevDisplay:s.style.display}),s.style.display="none")}r(t.chart.container,{allowTaint:!1,logging:!1,width:e.width?e.width:null,height:e.height?e.height:null,background:e.background?e.background:null,useCORS:!0}).then(function(t){if(i)return n.map(function(t){t.element.style.display=t.prevDisplay}),e.data?i(null,t.toDataURL("image/png")):i(null,t)})}function i(t){var e=n();if("undefined"!=typeof html2canvas)return r=html2canvas,t();a.loadScript(e+"html2canvas.js",function(){return"undefined"!=typeof require?require(["html2canvas"],function(e){return r=e,t()}):(r=html2canvas,t())})}function n(){if(a.Share.html2canvasLocation)return a.Share.html2canvasLocation;for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++){var i=t[e];if(i.src&&i.src.indexOf("share.js")>-1)return i.src.replace(/advanced\/share\.js/,"")+"thirdparty/"}return"js/thirdparty/"}var r,a=t.CIQ;return a.Share=function(){},t.STXSocial=a.Share,a.Share.FullChart2PNG=function(t,n,a){if(t&&t.chart){if("undefined"==typeof html2canvas)return i(function(){return e(t,n,a)});r=html2canvas,e(t,n,a)}},a.Share.createImage=function(t,e,i){var n=[].slice.call(arguments);i=n.pop(),null!==e&&"object"==typeof e||(e={widthPX:n[1],heightPX:n[2],imageType:n[3]});var r=e.widthPX,o=e.heightPX,s=e.imageType,l=t.chart.canvas.height,h=t.chart.canvas.width;t.chart.canvas.style.height&&(l=a.stripPX(t.chart.canvas.style.height),h=a.stripPX(t.chart.canvas.style.width)),r&&o?(l=o,h=r):o?h=t.chart.canvas.width*(l/t.chart.canvas.height):r&&(h=r,l=t.chart.canvas.height*(r/t.chart.canvas.width));var c=s?"image/"+s:"image/png",u=document.createElement("img");u.onload=function(){a.Share.FullChart2PNG(t,{image:this,width:h,height:l},function(t,e){try{i(e.toDataURL(c))}catch(t){console.warn("Safari devices do not handle CORS enabled images. Using the chart's default canvas as a fallback."),i(u.src)}})},u.src=t.chart.canvas.toDataURL(c)},a.Share.uploadImage=function(t,e,i,n){i||(i={}),i.image=t,a.postAjax(e,JSON.stringify(i),function(t,e){if(200!=t)return void n(t,null);n(null,e)})||n(0,null)},a.Share.shareChart=function(t,e,i){a.Share.createImage(t,{},function(n){var r=a.uniqueID(),o="https://share.chartiq.com",s=o+"/upload/"+r;e&&(e.host&&(o=e.host),e.path&&(s=o+e.path+"/"+r));var l=t.getStartDateOffset(),h={layout:t.exportLayout(),drawings:t.exportDrawings(),xOffset:l,startDate:t.chart.dataSegment[l].Date,endDate:t.chart.dataSegment[t.chart.dataSegment.length-1].Date,id:r,symbol:t.chart.symbol},c={id:r,image:n,config:h};a.Share.uploadImage(n,s,c,function(t,e){null!==t?a.alert("error sharing chart: ",t):i(o+e)})})},t},__js_advanced_studiesAdvanced_=function(t){var e=t.CIQ;return e.Studies.calculateCorrelationCoefficient=function(t,e){var i=e.chart.scrubbed,n=e.days;if(i.length<n+1)return void(e.error=!0);if(e.compare=e.inputs["Compare To"],!e.compare){e.compare=[],e.outputs={},e.outputMap={};for(var r in t.chart.series){var a=t.chart.series[r];a.parameters.color&&(e.compare.push(a.display),e.outputs["Result "+a.display]=a.parameters.color,e.outputMap["Result "+a.display+" "+e.name]="Result "+a.display)}}if(!e.compare.length)return void(e.error="Correlation Coefficient requires at least one comparison symbol");for(var o=0;o<e.compare.length;o++)for(var s=0,l=0,h=0,c=0,u=0,d=e.compare[o],p=0,f=e.startFrom-n;f<i.length;f++)if(i[f]){var m=i[f][d];if(m||(m=f>0&&i[f-1]&&i[f-1]["_temps "+e.name].c?i[f-1]["_temps "+e.name].c:0),i[f]["_temps "+e.name]={},s+=i[f]["_temps "+e.name].b=i[f].Close,l+=i[f]["_temps "+e.name].c=m,h+=i[f]["_temps "+e.name].b2=Math.pow(i[f].Close,2),c+=i[f]["_temps "+e.name].c2=Math.pow(m,2),u+=i[f]["_temps "+e.name].bc=i[f].Close*m,p>=n){s-=i[f-n]["_temps "+e.name].b,l-=i[f-n]["_temps "+e.name].c,h-=i[f-n]["_temps "+e.name].b2,c-=i[f-n]["_temps "+e.name].c2,u-=i[f-n]["_temps "+e.name].bc;var g=h/n-Math.pow(s/n,2),v=c/n-Math.pow(l/n,2),y=u/n-s*l/Math.pow(n,2),x=y/Math.sqrt(g*v);i[f]["Result "+d+" "+e.name]=x}p++}},e.Studies.prettify=e.extend({"2-exponential":"dema","3-exponential":"tema",hull:"hma"},e.Studies.prettify),e.extend(e.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),e.Studies.calculateMovingAverageHull=function(t,i){var n=i.chart.scrubbed,r=i.inputs.Field;r&&"field"!=r||(r="Close"),e.Studies.MA("wma",i.days,r,0,"_WMA1",t,i),e.Studies.MA("wma",Math.ceil(i.days/2),r,0,"_WMA2",t,i);var a,o;for(a=i.startFrom-1;a>=0&&(!(o=n[a][r])&&0!==o);a--);for(a++;a<n.length;a++){var s=n[a];s["_MMA "+i.name]=2*s["_WMA2 "+i.name]-s["_WMA1 "+i.name]}var l=parseInt(i.inputs.Offset,10);isNaN(l)&&(l=0),e.Studies.MA("wma",Math.sqrt(i.days),"_MMA "+i.name,l,"_HMA",t,i);var h=i.name;for(var c in i.outputs)h=c+" "+h;for(a=i.startFrom;a<n.length;a++)n[a][h]=n[a]["_HMA "+i.name]},e.Studies.calculateMovingAverageDoubleExponential=function(t,i){var n=i.chart.scrubbed,r=i.inputs.Field;r&&"field"!=r||(r="Close"),e.Studies.MA("ema",i.days,r,0,"_EMA1",t,i),e.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",t,i);var a=parseInt(i.inputs.Offset,10);isNaN(a)&&(a=0);var o,s,l=a;for(o=i.startFrom-1;o>=0;o--)if((s=n[o][r])||0===s){if(!(l>0))break;l--}var h=i.name;for(var c in i.outputs)h=c+" "+h;for(o++;o<n.length;o++){var u=n[o];n[o+a]&&(n[o+a][h]=2*u["_EMA1 "+i.name]-u["_EMA2 "+i.name])}},e.Studies.calculateMovingAverageTripleExponential=function(t,i){var n=i.chart.scrubbed,r=i.inputs.Field;r&&"field"!=r||(r="Close"),e.Studies.MA("ema",i.days,r,0,"_EMA1",t,i),e.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",t,i),e.Studies.MA("ema",i.days,"_EMA2 "+i.name,0,"_EMA3",t,i);var a=parseInt(i.inputs.Offset,10);isNaN(a)&&(a=0);var o,s,l=a;for(o=i.startFrom-1;o>=0;o--)if((s=n[o][r])||0===s){if(!(l>0))break;l--}var h=i.name;for(var c in i.outputs)h=c+" "+h;for(o++;o<n.length;o++){var u=n[o];n[o+a]&&(n[o+a][h]=3*u["_EMA1 "+i.name]-3*u["_EMA2 "+i.name]+u["_EMA3 "+i.name])}},e.Studies.calculateATRBands=function(t,i){e.Studies.calculateStudyATR(t,i);var n=i.inputs.Field;n&&"field"!=n||(n="Close"),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Shift,n,"ATR "+i.name)},e.Studies.calculateSTARCBands=function(t,i){e.Studies.calculateStudyATR(t,i),e.Studies.MA("simple",i.inputs["MA Period"],"Close",0,"_MA",t,i),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Multiplier,"_MA "+i.name,"ATR "+i.name)},e.Studies.calculateATRStops=function(t,i){var n=i.chart.scrubbed;if(n){e.Studies.calculateStudyATR(t,i);for(var r=i.inputs.HighLow,a=Math.max(i.startFrom-1,1);a<n.length-1;a++){var o=n[a],s=n[a-1],l=o["Buy Stops "+i.name];if(l||(l=o["Sell Stops "+i.name]),l||(l=0),o&&s){var h=o.Close,c=h,u=o["ATR "+i.name]*i.inputs.Multiplier;o.Close>l&&s.Close>l?(r&&(h=o.High),c=Math.max(l,h-u)):o.Close<=l&&s.Close<=l?(r&&(h=o.Low),c=Math.min(l,h+u)):o.Close>l?(r&&(h=o.High),c=h-u):o.Close<=l&&(r&&(h=o.Low),c=h+u),h<=c?(n[a+1]["Buy Stops "+i.name]=c,delete n[a+1]["Sell Stops "+i.name]):h>c&&(n[a+1]["Sell Stops "+i.name]=c,delete n[a+1]["Buy Stops "+i.name]),n[a+1]["All Stops "+i.name]=c,i.referenceOutput="All Stops"}}}},e.Studies.calculateAwesomeOscillator=function(t,i){var n=i.chart.scrubbed;if(n.length<33)return void(i.error=!0);e.Studies.MA("simple",5,"hl/2",0,"_MA5",t,i),e.Studies.MA("simple",34,"hl/2",0,"_MA34",t,i);for(var r=Math.max(i.startFrom,33);r<n.length;r++)n[r]&&(n[r][i.name+"_hist"]=n[r]["_MA5 "+i.name]-n[r]["_MA34 "+i.name])},e.Studies.calculateRelativeVolatility=function(t,i){function n(t,e){return t+e===0?100:100*t/(t+e)}i.days=Number(i.inputs["Smoothing Period"]);var r=Number(i.inputs["STD Period"]),a=i.chart.scrubbed;if(a.length<i.days+r)return void(i.error=!0);var o=i.inputs.Field;o&&"field"!=o||(o="Close"),i.std=new e.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=r,i.std.startFrom=i.startFrom,i.std.inputs={Field:o,"Standard Deviations":1,Type:"ma"},i.std.outputs={STD:null},e.Studies.calculateStandardDeviation(t,i.std);var s=0,l=0;i.startFrom>1&&(s=a[i.startFrom-1]["_avgG "+i.name],l=a[i.startFrom-1]["_avgL "+i.name]);for(var h=Math.max(i.startFrom,i.days);h<a.length;h++){var c=a[h];c[o]>a[h-1][o]?(s=(s*(i.days-1)+c["STD "+i.name])/i.days,l=l*(i.days-1)/i.days):(l=(l*(i.days-1)+c["STD "+i.name])/i.days,s=s*(i.days-1)/i.days),c["Rel Vol "+i.name]=n(s,l),c["_avgG "+i.name]=s,c["_avgL "+i.name]=l}i.zoneOutput="Rel Vol"},e.Studies.calculatePMO=function(t,i){var n={Smooth:Number(i.inputs["Smoothing Period"])-1,Double:Number(i.inputs["Double Smoothing Period"])-1,Signal:Number(i.inputs["Signal Period"])},r=i.chart.scrubbed;if(r.length<n.Smooth+n.Double)return void(i.error=!0);var a=i.inputs.Field;a&&"field"!=a||(a="Close");var o;for(o=i.startFrom;o<r.length;o++)if(r[o]&&r[o-1]){var s=r[o-1][a];s&&(r[o]["_ROCx10 "+i.name]=1e3*(r[o][a]/s-1))}e.Studies.MA("exponential",n.Smooth,"_ROCx10 "+i.name,0,"_EMAx10",t,i),e.Studies.MA("exponential",n.Double,"_EMAx10 "+i.name,0,"PMO",t,i),e.Studies.MA("exponential",n.Signal,"PMO "+i.name,0,"PMOSignal",t,i),i.zoneOutput="PMO"},e.Studies.calculateElderImpulse=function(t,i){var n=i.chart.scrubbed,r=i.outputs.Bullish,a=i.outputs.Bearish,o=i.outputs.Neutral;e.Studies.MA("exponential",13,"Close",0,"_MA",t,i),i.macd=new e.Studies.StudyDescriptor("_"+i.name,"macd",i.panel),i.macd.chart=i.chart,i.macd.days=i.days,i.macd.startFrom=i.startFrom,i.macd.inputs={"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},i.macd.outputs={_MACD:null,_Signal:null},e.Studies.calculateMACD(t,i.macd);for(var s,l=i.startFrom;l<n.length;l++)s=0===l?o:n[l]["_MA "+i.name]>n[l-1]["_MA "+i.name]&&n[l]["_"+i.name+"_hist"]>n[l-1]["_"+i.name+"_hist"]?r:n[l]["_MA "+i.name]<n[l-1]["_MA "+i.name]&&n[l]["_"+i.name+"_hist"]<n[l-1]["_"+i.name+"_hist"]?a:o,n[l]["Result "+i.name]=s},e.Studies.calculatePivotPoints=function(t,i){function n(i){var n="America/New_York";if(!l)if(t.chart.market)n=t.chart.market.market_tz;else{var r=e.Market.Symbology.isForeignSymbol(t.chart.symbol)&&t.chart.symbol.split(".").pop();n=e&&e.realTimeDataSource?(new e.QuoteFeed[e.realTimeDataSource]).exchangeZones[r]:e.QuoteFeed.Xignite.Utility.timeZone[r]}var a=new Date(i.getTime()+6e4*i.getTimezoneOffset());return n&&-1!=n.indexOf("UTC")||(a=e.convertTimeZone(a,"UTC",n)),new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()).getTime()-i.getTime()}function r(){u.pivotPoint=(u.high+u.low+a[d-1].Close)/3,u.prevHigh=u.high,u.prevLow=u.low,u.hlSpread=u.high-u.low,u.high=u.low=0}var a=i.chart.scrubbed,o="day";if("day"==t.layout.interval)o="month";else if(t.isDailyInterval(t.layout.interval))o="year";else if("second"==t.layout.interval||"millisecond"==t.layout.interval||"second"==t.layout.timeUnit||"millisecond"==t.layout.timeUnit)o="15min";else{var s=t.layout.periodicity;"minute"!=t.layout.interval&&(s*=t.layout.interval),s>=30&&(o="week")}var l=e.Market.Symbology.isForexSymbol(t.chart.symbol),h=e.Market.Symbology.isForexMetal(t.chart.symbol),c=null,u={pivotPoint:0,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0};i.startFrom>1&&(u=e.clone(a[i.startFrom-1]["_pointers "+i.name]));for(var d=Math.max(1,i.startFrom);d<a.length;d++)if(a[d-1]){if(u.high=Math.max(u.high,a[d-1].High),u.low=Math.min(u.low>0?u.low:a[d-1].Low,a[d-1].Low),i.inputs.Continuous)r();else if("year"==o&&a[d].DT.getYear()!=a[d-1].DT.getYear())r();else if("month"==o&&a[d].DT.getMonth()!=a[d-1].DT.getMonth())r();else if("week"==o&&a[d].DT.getDay()<a[d-1].DT.getDay())r();else if("day"==o){null===c&&(c=n(a[d].DT),l&&(c+=h?216e5:252e5));var p=new Date(new Date(+a[d].DT).setMilliseconds(a[d].DT.getMilliseconds()+c)),f=new Date(new Date(+a[d-1].DT).setMilliseconds(a[d-1].DT.getMilliseconds()+c));f.getDate()!=p.getDate()&&0!==p.getDay()&&6!=p.getDay()&&(c=null,r())}else"15min"!=o||a[d].DT.getHours()==a[d-1].DT.getHours()&&Math.floor(a[d].DT.getMinutes()/15)==Math.floor(a[d-1].DT.getMinutes()/15)||r();a[d]["Pivot "+i.name]=u.pivotPoint,"fibonacci"==i.inputs.Type.toLowerCase()?(a[d]["Resistance 1 "+i.name]=u.pivotPoint+.382*u.hlSpread,a[d]["Resistance 2 "+i.name]=u.pivotPoint+.618*u.hlSpread,a[d]["Resistance 3 "+i.name]=u.pivotPoint+u.hlSpread,a[d]["Support 1 "+i.name]=u.pivotPoint-.382*u.hlSpread,a[d]["Support 2 "+i.name]=u.pivotPoint-.618*u.hlSpread,a[d]["Support 3 "+i.name]=u.pivotPoint-u.hlSpread):(a[d]["Resistance 1 "+i.name]=2*u.pivotPoint-u.prevLow,a[d]["Resistance 2 "+i.name]=u.pivotPoint+u.hlSpread,a[d]["Resistance 3 "+i.name]=u.pivotPoint+2*u.hlSpread,a[d]["Support 1 "+i.name]=2*u.pivotPoint-u.prevHigh,a[d]["Support 2 "+i.name]=u.pivotPoint-u.hlSpread,a[d]["Support 3 "+i.name]=u.pivotPoint-2*u.hlSpread),a[d]["_pointers "+i.name]=e.clone(u)}},e.Studies.calculateVWAP=function(t,i){function n(i){var n="America/New_York";if(!a)if(t.chart.market)n=t.chart.market.market_tz;else{var r=e.Market.Symbology.isForeignSymbol(t.chart.symbol)&&t.chart.symbol.split(".").pop();n=e&&e.realTimeDataSource?(new e.QuoteFeed[e.realTimeDataSource]).exchangeZones[r]:e.QuoteFeed.Xignite.Utility.timeZone[r]}var o=new Date(i.getTime()+6e4*i.getTimezoneOffset());return n&&-1!=n.indexOf("UTC")||(o=e.convertTimeZone(o,"UTC",n)),new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()).getTime()-i.getTime()}var r=i.chart.scrubbed;if(e.ChartEngine.isDailyInterval(t.layout.interval))return void(i.error="VWAP is Intraday Only");var a=e.Market.Symbology.isForexSymbol(t.chart.symbol),o=e.Market.Symbology.isForexMetal(t.chart.symbol),s=null,l=0,h=0,c=!1;i.startFrom>1&&(l=r[i.startFrom-1]["_V "+i.name],h=r[i.startFrom-1]["_VxP "+i.name]);for(var u=i.startFrom;u<r.length;u++){if(null===s&&(s=n(r[u].DT),a&&(s+=o?216e5:252e5)),r[u-1]&&r[u-1].DT){var d=new Date(new Date(+r[u].DT).setMilliseconds(r[u].DT.getMilliseconds()+s));new Date(new Date(+r[u-1].DT).setMilliseconds(r[u-1].DT.getMilliseconds()+s)).getDate()!=d.getDate()&&0!==d.getDay()&&6!=d.getDay()&&(s=null,l=h=0)}var p=r[u]["hlc/3"];l+=r[u].Volume,h+=r[u].Volume*p,l&&(r[u]["VWAP "+i.name]=h/l,r[u]["_V "+i.name]=l,r[u]["_VxP "+i.name]=h,c=!0)}c||(i.error="VWAP Requires Volume")},e.Studies.calculateMFI=function(t,e){var i,n=e.chart.scrubbed,r=0,a=e.inputs["Scale Factor"];a||(a=e.study.inputs["Scale Factor"]);var o=Math.pow(10,Number(a));e.startFrom>1&&(r=n[e.startFrom-1]["_high "+e.name]);var s;for(s=e.startFrom;s<n.length;s++)n[s]&&n[s].Volume&&(n[s][e.name+"_hist"]=i=o*(n[s].High-n[s].Low)/n[s].Volume,n[s]["_high "+e.name]=r=Math.max(r,i))},e.Studies.calculateAlligator=function(t,i){var n={J:Number(i.inputs["Jaw Period"]),T:Number(i.inputs["Teeth Period"]),L:Number(i.inputs["Lips Period"])},r=i.chart.scrubbed;if(r.length<Math.max(n.J,n.T,n.L)+1)return void(i.error=!0);e.Studies.MA("welles wilder",n.J,"hl/2",i.inputs["Jaw Offset"],"Jaw",t,i),e.Studies.MA("welles wilder",n.T,"hl/2",i.inputs["Teeth Offset"],"Teeth",t,i),e.Studies.MA("welles wilder",n.L,"hl/2",i.inputs["Lips Offset"],"Lips",t,i);for(var a=i.startFrom;a<r.length;a++)if(r[a]&&("Gator"==i.type&&(r[a][i.name+"_hist1"]=Math.abs(r[a]["Jaw "+i.name]-r[a]["Teeth "+i.name]),r[a][i.name+"_hist2"]=-Math.abs(r[a]["Teeth "+i.name]-r[a]["Lips "+i.name])),i.inputs["Show Fractals"])){if(!(r[a-2]&&r[a-1]&&r[a]&&r[a+1]&&r[a+2]))continue;r[a-2].High&&r[a-1].High&&r[a].High&&r[a+1].High&&r[a+2].High&&r[a].High>r[a-1].High&&r[a].High>r[a-2].High&&r[a].High>r[a+1].High&&r[a].High>r[a+2].High&&(r[a]["Fractal High "+i.name]=1),r[a-2].Low&&r[a-1].Low&&r[a].Low&&r[a+1].Low&&r[a+2].Low&&r[a].Low<r[a-1].Low&&r[a].Low<r[a-2].Low&&r[a].Low<r[a+1].Low&&r[a].Low<r[a+2].Low&&(r[a]["Fractal Low "+i.name]=1)}},e.Studies.calculateRelativeVigor=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);var r;for(r=i.startFrom;r<n.length;r++)n[r]["_Change "+i.name]=n[r].Close-n[r].Open,n[r]["_Range "+i.name]=n[r].High-n[r].Low;e.Studies.MA("triangular",4,"_Change "+i.name,0,"_Numer",t,i),e.Studies.MA("triangular",4,"_Range "+i.name,0,"_Denom",t,i);var a=[],o=[];for(r=Math.max(i.startFrom-i.days,0);r<n.length;r++){a.push(n[r]["_Numer "+i.name]),o.push(n[r]["_Denom "+i.name]),a.length>i.days&&(a.shift(),o.shift());var s,l=0,h=0;for(s=0;s<a.length;s++)l+=a[s];for(s=0;s<o.length;s++)h+=o[s];0===h&&(h=1e-8),r<i.startFrom||(n[r]["Rel Vig "+i.name]=l/h)}for(e.Studies.MA("triangular",4,"Rel Vig "+i.name,0,"RelVigSignal",t,i),r=i.startFrom;r<n.length;r++)n[r][i.name+"_hist"]=n[r]["Rel Vig "+i.name]-n[r]["RelVigSignal "+i.name]},e.Studies.calculateUlcerIndex=function(t,i){function n(t,e,i){for(var n=null,a=e-t+1;a<=e;a++)a<0||(n=null===n?r[a][i]:Math.max(n,r[a][i]));return n}var r=i.chart.scrubbed;if(r.length<2*i.days-1)return void(i.error=!0);var a=i.inputs.Field;a&&"field"!=a||(a="Close");var o;for(o=Math.max(i.startFrom,i.days-1);o<r.length;o++)r[o]["_PD2 "+i.name]=Math.pow(100*(r[o][a]/n(i.days,o,a)-1),2);for(e.Studies.MA("simple",i.days,"_PD2 "+i.name,0,"_MA",t,i),o=Math.max(i.startFrom,2*(i.days-1));o<r.length;o++)r[o]["Result "+i.name]=Math.sqrt(r[o]["_MA "+i.name])},e.Studies.calculateChoppiness=function(t,i){function n(t,e){for(var i=-1*Number.MAX_VALUE,n=Number.MAX_VALUE,a=e-t+1;a<=e;a++)a<0||r[a]&&r[a].Low&&r[a].High&&(i=Math.max(i,r[a].High),n=Math.min(n,r[a].Low));return[n,i]}e.Studies.calculateStudyATR(t,i);var r=i.chart.scrubbed;if(r.length<i.days+1)return void(i.error=!0);for(var a=Math.max(i.startFrom,i.days);a<r.length;a++)if(r[a]){var o=n(i.days,a);r[a]["Sum True Range "+i.name]?r[a]["Result "+i.name]=100*Math.log(r[a]["Sum True Range "+i.name]/Math.max(1e-6,o[1]-o[0]))/Math.log(i.days):r[a]["Result "+i.name]=0}},e.Studies.calculateDisparity=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);var r=i.inputs.Field;r&&"field"!=r||(r="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,r,0,"_MA",t,i);for(var a=Math.max(i.startFrom,i.days-1);a<n.length;a++)n[a]&&(n[a]["Result "+i.name]=100*(n[a][r]/n[a]["_MA "+i.name]-1))},e.Studies.calculateRainbow=function(t,i){function n(t,e){for(var i=-1*Number.MAX_VALUE,n=Number.MAX_VALUE,a=e-t+1;a<=e;a++)a<0||r[a]&&r[a].Close&&(i=Math.max(i,r[a].Close),n=Math.min(n,r[a].Close));return[n,i]}var r=i.chart.scrubbed;if(r.length<i.days+1)return void(i.error=!0);var a=i.inputs.Field;a&&"field"!=a||(a="Close");for(var o=a,s=1;s<=10;s++)e.Studies.MA("simple",i.days,o,0,"SMA"+s,t,i),o="SMA"+s+" "+i.name;for(var l=Math.max(i.startFrom,10);l<r.length;l++)if(r[l]){var h=0,c=-1*Number.MAX_VALUE,u=Number.MAX_VALUE;for(s=1;s<=10;s++){var d=r[l]["SMA"+s+" "+i.name];h+=d,c=Math.max(c,d),u=Math.min(u,d)}if(i.name.indexOf("Osc")>-1){var p=n(i.inputs["HHV/LLV Lookback"],l);r[l][i.name+"_hist"]=100*(r[l][a]-h/10)/Math.max(1e-6,p[1]-p[0]),r[l]["Over "+i.name]=100*(c-u)/Math.max(1e-6,p[1]-p[0]),r[l]["Under "+i.name]=-r[l]["Over "+i.name],r[l]["Zero "+i.name]=0}}},e.Studies.calculateKST=function(t,i){var n=i.chart.scrubbed,r=i.inputs.Field;r&&"field"!=r||(r="Close");var a={},o={};a[1]=Number(i.inputs["Lightest Rate of Change Period"]),a[2]=Number(i.inputs["Light Rate of Change Period"]),a[3]=Number(i.inputs["Heavy Rate of Change Period"]),a[4]=Number(i.inputs["Heaviest Rate of Change Period"]),o[1]=Number(i.inputs["Lightest SMA Period"]),o[2]=Number(i.inputs["Light SMA Period"]),o[3]=Number(i.inputs["Heavy SMA Period"]),o[4]=Number(i.inputs["Heaviest SMA Period"]);var s,l,h=Number(i.inputs["Signal Period"]);for(s=i.startFrom;s<n.length;s++)if(n[s])for(l=1;l<=4;l++)s>=a[l]&&n[s-a[l]]&&n[s-a[l]][r]&&(n[s]["_ROC"+l+" "+i.name]=100*(n[s][r]/n[s-a[l]][r]-1));for(l=1;l<=4;l++)e.Studies.MA("simple",o[l],"_ROC"+l+" "+i.name,0,"_SMA"+l,t,i);for(s=i.startFrom;s<n.length;s++)for(n[s]["KST "+i.name]=0,l=1;l<=4;l++)n[s]["KST "+i.name]+=l*n[s]["_SMA"+l+" "+i.name];e.Studies.MA("simple",h,"KST "+i.name,0,"KSTSignal",t,i)},e.Studies.calculateSpecialK=function(t,i){var n=i.chart.scrubbed,r=i.inputs.Field;r&&"field"!=r||(r="Close");var a=i.inputs.Interval;a||(a="daily");var o,s,l={daily:[10,15,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,52,78,104]},h={daily:[10,10,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]};for(o=i.startFrom;o<n.length;o++)if(n[o])for(s=0;s<l[a].length;s++)o>=l[a][s]&&n[o-l[a][s]]&&n[o-l[a][s]][r]&&(n[o]["_ROC"+s+" "+i.name]=100*(n[o][r]/n[o-l[a][s]][r]-1));for(s=0;s<h[a].length;s++)e.Studies.MA("daily"==a?"simple":"exponential",h[a][s],"_ROC"+s+" "+i.name,0,"_MA"+s,t,i);for(o=i.startFrom;o<n.length;o++)for(n[o]["Result "+i.name]=0,s=0;s<h[a].length;s++)n[o]["Result "+i.name]+=(s%4+1)*n[o]["_MA"+s+" "+i.name]},e.Studies.calculateDarvas=function(t,i){var n=i.chart.scrubbed,r=0,a=parseInt(i.inputs["ATH Lookback Period"],10);i.inputs["Volume Spike"]&&e.Studies.MA("simple",a,"Volume",0,"ADV",t,i);var o=parseFloat(i.inputs["Volume % of Avg"])/100,s="none",l={},h=null,c=null,u=null,d=parseFloat(i.inputs["Level Offset"]),p=!1;p&&console.log("*****************");var f,m={};for(["Darvas","Ghost","Profit","Loss","ATH","ADV","Spike"].forEach(function(t){m[t]=t+" "+i.name}),f=i.startFrom-1;f>0;f--){var g=n[f];if(!g[m.Darvas]&&!g[m.Ghost]){r=g[m.ATH]||0,c=g[m.Profit],u=g[m.Loss];break}for(var v in m)g[v]=null}for(f;f<n.length;f++){var y=n[f];if(y){if(parseFloat(i.inputs["Price Minimum"])<=n[r].Close){if(!h||h.End&&f!=h.End+1||(n[f-1].Close>l.High?l={State:1,High:2*l.High-l.Low,Low:l.High,Start:f,End:2*l.End-l.Start+1}:h=null,h&&(y[m.Ghost]=e.clone(l),p&&console.log("Ghost begin:"+y.DT),l.State=0,n[l.End]&&(n[l.End][m.Ghost]=e.clone(l),p&&console.log("Ghost end:"+n[l.End].DT)),h={Start:l.Start,End:l.End},c=l.High+d,(!u||u<l.Low-d)&&(u=l.Low-d))),y[m.Profit]=c,y[m.Loss]=u,y.Close>=c?c=null:"high/low"==i.inputs["Exit Field"]&&y.High>=c&&(c=null),"none"==s&&f==r+3&&!n[r+2][m.Darvas]&&!n[r+1][m.Darvas]&&!n[r][m.Darvas]&&n[r].High>y.High&&(s="high"),"high"==s&&(y.High>n[r].High?s="none":n[f-3].Low<n[f-2].Low&&n[f-3].Low<n[f-1].Low&&n[f-3].Low<y.Low&&(l={State:1,High:n[r].High,Low:n[f-3].Low,Start:r},n[r][m.Darvas]=e.clone(l),s="darvas",p&&console.log("Darvas begin:"+n[r].DT),p&&console.log("Darvas established:"+y.DT),h&&(h.End>f&&n[h.Start]&&(y[m.Ghost]=e.clone(n[h.Start][m.Ghost]),y[m.Ghost].End=f,n[h.End]&&(delete n[h.End][m.Ghost],p&&console.log("Ghost End removed:"+n[h.End].DT))),y[m.Ghost].State=0,n[h.Start][m.Ghost].End=f,p&&console.log("Ghost end:"+y.DT),h=null),c=l.High+d,(!u||u<l.Low-d)&&(u=l.Low-d))),"darvas"==s&&(y.Close>l.High?h={}:"high/low"==i.inputs["Exit Field"]&&y.High>l.High?h={}:y.Close<l.Low?s="none":"high/low"==i.inputs["Exit Field"]&&y.Low<l.Low&&(s="none"),h?s="none":"none"==s&&(c=null,u=null),i.inputs["Ghost Boxes"]||(h=null),"none"==s)){for(var x=l.Start+1;x<f;x++)n[x][m.Darvas]=e.clone(l);l.State=0,l.End=f,y[m.Darvas]=e.clone(l),p&&console.log("Darvas end:"+y.DT),y[m.ATH]=r;continue}u&&(y.Close<l.Low||"high/low"==i.inputs["Exit Field"]&&y.Low<l.Low)&&("darvas"==s&&(s="none"),(y.Close<u||"high/low"==i.inputs["Exit Field"]&&y.Low<u)&&(c=null,u=null),h&&(h.End>f&&n[h.Start]&&(y[m.Ghost]=e.clone(n[h.Start][m.Ghost]),y[m.Ghost].End=f,n[h.End]&&(delete n[h.End][m.Ghost],p&&console.log("Ghost End removed:"+n[h.End].DT))),y[m.Ghost].State=0,n[h.Start][m.Ghost].End=f,p&&console.log("Ghost end:"+y.DT),h=null))}if(y.High>=n[r].High&&(r=f,p&&console.log("All Time High:"+y.DT)),(f<3||y.High>=n[f-1].High&&y.High>=n[f-2].High&&y.High>=n[f-3].High)&&f-r>=a){r=f;for(var b=0;b<a&&!(f-b<0);b++)n[f-b].High>n[r].High&&(r=f-b);p&&console.log("All Time High:"+y.DT)}i.inputs["Volume Spike"]&&f>a&&f==r&&y[m.ADV]*o<y.Volume&&(y[m.Spike]=1,p&&console.log("Volume Spike:"+y.DT)),y[m.ATH]=r}}},e.Studies.calculateSupertrend=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);e.Studies.calculateStudyATR(t,i);for(var r=i.startFrom;r<n.length;r++){var a=n[r];if(a){var o=(a.High+a.Low)/2,s=i.inputs.Multiplier*a["ATR "+i.name],l=o-s,h=o+s;r&&(n[r-1]&&n[r-1].Close&&n[r-1].Close>n[r-1]["_Uptrend "+i.name]&&n[r-1]["_Uptrend "+i.name]>l&&(l=n[r-1]["_Uptrend "+i.name]),n[r-1]&&n[r-1].Close&&n[r-1].Close<n[r-1]["_Downtrend "+i.name]&&n[r-1]["_Downtrend "+i.name]<h&&(h=n[r-1]["_Downtrend "+i.name])),a["_Direction "+i.name]=1,r&&(a["_Direction "+i.name]=n[r-1]["_Direction "+i.name],a.Close>n[r-1]["_Downtrend "+i.name]?a["_Direction "+i.name]=1:a.Close<n[r-1]["_Uptrend "+i.name]&&(a["_Direction "+i.name]=-1)),a["_Uptrend "+i.name]=l,a["_Downtrend "+i.name]=h,a["_Trend "+i.name]=a["_Direction "+i.name]>0?l:h,r&&(n[r-1]["_Direction "+i.name]>0?n[r-1]["_Downtrend "+i.name]=null:n[r-1]["_Uptrend "+i.name]=null,n[r]["_Direction "+i.name]>0?n[r]["Uptrend "+i.name]=l:n[r]["Downtrend "+i.name]=h)}}},e.Studies.fetchAdditionalInstruments=function(t,i,n){if(!t.quoteDriver)return void console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");var r=t.panels[i.panel].chart;i.symbols=n;var a,o;for(a=0;a<n.length;a++)o=n[a],r.studySymbols.addDependency(o,i.name);if(t.chart&&t.chart.scrubbed){var s=t.chart.scrubbed,l=t.quoteDriver.makeParams(null,null,r);l.startDate=s[0].DT,l.endDate=s[s.length-1].DT;var h=[];for(a=0;a<n.length;a++){o=n[a];var c=e.shallowClone(l);"object"==typeof o?(c.symbolObject=o,c.symbol=o.symbol):(c.symbolObject={symbol:o},c.symbol=o),r.series[c.symbol]||h.push(c)}h.length&&t.quoteDriver.quoteFeed.multiFetch(h,function(i){for(var n=0;n<i.length;n++){var r=i[n];r.dataCallback.error||e.addMemberToMasterdata(t,r.params.symbol,r.dataCallback.quotes)}t.createDataSet(),t.draw()})}},e.Studies.initPriceRelative=function(t,i,n,r,a,o){var s=e.Studies.initializeFN(t,i,n,r,a,o),l=[s.inputs["Comparison Symbol"].toUpperCase()];return e.Studies.fetchAdditionalInstruments(t,s,l),s},e.Studies.calculatePriceRelative=function(t,i){var n=i.chart.scrubbed,r=i.inputs["Comparison Symbol"].toUpperCase();r||(r=i.study.inputs["Comparison Symbol"]);var a={},o=t.chart.symbol.replace(/=/,"");if(o=o.replace(/[\+\-\*\\\%]/g,""),a[o]=n.slice(i.startFrom),a[o].length){o!=r&&(a[r]=null);for(var s=e.computeEquationChart("["+o+"]/["+r+"]",a),l=0,h=i.startFrom;h<n.length&&l<s.length;h++){for(;l<s.length&&n[h].DT.getTime()>s[l].DT.getTime();)l++;n[h].DT.getTime()<s[l].DT.getTime()||(n[h]["Result "+i.name]=s[l].Close,l++)}}},e.Studies.calculatePerformance=function(t,i){var n=i.chart.scrubbed,r=i.inputs["Comparison Symbol"].toUpperCase();if(r||(r=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),n.length<i.days+1)return void(i.error=!0);e.Studies.MA("ma",i.days,"Close",0,"_MA Base",t,i),e.Studies.MA("ma",i.days,r,0,"_MA Comp",t,i)
;for(var a=i.startFrom;a<n.length;a++)n[a]["Result "+i.name]=n[a].Close/n[a][r]*(n[a]["_MA Comp "+i.name]/n[a]["_MA Base "+i.name])},e.Studies.calculateBeta=function(t,i){var n=i.chart.scrubbed,r=i.inputs["Comparison Symbol"].toUpperCase();if(r||(r=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),n.length<i.days+1)return void(i.error=!0);for(var a=Math.max(i.startFrom,1);a<n.length;a++)n[a]["_BaseChange "+i.name]=n[a].Close/n[a-1].Close-1,n[a]["_CompChange "+i.name]=n[a][r]/n[a-1][r]-1;for(e.Studies.MA("ma",i.days,"_BaseChange "+i.name,0,"_MA Base",t,i),e.Studies.MA("ma",i.days,"_CompChange "+i.name,0,"_MA Comp",t,i),a=Math.max(i.startFrom,i.days);a<n.length;a++)n[a]["_COVARn "+i.name]=(n[a]["_BaseChange "+i.name]-n[a]["_MA Base "+i.name])*(n[a]["_CompChange "+i.name]-n[a]["_MA Comp "+i.name]),n[a]["_VARn "+i.name]=Math.pow(n[a]["_CompChange "+i.name]-n[a]["_MA Comp "+i.name],2);for(e.Studies.MA("ma",i.days,"_COVARn "+i.name,0,"_COVAR",t,i),e.Studies.MA("ma",i.days,"_VARn "+i.name,0,"_VAR",t,i),a=Math.max(i.startFrom,2*i.days-1);a<n.length;a++)n[a]["Result "+i.name]=n[a]["_COVAR "+i.name]/n[a]["_VAR "+i.name]},e.Studies.calculateVortex=function(t,i){var n=i.chart.scrubbed,r=i.days;if(n.length<r+1)return void(i.error=!0);var a={tr:0,vmPlus:0,vmMinus:0};i.startFrom>1&&(a=e.clone(n[i.startFrom-1]["_totals "+i.name]));for(var o=Math.max(i.startFrom,1);o<n.length;o++){var s=n[o],l=n[o-1],h=Math.abs(s.High-l.Low),c=Math.abs(s.Low-l.High),u=Math.max(s.High,l.Close)-Math.min(s.Low,l.Close);a.tr+=u,a.vmPlus+=h,a.vmMinus+=c,o>r&&(a.tr-=n[o-r]["_True Range "+i.name],a.vmPlus-=n[o-r]["_VMPlus "+i.name],a.vmMinus-=n[o-r]["_VMMinus "+i.name]),s["_True Range "+i.name]=u,s["_VMPlus "+i.name]=h,s["_VMMinus "+i.name]=c,o>=r&&(s["+VI "+i.name]=a.vmPlus/a.tr,s["-VI "+i.name]=a.vmMinus/a.tr),s["_totals "+i.name]=e.clone(a)}},e.Studies.calculateBalanceOfPower=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);for(var r=i.startFrom;r<n.length;r++){var a=n[r];a["_Ratio "+i.name]=a.Close-a.Open,0!==a["_Ratio "+i.name]&&(a["_Ratio "+i.name]/=a.High-a.Low)}e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Ratio "+i.name,0,"Result",t,i)},e.Studies.calculateTrendIntensity=function(t,i){function n(t,e){return Math.abs(e)<1e-8?100:100-100/(1+t/e)}var r=i.chart.scrubbed;if(r.length<i.days+1)return void(i.error=!0);var a=i.inputs.Field;a&&"field"!=a||(a="Close"),e.Studies.MA("ma",i.days,a,0,"_SMA",t,i);var o,s,l=0,h=0,c=[],u=Math.ceil(i.days/2);for(o=Math.max(0,i.startFrom-u);o<r.length;o++)(r[o]["_SMA "+i.name]||0===r[o]["_SMA "+i.name])&&(s=r[o][a]-r[o]["_SMA "+i.name],s<0?h+=-1*s:l+=s,c.push(s),c.length>u&&(s=c.shift(),s<0?h-=-1*s:l-=s),o<i.startFrom||(r[o]["TII "+i.name]=n(l,h)));e.Studies.MA("ema",i.inputs["Signal Period"],"TII "+i.name,0,"Signal",t,i),i.zoneOutput="TII"},e.Studies.calculateZigZag=function(t,i){function n(t,e){for(var n=t+1;n<e;n++)r[n]["ShadowResult "+i.name]=(r[e]["Result "+i.name]-r[t]["Result "+i.name])*(n-t)/(e-t)+r[t]["Result "+i.name]}var r=i.chart.scrubbed;if(r&&r.length){for(var a=e.ChartEngine.chartShowsHighs(t.layout.chartType),o=null,s=null,l=i.inputs["Distance(%)"],h=0,c=0,u=0,d=null,p=null,f=0,m=Math.min(r.length-1,i.startFrom);m>=0;m--)if(f=m,r[m]["_state "+i.name]){var g=r[m]["_state "+i.name];o=g[0],s=g[1],h=g[2],c=g[3],u=g[4],d=g[5],p=g[6];break}for(var v=f;v<r.length;v++){var y=r[v][a?"High":"Close"],x=r[v][a?"Low":"Close"];if(null===s||s<y)if(s=y,h<0&&(o=x),d=(1-l/100)*s,h>-1){if(null!==p&&s>p){r[c]["Result "+i.name]=r[c][a?"Low":"Close"],n(u,c),h=-1,o=x,u=c,c=v;continue}}else c=v;if(null===o||o>x)if(o=x,h>0&&(s=y),p=(1+l/100)*o,h<1){if(null!==d&&o<d){r[c]["Result "+i.name]=r[c][a?"High":"Close"],n(u,c),h=1,s=y,u=c,c=v;continue}}else c=v}r[c]["Result "+i.name]=r[c][a?1==h?"Low":"High":"Close"],r[c]["_state "+i.name]=[o,s,h,c,u,d,p],n(u,c),r[r.length-1]["Result "+i.name]=r[r.length-1][a?1==h?"High":"Low":"Close"],n(c,r.length-1)}},e.Studies.calculatePsychologicalLine=function(t,e){var i=e.chart.scrubbed;if(i.length<e.days+1)return void(e.error=!0);for(var n=[],r=100/e.days,a=0,o=Math.max(e.startFrom-e.days,1);o<i.length;o++){var s=Number(i[o].Close>i[o-1].Close);s&&(a+=r),n.push(s),n.length>e.days&&(a-=n.shift()*r),o<e.startFrom||(i[o]["Result "+e.name]=a)}},e.Studies.calculateMADev=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);var r=i.inputs.Field;r&&"field"!=r||(r="Close");var a=i.inputs["Points Or Percent"];a||(a="Points");var o=i.inputs["Moving Average Type"];o||(o="exponential"),e.Studies.MA(o,i.days,r,0,"_MA",t,i);for(var s=i.name+"_hist",l=Math.max(i.startFrom,i.days-1);l<n.length;l++){var h=n[l];h[s]="Points"==a?h[r]-h["_MA "+i.name]:100*(h[r]/h["_MA "+i.name]-1)}},e.Studies.calculateShinohara=function(t,i){var n=i.chart.scrubbed;if(n.length<i.days+1)return void(i.error=!0);var r={weakNum:0,weakDen:0,strongNum:0,strongDen:0};i.startFrom>1&&(r=e.clone(n[i.startFrom-1]["_accums "+i.name]));for(var a=i.startFrom;a<n.length;a++)r.weakNum+=n[a].High-n[a].Close,r.weakDen+=n[a].Close-n[a].Low,a>0&&(r.strongNum+=n[a].High-n[a-1].Close,r.strongDen+=n[a-1].Close-n[a].Low),a>=i.days&&(r.weakNum-=n[a-i.days].High-n[a-i.days].Close,r.weakDen-=n[a-i.days].Close-n[a-i.days].Low,n[a]["Weak Ratio "+i.name]=100*r.weakNum/r.weakDen,a>i.days&&(r.strongNum-=n[a-i.days].High-n[a-i.days-1].Close,r.strongDen-=n[a-i.days-1].Close-n[a-i.days].Low,n[a]["Strong Ratio "+i.name]=100*r.strongNum/r.strongDen)),n[a]["_accums "+i.name]=e.clone(r)},e.Studies.calculateIchimoku=function(t,e){function i(t,e){for(var i=Number.MAX_VALUE,n=-1*Number.MAX_VALUE,r=e-t+1;r<=e;r++)r<0||a[r]&&a[r].Low&&a[r].High&&(i=Math.min(i,a[r].Low),n=Math.max(n,a[r].High));return[i,n]}var n,r,a=e.chart.scrubbed,o={Base:Number(e.inputs["Base Line Period"]),Conv:Number(e.inputs["Conversion Line Period"]),LeadB:Number(e.inputs["Leading Span B Period"]),Lag:Number(e.inputs["Lagging Span Period"])};for(n=e.startFrom;n<a.length;n++)a[n]&&(r=i(o.Conv,n),a[n]["Conversion Line "+e.name]=(r[1]+r[0])/2,r=i(o.Base,n),a[n]["Base Line "+e.name]=(r[1]+r[0])/2,n<o.Lag||!a[n-o.Lag]||(a[n-o.Lag]["Lagging Span "+e.name]=a[n].Close));for(e.futureA=[],e.futureB=[],n=Math.max(0,e.startFrom-o.Base);n<a.length;n++){r=i(o.LeadB,n);var s=(a[n]["Conversion Line "+e.name]+a[n]["Base Line "+e.name])/2,l=(r[1]+r[0])/2;a[n+o.Base]?(a[n+o.Base]["Leading Span A "+e.name]=s,a[n+o.Base]["Leading Span B "+e.name]=l):(e.futureA.push(s),e.futureB.push(l))}},e.Studies.displayIchimoku=function(t,i,n){var r={topBand:"Leading Span A "+i.name,bottomBand:"Leading Span B "+i.name,fillFuture:!0};t.chart.context.globalAlpha=.3,e.fillIntersecting(t,i,n,r),t.chart.context.globalAlpha=1,e.Studies.displaySeriesAsLine(t,i,n)},e.Studies.displayDarvas=function(t,i,n){var r=i.outputs.Levels;r&&"auto"!=r&&!e.isTransparent(r)||(r=t.defaultColor);var a=i.outputs.Darvas;a&&"auto"!=a&&!e.isTransparent(a)||(a=t.defaultColor);var o=i.outputs.Ghost;o&&"auto"!=o&&!e.isTransparent(o)||(o=t.defaultColor);var s,l,h,c,u=t.panels[i.panel],d=t.layout.candleWidth-2;if(d<2&&(d=1),t.startClip(i.panel),i.inputs["Stop Levels"]){for(t.chart.context.setLineDash&&t.chart.context.setLineDash([2,2]),t.chart.context.lineWidth=2,t.chart.context.strokeStyle=r,t.chart.context.beginPath(),s=0;s<n.length;s++){l=n[s];var p=n[s-1];if(l){c=l["Loss "+i.name]?Math.floor(t.pixelFromPriceTransform(l["Loss "+i.name],u)):null;var f=p&&p["Loss "+i.name]?Math.floor(t.pixelFromPriceTransform(p["Loss "+i.name],u)):null;if(c){l.candleWidth&&(d=Math.floor(Math.max(1,l.candleWidth)));var m=Math.floor(t.pixelFromBar(s,u.chart)+d/2),g=Math.floor(t.pixelFromBar(s,u.chart)-d/2);f&&f>=c?t.chart.context.lineTo(g,c):0===s?t.chart.context.moveTo(t.chart.left,c):t.chart.context.moveTo(g,c),t.chart.context.lineTo(m,c)}}}t.chart.context.stroke(),t.chart.context.setLineDash&&t.chart.context.setLineDash([]),t.chart.context.lineWidth=1}var v,y,x,b,C=-10,w=0,S=-10,T=0,D=!1,M=!1,k=t.chart.context.measureText("\u25b2").width/2;for(s=0;s<n.length;s++)if(n[s]){if(n[s]["Spike "+i.name]){t.chart.context.fillStyle=a,t.chart.context.textBaseline="bottom";var _=t.pixelFromPriceTransform(n[s].High,t.chart.panel);t.chart.context.fillText("\u25bc",t.pixelFromBar(s)-k,_-5)}n[s].candleWidth&&(d=Math.floor(Math.max(1,n[s].candleWidth))),n[s]["Darvas "+i.name]&&(l=n[s]["Darvas "+i.name],1!=l.State||D?0===l.State&&(w=Math.floor(t.pixelFromBar(s,u.chart)+d/2)-C,v=Math.floor(t.pixelFromPriceTransform(l.High,u)),y=Math.floor(t.pixelFromPriceTransform(l.Low,u))-v,t.chart.context.strokeStyle=a,t.chart.context.fillStyle=a,i.inputs["Stop Levels"]?t.chart.context.globalAlpha=.3:(t.chart.context.strokeRect(C,v,w,y),t.chart.context.globalAlpha=.2),t.chart.context.fillRect(C,v,w,y),t.chart.context.globalAlpha=1,D=!1):(C=Math.floor(t.pixelFromBar(s,u.chart)-d/2),v=Math.floor(t.pixelFromPriceTransform(l.High,u)),y=Math.floor(t.pixelFromPriceTransform(l.Low,u))-v,D=!0)),n[s]["Ghost "+i.name]&&i.inputs["Ghost Boxes"]&&(l=n[s]["Ghost "+i.name],1!=l.State||M?0===l.State&&(l.Start==l.End&&(S=Math.floor(t.pixelFromBar(s,u.chart)-d/2)),T=Math.floor(t.pixelFromBar(s,u.chart)+d/2)-S,x=Math.floor(t.pixelFromPriceTransform(l.High,u)),b=Math.floor(t.pixelFromPriceTransform(l.Low,u))-x,t.chart.context.strokeStyle=o,t.chart.context.fillStyle=o,i.inputs["Stop Levels"]?t.chart.context.globalAlpha=.3:(t.chart.context.strokeRect(S,x,T,b),t.chart.context.globalAlpha=.2),t.chart.context.fillRect(S,x,T,b),t.chart.context.globalAlpha=1,M=!1):(S=Math.floor(t.pixelFromBar(s,u.chart)-d/2),x=Math.floor(t.pixelFromPriceTransform(l.High,u)),T=Math.floor((l.End-l.Start+1)*t.layout.candleWidth+d/2),b=Math.floor(t.pixelFromPriceTransform(l.Low,u))-x,M=!0))}if(D&&(w=Math.floor(t.pixelFromBar(s,u.chart)+d/2)-C,t.chart.context.strokeStyle=a,t.chart.context.fillStyle=a,i.inputs["Stop Levels"]?t.chart.context.globalAlpha=.3:(t.chart.context.beginPath(),t.chart.context.moveTo(C+2*w,v),t.chart.context.lineTo(C,v),t.chart.context.lineTo(C,v+y),t.chart.context.lineTo(C+2*w,v+y),t.chart.context.stroke(),t.chart.context.globalAlpha=.2),t.chart.context.fillRect(C,v,2*w,y),t.chart.context.globalAlpha=1),M&&(t.chart.context.strokeStyle=o,t.chart.context.fillStyle=o,i.inputs["Stop Levels"]?t.chart.context.globalAlpha=.3:(t.chart.context.strokeRect(S,x,T,b),t.chart.context.globalAlpha=.2),t.chart.context.fillRect(S,x,T,b),t.chart.context.globalAlpha=1),D||M){if(i.inputs["Stop Levels"]){t.chart.context.setLineDash&&t.chart.context.setLineDash([2,2]),t.chart.context.lineWidth=2,t.chart.context.strokeStyle=r;var E=Math.floor(t.pixelFromBar(s-1,u.chart)+d/2);h&&(t.chart.context.beginPath(),t.chart.context.moveTo(E,h),t.chart.context.lineTo(D?C+2*w:S+T,h),t.chart.context.stroke()),c&&(t.chart.context.beginPath(),t.chart.context.moveTo(E,c),t.chart.context.lineTo(D?C+2*w:S+T,c),t.chart.context.stroke()),t.chart.context.setLineDash&&t.chart.context.setLineDash([]),t.chart.context.lineWidth=1}D=!1,M=!1}t.endClip()},e.Studies.displaySupertrend=function(t,e,i){function n(t,i){return i["_Direction "+e.name]<0?e.outputs.Downtrend:e.outputs.Uptrend}var r=t.panels[e.panel],a={skipProjections:!0,label:t.preferences.labels},o=t.chart.context;o.strokeStyle=n(t,i[i.length-1]),o.lineWidth=2,e.highlight&&(o.lineWidth=3),t.plotLineChart(r,i,"_Trend "+e.name,a,n),o.lineWidth=1,t.startClip(e.panel);var s,l=t.chart.context.measureText("\u25b2").width/2;for(s=0;s<i.length;s++)if(i[s]&&i[s-1])if(i[s-1]["_Direction "+e.name]>i[s]["_Direction "+e.name]){t.chart.context.fillStyle=e.outputs.Downtrend,t.chart.context.textBaseline="bottom";for(var h=t.pixelFromPriceTransform(i[s].High,t.chart.panel),c=5;c<=45;c+=10)t.chart.context.fillText("\u25bc",t.pixelFromBar(s)-l,h-c)}else if(i[s-1]["_Direction "+e.name]<i[s]["_Direction "+e.name]){t.chart.context.fillStyle=e.outputs.Uptrend,t.chart.context.textBaseline="top";for(var u=t.pixelFromPriceTransform(i[s].Low,t.chart.panel),d=5;d<=45;d+=10)t.chart.context.fillText("\u25b2",t.pixelFromBar(s)-l,u+d)}t.endClip()},e.Studies.displayVWAP=function(t,i,n){i.error?t.watermark(i.panel,{h:"center",v:"top",text:t.translateIf(i.error),vOffset:50}):e.Studies.displaySeriesAsLine(t,i,n)},e.Studies.displayVsComparisonSymbol=function(t,i,n){var r=i.inputs["Comparison Symbol"].toUpperCase();if(!i.chart.studySymbols.getDependencies(r))return void t.watermark(i.panel,"center","bottom",t.translateIf(i.study.name+" Not Available"));for(var a=n.length-1;a>=0;a--)if(n[a]&&n[a][r])return e.Studies.displaySeriesAsLine(t,i,n),void((i.study.centerline||0===i.study.centerline)&&(i.outputs.Gain&&e.preparePeakValleyFill(t,n,{panelName:i.panel,band:"Result "+i.name,threshold:i.study.centerline,direction:1,color:i.outputs.Gain}),i.outputs.Loss&&e.preparePeakValleyFill(t,n,{panelName:i.panel,band:"Result "+i.name,threshold:i.study.centerline,direction:-1,color:i.outputs.Loss})))},e.Studies.displayMFI=function(t,i,n){var r=t.panels[i.panel];r.yAxis.min=0,e.Studies.displaySeriesAsLine(t,i,n);var a=r.yAxis.bottom,o=t.layout.candleWidth-2;o<2&&(o=1);var s=i.outputs.Green,l=i.outputs.Fade,h=i.outputs.Fake,c=i.outputs.Squat;t.canvasColor("stx_histogram"),t.chart.context.globalAlpha=1,t.chart.context.fillStyle="#CCCCCC",t.startClip(i.panel);for(var u=0;u<n.length;u++){var d=n[u];d&&n[u-1]&&(0===u||(n[u-1][i.name+"_hist"]<d[i.name+"_hist"]?n[u-1].Volume<d.Volume?t.chart.context.fillStyle=s:n[u-1].Volume>d.Volume&&(t.chart.context.fillStyle=h):n[u-1][i.name+"_hist"]>d[i.name+"_hist"]&&(n[u-1].Volume<d.Volume?t.chart.context.fillStyle=c:n[u-1].Volume>d.Volume&&(t.chart.context.fillStyle=l))),d.candleWidth&&(o=Math.floor(Math.max(1,d.candleWidth-2))),t.chart.context.fillRect(Math.floor(t.pixelFromBar(u,r.chart)-o/2),Math.floor(a),Math.floor(o),Math.floor(t.pixelFromPrice(d[i.name+"_hist"],r)-a)))}t.endClip()},e.Studies.displayAwesomeOscillator=function(t,i,n){e.Studies.determineMinMax(t,i,n);var r=t.panels[i.panel];r.yAxis.low=r.min=Math.min(0,r.min),r.yAxis.high=r.max=Math.max(0,r.max),e.Studies.displaySeriesAsLine(t,i,n);var a=t.pixelFromPrice(0,r),o=t.layout.candleWidth-2;o<2&&(o=1);var s=i.outputs["Increasing Bar"],l=i.outputs["Decreasing Bar"];t.canvasColor("stx_histogram"),t.chart.context.globalAlpha=1,t.chart.context.fillStyle="#CCCCCC",t.startClip(i.panel);for(var h=0;h<n.length;h++){var c=n[h];c&&n[h-1]&&(0===h||(n[h-1][i.name+"_hist"]<c[i.name+"_hist"]?t.chart.context.fillStyle=s:n[h-1][i.name+"_hist"]>c[i.name+"_hist"]&&(t.chart.context.fillStyle=l)),c.candleWidth&&(o=Math.floor(Math.max(1,c.candleWidth-2))),t.chart.context.fillRect(Math.floor(t.pixelFromBar(h,r.chart)-o/2),Math.floor(a),Math.floor(o),Math.floor(t.pixelFromPrice(c[i.name+"_hist"],r)-a)))}t.endClip()},e.Studies.displayGator=function(t,i,n){e.Studies.determineMinMax(t,i,n);var r=t.panels[i.panel];r.yAxis.low=r.min=Math.min(0,r.min),r.yAxis.high=r.max=Math.max(0,r.max),e.Studies.displaySeriesAsLine(t,i,n);var a=t.pixelFromPrice(0,r),o=t.layout.candleWidth-2;o<2&&(o=1);var s=i.outputs["Increasing Bar"],l=i.outputs["Decreasing Bar"];t.canvasColor("stx_histogram"),t.chart.context.globalAlpha=1,t.chart.context.fillStyle="#CCCCCC",t.startClip(i.panel);for(var h=1;h<n.length;h++){var c=n[h];if(c&&n[h-1])for(var u=1;u<=2;u++)Math.abs(n[h-1][i.name+"_hist"+u])<Math.abs(c[i.name+"_hist"+u])?t.chart.context.fillStyle=s:Math.abs(n[h-1][i.name+"_hist"+u])>Math.abs(c[i.name+"_hist"+u])&&(t.chart.context.fillStyle=l),c.candleWidth&&(o=Math.floor(Math.max(1,c.candleWidth-2))),t.chart.context.fillRect(Math.floor(t.pixelFromBar(h,r.chart)-o/2),Math.floor(a),Math.floor(o),Math.floor(t.pixelFromPrice(c[i.name+"_hist"+u],r)-a))}t.endClip()},e.Studies.displayElderImpulse=function(t,e){t.chart.customChart={chartType:"colored_bar",colorFunction:function(t,i){return i["Result "+e.name]}}},e.Studies.displayPivotPoints=function(t,i,n){if(i.noSlopes=!i.inputs.Continuous,e.Studies.displaySeriesAsLine(t,i,n),i.inputs.Shading){var r={noSlopes:i.noSlopes,label:i.parameters.label,opacity:i.parameters.opacity?i.parameters.opacity:.2};e.prepareChannelFill(t,n,e.extend({panelName:i.panel,topBand:"Resistance 3 "+i.name,bottomBand:"Resistance 2 "+i.name,color:i.outputs["Resistance 3"]},r)),e.prepareChannelFill(t,n,e.extend({panelName:i.panel,topBand:"Resistance 2 "+i.name,bottomBand:"Resistance 1 "+i.name,color:i.outputs["Resistance 2"]},r)),e.prepareChannelFill(t,n,e.extend({panelName:i.panel,topBand:"Resistance 1 "+i.name,bottomBand:"Pivot "+i.name,color:i.outputs["Resistance 1"]},r)),e.prepareChannelFill(t,n,e.extend({panelName:i.panel,topBand:"Support 1 "+i.name,bottomBand:"Pivot "+i.name,color:i.outputs["Support 1"]},r)),e.prepareChannelFill(t,n,e.extend({panelName:i.panel,topBand:"Support 2 "+i.name,bottomBand:"Support 1 "+i.name,color:i.outputs["Support 2"]},r)),e.prepareChannelFill(t,n,e.extend({panelName:i.panel,topBand:"Support 3 "+i.name,bottomBand:"Support 2 "+i.name,color:i.outputs["Support 3"]},r))}},e.Studies.displayAlligator=function(t,i,n){function r(e,i){var r;"high"==e?(t.chart.context.fillStyle=t.defaultColor,t.chart.context.textBaseline="bottom",r=t.pixelFromPriceTransform(n[i].High,t.chart.panel),t.chart.context.fillText("\u25b2",t.pixelFromBar(o,t.chart)-t.chart.context.measureText("\u25b2").width/2+1,r-5)):"low"==e&&(t.chart.context.fillStyle=t.defaultColor,t.chart.context.textBaseline="top",r=t.pixelFromPriceTransform(n[i].Low,t.chart.panel),t.chart.context.fillText("\u25bc",t.pixelFromBar(o,t.chart)-t.chart.context.measureText("\u25bc").width/2+1,r+5))}var a=t.panels[i.panel];if(t.startClip(i.panel),e.Studies.displayIndividualSeriesAsLine(t,i,a,"Jaw "+i.name,n),e.Studies.displayIndividualSeriesAsLine(t,i,a,"Lips "+i.name,n),e.Studies.displayIndividualSeriesAsLine(t,i,a,"Teeth "+i.name,n),i.inputs["Show Fractals"])for(var o=2;o<n.length-2;o++)n[o]&&(n[o]["Fractal High "+i.name]&&r("high",o),n[o]["Fractal Low "+i.name]&&r("low",o));t.endClip()},e.Studies.displayRainbowMA=function(t,i,n){var r=t.panels[i.panel];t.startClip(i.panel);for(var a=10;a>0;a--)e.Studies.displayIndividualSeriesAsLine(t,i,r,"SMA"+a+" "+i.name,n);t.endClip()},e.Studies.displayRainbowOsc=function(t,i,n){var r=t.panels[i.panel];r.min=-100,r.max=100,r.yAxis.low=r.min=Math.min(0,r.min),r.yAxis.high=r.max=Math.max(0,r.max),t.startClip(i.panel),e.Studies.displaySeriesAsLine(t,i,n);var a=t.pixelFromPrice(0,r);t.chart.context.strokeStyle="transparent",t.plotLineChart(r,n,"Zero "+i.name,{skipTransform:!0,label:!1});var o=i.outputs["Positive Bar"];t.chart.context.strokeStyle=o,t.plotLineChart(r,n,"Over "+i.name,{skipTransform:!0,label:!1});var s=t.chart.context.createLinearGradient(0,a,0,r.yAxis.top);s.addColorStop(0,t.containerColor),s.addColorStop(1,o),e.prepareChannelFill(t,n,{color:s,opacity:1,panelName:i.name,topBand:"Over "+i.name,bottomBand:"Zero "+i.name});var l=i.outputs["Negative Bar"];t.chart.context.strokeStyle=l,t.plotLineChart(r,n,"Under "+i.name,{skipTransform:!0,label:!1});var h=t.chart.context.createLinearGradient(0,a,0,r.yAxis.bottom);h.addColorStop(0,t.containerColor),h.addColorStop(1,l),e.prepareChannelFill(t,n,{color:h,opacity:1,panelName:i.name,topBand:"Zero "+i.name,bottomBand:"Under "+i.name});var c=t.layout.candleWidth-2;c<2&&(c=1),t.canvasColor("stx_histogram"),t.chart.context.globalAlpha=1,t.chart.context.fillStyle="#CCCCCC";for(var u=0;u<n.length;u++){var d=n[u];d&&(d[i.name+"_hist"]>0?t.chart.context.fillStyle=o:d[i.name+"_hist"]<0&&(t.chart.context.fillStyle=l),d.candleWidth&&(c=Math.floor(Math.max(1,d.candleWidth-2))),t.chart.context.fillRect(Math.floor(t.pixelFromBar(u,r.chart)-c/2),Math.floor(a),Math.floor(c),Math.floor(t.pixelFromPrice(d[i.name+"_hist"],r)-a)))}t.endClip()},e.Studies.displayZigZag=function(t,i,n){var r=t.chart,a=[0,0];n[0]&&!n[0]["Result "+i.name]&&n[0]["ShadowResult "+i.name]&&(n[0]["Result "+i.name]=n[0]["ShadowResult "+i.name],n[0].transform&&(n[0].transform["Result "+i.name]=r.transformFunc(t,r,n[0]["ShadowResult "+i.name])),a[0]=1),n[n.length-1]&&!n[n.length-1]["Result "+i.name]&&n[n.length-1]["ShadowResult "+i.name]&&(n[n.length-1]["Result "+i.name]=n[n.length-1]["ShadowResult "+i.name],n[n.length-1].transform&&(n[n.length-1].transform["Result "+i.name]=r.transformFunc(t,r,n[n.length-1]["ShadowResult "+i.name])),a[1]=1),e.Studies.displaySeriesAsLine(t,i,n),a[0]&&(delete n[0]["Result "+i.name],n[0].transform&&delete n[0].transform["Result "+i.name]),a[1]&&(delete n[n.length-1]["Result "+i.name],n[n.length-1].transform&&delete n[n.length-1].transform["Result "+i.name])},e.Studies.displayVolumeProfile=function(t,i,n){function r(t,i){i||(T-=2),_.canvasColor(t),e.isIE8&&(x.globalAlpha=.5),x.beginPath();for(var n=u[0][0],r=T,a=1;a<u.length;a++){if(u[a][1]){var o=Math.round(T-u[a][1]*D/p)-.5,s=Math.round(_.pixelFromPrice(n,w))+.5,l=Math.round(_.pixelFromPrice(u[a][0],w))+.5;if(i||(s-=.5,l+=.5,o+=.5),s>S&&(s=S),l<S)if(x.moveTo(T,s),x.lineTo(T,l),x.lineTo(o,l),x.lineTo(o,s),i)(r>o||1==a)&&x.lineTo(r,s);else if(x.lineTo(T,s),h){var c=e.condenseInt(u[a][1]),d=s-l;if(C<=d-2){var f;try{f=x.measureText(c).width}catch(t){f=0}x.textBaseline="top";var m=x.fillStyle;x.fillStyle=M,x.fillText(c,o-f-3,l+(d/2-C/2)),x.fillStyle=m}}r=o}else r=T;n=u[a][0]}i||x.fill(),x.strokeStyle=M,i&&x.stroke(),x.closePath()}if(t&&t.chart.dataSet){var a=t.chart,o=i.parameters.numberOfBars,s=i.parameters.widthPercentage,l=i.parameters.displayBorder,h=i.parameters.displayVolume;(!o||o<0)&&(o=30),o=Math.ceil(o),(!s||s<0)&&(s=.25),!1!==l&&(l=!0),!0!==h&&(h=!1);var c=(a.highValue-a.lowValue)/o;if(0!==c){for(var u=[],d=a.lowValue;d<a.highValue+1e-8;d+=c)u.push([d,0]);if(u.length<2)return void t.watermark("chart","center","top",t.translateIf("Not enough data to render the Volume Profile"));for(var p=0,f=0;f<n.length;f++){var m=n[f];if(m)for(var g=u[0][0],v=0,y=1;y<u.length;y++)v=u[y][0],(m.Low>=g&&m.Low<=v||m.Low<g&&m.High>v||m.High>=g&&m.High<=v)&&(u[y][1]+=m.Volume,u[y][1]>p&&(p=u[y][1])),g=v}if(0===p)return void t.watermark("chart","center","top",t.translateIf("Not enough data to render the Volume Profile"));t.setStyle("stx_volume_profile","color",i.outputs["Bars Color"]);var x=a.context,b="stx-float-date";t.canvasFont(b,x);var C=t.getCanvasFontSize(b),w=a.panel,S=w.yAxis.bottom,T=Math.round(a.width)-.5,D=a.width*s,M=t.canvasStyle("stx_volume_profile").borderColor,k=!e.isTransparent(t.canvasStyle("stx_volume_profile").borderColor)&&l,_=t;r("stx_volume_profile",!1),k&&r("stx_volume_profile",!0),x.globalAlpha=1}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:e.Studies.calculateCorrelationCoefficient,outputs:{}},PMO:{name:"Price Momentum Oscillator",calculateFN:e.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:e.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}},Awesome:{name:"Awesome Oscillator",seriesFN:e.Studies.displayAwesomeOscillator,calculateFN:e.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"W MFI":{name:"Market Facilitation Index",seriesFN:e.Studies.displayMFI,calculateFN:e.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:"#ffd0cf"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateATRBands,inputs:{Period:5,Shift:3,Field:"field","Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:e.Studies.displayPSAR2,calculateFN:e.Studies.calculateATRStops,inputs:{Multiplier:3,Period:21,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:e.Studies.calculateBollinger,inputs:{Field:"field",Period:20,"Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:e.Studies.calculateBollinger,inputs:{Field:"field",Period:20,"Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Donchian Width":{name:"Donchian Width",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},"Rel Vig":{name:"Relative Vigor Index",seriesFN:e.Studies.displayHistogramWithSeries,calculateFN:e.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:e.Studies.calculateElderImpulse,seriesFN:e.Studies.displayElderImpulse,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:"#DD3E39",Neutral:"#5F7CB8"},removeFN:function(t){t.chart.customChart=null}},"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:e.Studies.displayPivotPoints,calculateFN:e.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"rgb(184,44,11)","Support 1":"rgb(105,145,88)","Resistance 2":"rgb(227,100,96)","Support 2":"rgb(179,217,135)","Resistance 3":"rgb(255,208,207)","Support 3":"rgb(211,232,174)"},parameters:{init:{opacity:.2}}},VWAP:{name:"VWAP",overlay:!0,seriesFN:e.Studies.displayVWAP,calculateFN:e.Studies.calculateVWAP,inputs:{},outputs:{VWAP:"#FF0000"}},Alligator:{name:"Alligator",overlay:!0,seriesFN:e.Studies.displayAlligator,calculateFN:e.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:e.Studies.displayGator,calculateFN:e.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0},"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,range:"bypass",calculateFN:e.Studies.calculateIchimoku,seriesFN:e.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}},"P Rel":{name:"Price Relative",initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculatePriceRelative,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!0},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0},Ulcer:{name:"Ulcer Index",calculateFN:e.Studies.calculateUlcerIndex,inputs:{Field:"field",Period:14}},"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",calculateFN:e.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}},"Trend Int":{name:"Trend Intensity Index",calculateFN:e.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Field:"field",Period:14,"Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Choppiness:{name:"Choppiness Index",calculateFN:e.Studies.calculateChoppiness,centerline:50,parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}},Disparity:{name:"Disparity Index",calculateFN:e.Studies.calculateDisparity,inputs:{Field:"field",Period:14,"Moving Average Type":"ma"}},"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:e.Studies.calculateRainbow,seriesFN:e.Studies.displayRainbowMA,inputs:{Field:"field",Period:2,Underlay:!1},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:e.Studies.calculateRainbow,seriesFN:e.Studies.displayRainbowOsc,inputs:{Field:"field",Period:2,"HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}},"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:e.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:e.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}},Darvas:{name:"Darvas Box",underlay:!0,calculateFN:e.Studies.calculateDarvas,seriesFN:e.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01}}},Supertrend:{name:"Supertrend",overlay:!0,seriesFN:e.Studies.displaySupertrend,calculateFN:e.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}},"vol profile":{name:"Volume Profile",overlay:!0,seriesFN:e.Studies.displayVolumeProfile,calculateFN:null,inputs:{},outputs:{"Bars Color":"#b64a96"},customRemoval:!0,parameters:{init:{displayBorder:!0,displayVolume:!1,numberOfBars:30,widthPercentage:.25}}},Vortex:{name:"Vortex Indicator",calculateFN:e.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{template:"studyOverZones",init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}},ZigZag:{name:"ZigZag",overlay:!0,seriesFN:e.Studies.displayZigZag,calculateFN:e.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},customRemoval:!0,attributes:{"Distance(%)":{min:.1,step:.1}}},PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:e.Studies.calculatePsychologicalLine,inputs:{Period:20}},"MA Dev":{name:"Moving Average Deviation",calculateFN:e.Studies.calculateMADev,seriesFN:e.Studies.displayHistogramWithSeries,inputs:{Field:"field",Period:12,"Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:e.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":"#5F7CB8"}}}),t},__js_core_core_=function(t){var e=t.CIQ,i=t.$$$
;return e.getETDateTime=function(){var t=new Date;return e.convertTimeZone(new Date(t.getTime()+6e4*t.getTimezoneOffset()),"UTC","America/New_York")},e.fromET=function(t){var e=new Date,i=4;(e.getMonth()<2||2==e.getMonth()&&e.getDate()<11||e.getMonth()>10||10==e.getMonth()&&e.getDate()>=4)&&(i=5);var n=t.getTime()+36e5*i;return new Date(n)},e.convertFutureMonth=function(t){var e=t.toString();if(e.length<=0||e.length>2)return"";switch(e){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"11";case"Z":return"12"}return e},e.money=function(t,i,n){return n||(n="$"),3==n.length&&(n+=" "),i||0===i||(i=2),n+e.commas((Math.round(1e4*t)/1e4).toFixed(i))},e.convertCurrencyCode=function(t){var e={JPY:"\xa5",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN\xa5",CZK:"K\u010d",DKK:"kr",EUR:"\u20ac",GBP:"\xa3",HKD:"HK$",HUF:"Ft",ILS:"\u20aa",INR:"\u20b9",KRW:"\u20a9",MXN:"MX$",NOK:"kr",NZD:"NZ$",PLN:"z\u0142",RUB:"\u0440\u0443\u0431",SAR:"\ufdfc",SEK:"kr",SGD:"S$",THB:"\u0e3f",TRY:"\u20ba",TWD:"NT$",VND:"\u20ab",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF",ZAR:"R"},i=e[t];return i||t},e.commas=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.alert=function(t){alert(t)},e.withinElement=function(t,e,i){var n=t.getBoundingClientRect();return!(e<=n.left)&&(!(i<=n.top)&&(!(e>=n.left+t.offsetWidth)&&!(i>=n.top+t.offsetHeight)))},e.safeMouseOut=function(t,i){function n(t,i){return function(n){"undefined"==typeof n.pageX&&(n.pageX=n.clientX,n.pageY=n.clientY),e.withinElement(t,n.pageX,n.pageY)||(t.stxMouseOver=!1,i(n))}}t.addEventListener("mouseout",n(t,i))},e.safeMouseOver=function(t,i){function n(t,i){return function(n){if("undefined"==typeof n.pageX&&(n.pageX=n.clientX,n.pageY=n.clientY),e.withinElement(t,n.pageX,n.pageY)){if(t.stxMouseOver)return;t.stxMouseOver=!0,i(n)}}}t.addEventListener("mouseover",n(t,i))},e.installTapEvent=function(t,i){var n=function(t){var e=document.createEvent("Event");e.initEvent("stxtap",!0,!0),"undefined"==typeof t.pageX&&(t.pageX=t.clientX,t.pageY=t.clientY),e.pageX=t.pageX,e.pageY=t.pageY,t.target.dispatchEvent(e),i&&i.stopPropagation&&t.stopPropagation()};e.safeClickTouch(t,n,i)},e.safeClickTouch=function(t,i,n){function r(t,n,r){return function(a){if(!e.safeClickTouchEvent){if(!r.t)return;var o=r.t;if(r.t=null,o+1e3<(new Date).getTime())return}if(!(n.safety&&n.safety.recentlyDragged||(a||(a=event),a.which&&a.which>=2||a.button&&a.button>=2))){if(n.preventUnderlayClick)"INPUT"!==a.target.tagName&&a.preventDefault();else{if(n.lastType!=t&&Date.now()<n.allowAnotherDevice)return;n.lastType=t,n.allowAnotherDevice=Date.now()+1e3}i(a)}}}function a(t,e){return function(i){var n=i.clientX?i.clientX:i.pageX,r=i.clientY?i.clientY:i.pageY;e?(t.t=(new Date).getTime(),t.x=n,t.y=r):t.x&&Math.pow(t.x-n,2)+Math.pow(t.y-r,2)>16&&(t.t=null)}}n||(n={});var o={};n.allowMultiple||e.clearSafeClickTouches(t),!1!==n.preventUnderlayClick&&(n.preventUnderlayClick=!0),!1!==n.absorbDownEvent&&(n.absorbDownEvent=!0),n.allowAnotherDevice=0,n.registeredClick=!1;var s=t.safeClickTouchEvents;s||(s=t.safeClickTouchEvents=[]);var l=r("mouseup",n,o),h=r("touchend",n,o),c=r("pointerup",n,o),u=function(t){t.stopPropagation()},d={};if(e.safeClickTouchEvent){var p=r(e.safeClickTouchEvent,n);t.addEventListener(e.safeClickTouchEvent,p),d[e.safeClickTouchEvent]=p,s.push(d)}else"onpointerup"in document?(t.addEventListener("pointerdown",a(o,!0)),t.addEventListener("pointermove",a(o)),t.addEventListener("pointerup",c),d.pointerup=c,n.absorbDownEvent&&(t.addEventListener("pointerdown",u),d.pointerdown=u),s.push(d)):(t.addEventListener("mousedown",a(o,!0)),t.addEventListener("mousemove",a(o)),t.addEventListener("touchstart",a(o,!0)),t.addEventListener("touchmove",a(o)),t.addEventListener("mouseup",l),t.addEventListener("touchend",h),d.mouseup=l,d.touchend=h,n.absorbDownEvent&&(t.addEventListener("mousedown",u),d.mousedown=u,t.addEventListener("touchstart",u),d.touchstart=u),s.push(d))},e.clearSafeClickTouches=function(t){var e=t.safeClickTouchEvents;if(e){for(var i=0;i<e.length;i++){var n=e[i];for(var r in n){var a=n[r];t.removeEventListener(r,a)}}t.safeClickTouchEvents=null}},e.safeDrag=function(t,i,n,r){function a(t){function a(t){if(t.touches){if(t.touches.length>=1)return t.touches[0].pageX;if(t.changedTouches&&t.changedTouches.length>=1)return t.changedTouches[0].pageX}return"undefined"==typeof t.pageX?t.clientX:t.pageX}function u(t){if(t.touches){if(t.touches.length>=1)return t.touches[0].pageY;if(t.changedTouches&&t.changedTouches.length>=1)return t.changedTouches[0].pageY}return"undefined"==typeof t.pageY?t.clientY:t.pageY}var d={mousedown:{move:"mousemove",up:"mouseup"},pointerdown:{move:"pointermove",up:"pointerup"},touchstart:{move:"touchmove",up:"touchend"}};return function(p){if(!s){s=!0,e.ChartEngine.ignoreTouch=!0;var f=function(t){t&&t.preventDefault&&t.preventDefault(),c.recentlyDragged=!0,t.displacementX=a(t)-l,t.displacementY=u(t)-h,n(t)};n&&document.body.addEventListener(d[t].move,f),document.body.addEventListener(d[t].up,function(i){e.ChartEngine.ignoreTouch=!1,n&&document.body.removeEventListener(d[t].move,f),document.body.removeEventListener(d[t].up,arguments.callee),i.displacementX=a(i)-l,i.displacementY=u(i)-h,r&&r(i),setTimeout(function(t){return function(){t.recentlyDragged=!1}}(c),50)}),setTimeout(function(){s=!1},o),l=a(p),h=u(p),i&&i(p)}}}var o=100,s=!1,l=0,h=0,c={recentlyDragged:!1};return t.addEventListener("mousedown",a("mousedown")),t.addEventListener("pointerdown",a("pointerdown")),t.addEventListener("touchstart",a("touchstart")),c},e.isSurface&&(e.gesture=new MSGesture,e.gesture.target=document.body,e.gesturePointerId=null),e.inputKeyEvents=function(t,e){t.addEventListener("keyup",function(i){switch(window.event?event.keyCode:i.keyCode){case 13:e();break;case 27:t.value=""}},!1)},e.fixScreen=function(){window.scrollTo(0,0)},e.setCaretPosition=function(t,i){if(t.style.zIndex=5e3,t.setSelectionRange){e.focus(t);try{t.setSelectionRange(i,i)}catch(t){}}else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",i),n.select()}},e.setValueIfNotActive=function(t,e){document.activeElement!=t&&(t.value=e)},e.hideKeyboard=function(t){var e=document.activeElement;"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName||(e.blur(),window.focus(),t&&(t===document.body||document.body.contains(t))&&t.focus())},e.boxIntersects=function(t,i,n,r,a,o,s,l,h){var c=e.linesIntersect;return!!c(t,n,i,i,a,s,o,l,h)||(!!c(t,n,r,r,a,s,o,l,h)||(!!c(t,t,i,r,a,s,o,l,h)||!!c(n,n,i,r,a,s,o,l,h)))},e.linesIntersect=function(t,e,i,n,r,a,o,s,l){var h=(s-o)*(e-t)-(a-r)*(n-i),c=(a-r)*(i-o)-(s-o)*(t-r),u=(e-t)*(i-o)-(n-i)*(t-r);if(0===h)return 0===c&&0===u;var d=c/h,p=u/h;if("segment"==l){if(d>=0&&d<=1&&p>=0&&p<=1)return!0}else if("line"==l||"horizontal"==l||"vertical"==l){if(d>=0&&d<=1)return!0}else if("ray"==l&&d>=0&&d<=1&&p>=0)return!0;return!1},e.yIntersection=function(t,e){var i=t.x0,n=t.x1,r=e,a=e,o=t.y0,s=t.y1,l=0,h=1e4,c=(h-l)*(n-i)-(a-r)*(s-o),u=(a-r)*(o-l)-(h-l)*(i-r);return 0===c?null:o+u/c*(s-o)},e.xIntersection=function(t,e){var i=t.x0,n=t.x1,r=0,a=1e4,o=t.y0,s=t.y1,l=e,h=e,c=(h-l)*(n-i)-(a-r)*(s-o),u=(a-r)*(o-l)-(h-l)*(i-r);return 0===c?null:i+u/c*(n-i)},e.intersectLineLineX=function(t,e,i,n,r,a,o,s){return t+((a-r)*(i-o)-(s-o)*(t-r))/((s-o)*(e-t)-(a-r)*(n-i))*(e-t)},e.intersectLineLineY=function(t,e,i,n,r,a,o,s){return i+((a-r)*(i-o)-(s-o)*(t-r))/((s-o)*(e-t)-(a-r)*(n-i))*(n-i)},e.privateBrowsingAlert=!1,e.localStorage="undefined"!=typeof localStorage?localStorage:{},e.localStorageSetItem=function(t,i){try{e.localStorage.setItem(t,i)}catch(t){e.privateBrowsingAlert||(e.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),e.privateBrowsingAlert=!0)}},e.loadUI=function(t,i){var n=document.createElement("iframe"),r=function(){var t=null;try{t=n.contentDocument||n.contentWindow.document}catch(t){return i(t)}if(t&&!t.title){var r=t.body.innerHTML,a=document.createElement("div");document.body.removeChild(n),e.innerHTML(a,r);for(var o=0;o<a.children.length;o++){var s=a.children[o].cloneNode(!0);document.body.appendChild(s)}i(null)}else i(new Error("iFrame not found or document has a title"))};n.src=t+"?"+e.uniqueID(),n.hidden=!0,n.addEventListener("load",r,!1),document.body.appendChild(n)},e.loadScript=function(t,i){if(e.loadedScripts||(e.loadedScripts={}),e.loadedScripts[t])return void(i&&i());var n=document.createElement("SCRIPT");n.async=!0,n.onload=function(){e.loadedScripts[t]=!0,i&&i()},"undefined"!=typeof isIE8&&(n.onreadystatechange=function(){"loaded"==n.readyState&&(e.loadedScripts[t]=!0,i&&setTimeout(i,0))});var r=t;r=-1==r.indexOf("?")?r+"?"+Date.now():r+"&"+Date.now(),n.src=r;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a.nextSibling)},e.loadStylesheet=function(t,e){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.media="screen",i.href=t+"?"+Date.now(),i.onload=function(){e&&e()};var n=document.getElementsByTagName("link"),r=n[n.length-1];r.parentNode.insertBefore(i,r.nextSibling)},e.loadWidget=function(t,i){e.loadStylesheet(t+".css",function(){e.loadUI(t+".html",function(n){n?i(n):e.loadScript(t+".js",i)})})},e.fillTransparentCanvas=function(t,e,i,n){var r=t.globalCompositeOperation;t.globalCompositeOperation="destination-over",t.fillStyle=e,t.fillRect(0,0,i,n),t.globalCompositeOperation=r},e.tickedRect=function(t){e.rect(t);var i=Math.round(t.top+t.height/2)+.5;t.ctx.beginPath(),t.ctx.moveTo(t.x-2,i),t.ctx.lineTo(t.x,i),t.ctx.stroke(),t.ctx.closePath()},e.roundRect=function(t,i){9===arguments.length&&(t={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]});var n=t.stroke,r=t.x,a=t.top,o=t.width,s=t.height,l=t.radius,h=t.fill,c=t.ctx;void 0===n&&(n=!0),void 0===l&&(l=5,o<0&&(l=-5));var u=o<0?-1*l:l;l&&!i&&(r-=1);var d=r+l,p=r+o,f=a+u,m=a+s,g=p-l,v=m-u;if(c.beginPath(),c.moveTo(d,a),c.lineTo(g,a),c.quadraticCurveTo(p,a,p,f),c.lineTo(p,v),c.quadraticCurveTo(p,m,g,m),c.lineTo(d,m),"flush"==i)c.lineTo(r,m),c.lineTo(r,a);else if("arrow"==i){c.quadraticCurveTo(r,m,r-l,v);var y=o<0?1:-1;c.lineTo(r+s/2*y,a+s/2),c.lineTo(r-l,f),c.quadraticCurveTo(r,a,d,a)}else c.quadraticCurveTo(r,m,r,v),c.lineTo(r,f),c.quadraticCurveTo(r,a,d,a);c.closePath(),t.backgroundColor&&(c.fillStyle=t.backgroundColor),n&&c.stroke(),h&&c.fill(),t.txt&&e.createLabel(t)},e.createLabel=function(t){t.ctx.textBaseline="middle",t.ctx.fillStyle=t.color?t.color:e.chooseForegroundColor(t.backgroundColor),t.ctx.fillStyle===t.backgroundColor&&("#FFFFFF"==t.backgroundColor.toUpperCase()?t.ctx.fillStyle="#000000":t.ctx.fillStyle="#FFFFFF"),t.ctx.fillText(t.txt,t.x+t.margin.left,t.y+t.margin.top),t.ctx.textAlign="left"},e.roundRectArrow=function(t){e.roundRect(t,"arrow")},e.semiRoundRect=function(t){e.roundRect(t,"flush")},e.rect=function(t){t.radius=0,e.roundRect(t)},e.noop=function(t){e.createLabel(t)},e.getLines=function(t,e,i){for(var n=e.split(" "),r=[],a="",o=0,s=!1,l=0;l<n.length;l++){var h=n[l];if(o=t.measureText(a+h).width,o<i?(s&&(a+=" "),s=!0,a+=h):(r.push(a),a=h),l===n.length-1){r.push(a);break}}return r},e.readablePeriodicity=function(t){var e=t.layout.periodicity,i=t.layout.interval;return"number"==typeof t.layout.interval&&t.layout.timeUnit?(e=t.layout.interval*t.layout.periodicity,i=t.layout.timeUnit):"number"!=typeof t.layout.interval||t.layout.timeUnit||(e=t.layout.interval*t.layout.periodicity,i="minute"),e%60==0&&"minute"==i&&(e/=60,i="hour"),e+" "+t.translateIf(i.capitalize())},e.translatableTextNode=function(t,e,i){if(t.translationCallback){var n=document.createElement("translate");return n.setAttribute("original",e),n.innerHTML=t.translationCallback(e,i),n}return document.createTextNode(e)},e.clearCanvas=function(t,i){t.isDirty=!1;var n=t.context;if(n.clearRect(0,0,t.width,t.height),e.isAndroid&&!e.is_chrome){e.ChartEngine.useOldAndroidClear&&i&&(n.fillStyle=i.containerColor,n.fillRect(0,0,t.width,t.height),n.clearRect(0,0,t.width,t.height));var r=t.width;t.width=1,t.width=r}},e.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],e.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.MILLISECOND=1,e.SECOND=1e3,e.MINUTE=60*e.SECOND,e.HOUR=60*e.MINUTE,e.DAY=24*e.HOUR,e.WEEK=7*e.DAY,e.MONTH=31*e.DAY,e.YEAR=366*e.DAY,e.DECADE=10*e.YEAR-7*e.DAY,e.monthAsDisplay=function(t,i,n){return i?n&&n.monthLetters?n.monthLetters[t]:e.monthLetters[t]:n&&n.monthAbv?n.monthAbv[t]:e.monthAbv[t]},e.timeAsDisplay=function(t,i,n){var r=i?i.internationalizer:null;if(r)return n==e.SECOND?r.hourMinuteSecond.format(t):n==e.MILLISECOND?r.hourMinuteSecond.format(t)+"."+t.getMilliseconds():r.hourMinute.format(t);var a=t.getMinutes();a<10&&(a="0"+a);var o=t.getHours()+":"+a,s="";if(n<=e.SECOND&&(s=t.getSeconds(),s<10&&(s="0"+s),o+=":"+s),n==e.MILLISECOND){var l=t.getMilliseconds();l<10?l="00"+l:l<100&&(l="0"+l),o+="."+l}return o},e.fixPrice=function(t){if(!t&&0!==t)return null;for(var e=t.toFixed(10),i=e.length-1;i>1&&"0"==e.charAt(i);i--);return e=e.substring(0,i+1),parseFloat(e)},e.condenseInt=function(t){return null===t||void 0===t?"":t===Infinity||t===-Infinity?"n/a":t=t>0?t>1e12?Math.round(t/1e11)/10+"t":t>1e11?Math.round(t/1e9)+"b":t>1e10?(Math.round(t/1e8)/10).toFixed(1)+"b":t>1e9?(Math.round(t/1e7)/100).toFixed(2)+"b":t>1e8?Math.round(t/1e6)+"m":t>1e7?(Math.round(t/1e5)/10).toFixed(1)+"m":t>1e6?(Math.round(t/1e4)/100).toFixed(2)+"m":t>1e5?Math.round(t/1e3)+"k":t>1e4?(Math.round(t/100)/10).toFixed(1)+"k":t>1e3?(Math.round(t/10)/100).toFixed(2)+"k":t.toFixed(0):t<-1e12?Math.round(t/1e11)/10+"t":t<-1e9?Math.round(t/1e8)/10+"b":t<-1e6?Math.round(t/1e5)/10+"m":t<-1e3?Math.round(t/100)/10+"k":t.toFixed(0)},e.calculateTradingDecimalPlaces=function(t){var e=t.chart,i=2,n=50,r=e.masterData;if(r&&r.length>n)for(var a=1;a<n;a++){var o=r.length-a;if(o<0)break;var s=r[o];if(s.Close&&"number"==typeof s.Close){var l=s.Close.toString(),h=l.indexOf(".");if(-1!=h){var c=l.length-h-1;c>i&&(i=c)}}}var u=e.yAxis.maxDecimalPlaces;return i>u&&(i=u),i},e.fillArea=function(t,e,i,n,r){if(e.length){var a=t.chart.context;a.lineWidth=0;var o=a.globalAlpha;n||0===n||(n=.2),a.globalAlpha=n,"auto"==i&&(i=t.defaultColor),a.fillStyle=i;var s=Number.MAX_VALUE,l=-1*s,h=t.panels[r];h&&(l=h.yAxis.top,s=h.yAxis.bottom,a.save(),a.beginPath(),a.rect(h.left,l,h.width,s-l),a.clip()),a.beginPath(),a.moveTo(e[0][0],e[0][1]);for(var c=1;c<e.length;c++)a.lineTo(e[c][0],e[c][1]);a.closePath(),a.fill(),h&&a.restore(),a.lineWidth=1,a.globalAlpha=o}},e.prepareChannelFill=function(t,i,n){function r(e,i){if(c||m<=0)return[0,i];if(m>=0){var n=t.chart.dataSet[m];f&&n.transform&&(n=n.transform);var r=n[e];if(r=s.semiLog?t.pixelFromPrice(r,o):(s.high-r)*s.multiplier+h,!isNaN(r))return[d,r]}return null}function a(t,e,i,a){var o=e.cache[n[i]];if(!isNaN(o)){if(1==t){var s=r(n[i],o);null!==s&&a.push(s),c&&a.push([p,s[1]])}a.push([p,o])}}for(var o=t.panels[n.panelName],s=o.yAxis,l=t.chart,h=s.top,c=n.noSlopes,u=t.layout.candleWidth,d=o.left-(c?1:.5)*u+t.micropixels-1,p=d,f=o.name==t.chart.panel.name,m=l.dataSet.length-l.scroll-1,g=m+i.length+1,v=[],y=[],x=1;x<=i.length;x++){var b=i[x-1];if(!c&&!v.length&&b&&b.candleWidth&&(u=(u+b.candleWidth)/2),p+=u,b&&b.cache){u=b.candleWidth?b.candleWidth/2:t.layout.candleWidth/2;var C=i[x];if(x==i.length&&!(C=l.dataSet[g])){if(c){var w=p+2*u;v.push([w,v[v.length-1][1]]),y.push([w,y[y.length-1][1]])}break}c?u+=u:C.candleWidth?u+=C.candleWidth/2:u+=t.layout.candleWidth/2;var S=p+u;f&&b.transform&&(b=b.transform),v.length||a(x,b,"topBand",v),y.length||a(x,b,"bottomBand",y),f&&C.transform&&(C=C.transform),v.length&&(c&&v.push([S,v[v.length-1][1]]),v.push([S,C.cache[n.topBand]])),y.length&&(c&&y.push([S,y[y.length-1][1]]),y.push([S,C.cache[n.bottomBand]]))}}var T=v.concat(y.reverse()),D=n.opacity;e.fillArea(t,T,n.color,D,n.panelName)},e.preparePeakValleyFill=function(t,i,n){var r=t.panels[n.panelName],a=r.yAxis,o=t.chart,s=a.top;if(n.threshold||0===n.threshold){var l,h=t.layout.candleWidth,c=r.name==o.panel.name,u=n.band,d=n.threshold,p=n.direction,f=o.dataSet,m=f.length-o.scroll-1,g=m+i.length+1,v=r.left-.5*h+t.micropixels-1,y=v;l=c?t.pixelFromPriceTransform(d,r):t.pixelFromPrice(d,r);for(var x=[],b=1;b<=i.length;b++){var C=i[b-1];if(h=C&&C.candleWidth?(h+C.candleWidth)/2:(h+t.layout.candleWidth)/2,v+=h,!b||C){h=C&&C.candleWidth?C.candleWidth/2:t.layout.candleWidth/2;var w=i[b];if(b==i.length&&(w=f[g]),!w)break;var S,T;if(w.cache&&C.cache&&(S=w.cache[u],T=C.cache[u],c&&(w.transform&&(S=t.pixelFromPrice(w.transform[u],r)),C.transform&&(T=t.pixelFromPrice(C.transform[u],r)))),void 0!==S&&void 0!==T||(S=t.pixelFromPrice(w[u],r),T=t.pixelFromPrice(C[u],r)),!x.length){if(1==b&&m>=0){var D=f[m];c&&D.transform&&(D=D.transform);var M=D[u];M=a.semiLog?t.pixelFromPrice(M,r):(a.high-M)*a.multiplier+s,isNaN(M)||(M>=l&&T>=l?x.push([y,1==p?l:M]):M<=l&&T<=l?x.push([y,-1==p?l:M]):x.push([v-(v-y)*(l-T)/(M-T),l]))}T&&!isNaN(T)&&(C[u]>=d&&1==p||C[u]<=d&&-1==p?x.push([v,T]):x.push([v,l]))}if(w.candleWidth?h+=w.candleWidth/2:h+=t.layout.candleWidth/2,b&&x.length){var k=x[x.length-1],_=v+h;t.extendLastTick&&b==i.length-1&&(_+=h/2);var E=[k[0]+(_-k[0])*(l-T)/(S-T),l];w[u]>d&&1==p||w[u]<d&&-1==p?(k[1]==l&&x.push(E),x.push([_,S])):(k[1]!=l&&x.push(E),x.push([_,l]))}}}var A=x.length;if(A){if(n.edgeHighlight){var I=n.edgeParameters,P=I.lineWidth;P>100&&(P=1);for(var F=0;F<A-1;F++){var L=x[F],H=x[F+1];L[1]==l&&H[1]==l||t.plotLine(L[0],H[0],L[1],H[1],n.edgeHighlight,"segment",o.context,!0,I)}}x.push([x[A-1][0],l],[x[0][0],l]);var N=n.opacity;N||0===N||(N=.3),e.fillArea(t,x,n.color,N,n.panelName)}}},e.fillIntersecting=function(t,i,n,r){var a=[],o=t.chart,s=t.panels[i.panel];r.topAxis||(r.topAxis=s.yAxis),r.bottomAxis||(r.bottomAxis=s.yAxis);var l,h,c,u,d,p,f,m,g,v,y,x=r.topBand,b=r.bottomBand,C=r.topAxis,w=r.bottomAxis,S=o.context,T=i.outputs[i.outputMap[x]],D=i.outputs[i.outputMap[b]],M=o.dataSet.length-o.scroll-1,k=M+n.length+1,_=t.pixelFromTick(M,o);t.startClip(i.panel);var E=[];for(M>0?E.push(o.dataSet[M]):E.push(null),l=0;l<n.length;l++)E.push(n[l]);if(k<o.dataSet.length&&E.push(o.dataSet[k]),s.name==o.name)for(l=0;l<E.length;l++)E[l]&&E[l].transform&&(E[l]=E[l].transform);for(l=0;l<E.length-1;l++){var A=E[l],I=E[l+1];if(A&&I&&(null!==A[x]&&!isNaN(A[x])&&(A[x]>=A[b]&&I[x]<=I[b]||A[x]<=A[b]&&I[x]>=I[b]))){u=h=t.pixelFromBar(l-1),d=c=t.pixelFromBar(l),p=t.pixelFromPrice(A[x],s,C),f=t.pixelFromPrice(I[x],s,C),m=t.pixelFromPrice(A[b],s,w),g=t.pixelFromPrice(I[b],s,w),v=e.intersectLineLineX(h,c,p,f,u,d,m,g),y=e.intersectLineLineY(h,c,p,f,u,d,m,g);var P={};P.x=v,P.y=y,P.tick=l+1,a.push(P)}}var F=[];for(l=0;r.fillFuture&&i.futureA&&l<i.futureA.length-1;l++)if(null===i.futureA[l]||isNaN(i.futureA[l]));else if(i.futureA[l]>i.futureB[l]&&i.futureA[l+1]<i.futureB[l+1]||i.futureA[l]<i.futureB[l]&&i.futureA[l+1]>i.futureB[l+1]){u=h=t.pixelFromBar(E.length+l-1),d=c=t.pixelFromBar(E.length+l),p=t.pixelFromPriceTransform(i.futureA[l],s,C),f=t.pixelFromPriceTransform(i.futureA[l+1],s,C),m=t.pixelFromPriceTransform(i.futureB[l],s,w),g=t.pixelFromPriceTransform(i.futureB[l+1],s,w),v=e.intersectLineLineX(h,c,p,f,u,d,m,g),y=e.intersectLineLineY(h,c,p,f,u,d,m,g);var L={};L.x=v,L.y=y,L.tick=E.length+l+1,F.push(L)}var H,N,O;S.beginPath();var R=0,U=E.length;for(a.length&&(U=a[0].tick);R<=U&&!E[R];)R++;var B=E[R],X=B[x],V=B[b];if(R<=U){for(S.fillStyle=X>V?T:D,S.moveTo(_,t.pixelFromPrice(X,s,C)),O=R;O<U;O++)S.lineTo(t.pixelFromBar(O-1),t.pixelFromPrice(E[O][x],s,C));for(a[0]&&S.lineTo(a[0].x,a[0].y),N=U-1;N>=R;N--)S.lineTo(t.pixelFromBar(N-1),t.pixelFromPrice(E[N][b],s,w));S.lineTo(_,t.pixelFromPrice(V,s,w)),S.lineTo(_,t.pixelFromPrice(X,s,C)),S.fill()}for(H=0;H<a.length;H++){if(S.beginPath(),S.moveTo(a[H].x,a[H].y),E[a[H].tick][x]>E[a[H].tick][b]?S.fillStyle=T:S.fillStyle=D,H+1==a.length){for(O=a[H].tick;O<E.length;O++)S.lineTo(t.pixelFromBar(O-1),t.pixelFromPrice(E[O][x],s,C));for(N=E.length-1;N>=a[H].tick;N--)S.lineTo(t.pixelFromBar(N-1),t.pixelFromPrice(E[N][b],s,w))}else{for(O=a[H].tick;O<a[H+1].tick;O++)S.lineTo(t.pixelFromBar(O-1),t.pixelFromPrice(E[O][x],s,C));for(S.lineTo(a[H+1].x,a[H+1].y),N=a[H+1].tick-1;N>=a[H].tick;N--)S.lineTo(t.pixelFromBar(N-1),t.pixelFromPrice(E[N][b],s,w))}S.fill()}if(r.fillFuture){if(o.context.beginPath(),H>=0&&E[E.length-1]){S.moveTo(t.pixelFromBar(E.length-2),t.pixelFromPrice(E[E.length-1][r.topBand],s,r.topAxis));var z;if(F.length){for(z=E.length,O=0;O<F[0].tick-E.length;O++)S.lineTo(t.pixelFromBar(z-1),t.pixelFromPriceTransform(i.futureA[O],s,r.topAxis)),z++;for(z--,S.lineTo(F[0].x,F[0].y),O=F[0].tick-1-E.length;O>=0;O--)S.lineTo(t.pixelFromBar(z-1),t.pixelFromPriceTransform(i.futureB[O],s,r.bottomAxis)),z--;S.lineTo(t.pixelFromBar(E.length-2),t.pixelFromPrice(E[E.length-1][r.bottomBand],s,r.bottomAxis)),S.fill()}else{for(z=E.length,O=0;O<i.futureA.length;O++)S.lineTo(t.pixelFromBar(z-1),t.pixelFromPriceTransform(i.futureA[O],s,r.topAxis)),z++;for(z--,O=i.futureB.length-1;O>=0;O--)S.lineTo(t.pixelFromBar(z-1),t.pixelFromPriceTransform(i.futureB[O],s,r.bottomAxis)),z--;S.lineTo(t.pixelFromBar(E.length-2),t.pixelFromPrice(E[E.length-1][r.bottomBand],s,r.bottomAxis)),S.fill()}}for(H=0;H<F.length;H++){if(S.beginPath(),S.moveTo(F[H].x,F[H].y),i.futureA[F[H].tick-E.length]>i.futureB[F[H].tick-E.length]?S.fillStyle=i.outputs[i.outputMap[r.topBand]]:S.fillStyle=i.outputs[i.outputMap[r.bottomBand]],H+2>F.length){for(O=F[H].tick;O<i.futureA.length+E.length;O++)S.lineTo(t.pixelFromBar(O-1),t.pixelFromPriceTransform(i.futureA[O-E.length],s,r.topAxis));for(N=i.futureA.length-1;N>=F[H].tick-E.length;N--)S.lineTo(t.pixelFromBar(N+E.length-1),t.pixelFromPriceTransform(i.futureB[N],s,r.bottomAxis))}else{for(O=F[H].tick;O<F[H+1].tick;O++)S.lineTo(t.pixelFromBar(O-1),t.pixelFromPriceTransform(i.futureA[O-E.length],s,r.topAxis));for(S.lineTo(F[H+1].x,F[H+1].y),N=F[H+1].tick-1;N>=F[H].tick;N--)S.lineTo(t.pixelFromBar(N-1),t.pixelFromPriceTransform(i.futureB[N-E.length],s,r.bottomAxis))}S.fill()}}t.endClip()},e.drawLegendItem=function(t,e,i,n,r){r||(r=1);var a=e[0],o=e[1],s=10,l=t.chart.context;return l.globalAlpha=r,l.fillStyle=n,l.fillRect(a,o,s,10),l.globalAlpha=1,a+=s+2,l.fillStyle=t.defaultColor,l.fillText(i,a,o),a+=l.measureText(i).width+6,[a,o]},e.drawLegend=function(t,i){var n=i.coordinates,r=t.chart.context;r.textBaseline="top";var a=r.font;t.canvasFont("stx-legend",r),n||(n=i.chart.legend);var o=[n.x,n.y],s=t.defaultColor,l=t.layout.chartType;if(t.chart.customChart&&t.chart.customChart.chartType&&(l=t.chart.customChart.chartType),!i.noBase){var h;if(t.chart.baseLegendColors instanceof Array){var c=t.chart.baseLegendColors;if(c.length>1){var u=r.createLinearGradient(o[0],o[1],o[0]+10,o[1]);for(h=0;h<c.length;h++)u.addColorStop(h/(c.length-1),c[h]);s=u}else s=c.length>0?c[0]:t.getCanvasColor("stx_line_chart")}else if("mountain"==l){h=t.canvasStyle("stx_mountain_chart");var d=h.borderTopColor;d&&"transparent"!=d&&(s=d)}else s=null;if(s){i.chart.symbolDisplay?i.chart.symbolDisplay:i.chart.symbol}}for(var p in i.legendColorMap){var f=p;i.legendColorMap[p].display&&(f=i.legendColorMap[p].display),o=e.drawLegendItem(t,o,f,i.legendColorMap[p].color,i.legendColorMap[p].opacity)}r.font=a},e.minMax=function(t,e){for(var i=Number.MAX_VALUE,n=-1*Number.MAX_VALUE,r=0;r<t.length;r++){var a=t[r];if(a){var o=a[e];(o||0===o)&&(isNaN(o)||(i=Math.min(i,o),n=Math.max(n,o)))}}return[i,n]},e.destroy=function(t,n){for(var r=e.ChartEngine.registeredContainers,a=0;a<r.length;a++)if(r[a]==t.chart.container){r.splice(a,1);break}if(t.styles={},t.destroy(),t=null,e.ThemeManager&&e.ThemeManager.destroy(),e.MenuManager&&e.MenuManager.destroy(),n){for(var o=i(".stx-wrapper").childNodes,s=i(".stx-wrapper").querySelectorAll(n),l=0;l<s.length;l++)s[l].parentNode==i(".stx-wrapper")&&e.appendClassName(s[l],"stx-passover");for(var h=o.length-1;h>=0;h--)e.hasClassName(o[h],"stx-passover")?e.unappendClassName(o[h],"stx-passover"):o[h].parentNode.removeChild(o[h])}else i(".stx-wrapper").parentNode.removeChild(i(".stx-wrapper"))},e.addMemberToMasterdata=function(t,i,n,r,a,o){function s(t,e){if(r)for(var n=0;n<r.length;n++)t[r[n]]=e[r[n]];else a?t[i]=e:o?t[i]=e[o]:m&&f&&e[f]!==undefined?t[i]=e[f]:p.adj&&e.Adj_Close!==undefined?t[i]=e.Adj_Close:e.Close!==undefined?t[i]=e.Close:e.Value!==undefined?t[i]=e.Value:t[i]=e[i]}if(n&&n.constructor==Object&&(n=[n]),n&&n.length){var l,h,c=0,u=0,d=t.masterData,p=t.layout;d||(d=t.masterData=[]);for(var f=t.chart&&t.chart.defaultPlotField?t.chart.defaultPlotField:null,m=!e.ChartEngine.chartShowsHighs(t.layout.chartType);n&&c<d.length&&u<n.length;)h=n[u],l=d[c],h.DT&&"undefined"!=typeof h.DT?("number"==typeof h.DT&&(h.DT=new Date(h.DT)),h.Date=e.yyyymmddhhmmssmmm(h.DT)):h.DT=e.strToDateTime(h.Date),h.DT.getTime()!=l.DT.getTime()?h.DT<l.DT?d.splice(c,0,{DT:h.DT,Date:h.Date}):c++:(s(l,h),u++,c++);if(c>=d.length)for(;n&&u<n.length;)h=n[u],h.DT&&"undefined"!=typeof h.DT?("number"==typeof h.DT&&(h.DT=new Date(h.DT)),h.Date=e.yyyymmddhhmmssmmm(h.DT)):h.DT=e.strToDateTime(h.Date),l={DT:h.DT,Date:h.Date},s(l,h),d.push(l),u++}},e.ThemeHelper=function(t){this.params=t;var i=t.stx,n="#FFFFFF";i.chart.container&&(n=getComputedStyle(i.chart.container).backgroundColor,e.isTransparent(n)&&(n=i.containerColor)),this.settings.chart.Background.color=e.hexToRgba(n),this.settings.chart["Grid Lines"].color=e.hexToRgba(i.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=e.hexToRgba(i.canvasStyle("stx_grid_dark").color),this.settings.chart["Axis Text"].color=e.hexToRgba(i.canvasStyle("stx_xaxis").color),this.settings.chartTypes["Candle/Bar"].up.color=e.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=e.hexToRgba(i.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=e.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=e.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].up.border=e.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.border=e.hexToRgba(i.canvasStyle("stx_candle_down").color),e.isTransparent(i.canvasStyle("stx_candle_up").color)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),e.isTransparent(i.canvasStyle("stx_candle_down").color)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=e.hexToRgba(i.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=e.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor)},e.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null}}},e.ThemeHelper.prototype.update=function(){function t(t,e,r){var a=n[t];for(var o in a)i.setStyle(o,e,r)}var i=this.params.stx,n={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}};i.chart.container.style.backgroundColor=this.settings.chart.Background.color,t("stx_grid","color",this.settings.chart["Grid Lines"].color),t("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),t("stx_xaxis","color",this.settings.chart["Axis Text"].color),t("stx_candle_up","color",this.settings.chartTypes["Candle/Bar"].up.color),t("stx_candle_down","color",this.settings.chartTypes["Candle/Bar"].down.color),t("stx_shadow_up","color",this.settings.chartTypes["Candle/Bar"].up.wick),t("stx_shadow_down","color",this.settings.chartTypes["Candle/Bar"].down.wick),i.setStyle("stx_candle_up","borderLeftColor",this.settings.chartTypes["Candle/Bar"].up.border),i.setStyle("stx_candle_down","borderLeftColor",this.settings.chartTypes["Candle/Bar"].down.border),t("stx_line_chart","color",this.settings.chartTypes.Line.color),i.setStyle("stx_mountain_chart","borderTopColor",this.settings.chartTypes.Mountain.color),i.setStyle("stx_mountain_chart","backgroundColor",e.hexToRgba(this.settings.chartTypes.Mountain.color,.8)),i.setStyle("stx_mountain_chart","color",e.hexToRgba(this.settings.chartTypes.Mountain.color,.1)),i.draw()},e.NameValueStore=function(){},e.NameValueStore.prototype.toJSONIfNecessary=function(t){if(t.constructor==String)return t;try{return JSON.stringify(t)}catch(e){return console.log("Cannot convert to JSON: "+t),null}},e.NameValueStore.prototype.fromJSONIfNecessary=function(t){try{return JSON.parse(t)}catch(e){return t}},e.NameValueStore.prototype.get=function(t,i){var n=e.localStorage.getItem(t);i(null,this.fromJSONIfNecessary(n))},e.NameValueStore.prototype.set=function(t,i,n){e.localStorage.setItem(t,this.toJSONIfNecessary(i)),n&&n(null)},e.NameValueStore.prototype.remove=function(t,i){e.localStorage.removeItem(t),i&&i(null)},e.Plotter=function(){this.seriesArray=[],this.seriesMap={}},e.Plotter.prototype={Series:function(t,e,i,n,r){this.name=t,this.strokeOrFill=e,this.color=i,this.opacity=n,this.width=r,this.moves=[],this.text=[],(!n||n>1||n<0)&&(this.opacity=1),(!r||r>25||r<1)&&(this.width=1)},newSeries:function(t,e,i,n,r){var a;a=i.constructor==String?new this.Series(t,e,i,n,r):new this.Series(t,e,i.color,i.opacity,r),this.seriesArray.push(a),this.seriesMap[t]=a},reset:function(t){for(var e in this.seriesMap)if(!t||t==e){var i=this.seriesMap[e];i&&(i.moves=[],i.text=[])}},moveTo:function(t,e,i){this.seriesMap[t].moves.push({action:"moveTo",x:e,y:i})},lineTo:function(t,e,i){this.seriesMap[t].moves.push({action:"lineTo",x:e,y:i})},dashedLineTo:function(t,e,i,n){this.seriesMap[t].moves.push({action:"dashedLineTo",x:e,y:i,pattern:n})},quadraticCurveTo:function(t,e,i,n,r){this.seriesMap[t].moves.push({action:"quadraticCurveTo",x0:e,y0:i,x:n,y:r})},addText:function(t,e,i,n,r){this.seriesMap[t].text.push({text:e,x:i,y:n,bg:r})},drawText:function(t,e){for(var i=0;i<e.text.length;i++){var n=e.text[i];if(n.bg){var r=n.width?n.width:t.measureText(n.text).width,a=n.height?n.height:12,o=t.fillStyle;t.fillStyle=n.bg,"right"==t.textAlign?t.fillRect(n.x,n.y+a/2,-r,-a):t.fillRect(n.x,n.y+a/2,r,a),t.fillStyle=o}t.fillText(n.text,n.x,n.y)}},draw:function(t,e){for(var i=t.lineWidth,n=t.fillStyle,r=t.strokeStyle,a=t.globalAlpha,o=0;o<this.seriesArray.length;o++){var s=this.seriesArray[o];if(!e||s.name==e){t.beginPath(),t.lineWidth=s.width,t.globalAlpha=s.opacity,t.fillStyle=s.color,t.strokeStyle=s.color;for(var l=0;l<s.moves.length;l++){var h=s.moves[l];"quadraticCurveTo"==h.action?t[h.action](h.x0,h.y0,h.x,h.y):"dashedLineTo"==h.action?t[h.action](s.moves[l-1].x,s.moves[l-1].y,h.x,h.y,h.pattern):t[h.action](h.x,h.y)}"fill"==s.strokeOrFill?t.fill():t.stroke(),t.closePath(),this.drawText(t,s),t.lineWidth=1}}t.lineWidth=i,t.fillStyle=n,t.strokeStyle=r,t.globalAlpha=a}},e.EaseMachine=function(t,e,i,n){this.fc=t,this.ms=e,(i||0===i)&&this.reset(i,n)},e.EaseMachine.prototype.reset=function(t,e){t||0===t||(t=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,this.useNameValuePairs="object"==typeof e,this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=t,this.endValues=e):(this.startValues={"default":t},this.endValues={"default":e}),this.changeValues={},this.currentValues={};for(var i in this.startValues)this.changeValues[i]=this.endValues[i]-this.startValues[i]},e.EaseMachine.prototype.next=function(){var t=Date.now();t>=this.startTime+this.ms&&(t=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={};for(var e in this.changeValues)this.currentValues[e]=this.fc(t-this.startTime,this.startValues[e],this.changeValues[e],this.ms)
;return this.useNameValuePairs?this.currentValues:this.currentValues["default"]},e.EaseMachine.prototype.hasCompleted=!1,e.EaseMachine.prototype.run=function(t,e,i,n){function r(){if(a.afid=null,a.okayToRun){var e=a.next();t(e),a.hasCompleted||(a.afid=requestAnimationFrame(r))}}this.afid&&cancelAnimationFrame(this.afid),this.running=!0,e||0===e?this.reset(e,i):(i||0===i)&&this.reset(this.currentValues,i);var a=this;n?this.afid=requestAnimationFrame(r):r()},e.EaseMachine.prototype.stop=function(){return this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.running=!1,"undefined"==typeof this.useNameValuePairs?{}:this.useNameValuePairs?this.currentValues:this.currentValues["default"]},e.Renderer=function(){},e.Renderer.prototype.performCalculations=function(){},e.Renderer.prototype.draw=function(){},e.Renderer.prototype.construct=function(t){var i=t.params?t.params:{};i.name||(i.name=e.uniqueID()),i.heightPercentage||(i.heightPercentage=.7),i.opacity||(i.opacity=1),i.type||(i.type="line"),"legacy"!=i.type&&"line"!=i.type&&"mountain"!=i.type||(i.highlightable=!0),i.panel||(i.panel="chart"),this.cb=t.callback,this.params=i,this.seriesParams=[],this.caches={},this.colors={}},e.Renderer.prototype.attachSeries=function(t,e){if(!this.stx||!this.stx.chart.series[t])return this;var i={field:t,chartType:this.params.type,display:this.stx.chart.series[t].parameters.display,border_color_up:this.params.defaultBorders?this.stx.chart.series[t].parameters.color:null,fill_color_up:this.stx.chart.series[t].parameters.color,opacity_up:this.params.opacity,border_color_down:this.params.defaultBorders?this.stx.chart.series[t].parameters.color:null,fill_color_down:this.stx.chart.series[t].parameters.color,opacity_down:this.params.opacity,color:this.stx.chart.series[t].parameters.color};if("string"==typeof e)i.color=i.fill_color_down=i.fill_color_up=e;else if("object"==typeof e){for(var n in e)i[n]=e[n];i.color&&(i.fill_color_up||(i.fill_color_up=i.color),i.fill_color_down||(i.fill_color_down=i.color))}return this.removeSeries(t,!0).seriesParams.push(i),i.fill_color_up!=i.fill_color_down?(this.colors[t+" up"]={color:i.fill_color_up,opacity:i.opacity_up,display:i.display?i.display+" up":t+" up"},this.colors[t+" dn"]={color:i.fill_color_down,opacity:i.opacity_down,display:i.display?i.display+" down":t+" down"}):this.colors[t]={color:i.fill_color_up,opacity:i.opacity_up,display:i.display?i.display:t},this.params.yAxis&&this.stx.addYAxis(this.stx.panels[this.params.panel],this.params.yAxis),this},e.Renderer.prototype.removeSeries=function(t,e){for(var i=0;i<this.seriesParams.length;i++)if(this.seriesParams[i].field==t){this.seriesParams.splice(i,1);break}if(delete this.colors[t+" up"],delete this.colors[t+" dn"],delete this.colors[t],!e){var n=!1;for(var r in this.stx.chart.seriesRenderers){for(var a=this.stx.chart.seriesRenderers[r],o=0;o<a.seriesParams.length;o++)if(a.seriesParams[o].field==t){n=!0;break}if(n)break}n||this.stx.deleteSeries(t,this.stx.chart)}return this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this},e.Renderer.prototype.removeAllSeries=function(t){if(t){for(var e=[],i=0;i<this.seriesParams.length;i++)e.push(this.seriesParams[i].field);for(var n=0;n<e.length;n++)this.removeSeries(e[n])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this},e.Renderer.prototype.ready=function(){return this.stx.createDataSet(),this.stx.draw(),this},e.Renderer.Lines=function(t){this.construct(t)},e.Renderer.Lines.ciqInheritsFrom(e.Renderer,!1),e.Renderer.Lines.prototype.performCalculations=function(){var t=this.params.yAxis,e=this.stx;if(t){for(var i=e.panels[this.params.panel],n=[],r=0;r<this.seriesParams.length;r++)n.push(this.seriesParams[r].field);var a=e.determineMinMax(e.chart.dataSegment,n,!1,!0);e.calculateYAxisRange(i,t,a[0],a[1]),t.high=a[1],t.low=a[0]}},e.Renderer.Lines.prototype.draw=function(){var t,i=this.stx.panels[this.params.panel].chart,n={},r=this.seriesParams;for(t=0;t<r.length;t++)if(i.series[r[t].field]){var a=e.clone(i.series[r[t].field].parameters);n[r[t].field]={parameters:e.extend(e.extend(a,this.params),r[t]),yValueCache:this.caches[r[t].field],useChartLegend:"legacy"==this.params.type}}this.stx.drawSeries(i,n,this.params.yAxis);for(t in n)this.caches[t]=n[t].yValueCache},t},__js_core_engine_=function(t,e){Math.easeOutCubic=function(t,e,i,n){return t/=n,t--,i*(t*t*t+1)+e},t.SplinePlotter||(t.SplinePlotter={});var n=t.CIQ,r=t.$$,a=t.$$$,o=t.SplinePlotter,s=e.timezoneJS;n.ChartEngine=function(t){if(t||(t={container:null}),t.constructor==HTMLDivElement){t={container:t}}if(this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.animations={zoom:new n.EaseMachine(Math.easeOutCubic,400)},this.callbacks={studyOverlayEdit:null,studyPanelEdit:null,tap:null,rightClick:null,longhold:null,move:null,layout:null,drawing:null,symbolChange:null,calculateTradingDecimalPlaces:n.calculateTradingDecimalPlaces},this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},this.yTolerance=100,this.minimumLeftBars=1,this.grabStartCandleWidth=0,this.grabStartZoom=0,this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.reverseMouseWheel=!1,this.mouseWheelAcceleration=!0,this.minimumCandleWidth=1,this.minimumZoomTicks=9,this.allowZoom=!0,this.allowScroll=!0,this.allowSideswipe=!0,this.bypassRightClick=!1,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.displayIconsUpDown=!0,this.displayIconsSolo=!0,this.displayIconsClose=!0,this.displayPanelResize=!0,this.soloPanelToFullScreen=!1,this.markerDelay=0,this.useBackingStore=!0,this.disableBackingStoreDuringTouch=n.isMobile,this.manageTouchAndMouse=!0,this.captureTouchEvents=!0,this.captureMouseWheelEvents=!0,this.touches=[],this.changedTouched=[],this.crosshairTick=null,this.crosshairValue=null,this.yaxisLabelStyle="roundRectArrow",this.axisBorders=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},this.moveA=-1,this.moveB=-1,this.touchStartTime=-1,this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.crosshairXOffset=-40,this.crosshairYOffset=-40,this.displayInitialized=!1,this.extendLastTick=!1,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.layout={interval:"day",periodicity:1,timeUnit:null,candleWidth:8,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{}},this.preferences={highlightsRadius:10,highlightsTapRadius:30,currentPriceLine:!1,magnet:!1,horizontalCrosshairField:null,labels:!0,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null},this.streamParameters={count:0,maxWait:1e3,maxTicks:100,timeout:-1,fillGaps:!0},this.translationCallback=null,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.changeCallback=null,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.transformMasterDataQuote=null,this.dataCallback=null,this.dontRoll=!1,this.allowEquations=!0,this.drawingObjects=[],this.undoStamps=[],this.cleanupGaps=!1,this.maxDataSetSize=2e4,this.maxMasterDataSize=0,this.resizeDetectMS=1e3,this.xAxisAsFooter=!1,this.displayGridLinesInStudies=!1,this.chart=new n.ChartEngine.Chart,this.chart.name="chart",this.chart.canvas=null,this.chart.tempCanvas=null,this.chart.container=t.container,this.chart.market=new n.Market,this.candleWidthPercent=.65,this.noWicksOnCandles={rangebars:1,renko:1,linebreak:1},this.fetchMaximumBars={rangebars:1,kagi:1,renko:1,linebreak:1,pandf:1},this.autoPickCandleWidth={turnOn:!1,candleWidth:5},this.staticRangePeriodicityMap=[{rangeInMS:n.WEEK,periodicity:1,interval:5},{rangeInMS:n.MONTH,periodicity:1,interval:30},{rangeInMS:n.YEAR,periodicity:1,interval:"day"},{rangeInMS:n.DECADE,periodicity:1,interval:"week"},{rangeInMS:10*n.DECADE,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],this.dynamicRangePeriodicityMap=[{interval:1,rangeInMS:n.MINUTE},{interval:5,rangeInMS:5*n.MINUTE},{interval:30,rangeInMS:30*n.MINUTE},{interval:60,rangeInMS:60*n.MINUTE},{interval:"day",rangeInMS:n.DAY},{interval:"month",rangeInMS:n.MONTH},{interval:"year",rangeInMS:n.YEAR}],this.charts.chart=this.chart,this.styles={},this.currentVectorParameters=n.clone(n.ChartEngine.currentVectorParameters),n.extend(this,t),t.container&&(this.registerHTMLElements(),this.chart.width=this.chart.container.clientWidth-this.chart.yAxis.width,this.chart.canvasHeight=this.chart.container.clientHeight,this.setCandleWidth(this.layout.candleWidth,this.chart),n.useOldWheelLogic&&!n.FireFoxWheelWorkaround)){var e;e=n.isIE?function(t){if(n.ChartEngine.insideChart){t.preventDefault();for(var e=0;e<n.ChartEngine.registeredContainers.length;e++){var i=n.ChartEngine.registeredContainers[e].stx;n.ChartEngine.crosshairX>=i.left&&n.ChartEngine.crosshairX<=i.right&&n.ChartEngine.crosshairY>=i.top&&n.ChartEngine.crosshairY<=i.bottom&&i.mouseWheel(t,"onmousewheel")}}}:function(t){n.ChartEngine.insideChart&&t.preventDefault()},this.addDomEventListener(document.body,"wheel",e),n.FireFoxWheelWorkaround=!0}this.construct()},n.ChartEngine.drawingLine=!1,n.ChartEngine.resizingPanel=null,n.ChartEngine.vectorType="",n.ChartEngine.crosshairX=0,n.ChartEngine.crosshairY=0,n.ChartEngine.insideChart=!1,n.ChartEngine.overXAxis=!1,n.ChartEngine.overYAxis=!1,n.ChartEngine.currentColor="auto",n.ChartEngine.drawingTools={},n.ChartEngine.useAnimation=!n.is_chrome,n.ChartEngine.ipadMaxTicks=1500,n.ChartEngine.enableCaching=!1,n.ChartEngine.ignoreTouch=!1,n.ChartEngine.useOldAndroidClear=!0,n.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},annotation:{font:{style:null,size:null,weight:null,family:null}}},n.ChartEngine.defaultDisplayTimeZone=null,n.ChartEngine.SymbolDependencies=function(){this.studySymbols=[],this.addDependency=function(t,e){var i=this.studySymbols,n=this.getEntry(t);n||(n={symbol:t,dependencies:{}},i.push(n)),n.dependencies[e]=!0},this.getEntry=function(t){for(var e,i=this.studySymbols,n=0;n<i.length;n++)if(e=i[n],this.symbolsAreEqual(e.symbol,t))return e;return null},this.getDependencies=function(t){var e=this.getEntry(t);return e?e.dependencies:{}},this.removeDependency=function(t){for(var e,i=this.studySymbols,r=0;r<i.length;r++)e=i[r],delete e.dependencies[t],n.isEmpty(e.dependencies)&&i.splice(r,1)},this.getSymbols=function(){for(var t=[],e=0;e<this.studySymbols.length;e++)t.push(this.studySymbols[e].symbol);return t}},n.ChartEngine.SymbolDependencies.prototype.symbolsAreEqual=function(t,e){return"object"==typeof t&&"object"==typeof e?t.symbol==e.symbol:t==e},n.ChartEngine.Chart=function(){this.xAxis=new n.ChartEngine.XAxis,this.yAxis=new n.ChartEngine.YAxis,this.symbolObject={symbol:null},this.studySymbols=new n.ChartEngine.SymbolDependencies,this.series={},this.seriesRenderers={},this.xaxis=[],this.state={}},n.ChartEngine.YAxis=function(t){for(var e in t)this[e]=t[e]},n.ChartEngine.XAxis=function(t){for(var e in t)this[e]=t[e]},n.ChartEngine.Panel=function(t,e){this.yAxis=e||new n.ChartEngine.YAxis,this.name=t},n.ChartEngine.YAxis.prototype={high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,multiplier:null,bottom:null,top:null,height:null,left:null,width:null},n.ChartEngine.YAxis.prototype.maxDecimalPlaces=5,n.ChartEngine.YAxis.prototype.max=null,n.ChartEngine.YAxis.prototype.min=null,n.ChartEngine.YAxis.prototype.decimalPlaces=null,n.ChartEngine.YAxis.prototype.idealTickSizePixels=null,n.ChartEngine.YAxis.prototype.minimumPriceTick=null,n.ChartEngine.YAxis.prototype.fractional=null,n.ChartEngine.YAxis.prototype.displayBorder=!0,n.ChartEngine.YAxis.prototype.displayGridLines=!0,n.ChartEngine.YAxis.prototype.noDraw=null,n.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,n.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,n.ChartEngine.YAxis.prototype.drawPriceLabels=!0,n.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,n.ChartEngine.YAxis.prototype.justifyRight=null,n.ChartEngine.YAxis.prototype.textBackground=!1,n.ChartEngine.YAxis.prototype.priceFormatter=null,n.ChartEngine.YAxis.prototype.bottomOffset=0,n.ChartEngine.YAxis.prototype.topOffset=0,n.ChartEngine.YAxis.prototype.initialMarginTop=10,n.ChartEngine.YAxis.prototype.initialMarginBottom=10,n.ChartEngine.YAxis.prototype.zoom=0,n.ChartEngine.YAxis.prototype.scroll=0,n.ChartEngine.YAxis.prototype.width=50,n.ChartEngine.YAxis.prototype.textStyle=null,n.ChartEngine.YAxis.prototype.position=null,n.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,2],[1,4]],n.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[1,4]],n.ChartEngine.YAxis.prototype.pretty=!0,n.ChartEngine.YAxis.prototype.increments=[1,2.5,5],n.ChartEngine.YAxis.prototype.prettySemiLog=!0,n.ChartEngine.YAxis.prototype.shadowBreaks=n.ChartEngine.YAxis.defaultShadowBreaks,n.ChartEngine.Panel.prototype={name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null},n.ChartEngine.XAxis.prototype={formatter:null,adjustTimeZone:!0,idealTickSizePixels:null,timeUnit:null,timeUnitMultiplier:null,displayBorder:!0,displayGridLines:!0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},n.ChartEngine.Chart.prototype={symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,standStill:0,maxTicks:0,tension:null,masterData:null,dataSet:null,scrubbed:null,dataSegment:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,roundit:100,legendRenderer:n.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},allowScrollPast:!0,allowScrollFuture:!0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1},n.ChartEngine.prototype.convertToDataZone=function(t){if(this.dataZone){var e=n.convertTimeZone(t,null,this.dataZone);t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}return t},n.ChartEngine.isDailyInterval=function(t){return"day"==t||("week"==t||"month"==t)},n.ChartEngine.chartShowsHighs=function(t){return 1!={line:1,colored_line:1,mountain:1,colored_mountain:1,baseline_delta:1,baseline_delta_mountain:1,histogram:1,scatterplot:1}[t]},n.ChartEngine.prototype.debug=function(){},n.ChartEngine.prototype.fps=function(t,e){function i(){var s=((new Date).getTime()-r)/1e3;if(s>t){var l=a/s;return console.log("FPS="+l),void(e&&e(l))}o.draw(),a++,n.ChartEngine.useAnimation?requestAnimationFrame(i):setTimeout(i,0)}t=t||5;var r=(new Date).getTime(),a=0,o=this;console.log("Running fps() for "+t+" seconds"),i()},t.STXChart=n.ChartEngine,n.ChartEngine.DrawingDescriptor={name:"",render:null,intersected:null,click:null,abort:null},n.ChartEngine.prototype.prepend=function(t,e){var i,r="prepend"+t;return this instanceof n.ChartEngine?(i=this.hasOwnProperty(r)?this[r]:[],this[r]=[e].concat(i)):(i=n.ChartEngine.prototype[r]||[],n.ChartEngine.prototype[r]=[e].concat(i)),{method:r,func:e}},n.ChartEngine.prototype.append=function(t,e){var i,r="append"+t;return this instanceof n.ChartEngine?(i=this.hasOwnProperty(r)?this[r]:[],this[r]=i.concat(e)):(i=n.ChartEngine.prototype[r]||[],n.ChartEngine.prototype[r]=i.concat(e)),{method:r,func:e}},n.ChartEngine.prototype.removeInjection=function(t){var e,i=t.method;if(this instanceof n.ChartEngine){if(!this[i])return;for(e=0;e<this[i].length;e++)if(this[i][e]==t.func)return void this[i].splice(e,1)}else{if(!n.ChartEngine.prototype[i])return;for(e=0;e<n.ChartEngine.prototype[i].length;e++)if(n.ChartEngine.prototype[i][e]==t.func)return void n.ChartEngine.prototype[i].splice(e,1)}},n.ChartEngine.prototype.remove=function(t){this instanceof n.ChartEngine?(delete this["append"+t],delete this["prepend"+t]):(delete n.ChartEngine.prototype["append"+t],delete n.ChartEngine.prototype["prepend"+t])},n.ChartEngine.registeredContainers=[],n.ChartEngine.handleContextMenu=function(t){t||(t=event);for(var e=0;e<n.ChartEngine.registeredContainers.length;e++){var i=n.ChartEngine.registeredContainers[e].stx;if(i&&i.anyHighlighted)return t.preventDefault&&t.preventDefault(),!1}},n.ChartEngine.prototype.positionMarkers=function(){};var l=function(t,e,i){window.splineWarning||console.log("Warning: Cannot find implementation of splining.  Try loading splines.js"),window.splineWarning=1;for(var n=2;n<t.length;n+=2)i.lineTo(t[n],t[n+1])};return t.SplinePlotter.plotSpline||(t.SplinePlotter.plotSpline=l),n.ChartEngine.prototype.plugins={},n.ChartEngine.htmlControls={annotationSave:'<span class="stx-btn stx_annotation_save" style="display: none;">save</span>',annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;">cancel</span>',mSticky:'<div id="mSticky"> <span id="mStickyInterior"></span> <span id="mStickyRightClick" class=""><span class="overlayEdit stx-btn" style="display:none"><span>&nbsp;</span></span> <span id="overlayTrashCan" class="stx-btn" style="display:none"><span>&nbsp;</span></span> <span id="mouseDeleteInstructions"><span>(</span><span id="mouseDeleteText">right-click to delete</span><span id="mouseManageText">right-click to manage</span><span>)</span></span></span></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none; bottom: 22px;"><div id="chartSize"><span id="zoomOut" class="stx-zoom-out"><div class="zoom-div">*Alt+\uc2a4\ud06c\ub864: \ucc28\ud2b8 \uae30\uac04 \ud655\ub300/\ucd95\uc18c</div></span><span id="zoomIn" class="stx-zoom-in"><div class="zoom-div">*Alt+\uc2a4\ud06c\ub864: \ucc28\ud2b8 \uae30\uac04 \ud655\ub300/\ucd95\uc18c</div></span></div></div>',home:'<div id="home" class="stx_jump_today home" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>'},n.ChartEngine.prototype.registerHTMLElements=function(){var t=this.chart.container;for(var e in n.ChartEngine.htmlControls)if("undefined"==typeof this.chart[e]&&"undefined"==typeof this.controls[e]){if(!this.allowZoom&&"chartControls"==e)continue;var i=a("#"+e,t);if(i)this.chart[e]=i,this.controls[e]=i;else{var r=n.ChartEngine.htmlControls[e],o=document.createElement("DIV");o.innerHTML=r,i=o.firstChild,t.appendChild(i),this.chart[e]=i,this.controls[e]=i,i.id=e}}if(this.controls.chartControls){var s=a("#zoomIn",this.controls.chartControls),l=a("#zoomOut",this.controls.chartControls);n.safeClickTouch(s,function(t){return function(e){t.zoomIn(),e.stopPropagation()}}(this)),n.safeClickTouch(l,function(t){return function(e){t.zoomOut(),e.stopPropagation()}}(this)),n.touchDevice||(s.onmouseover=function(t){return function(){t.modalBegin()}}(this),s.onmouseout=function(t){return function(){t.modalEnd()}}(this),l.onmouseover=function(t){return function(){t.modalBegin()}}(this),l.onmouseout=function(t){return function(){t.modalEnd()}}(this))}this.controls.home&&(n.safeClickTouch(this.controls.home,function(t){return function(e){t.home({animate:!0}),e.stopPropagation()}}(this)),n.touchDevice||(this.controls.home.onmouseover=function(t){return function(){t.modalBegin()}}(this),this.controls.home.onmouseout=function(t){return function(){t.modalEnd()}}(this)))},n.ChartEngine.prototype.cloneStyle=function(t){function e(t){return t[1].toUpperCase()}var i={},r=!1;for(var a in t){var o=t[a];if("backgroundAttachment"==a&&(r=!0),r)o&&o.constructor==String&&isNaN(a)&&(i[a]=o);else if(isNaN(a)){var s=a.replace(n.camelCaseRegExp,e);i[s]=o}else{var l=t.getPropertyValue(o);if(l){o=o.split("-");for(var h=0,c=o.length,u=o[0];++h<c;)u+=o[h].charAt(0).toUpperCase()+o[h].slice(1);i[u]=l}}}return i},n.ChartEngine.prototype.canvasStyle=function(t){var e=this.styles[t];if(!e){var i=document.createElement("div");i.className=t,this.container.appendChild(i);var n=getComputedStyle(i);e=this.styles[t]=this.cloneStyle(n),this.container.removeChild(i),n||(this.styles[t]=null)}return e},n.ChartEngine.prototype.colorOrStyle=function(t){return-1!=t.indexOf("#")?t:-1!=t.indexOf("(")?t:"transparent"==t?t:this.canvasStyle(t)},n.ChartEngine.prototype.clearStyles=function(){this.styles={}},n.ChartEngine.prototype.setStyle=function(t,e,i){this.styles[t]||this.canvasStyle(t),this.styles[t]||(this.styles[t]={}),this.styles[t][n.makeCamelCase(e)]=i},n.ChartEngine.prototype.canvasFont=function(t,e){e||(e=this.chart.context);var i=this.canvasStyle(t);if(i){var n=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily;-1==n.indexOf("undefined")?e.font=n:(this.styles[t]=null,console.log("bad css style for class "+t))}},n.ChartEngine.prototype.canvasColor=function(t,e){e||(e=this.chart.context);var i=this.canvasStyle(t);if(i){var r=i.color;n.isTransparent(r)&&(r=this.defaultColor),e.globalAlpha=1,e.fillStyle=r,e.strokeStyle=r;var a=i.opacity;void 0!==a&&(e.globalAlpha=a)}},n.ChartEngine.prototype.getCanvasFontSize=function(t){var e=this.canvasStyle(t),i=e.fontSize;return i||(i="12"),parseInt(n.stripPX(i),10)},n.ChartEngine.prototype.getCanvasColor=function(t){return this.canvasStyle(t).color},n.ChartEngine.hideDates=function(){return!1},n.ChartEngine.prototype.runPrepend=function(t,e,i){var r="prepend"+t,a=this.hasOwnProperty(r)?this[r]:[];if(a=a.concat(n.ChartEngine.prototype[r]||[]),!a.length)return!1;i||(i=this);for(var o=0;o<a.length;o++){var s=a[o].apply(i,e);if(s)return s}return!1},n.ChartEngine.prototype.runAppend=function(t,e,i){var r="append"+t,a=this.hasOwnProperty(r)?this[r]:[];if(a=a.concat(n.ChartEngine.prototype[r]||[]),!a.length)return!1;i||(i=this);for(var o=0;o<a.length;o++){var s=a[o].apply(i,e);if(s)return s}return!1},n.ChartEngine.registerDrawingTool=function(t,e){n.ChartEngine.drawingTools[t]=e},n.ChartEngine.prototype.createBlock=function(t,e,i,n,r,a){a||(a=this.chart.context),void 0!==n&&(this.canvasColor(r,a),a.fillRect(t,i,e,n),a.globalAlpha=1)},n.ChartEngine.prototype.changeOccurred=function(t){if(!this.currentlyImporting){this.changeCallback&&this.changeCallback(this,t);var e={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects};"layout"==t?this.dispatch("layout",e):"vector"==t&&this.dispatch("drawing",e)}},n.ChartEngine.prototype.setChartType=function(t){this.layout.chartType=t,this.chart.defaultChartStyleConfig={type:t},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},n.ChartEngine.prototype.setAggregationType=function(t){this.layout.aggregationType=t,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},n.ChartEngine.prototype.setChartScale=function(t){t||(t="linear"),this.layout.chartScale=t,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},n.ChartEngine.prototype.setAdjusted=function(t){this.layout.adj=t,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},n.ChartEngine.prototype.setVolumeUnderlay=function(t){this.layout.volumeUnderlay=t,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},n.ChartEngine.prototype.serializeDrawings=function(){return console.warn("CIQ.ChartEngine.serializeDrawings() has been deprecated. Please use exportDrawings()"),this.exportDrawings()},n.ChartEngine.prototype.exportDrawings=function(){for(var t=[],e=0;e<this.drawingObjects.length;e++)t.push(this.drawingObjects[e].serialize());return t},n.ChartEngine.prototype.abortDrawings=function(){for(var t=0;t<this.drawingObjects.length;t++)this.drawingObjects[t].abort(!0);this.drawingObjects=[]},n.ChartEngine.prototype.reconstructDrawings=function(t){console.warn("CIQ.ChartEngine.reconstructDrawings() has been deprecated. Please use importDrawings()"),this.importDrawings(t)},n.ChartEngine.prototype.importDrawings=function(t){if(n.Drawing)for(var e=0;e<t.length;e++){var i=t[e];"fibonacci"==i.name&&(i.name="retracement");var r=n.ChartEngine.drawingTools[i.name];if(r||n.Drawing[i.name]&&(r=n.Drawing[i.name],n.ChartEngine.registerDrawingTool(i.name,r)),r){var a=new r;a.reconstruct(this,i),this.drawingObjects.push(a)}}},n.ChartEngine.prototype.clearDrawings=function(t){var e=n.shallowClone(this.drawingObjects);this.abortDrawings(),t?this.undoStamps=[]:this.undoStamp(e,n.shallowClone(this.drawingObjects)),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,n.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.mSticky&&(this.controls.mSticky.style.display="none",this.controls.mSticky.children[0].innerHTML="")},n.ChartEngine.prototype.createDrawing=function(t,e){if(n.Drawing){var i=new n.Drawing[t];i.reconstruct(this,e);var r=new n.Drawing[t];r.stx=this,r.copyConfig();for(var a in r)i[a]=i[a]||r[a];return this.drawingObjects.push(i),this.draw(),i}},n.ChartEngine.prototype.removeDrawing=function(t){for(var e=0;e<this.drawingObjects.length;e++)if(this.drawingObjects[e]==t)return this.drawingObjects.splice(e,1),this.changeOccurred("vector"),void this.draw()},n.ChartEngine.prototype.dateFromTick=function(t,e,i){e||(e=this.chart);var r,a,o,s=e.dataSet.length,l=0,h=!1;if(0===s&&(e.dataSet[0]={},e.dataSet[0].DT=new Date,s=e.dataSet.length,h=!0),t<0)for(a=this.standardMarketIterator(e.dataSet[0].DT);l>t;)r=a.previous(),l-=1;else if(t>=s)for(a=this.standardMarketIterator(e.dataSet[s-1].DT);s-1+l<t;)r=a.next(),l+=1;else r=e.dataSet[t].DT;return o=i?new Date(r.getTime()):n.yyyymmddhhmm(r),h&&delete e.dataSet[0].DT,o},n.ChartEngine.prototype.calculateYAxisMargins=function(t){t.zoom=t.initialMarginTop+t.initialMarginBottom,t.scroll=(t.initialMarginTop-t.initialMarginBottom)/2,t.zoom>t.height&&(t.zoom=0,t.scroll=0)},n.ChartEngine.prototype.home=function(t){function e(t){for(var e in t.panels)"chart"!=e&&t.calculateYAxisMargins(t.panels[e].yAxis)}function i(t,i,n){return function(){t.calculateYAxisMargins(i.panel.yAxis),e(t),i.scroll=n,t.draw()}}if(this.swipe.amplitude=0,this.grabbingScreen=!1,n.ChartEngine.insideChart&&n.unappendClassName(this.container,"stx-drag-chart"),"object"!=typeof t&&(t={maintainWhitespace:t}),"undefined"==typeof t.maintainWhitespace&&(t.maintainWhitespace=!0),this.cancelTouchSingleClick=!0,!this.chart.dataSet||!this.chart.dataSet.length)return void this.draw();this.micropixels=0;var r=Math.floor(this.chart.width/this.layout.candleWidth);for(var a in this.charts){var o=this.charts[a];if(!t.chart||t.chart==o){var s=0;t.maintainWhitespace&&this.preferences.whitespace>=0&&(s=this.preferences.whitespace),(t.whitespace||0===t.whitespace)&&(s=t.whitespace);var l=!n.ChartEngine.chartShowsHighs(this.layout.chartType);if(!("roundRectArrow"!=this.yaxisLabelStyle||l&&this.extendLastTick&&0!==this.chart.yaxisPaddingRight)){var h=3,c=this.getCanvasFontSize("stx_yaxis")+2*h,u=.66*c;u>s&&(s=u)}var d=Math.min(r,o.dataSet.length);for(this.chart.allowScrollPast&&(d=r),this.micropixels=this.chart.width-d*this.layout.candleWidth-s,this.preferences.whitespace=s,l&&(this.micropixels+=this.layout.candleWidth/2);this.micropixels>this.layout.candleWidth;)d++,this.micropixels-=this.layout.candleWidth;for(;this.micropixels<-1*this.layout.candleWidth;)d--,this.micropixels+=this.layout.candleWidth;if(t.animate){var p=this;this.scrollTo(o,d,i(p,o,d))}else o.scroll=d,this.calculateYAxisMargins(o.panel.yAxis),e(this)}}this.draw()},n.ChartEngine.prototype.isHome=function(){var t=this.chart,e=t.dataSet;return this.pixelFromTick(e.length-1,t)<t.width},n.ChartEngine.prototype.tickFromDate=function(t,e,i,r){if(e||(e=this.chart),!e.dataSet||!e.dataSet.length)return 0;i||(i=0),e||(e=this.chart);var a=t.constructor==Date?t:n.strToDateTime(t);n.ChartEngine.isDailyInterval(this.layout.interval)||a.setMinutes(a.getMinutes()+i);var o=a.getTime(),s=e.tickCache[o];if(s||0===s)return s;var l=e.dataSet[0].DT,h=e.dataSet[e.dataSet.length-1].DT;if(a>=l&&a<=h)for(var c=0;c<e.dataSet.length;c++){var u=e.dataSet[c].DT;if(u.getTime()==a.getTime())return e.tickCache[o]=c,c;if(u>a)return e.tickCache[o]=r?c:c-1,e.tickCache[o]}var d=a<l,p=d?l:h,f=this.standardMarketIterator(p),m=f.futureTick({end:a});return s=d?-1*m:e.dataSet.length-1+m,e.tickCache[o]=s,s},n.ChartEngine.XAxisLabel=function(t,e,i){this.hz=t,this.grid=e,this.text=i},n.ChartEngine.prototype.createXAxis=function(t){if(t.dataSegment.length<=0)return null;if(n.ChartEngine.hideDates())return null;var e=[t],i=this.runPrepend("createXAxis",e);return i||(i=this.createTickXAxisWithDates(t),this.runAppend("createXAxis",e),i)},n.ChartEngine.prototype.adjustYAxisHeightOffset=function(t,e){e.bottomOffset=0,this.xaxisHeight||0===this.xaxisHeight||(this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+4,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)),!0===this.xAxisAsFooter&&t.bottom>this.chart.canvasHeight-this.xaxisHeight?e.bottomOffset=this.xaxisHeight:!0!==this.xAxisAsFooter&&"chart"==t.name&&(e.bottomOffset=this.xaxisHeight),e.bottom=t.bottom-e.bottomOffset},n.ChartEngine.prototype.plotYAxisGrid=function(t){if(!this.runPrepend("plotYAxisGrid",arguments)){var e=this.chart.context;t.yAxis.yAxisPlotter.draw(e,"grid"),this.runAppend("plotYAxisGrid",arguments)}},n.ChartEngine.prototype.plotYAxisText=function(t){if(!this.runPrepend("plotYAxisText",arguments)){for(var e=t.yaxisLHS.concat(t.yaxisRHS),i=0;i<e.length;i++){var n=e[i];if(n.yAxisPlotter&&!n.noDraw){this.canvasFont("stx_yaxis"),this.canvasColor("stx_yaxis");var r=this.chart.context;r.textBaseline="middle",n.justifyRight?r.textAlign="right":r.textAlign="left",n.yAxisPlotter.draw(r,"text"),r.textBaseline="alphabetic",r.textAlign="left"}}this.runAppend("plotYAxisText",arguments)}},n.ChartEngine.prototype.formatYAxisPrice=function(t,e,i,r){if(null===t||void 0===t||isNaN(t))return"";var a=r||e.yAxis,o=i;if(o||0===o||(o=a.printDecimalPlaces),o||0===o||(o=a.priceTick<.01?4:a.priceTick<.1?2:a.priceTick<1?1:0),e.name!=e.chart.name&&a.priceTick>100)return n.condenseInt(t);var s=this.internationalizer;if(s){var l=s.priceFormatters.length;o>=l&&(o=l-1),t=s.priceFormatters[o].format(t)}else t>=1e4?(o=0,
t=(new Intl.NumberFormat).format(t.toFixed(o))):t=t>=100?(new Intl.NumberFormat).format(t.toFixed(o)):t.toFixed(o);return t},n.ChartEngine.prototype.padOutPrice=function(t,e){if(0!==t&&(!t||"number"!=typeof t))return"";e||0===e||(e=t);var i=""+e,n=i.substring(i.indexOf(".")).length-1;n=e>=1e3?Math.max(n,0):e<2?Math.max(n,4):Math.max(n,2);var r=this.internationalizer;if(r){var a=r.priceFormatters.length;n>=a&&(n=a-1),t=r.priceFormatters[n].format(t)}else t=t.toFixed(n);return t},n.ChartEngine.prototype.formatPrice=function(t,e){if(0!==t&&(!t||void 0===t))return"";if(e||(e=this.currentPanel),e||(e=this.chart.panel),!e)return t;var i=e.decimalPlaces;if(i||0===i||(i=e.chart.decimalPlaces),!i&&0!==i)return t;var n=this.internationalizer;if(n){var r=n.priceFormatters.length;i>=r&&(i=r-1),t=n.priceFormatters[i].format(t)}else t=t.toFixed(i);return t},n.ChartEngine.prototype.createCrosshairs=function(){this.runPrepend("createCrosshairs",arguments)||this.controls.crossX.onmousedown||(this.controls.crossY.onmousedown=function(t){return t||(t=event),t.preventDefault&&t.preventDefault(),!1},this.controls.crossX.onmousedown=function(t){return t||(t=event),t.preventDefault&&t.preventDefault(),!1},this.runAppend("createCrosshairs",arguments))},n.ChartEngine.prototype.determineMinMax=function(t,e,i,n,r){var a=-1*Number.MAX_VALUE,o=Number.MAX_VALUE,s=!1,l=t.length;r&&(l=r);for(var h=0;h<l;h++){var c=t[h];if(c){if(!n)if(c.transform)s=!0,c=c.transform;else if(s)continue;for(var u=0,d=0;d<e.length;d++){var p=c[e[d]];if(p){"number"==typeof p&&(p=[p]);for(var f=0;f<p.length;f++){var m=p[f];(m||0===m)&&(i?(u+=m,u>a&&(a=u),u<o&&(o=u)):(m>a&&(a=m),m<o&&(o=m)))}}}}}return a==-1*Number.MAX_VALUE&&(a=0),o==Number.MAX_VALUE&&(o=0),[o,a]},n.ChartEngine.prototype.calculateYAxisRange=function(t,e,i,n){i==Number.MAX_VALUE&&(i=0,n=0);var r=t.height,a=null,o=null;this.adjustYAxisHeightOffset(t,e),e.top=t.top,e.height=e.bottom-e.top;var s=Math.round(Math.abs(r/5));if(r-Math.abs(e.scroll)<s&&(e.scroll=(r-s)*(e.scroll<0?-1:1)),i||0===i){if(n-i==0){var l=Math.pow(10,-(i.toString()+".").split(".")[1].length);a=i+l,o=i-l}else if((this.layout.semiLog||"log"==this.layout.chartScale)&&a){var h=Math.log(i)/Math.LN10,c=Math.log(n)/Math.LN10;a=Math.pow(10,c),o=Math.pow(10,h)}else a=n,o=i;e.high=a,e.low=o}if((e.max||0===e.max)&&(e.high=e.max),(e.min||0===e.min)&&(e.low=e.min),e.shadow=e.high-e.low,t.chart.name===t.name&&t.yAxis===e){var u=this.layout.semiLog||"log"==this.layout.chartScale;t.chart.isComparison&&(u=!1),e.semiLog!=u&&(this.clearPixelCache(),e.semiLog=u)}},n.ChartEngine.prototype.renderYAxis=function(t){if(!this.runPrepend("renderYAxis",arguments)){var e,i=t.panel,n=i.yaxisRHS.concat(i.yaxisLHS);for(e=0;e<n.length;e++){var r=n[e],a=null,o=null;i.yAxis===r&&(a=t.lowValue,o=t.highValue),this.calculateYAxisRange(i,r,a,o)}var s={};for(e=0;e<n.length;e++)s.yAxis=n[e],this.createYAxis(i,s),this.drawYAxis(i,s);this.runAppend("renderYAxis",arguments)}},n.ChartEngine.prototype.initializeDisplay=function(t){if(!this.runPrepend("initializeDisplay",arguments)){var e=[];for(var i in t.series)t.series[i].parameters.shareYAxis&&e.push(i);t.panel=this.panels[t.name];var r,a=null,o=Math.floor((t.width-this.micropixels)/this.layout.candleWidth);if(t.scroll>t.maxTicks&&t.maxTicks>o+1&&(a=t.dataSegment.length-1),n.ChartEngine.chartShowsHighs(this.layout.chartType))e.push("Close","High","Low","iqPrevClose"),r=this.determineMinMax(t.dataSegment,e,null,null,a);else{var s=this.chart.defaultPlotField;if(s&&"Close"!=s?e.push(s):e.push("Close","iqPrevClose"),r=this.determineMinMax(t.dataSegment,e,null,null,a),"baseline_delta"==this.layout.chartType){var l=t.baseline.actualLevel;if(l||0===l){t.transformFunc&&(l=t.transformFunc(this,t,l));var h=Math.max(l-r[0],r[1]-l);this.repositioningBaseline?r=[t.lowValue,t.highValue]:(r[0]=l-h,r[1]=l+h)}}}t.lowValue=r[0],t.highValue=r[1],this.runAppend("initializeDisplay",arguments)}},n.ChartEngine.prototype.computePosition=function(t,e){return void 0===e&&(e=0),t*this.layout.candleWidth+e+this.micropixels},n.ChartEngine.prototype.computeColor=function(t,e){return t<e?"stx_candle_up":t>e?"stx_candle_down":"stx_candle_shadow"},n.ChartEngine.prototype.computeLength=function(t,e){var i=this.pixelFromPrice(t);return this.pixelFromPrice(e)-i},n.ChartEngine.prototype.setSeriesRenderer=function(t){var e=t.params;return this.chart.seriesRenderers[t.params.name]?this.chart.seriesRenderers[t.params.name]:(e.yAxis&&this.addYAxis(this.panels[e.panel],e.yAxis),t.stx=this,this.chart.seriesRenderers[t.params.name]=t,t)},n.ChartEngine.prototype.setMarket=function(t,e){e||(e=this.chart),e.market=new n.Market(t);for(var i in this.layout.marketSessions)e.market.disableSession(i,this.layout.marketSessions[i])},n.ChartEngine.prototype.setMarketFactory=function(t){this.marketFactory=t},n.ChartEngine.prototype.removeSeriesRenderer=function(t){for(var e in this.chart.seriesRenderers)if(t.params.name===this.chart.seriesRenderers[e].params.name){var i=this.chart.seriesRenderers[t.params.name],n=i.params.yAxis,r=this.panels[i.params.panel];return delete this.chart.seriesRenderers[t.params.name],void this.deleteYAxisIfUnused(r,n)}},n.ChartEngine.prototype.getSeriesRenderer=function(t){return this.chart.seriesRenderers[t]},n.ChartEngine.prototype.startClip=function(t,e){t||(t="chart");var i=this.panels[t],n=i.yAxis;this.chart.context.save(),this.chart.context.beginPath();var r=i.left,a=i.width;e&&(r=0,a=this.width),this.chart.context.rect(r,i.top,a,n.height),this.chart.context.clip()},n.ChartEngine.prototype.endClip=function(){this.chart.context.restore()},n.ChartEngine.prototype.drawLineChart=function(t,e,i,r){var a=this.chart.context,o=this.canvasStyle(e);o.width&&parseInt(o.width,10)<=25?a.lineWidth=Math.max(1,n.stripPX(o.width)):a.lineWidth=1,this.canvasColor(e),r||(r={}),r.skipProjections=!0,t.chart.tension&&(r.tension=t.chart.tension),t.chart.lastTickOffset&&(r.lastTickOffset=t.chart.lastTickOffset);var s=this.plotLineChart(t,t.chart.dataSegment,t.chart.defaultPlotField,r,i);return a.lineWidth=1,s},n.ChartEngine.prototype.updateFloatHRLabel=function(t){var e=t.yaxisLHS.concat(t.yaxisRHS),i=this.crossYActualPos?this.crossYActualPos:this.cy;if(this.floatCanvas.isDirty&&n.clearCanvas(this.floatCanvas,this),"none"!=this.controls.crossX.style.display){if(this.controls.crossY){var r=t.width;"roundRectArrow"==this.yaxisLabelStyle&&(r-=7),this.controls.crossY.style.left=t.left+"px",this.controls.crossY.style.width=r+"px"}for(var a=0;a<e.length;a++){var o=e[a],s=this.valueFromPixel(i,t,o);if(!isNaN(s)&&!((t.min||0===t.min)&&s<t.min||(t.max||0===t.max)&&s>t.max)){var l=null;o!==t.chart.yAxis&&(l=0,o.shadow<1e3&&(l=2),o.shadow<5&&(l=4),(o.decimalPlaces||0===o.decimalPlaces)&&(l=o.decimalPlaces)),s=o.priceFormatter?o.priceFormatter(this,t,s,o):this.formatYAxisPrice(s,t,l,o);var h=this.canvasStyle("stx-float-price");this.createYAxisLabel(t,s,i,h.backgroundColor,h.color,this.floatCanvas.context,o),this.floatCanvas.isDirty=!0}}}},n.ChartEngine.prototype.headsUpHR=function(){if(!this.runPrepend("headsUpHR",arguments)){var t=this.currentPanel;if(t){var e=t.chart;if(this.updateFloatHRLabel(t),this.controls.floatDate&&!n.ChartEngine.hideDates()){var i=this.barFromPixel(this.cx),r=e.xaxis[i];if(r&&r.DT)if(e.xAxis.formatter)this.controls.floatDate.innerHTML=e.xAxis.formatter(r.DT);else if(this.internationalizer){var a=this.internationalizer.monthDay.format(r.DT);n.ChartEngine.isDailyInterval(this.layout.interval)?a="month"==this.layout.interval?this.internationalizer.yearMonth.format(r.DT):this.internationalizer.yearMonthDay.format(r.DT):a+=" "+this.internationalizer.hourMinute.format(r.DT),this.controls.floatDate.innerHTML=a}else{var o=r.DT.getMonth()+1;o<10&&(o="0"+o);var s=r.DT.getDate();s<10&&(s="0"+s);var l=r.DT.getHours();l<10&&(l="0"+l);var h=r.DT.getMinutes();if(h<10&&(h="0"+h),n.ChartEngine.isDailyInterval(this.layout.interval))"month"==this.layout.interval?this.controls.floatDate.innerHTML=o+"-"+r.DT.getFullYear():this.controls.floatDate.innerHTML=o+"-"+s+"-"+r.DT.getFullYear();else{this.controls.floatDate.innerHTML=o+"/"+s+" "+l+":"+h;var c=e.xAxis.activeTimeUnit&&e.xAxis.activeTimeUnit<=n.SECOND||"second"==this.layout.timeUnit,u=e.xAxis.activeTimeUnit&&e.xAxis.activeTimeUnit<=n.MILLISECOND||"millisecond"==this.layout.timeUnit;if(c||u){var d=r.DT.getSeconds();if(d<10&&(d="0"+d),this.controls.floatDate.innerHTML+=":"+d,u){var p=r.DT.getMilliseconds();p<10&&(p="0"+p),p<100&&(p="0"+p),this.controls.floatDate.innerHTML+=":"+p}}}}else r&&r.index?this.controls.floatDate.innerHTML=r.index:this.controls.floatDate.innerHTML=""}this.runAppend("headsUpHR",arguments)}}},n.ChartEngine.prototype.setCrosshairColors=function(){},n.ChartEngine.prototype.magnetize=function(){if(this.magnetizedPrice=null,!this.runPrepend("magnetize",arguments)){var t=this.currentVectorParameters.vectorType;if(("annotation"!=t&&"callout"!=t||!n.ChartEngine.drawingLine)&&"projection"!=t&&"freeform"!=t){var e=this.currentPanel;if(e.name==e.chart.name){var i=e.chart,r=this.tickFromPixel(n.ChartEngine.crosshairX-this.left,i);if(r>i.dataSet.length)return;var a=i.dataSet[r];if(!a)return;var o=this.valueFromPixel(this.cy,e);this.magnetizedPrice=a.Close;var s=this.layout.chartType;if("bar"==s||"candle"==s||"colored_bar"==s||"hollow_candle"==s||"volume_candle"==s)for(var l=["Open","High","Low","Close"],h=1e9,c=0;c<l.length;c++){var u=a[l[c]];Math.abs(o-u)<h&&(h=Math.abs(o-u),this.magnetizedPrice=u)}var d=this.pixelFromTick(r,i),p=this.pixelFromPrice(this.magnetizedPrice,this.currentPanel),f=this.chart.tempCanvas.context;f.beginPath(),f.lineWidth=1;var m=Math.max(this.layout.candleWidth,8)/2;f.arc(d,p,m,0,2*Math.PI,!1),f.fillStyle="#FFFFFF",f.strokeStyle="#000000",f.fill(),f.stroke(),f.closePath()}this.runAppend("magnetize",arguments)}}},n.ChartEngine.prototype.positionCrosshairsAtPointer=function(){var t=this.currentPanel;if(t&&!this.runPrepend("positionCrosshairsAtPointer",arguments)){var e=t.chart,i=this.container.getBoundingClientRect();this.top=i.top,this.left=i.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.cy=this.crossYActualPos=this.backOutY(n.ChartEngine.crosshairY),this.cx=this.backOutX(n.ChartEngine.crosshairX);var r=this.crosshairTick=this.tickFromPixel(this.cx,e),a=this.pixelFromTick(r,e)-.5;if(this.controls.crossX.style.left=a+"px",a>=t.right||a<=t.left)return void this.undisplayCrosshairs();var o="chart"==t.name?this.preferences.horizontalCrosshairField:t.horizontalCrosshairField,s=e.dataSet;o&&s&&r<s.length&&r>-1&&(this.crossYActualPos=this.pixelFromPriceTransform(s[r][o],t)),this.controls.crossY.style.top=this.crossYActualPos+"px",this.runAppend("positionCrosshairsAtPointer",arguments)}},n.ChartEngine.prototype.doDisplayCrosshairs=function(){if(!this.runPrepend("doDisplayCrosshairs",arguments)){if(this.displayInitialized){var t=this.floatCanvas,e=this.currentVectorParameters.vectorType;if(this.layout.crosshair)if(n.Drawing&&n.Drawing[e]&&(new n.Drawing[e]).dragToDraw)this.undisplayCrosshairs();else{var i=this.controls,r=i.crossX,a=i.crossY;""!==r.style.display&&(r.style.display="",a.style.display="",this.preferences.magnet&&e?(n.unappendClassName(this.container,"stx-crosshair-on"),this.chart.tempCanvas.style.display="block"):n.appendClassName(this.container,"stx-crosshair-on")),i.floatDate&&!n.ChartEngine.hideDates()&&(i.floatDate.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),t&&(t.style.display="block")}else this.undisplayCrosshairs()}this.runAppend("doDisplayCrosshairs",arguments)}},n.ChartEngine.prototype.undisplayCrosshairs=function(){if(!this.runPrepend("undisplayCrosshairs",arguments)){var t=this.controls,e=t.crossX,i=t.crossY;e&&"none"!=e.style.display&&(e.style.display="none",i.style.display="none"),this.displayInitialized&&t.floatDate&&(t.floatDate.style.visibility="hidden"),n.unappendClassName(this.container,"stx-crosshair-on");var r=this.floatCanvas;if(r&&r.isDirty&&(n.clearCanvas(r,this),"none"!=r.style.display&&(r.style.display="none")),!this.activeDrawing&&!this.repositioningDrawing&&!this.editingAnnotation){var a=this.chart.tempCanvas;a&&"none"!=a.style.display&&(a.style.display="none")}this.runAppend("undisplayCrosshairs",arguments)}},n.ChartEngine.prototype.modalBegin=function(){this.openDialog="modal",this.undisplayCrosshairs()},n.ChartEngine.prototype.modalEnd=function(){this.cancelTouchSingleClick=!0,this.openDialog="",this.doDisplayCrosshairs()},n.ChartEngine.prototype.updateChartAccessories=function(){if(null!==this.accessoryTimer&&clearTimeout(this.accessoryTimer),!n.ChartEngine.drawingLine&&n.touchDevice&&(new Date).getTime()-this.lastAccessoryUpdate<100)return void(this.accessoryTimer=setTimeout(function(t){return function(){t.updateChartAccessories()}}(this),10));if(this.chart.dataSet&&!this.runPrepend("updateChartAccessories",arguments)){this.positionCrosshairsAtPointer(),this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime();var t=this.controls.floatDate;if(t){var e=this.currentPanel;if(e||(e=this.chart.panel),e){var i=e.chart,r=!0===this.xAxisAsFooter?0:this.chart.canvasHeight-e.chart.bottom,a=this.pixelFromTick(this.crosshairTick,i)-t.offsetWidth/2-.5;a<0&&(a=0),t.style.left=a+"px",t.style.bottom=r+"px"}}this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)}},n.ChartEngine.prototype.mousemove=function(t){var e=t||event;n.ChartEngine.crosshairX=e.clientX,n.ChartEngine.crosshairY=e.clientY,this.runPrepend("mousemove",arguments)||this.displayInitialized&&""===this.openDialog&&(this.mousemoveinner(e.clientX,e.clientY),this.runAppend("mousemove",arguments))},n.ChartEngine.prototype.setResizeTimer=function(t){function e(t){return function(){if(t.chart.canvas)return n.isAndroid||t.chart.canvas.height==Math.floor(t.devicePixelRatio*t.chart.container.clientHeight)&&t.chart.canvas.width==Math.floor(t.devicePixelRatio*t.chart.container.clientWidth)?void 0:void t.resizeChart()}}this.resizeDetectMS=t,t?(this.resizeTimeout&&window.clearInterval(this.resizeTimeout),this.resizeTimeout=window.setInterval(e(this),t)):(this.resizeTimeout&&window.clearInterval(this.resizeTimeout),this.resizeTimeout=null)},n.ChartEngine.prototype.whichYAxis=function(t,e){if(void 0===e&&(e=this.cx),t)for(var i=t.yaxisLHS.concat(t.yaxisRHS),n=0;n<i.length;n++){var r=i[n];if(r.left<=e&&r.left+r.width>=e)return r}return this.chart.panel.yAxis},n.ChartEngine.prototype.findHighlights=function(t,e){var i=this.preferences.highlightsRadius;t&&(i=this.preferences.highlightsTapRadius);var r=this.cy,a=this.cx;if(this.anyHighlighted=!1,this.currentPanel&&(this.preferences.magnet&&!this.activeDrawing&&n.clearCanvas(this.chart.tempCanvas,this),!this.activeDrawing)){for(var o=!1,s=null,l=["","",!0,null,"drawing"],h=this.currentPanel.chart,c={x0:this.tickFromPixel(a-i,h),x1:this.tickFromPixel(a+i,h),y0:this.valueFromPixelUntransform(r-i,this.currentPanel),y1:this.valueFromPixelUntransform(r+i,this.currentPanel)},u=0;u<this.drawingObjects.length;u++){var d=this.drawingObjects[u];if(!d.permanent&&(this.panels[d.panelName]&&(!this.repositioningDrawing||this.repositioningDrawing==d))){var p=d.highlighted,f=d.panelName==this.currentPanel.name,m=this.valueFromPixelUntransform(this.pixelFromPrice(this.crosshairValue,this.currentPanel),this.currentPanel);d.repositioner=d.intersected(this.crosshairTick,m,c),f=f&&d.repositioner,!e&&f?(p?s=d:p!=d.highlight(!0)&&(s||(s=d),o=!0),this.anyHighlighted=!0):p!=d.highlight(!1)&&(o=!0)}}var g,v,y;for(g in this.overlays)v=this.overlays[g],v.prev=v.highlight,v.highlight=!1;for(g in h.seriesRenderers)for(var x=h.seriesRenderers[g],b=0;b<x.seriesParams.length;b++)y=x.seriesParams[b],y.prev=y.highlight,y.highlight=!1;if(!e){var C=this.barFromPixel(a);if(C<h.dataSegment.length){var w;for(g in this.overlays)if(v=this.overlays[g],v.panel==this.currentPanel.name&&!1!==v.study.isHighlighted)if("function"!=typeof v.study.isHighlighted){var S=h.dataSegment[C];if(S){for(var T in this.overlays[g].outputMap){var D=S[T];if(w=0,w=this.currentPanel.name==h.name?this.pixelFromPriceTransform(D,this.currentPanel):this.pixelFromPrice(D,this.currentPanel),r-i<w&&r+i>w){v.highlight=!0,this.anyHighlighted=!0;break}}if(v.highlight)break}}else v.study.isHighlighted(this,a,r)&&(v.highlight=!0,this.anyHighlighted=!0);for(g in h.seriesRenderers){var M=h.seriesRenderers[g];if(M.params.highlightable&&M.params.panel==this.currentPanel.name)for(var k=0;k<M.seriesParams.length;k++)if(y=M.seriesParams[k],(w=M.caches[y.field]&&M.caches[y.field][C])||0===w)if(r-i<w&&r+i>w)y.highlight=!0,this.anyHighlighted=!0;else if(("step"==M.params.subtype||"step"==y.type)&&C>0){var _=M.caches[y.field]&&M.caches[y.field][C-1];((_||0===_)&&r>w&&r<_||r<w&&r>_)&&(y.highlight=!0,this.anyHighlighted=!0)}}}}for(g in this.overlays)v=this.overlays[g],v.highlight&&(this.anyHighlighted=!0,l=[v.inputs.display?v.inputs.display:v.name,null,null,v.permanent,"study"],s=null),v.prev!=v.highlight&&(o=!0);for(g in h.seriesRenderers){var E=h.seriesRenderers[g];if(E.params.highlightable)for(var A=0;A<E.seriesParams.length;A++)y=E.seriesParams[A],y.highlight&&(this.anyHighlighted=!0,l=[y.display,y.color,!1,y.permanent,"series"],s=null),y.prev!=y.highlight&&(o=!0)}o&&(this.draw(),this.displaySticky.apply(this,l),this.clearMeasure(),s&&s.measure()),this.anyHighlighted||this.setMeasure()}},n.ChartEngine.prototype.positionSticky=function(t){var e=Math.max(this.cy-t.offsetHeight-60,0),i=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-t.offsetWidth);t.style.top=e+"px",t.style.right=i+"px"},n.ChartEngine.prototype.displaySticky=function(t,e,i,r,o){var s=this.controls.mSticky;if(s){var l=a("#mStickyInterior",s);if(l){var h=a("#overlayTrashCan",s),c=a(".overlayEdit",s),u=a("#mouseDeleteInstructions",s);i||t?(t||(t=""),i&&!t?(l.style.backgroundColor="",l.style.color="",l.style.display="none"):e?(l.style.backgroundColor=e,l.style.color=n.chooseForegroundColor(e),l.style.display="inline-block"):(l.style.backgroundColor="",l.style.color="",l.style.display="inline-block"),l.innerHTML=t,o&&(a("#mStickyRightClick",s).className="rightclick_"+o),s.style.display="inline-block",this.positionSticky(s),r||this.bypassRightClick?(h&&(h.style.display="none"),c&&(c.style.display="none"),u&&(u.style.display="none")):n.touchDevice?(h&&(h.style.display="inline-block"),c&&(c.style.display="inline-block"),u&&(u.style.display="none")):n.touchDevice||u&&(u.style.display="block")):(l.innerHTML="",s.style.display="none",n.touchDevice?(h&&(h.style.display="none"),c&&(c.style.display="none")):n.touchDevice||u&&(u.style.display="none"))}}},n.ChartEngine.prototype.setMeasure=function(t,e,i,n,a){if(!this.runPrepend("setMeasure",arguments)){var o=r("mMeasure"),s="";if(t){var l=Math.round(Math.abs(t-e)*this.chart.roundit)/this.chart.roundit;l=l.toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?s+=this.internationalizer.numbers.format(l):s+=l;var h=(e-t)/t;h=Math.abs(h)>.1?Math.round(100*h):Math.abs(h)>.01?Math.round(1e3*h)/10:Math.round(1e4*h)/100,this.internationalizer?h=this.internationalizer.percent.format(h/100):h+="%",s+=" ("+h+")";var c=Math.abs(n-i);c=Math.round(c)+1;s+=" "+c+" "+this.translateIf("Bars"),o&&("measureLit"!=o.className&&(o.className="measureLit"),o.innerHTML=s)}else o&&"measureUnlit"!=o.className&&(o.className="measureUnlit"),this.anyHighlighted||""!==this.currentVectorParameters.vectorType||this.clearMeasure();this.activeDrawing||(o=this.controls.mSticky,o&&(a?(o.style.display="inline-block",o.children[0].style.display="inline-block",t&&(o.children[0].innerHTML=s),this.positionSticky(o)):(o.style.display="none",o.children[0].innerHTML="")),this.runAppend("setMeasure",arguments))}},n.ChartEngine.prototype.clearMeasure=function(){var t=r("mMeasure");t&&("measureUnlit"!=t.className&&(t.className="measureUnlit"),t.innerHTML="")},n.ChartEngine.prototype.drawTemporaryPanel=function(){var t=Math.round(n.ChartEngine.resizingPanel.right-3)+.5;n.clearCanvas(this.chart.tempCanvas,this);var e=n.ChartEngine.crosshairY-this.top;this.plotLine(n.ChartEngine.resizingPanel.left,t,e,e,this.canvasStyle("stx_panel_drag"),"segment",this.chart.tempCanvas.context,!1,{}),n.ChartEngine.resizingPanel.handle.style.top=e-n.ChartEngine.resizingPanel.handle.offsetHeight/2+"px"},n.ChartEngine.prototype.setTrashCan=function(){if(n.touchDevice){var t=this.controls.mSticky;t&&(t.style.display="inline-block",t.children[0].style.display="none",t.children[1].style.display="inline-block",t.children[2]&&(t.children[2].style.display="none"),t.style.top=this.backOutY(n.ChartEngine.crosshairY)-60+"px",t.style.right=this.chart.canvasWidth-(this.backOutX(n.ChartEngine.crosshairX)-50)+"px")}},n.ChartEngine.prototype.pixelFromBar=function(t,e){e||(e=this.chart);var i=0;return i=this.chart.dataSegment&&this.chart.dataSegment[t]&&this.chart.dataSegment[t].leftOffset?this.chart.dataSegment[t].leftOffset:(t+.5)*this.layout.candleWidth,i=e.panel.left+Math.floor(i+this.micropixels)-1},n.ChartEngine.prototype.barFromPixel=function(t,e){e||(e=this.chart);var i=this.chart.dataSegment,n=this.micropixels,r=this.layout.candleWidth;if("volume_candle"==this.layout.chartType&&i){var a,o,s,l=t-e.panel.left-n,h=2,c=i.length,u=Math.round(c/h),d=i[c-1].leftOffset+i[c-1].candleWidth/2;if(l>d)return c+Math.floor((t-d-e.panel.left-n)/r);for(var p=1;p<c&&(h*=2,a=i[u]);p++){o=a.leftOffset,s=a.candleWidth/2;var f=o-s,m=o+s;if(0===u||l>=f&&l<m)break;l<f?u-=Math.max(1,Math.round(c/h)):u+=Math.max(1,Math.round(c/h)),u=Math.max(0,Math.min(c-1,u))}if(!i[u])for(p=0;p<c;p++)if(a=i[p]){if(o=a.leftOffset,s=a.candleWidth/2,l<o-s)return Math.max(0,p-1);if(l<o+s)return p;if(l>=o+s)return p+1}return u}return Math.floor((t-e.panel.left-n)/r)},n.ChartEngine.prototype.tickFromPixel=function(t,e){e||(e=this.chart);var i=e.dataSet.length-e.scroll;return"volume_candle"==this.layout.chartType?i+=this.barFromPixel(t,e):i+=Math.floor((t-e.panel.left-this.micropixels)/this.layout.candleWidth),i},n.ChartEngine.prototype.pixelFromTick=function(t,e){e||(e=this.chart);var i=e.dataSegment,n=e.dataSet,r=this.micropixels,a=i?i.length:0,o=e.panel,s=e.scroll,l=t-n.length+s,h=a?i[l]:null;if(h&&h.leftOffset)return o.left+Math.floor(h.leftOffset+r)-1;var c=0,u=0;return h=a?i[a-1]:null,h&&h.leftOffset&&a<t-n.length+s&&(c=h.leftOffset-h.candleWidth/2,u=a),c+o.left+Math.floor((t-u-n.length+s+.5)*this.layout.candleWidth+r)-1},n.ChartEngine.prototype.pixelFromDate=function(t,e){return this.pixelFromTick(this.tickFromDate(t,e),e)},n.ChartEngine.prototype.priceFromPixel=function(t,e,i){e||(e=this.chart.panel);var n=i||e.yAxis;if(t=n.bottom-t,!n.multiplier)return null;var r=n.low+t/n.multiplier;if(n.semiLog){var a=n.logLow+t*n.logShadow/n.height;r=Math.pow(10,a)}return r},n.ChartEngine.prototype.valueFromPixel=function(t,e,i){return e||(e=this.whichPanel(t)),this.priceFromPixel(t,e,i)},n.ChartEngine.prototype.valueFromPixelUntransform=function(t,e,i){e||(e=this.whichPanel(t)),e||(e=t<=0?this.panels[n.first(this.panels)]:this.panels[n.last(this.panels)]);var r=this.priceFromPixel(t,e,i);return e.chart.untransformFunc&&e.name==e.chart.name&&(r=e.chart.untransformFunc(this,e.chart,r)),r},n.ChartEngine.prototype.pixelFromPriceTransform=function(t,e,i){return this.charts[e.name]&&e.chart.transformFunc&&(t=e.chart.transformFunc(this,e.chart,t,i)),this.pixelFromPrice(t,e,i)},n.ChartEngine.prototype.pixelFromPrice=function(t,e,i){e||(e=this.chart.panel);var n=i||e.yAxis,r=(n.high-t)*n.multiplier;if(n.semiLog){var a=Math.max(t,0),o=Math.log(a)/Math.LN10,s=n.height;r=s-s*(o-n.logLow)/n.logShadow}return r+=n.top},n.ChartEngine.prototype.pixelFromValueAdjusted=function(t,e,i,n){if(this.layout.adj||!this.charts[t.name])return this.pixelFromPriceTransform(i,t,n);var r,a=Math.round(e);return a>0&&a<t.chart.dataSet.length&&(r=t.chart.dataSet[a].ratio)?this.pixelFromPriceTransform(i*r,t,n):this.pixelFromPriceTransform(i,t,n)},n.ChartEngine.prototype.adjustIfNecessary=function(t,e,i){if(this.layout.adj)return i;if(!t||!this.charts[t.name])return i;var n,r=Math.round(e);return r>0&&r<t.chart.dataSet.length&&(n=t.chart.dataSet[r].ratio)?i/n:i},n.ChartEngine.prototype.setTransform=function(t,e,i){t.transformFunc=e,t.untransformFunc=i},n.ChartEngine.prototype.unsetTransform=function(t){delete t.transformFunc,delete t.untransformFunc;for(var e=0;e<t.dataSet.length;e++)t.dataSet[e].transform=null},n.ChartEngine.prototype.undo=function(){this.runPrepend("undo",arguments)||(this.activeDrawing&&(this.activeDrawing.abort(),this.activateDrawing(null),n.clearCanvas(this.chart.tempCanvas,this),this.draw(),n.swapClassName(this.controls.crossX,"stx_crosshair","stx_crosshair_drawing"),n.swapClassName(this.controls.crossY,"stx_crosshair","stx_crosshair_drawing"),n.ChartEngine.drawingLine=!1),this.runAppend("undo",arguments))},n.ChartEngine.prototype.undoStamp=function(t,e){this.undoStamps.push(t),this.dispatch("undoStamp",{before:t,after:e})},n.ChartEngine.prototype.undoLast=function(){this.activeDrawing?this.undo():this.undoStamps.length&&(this.drawingObjects=this.undoStamps.pop(),this.changeOccurred("vector"),this.draw())},n.ChartEngine.prototype.addDrawing=function(t){var e=n.shallowClone(this.drawingObjects);this.drawingObjects.push(t),this.undoStamp(e,n.shallowClone(this.drawingObjects))},n.ChartEngine.prototype.connectTheDots=function(t,e,i,r,a,o){if(o||(o={}),"none"!=o.pattern&&(!0===a&&(a=this.chart.panel),null!==r&&void 0!==r||(r=this.chart.context),!(t.length<4))){var s=0,l=this.chart.canvasHeight,h=0,c=this.chart.width;a&&(l=a.yAxis.bottom,s=a.yAxis.top),r.lineWidth=1.1,"object"==typeof e?(r.strokeStyle=e.color,e.opacity?r.globalAlpha=e.opacity:r.globalAlpha=1,r.lineWidth=parseInt(n.stripPX(e.width),10)):!e||"auto"==e||n.isTransparent(e)?r.strokeStyle=this.defaultColor:r.strokeStyle=e,o.opacity&&(r.globalAlpha=o.opacity),o.lineWidth&&(r.lineWidth=o.lineWidth);var u=null;o.pattern&&(u=o.pattern,"solid"==u?u=null:"dotted"==u?u=[r.lineWidth,r.lineWidth]:"dashed"==u&&(u=[5*r.lineWidth,5*r.lineWidth])),r.beginPath();for(var d=0;d<t.length-2;d+=2){var p=t[d],f=t[d+1],m=t[d+2],g=t[d+3];if(isNaN(p)||isNaN(m)||isNaN(f)||isNaN(g))return;for(var v,y,x,b=0,C=1,w=m-p,S=g-f,T=0;T<4;T++){if(0===T&&(v=-w,y=-(h-p)),1==T&&(v=w,y=c-p),2==T&&(v=-S,y=-(s-f)),3==T&&(v=S,y=l-f),x=y/v,(g||0===g)&&0===v&&y<0)return!1;if(v<0){if(x>C)return!1;x>b&&(b=x)}else if(v>0){if(x<b)return!1;x<C&&(C=x)}}var D=p+b*w,M=f+b*S,k=p+C*w,_=f+C*S;try{u?r.dashedLineTo(D,M,k,_,u):(r.moveTo(D,M),r.lineTo(k,_))}catch(t){}}r.stroke(),r.closePath(),r.globalAlpha=1,r.lineWidth=1}},n.ChartEngine.prototype.plotSpline=function(t,e,i,r,a,s,l){if(l||(l={}),"none"!=l.pattern){!0===s&&(s=this.chart.panel),null!==a&&void 0!==a||(a=this.chart.context),a.save(),a.lineWidth=1.1,"object"==typeof i?(a.strokeStyle=i.color,i.opacity?a.globalAlpha=i.opacity:a.globalAlpha=1,a.lineWidth=parseInt(n.stripPX(i.width),10)):!i||"auto"==i||n.isTransparent(i)?a.strokeStyle=this.defaultColor:a.strokeStyle=i,l.opacity&&(a.globalAlpha=l.opacity),l.lineWidth&&(a.lineWidth=l.lineWidth);var h=null;l.pattern&&(h=l.pattern,"dotted"==h?h=[a.lineWidth,a.lineWidth]:"dashed"==h?h=[5*a.lineWidth,5*a.lineWidth]:(h&&"solid"!=h&&console.log('Unsupported pattern "'+h+'"; defaulting to "solid"'),h=null)),h&&a.setLineDash&&(a.setLineDash(h),a.lineDashOffset=0),a.beginPath(),a.moveTo(t[0],t[1]),o.plotSpline(t,e,a),a.stroke(),a.closePath(),a.restore()}},n.ChartEngine.prototype.repositionDrawing=function(t){var e=this.panels[t.panelName],i=this.adjustIfNecessary(e,this.crosshairTick,this.valueFromPixelUntransform(this.backOutY(n.ChartEngine.crosshairY),e));this.preferences.magnet&&this.magnetizedPrice&&e.name==e.chart.name&&(i=this.adjustIfNecessary(e,this.crosshairTick,this.magnetizedPrice));var r=this.chart.tempCanvas;n.clearCanvas(r,this),t.reposition(r.context,t.repositioner,this.crosshairTick,i),t.measure&&t.measure()},n.ChartEngine.prototype.activateRepositioning=function(t){this.repositioningDrawing=t;t&&(this.draw(),this.repositionDrawing(t)),this.chart.tempCanvas.style.display=t?"block":"none"},n.ChartEngine.prototype.activateDrawing=function(t,e){if(!t)return this.activeDrawing=null,this.chart.tempCanvas.style.display="none",!1;e||(e=this.chart.panel);var i=n.ChartEngine.drawingTools[t];return i||n.Drawing[t]&&(i=n.Drawing[t],n.ChartEngine.registerDrawingTool(t,i)),i&&(this.activeDrawing=new i,this.activeDrawing.construct(this,e),!this.charts[e.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,!1):(this.chart.tempCanvas.style.display="block",!0)},n.ChartEngine.prototype.drawingClick=function(t,e,i){if(n.Drawing){if(!this.activeDrawing){if(!t)return;if(!this.activateDrawing(this.currentVectorParameters.vectorType,t))return}if(this.activeDrawing){if(this.userPointerDown&&!this.activeDrawing.dragToDraw)return void(n.ChartEngine.drawingLine||this.activateDrawing(null));var r=this.tickFromPixel(e,t.chart),a=this.panels[this.activeDrawing.panelName],o=this.adjustIfNecessary(a,r,this.valueFromPixelUntransform(i,a));return this.preferences.magnet&&this.magnetizedPrice&&(o=this.adjustIfNecessary(a,r,this.magnetizedPrice)),this.activeDrawing.click(this.chart.tempCanvas.context,r,o)?this.activeDrawing&&(n.ChartEngine.drawingLine=!1,n.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),n.swapClassName(this.controls.crossX,"stx_crosshair","stx_crosshair_drawing"),n.swapClassName(this.controls.crossY,"stx_crosshair","stx_crosshair_drawing")):(this.changeOccurred("drawing"),n.ChartEngine.drawingLine=!0,n.swapClassName(this.controls.crossX,"stx_crosshair_drawing","stx_crosshair"),n.swapClassName(this.controls.crossY,"stx_crosshair_drawing","stx_crosshair")),!0}return!1}},n.ChartEngine.prototype.whichPanel=function(t){for(var e in this.panels){var i=this.panels[e];if(!i.hidden&&(t>i.top&&t<i.bottom))return i}return null},n.ChartEngine.prototype.mouseup=function(t){if(!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250)return this.changeOccurred("vector"),n.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),void this.draw();this.activateRepositioning(null)}if(this.repositioningBaseline)return this.repositioningBaseline=null,this.chart.panel.yAxis.scroll=this.pixelFromPriceTransform(this.chart.baseline.userLevel,this.chart.panel)-(this.chart.panel.yAxis.top+this.chart.panel.yAxis.bottom)/2,void this.draw();var e=this.userPointerDown;if(this.userPointerDown=!1,this.displayInitialized){if(this.grabbingScreen=!1,""!==this.openDialog)return void(n.ChartEngine.insideChart&&n.unappendClassName(this.container,"stx-drag-chart"));if(this.grabOverrideClick)return this.swipeRelease(),n.unappendClassName(this.container,"stx-drag-chart"),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),void this.updateChartAccessories();if(n.ChartEngine.insideChart&&n.unappendClassName(this.container,"stx-drag-chart"),n.ChartEngine.resizingPanel)return void this.releaseHandle({});if(t||(t=event),t.which&&t.which>=2||t.button&&t.button>=2||t.ctrlKey)return this.anyHighlighted&&!this.bypassRightClick?(this.rightClickHighlighted(),t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),t.stopPropagation(),!1):(this.dispatch("rightClick",{stx:this,panel:this.currentPanel,x:r,y:i}),!0);if(!(t.clientX<this.left||t.clientX>this.right||t.clientY<this.top||t.clientY>this.bottom)){var i=this.backOutY(t.clientY),r=this.backOutX(t.clientX);!e||this.longHoldTookEffect&&!this.activeDrawing||this.drawingClick(this.currentPanel,r,i),this.activeDrawing||this.longHoldTookEffect||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:r,y:i}),this.runAppend("mouseup",arguments)}}}},n.ChartEngine.prototype.grabbingHand=function(){this.allowScroll&&this.grabbingScreen&&(n.touchDevice||n.appendClassName(this.container,"stx-drag-chart"))},n.ChartEngine.prototype.mousedown=function(t){if(!this.runPrepend("mousedown",arguments)&&(this.grabOverrideClick=!1,this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!(this.editingAnnotation||(t||(t=event),t.which&&t.which>=2||t.button&&t.button>=2)))){var e=this.container.getBoundingClientRect();if(this.top=e.top,this.left=e.left,this.right=this.left+this.width,this.bottom=this.top+this.height,!(t.clientX>=this.left&&t.clientX<=this.right&&t.clientY>=this.top&&t.clientY<=this.bottom))return void(n.ChartEngine.insideChart=!1);if(n.ChartEngine.insideChart=!0,this.currentPanel){this.manageTouchAndMouse&&t&&t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),this.mouseTimer=Date.now(),
this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0;for(var i=this.currentPanel.chart,r=0;r<this.drawingObjects.length;r++){var a=this.drawingObjects[r];if(a.highlighted){if(this.cloneDrawing){var o=n.ChartEngine.drawingTools[a.name],s=new o;return s.reconstruct(this,a.serialize()),this.drawingObjects.push(s),this.activateRepositioning(s),void(s.repositioner=a.repositioner)}return void this.activateRepositioning(a)}}if(("baseline_delta"==this.layout.chartType||"baseline_delta_mountain"==this.layout.chartType)&&!1!==i.baseline.userLevel){var l=this.valueFromPixelUntransform(this.cy-5,this.currentPanel),h=this.valueFromPixelUntransform(this.cy+5,this.currentPanel),c=this.chart.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10);if(i.baseline.actualLevel<l&&i.baseline.actualLevel>h&&this.cx>c)return void(this.repositioningBaseline={lastDraw:Date.now()})}this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw||(this.grabbingScreen=!0,i.spanLock=!1,this.yToleranceBroken=!1,t||(t=event),this.grabStartX=t.clientX,this.grabStartY=t.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=i.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartZoom=this.whichYAxis(this.currentPanel).zoom,this.grabStartPanel=this.currentPanel,setTimeout(function(t){return function(){t.grabbingHand()}}(this),100),this.swipeStart(i),this.longHoldTime&&this.startLongHoldTimer(),this.runAppend("mousedown",arguments))}}},n.ChartEngine.prototype.startLongHoldTimer=function(){var t=this;this.cancelLongHold=!1,this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),this.longHoldTimeout=setTimeout(function(){t.cancelLongHold||(t.dispatch("longhold",{stx:t,panel:t.currentPanel,x:t.cx,y:t.cy}),t.longHoldTookEffect=!0)},this.longHoldTime)},n.ChartEngine.prototype.changeVectorType=function(t){this.currentVectorParameters.vectorType=t,n.ChartEngine.drawingLine&&this.undo(),this.setCrosshairColors(),n.ChartEngine.insideChart&&this.doDisplayCrosshairs()},n.ChartEngine.prototype.changeVectorParameter=function(t,e){"axisLabel"==t?e="true"===e.toString()||Number(e):"lineWidth"!=t&&"fontSize"!=t||(e=Number(e));var i=this.currentVectorParameters;return"undefined"!=typeof i[t]?(i[t]=e,!0):"font"==t.substr(0,4)&&(t=t.substr(4).toLowerCase(),"family"==t&&"default"==e.toLowerCase()&&(e=null),i=i.annotation.font,"undefined"!=typeof i[t])&&(i[t]=e,!0)},n.ChartEngine.prototype.rightClickOverlay=function(t,e){if(!this.runPrepend("rightClickOverlay",arguments)){var i=this.overlays[t];i.editFunction?i.editFunction(e):this.removeOverlay(t),this.runAppend("rightClickOverlay",arguments)}},n.ChartEngine.prototype.removeOverlay=function(t){if(!this.runPrepend("removeOverlay",arguments)){var e=this.overlays[t];for(var i in this.overlays){var r=this.overlays[i],a=["Field"];n.Studies&&(a=n.Studies.getFieldInputs(r));for(var o=0;o<a.length;o++)e.outputMap[r.inputs[a[o]]]&&this.removeOverlay(r.name)}if(n.Studies){var s=this.layout.studies[t];n.deleteRHS(n.Studies.studyPanelMap,s),e&&this.cleanupRemovedStudy(e)}delete this.overlays[t],this.displaySticky(),this.createDataSet(),this.changeOccurred("layout"),this.runAppend("removeOverlay",arguments)}},n.ChartEngine.prototype.addSeries=function(t,e,i){function r(e,i){if(i.parameters.color){var r=e.getSeriesRenderer("_generic_series");r||(r=e.setSeriesRenderer(new n.Renderer.Lines({params:{panel:i.parameters.panel,type:"legacy",name:"_generic_series",overChart:!0}}))),r.attachSeries(t,i.parameters).ready()}}function a(e){return function(a){a.error||(n.addMemberToMasterdata(l,t,a.quotes),r(l,o)),l.currentlyImporting||l.dispatch("symbolChange",{stx:l,symbol:e.symbol,symbolObject:e.symbolObject,action:"add-series"}),i&&i.call(l,a.error,o)}}if(!this.runPrepend("addSeries",arguments)){var o={parameters:e?n.clone(e):{},yValueCache:[],display:t};e=o.parameters,n.ensureDefaults(e,{chartName:this.chart.name,symbolObject:{symbol:t},chartType:"line",panel:this.chart.panel.name}),"display"in e&&(o.display=e.display),e.isComparison&&(e.shareYAxis=!0);var s=this.charts[e.chartName];s.series[t]=o;var l=this;e.isComparison&&this.setComparison(!0,s);var h=s.masterData;h||(h=s.masterData=this.masterData=[]);var c=h.length;if(e.data&&!e.data.useDefaultQuoteFeed)n.addMemberToMasterdata(this,t,e.data),r(this,o),i&&i.call(this,null,o);else if(this.quoteDriver&&!1!==e.loadData){var u=this.quoteDriver,d=u.makeParams(t,e.symbolObject,s);c&&(d.startDate=h[0].DT,d.endDate=this.convertToDataZone(new Date)),d.stx.isEquationChart(d.symbol)?n.fetchEquationChart(d,a(d)):n.ChartEngine.Driver.fetchData(n.QuoteFeed.SERIES,u.quoteFeed,d,a(d))}else r(this,o),i&&i.call(this,null,o);return this.runAppend("addSeries",arguments),o}},n.ChartEngine.prototype.isEquationChart=function(t){return!(!this.allowEquations||!n.computeEquationChart)&&!(!t||"="!=t[0])},n.ChartEngine.prototype.deleteSeries=function(t,e){if(!this.runPrepend("deleteSeries",arguments)){e||(e=this.chart);var i=e.series[t].parameters.symbolObject;delete e.series[t];var n=!1;for(var r in e.series)e.series[r].parameters.isComparison&&(n=!0);n||this.setComparison(!1,e),this.createDataSet(),this.dispatch("symbolChange",{stx:this,symbol:t,symbolObject:i,action:"remove-series"}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)}},n.ChartEngine.prototype.removeSeries=function(t,e){if(!this.runPrepend("removeSeries",arguments)){e||(e=this.chart);var i=!1;for(var n in e.seriesRenderers)for(var r=e.seriesRenderers[n],a=r.seriesParams.length-1;a>=0;a--){var o=r.seriesParams[a];o.field===t&&(r.removeSeries(t),i=!0)}i||this.deleteSeries(t,e),this.draw(),this.runAppend("removeSeries",arguments)}},n.ChartEngine.prototype.isDailyInterval=function(t){return"day"==t||("week"==t||"month"==t)},n.ChartEngine.prototype.setPeriodicity=function(t,e){if(!this.runPrepend("setPeriodicity",arguments)){var i,n,r=null;if(t&&"object"==typeof t?(i=t.period,n=t.interval,r=t.timeUnit):(i=t,n=e,e=arguments[arguments.length-1],arguments.length>3&&(r=arguments[2])),"function"!=typeof e&&(e=null),n||(n=1),i){var a=this.layout,o=a.candleWidth;delete a.setSpan;var s=this.isDailyInterval(n),l=this.isDailyInterval(a.interval);s?r=null:"tick"==n?r=null:r||(r="minute");var h=!1;if(this.chart.symbol&&(this.dontRoll||!l?a.interval!=n&&(h=!0):h=!0,r!=a.timeUnit&&(h=!0)),a.periodicity=i,a.interval=n,a.timeUnit=r,h)if(this.changeOccurred("layout"),this.quoteDriver)for(var c in this.charts)this.charts[c].symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:this.charts[c].symbol,symbolObject:this.charts[c].symbolObject,chart:this.charts[c]},e):this.newChart(this.charts[c].symbol,null,this.charts[c],e));else this.dataCallback?(this.dataCallback(),e&&e(null)):console.log("cannot change periodicity because neither dataCallback or quoteDriver are set");else{var u,d;for(u in this.charts){d=this.charts[u];var p,f=d.dataSegment,m=d.dataSet,g=d.maxTicks,v=d.scroll,y=f?f.length:0,x=m?m.length:0,b=Math.round(d.maxTicks/2);this.setCandleWidth(o,d);var C=!0,w=!1;if(v<=g?C=!1:f&&!f[b]&&(C=!1,w=v-x),C&&y>0&&(g<(Math.round(this.chart.width/o-.499)-1)/2&&(b=y-1),b>=y?(p=f[y-1].DT,b=y-1):p=f[b].DT),this.createDataSet(),C){if(y>0)for(var S=x-1;S>=0;S--){var T=m[S].DT;if(T.getTime()<p.getTime()){d.scroll=x-S+b;break}}}else if(w)d.scroll=m.length+w;else{var D=Math.round(this.preferences.whitespace/o);d.scroll=g-D-1}}if(this.displayInitialized&&this.draw(),this.changeOccurred("layout"),this.quoteDriver)for(u in this.charts)d=this.charts[u],d.symbol&&d.moreAvailable&&this.quoteDriver.checkLoadMore(d);e&&e(null),this.runAppend("setPeriodicity",arguments)}}}},n.ChartEngine.prototype.setPeriodicityV2=function(t,e,i,n){"function"==typeof i&&(n=i,i=null),this.runPrepend("setPeriodicityV2",arguments)||(this.setPeriodicity(t,e,i,n),this.runAppend("setPeriodicityV2",arguments))},n.ChartEngine.prototype.drawVectors=function(){if(!this.vectorsShowing&&!this.runPrepend("drawVectors",arguments)){if(this.vectorsShowing=!0,!this.chart.hideDrawings){var t,e,i={};for(e=0;e<this.drawingObjects.length;e++){var n=this.drawingObjects[e];this.repositioningDrawing!==n&&(t=n.panelName,this.panels[n.panelName]&&!this.panels[n.panelName].hidden&&(i[t]||(i[t]=[]),i[t].push(n)))}for(t in i){this.startClip(t);var r=i[t];for(e=0;e<r.length;e++)r[e].render(this.chart.context);this.endClip()}}this.runAppend("drawVectors",arguments)}},n.ChartEngine.NONE=0,n.ChartEngine.CLOSEUP=1,n.ChartEngine.CLOSEDOWN=2,n.ChartEngine.CLOSEEVEN=4,n.ChartEngine.CANDLEUP=8,n.ChartEngine.CANDLEDOWN=16,n.ChartEngine.CANDLEEVEN=32,n.ChartEngine.prototype.displayChart=function(t){function e(t,e,i,r){var a=e.color;if(i&&(a=e.borderLeftColor,a||(a=e.borderLeftColor),!a))return null;if(!r)return a;var o=t.pixelFromPrice(p.chart.highValue,p);isNaN(o)&&(o=0);var s=e.backgroundColor;if(a&&!n.isTransparent(a)){var l=t.chart.context.createLinearGradient(0,o,0,2*p.yAxis.bottom-o);return l.addColorStop(0,a),l.addColorStop(1,s),l}return s}var i=this.layout.candleWidth-t.tmpWidth<2&&t.tmpWidth<=3,r=1,a=2,o=4,s=8,l=16,h=32;if(!this.runPrepend("displayChart",arguments)){var c=this.layout,u=c.chartType,d=null,p=t.panel,f=this.containerColor;if(this.controls.baselineHandle.style.display="none",!p.hidden){var m,g,v,y,x,b=this.noWicksOnCandles;t.customChart&&(t.customChart.chartType&&(u=t.customChart.chartType),t.customChart.colorFunction&&(d=t.customChart.colorFunction));var C=this.chart.baseLegendColors=[];t.state.chartType||(t.state.chartType={});var w,S=t.state.chartType.pass={},T=this.chart.defaultPlotField;if("kagi"==c.aggregationType&&"none"!=u)this.drawKagiSquareWave(p,"stx_kagi_up","stx_kagi_down"),C.push(this.getCanvasColor("stx_kagi_up")),C.push(this.getCanvasColor("stx_kagi_down"));else if("pandf"==c.aggregationType&&"none"!=u)this.drawPointFigureChart(p,"stx_pandf_up","X"),C.push(this.getCanvasColor("stx_pandf_up")),this.drawPointFigureChart(p,"stx_pandf_down","O"),C.push(this.getCanvasColor("stx_pandf_down"));else if("line"==u)this.drawLineChart(p,"stx_line_chart");else if("step"==u)this.drawLineChart(p,"stx_line_chart",null,{step:!0});else if("mountain"==u)this.startClip(p.name),C=null,this.drawMountainChart(p),this.endClip();else if("colored_mountain"==u||"colored_line"==u){this.startClip(p.name),w="colored_mountain"==u?"drawMountainChart":"drawLineChart";var D="stx_colored_mountain_chart";m=this.getCanvasColor("stx_line_up"),g=this.getCanvasColor("stx_line_down"),v=this.getCanvasColor("stx_line_chart"),d||(d=function(t,e){return e.Close>e.iqPrevClose?m:e.Close<e.iqPrevClose?g:v});var M=this[w](p,D,d);for(var k in M)C.push(k);this.endClip()}else if("wave"==u)this.drawWaveChart(p);else if("bar"==u||"hlc"==u)this.startClip(p.name),w="bar"==u?"drawBarChartHighPerformance":"drawHLCChart",this[w](p,"stx_bar_chart"),this.endClip();else if("colored_bar"==u||"colored_hlc"==u){if(this.startClip(p.name),w="colored_bar"==u?"drawBarChartHighPerformance":"drawHLCChart",d){var _="colored_hlc"==u?"hlc":null,E=this.drawBarChart(p,"stx_bar_chart",d,{type:_});for(var A in E)C.push(A)}else this[w](p,"stx_bar_up",r),C.push(this.getCanvasColor("stx_bar_up")),this[w](p,"stx_bar_down",a),C.push(this.getCanvasColor("stx_bar_down")),S.even&&(this[w](p,"stx_bar_even",o),C.push(this.getCanvasColor("stx_bar_even")));this.endClip()}else if("hollow_candle"==u||"volume_candle"==u){if(this.startClip(p.name),d)b[c.aggregationType]||this.drawShadows(p,d),this.drawCandles(p,d,!1),this.drawCandles(p,d,!0);else{b[c.aggregationType]||(this.drawShadowsHighPerformance(p,"stx_hollow_candle_up",r),this.drawShadowsHighPerformance(p,"stx_hollow_candle_down",a),S.even&&this.drawShadowsHighPerformance(p,"stx_hollow_candle_even",o));var I=this.getCanvasColor("stx_hollow_candle_up"),P=this.getCanvasColor("stx_hollow_candle_down"),F=this.getCanvasColor("stx_hollow_candle_even"),L=this.styles.stx_hollow_candle_up.borderColor,H=this.styles.stx_hollow_candle_down.borderColor,N=this.styles.stx_hollow_candle_even.borderColor,O=n.isTransparent(I),R=n.isTransparent(P),U=n.isTransparent(F);this.drawCandlesHighPerformance(p,I,O?L:"transparent",r|l),this.drawCandlesHighPerformance(p,P,R?H:"transparent",a|l),S.even&&this.drawCandlesHighPerformance(p,F,U?N:"transparent",o|l),this.drawCandlesHighPerformance(p,f,O?L:I,r|s),this.drawCandlesHighPerformance(p,f,R?H:P,a|s),S.even&&this.drawCandlesHighPerformance(p,f,U?N:F,o|s),C.push(I),C.push(P),S.even&&C.push(F)}this.endClip()}else if("candle"==u){if(this.startClip(p.name),d)b[c.aggregationType]||this.drawShadows(p,d),this.drawCandles(p,d,!1),i||this.drawCandles(p,d,!0);else{if(!b[c.aggregationType]){var B=this.getCanvasColor("stx_candle_shadow_up"),X=this.getCanvasColor("stx_candle_shadow_down");B!=X?(this.drawShadowsHighPerformance(p,"stx_candle_shadow_up",s),this.drawShadowsHighPerformance(p,"stx_candle_shadow_down",l),this.drawShadowsHighPerformance(p,"stx_candle_shadow",h)):this.drawShadowsHighPerformance(p,"stx_candle_shadow")}x=this.canvasStyle("stx_candle_up");var V=x.color;i&&n.isTransparent(x.color)&&(x.color=x.borderLeftColor),this.drawCandlesHighPerformance(p,e(this,x,!1),e(this,x,!i),s),C.push(x.color),x.color=V,x=this.canvasStyle("stx_candle_down"),V=x.color,i&&n.isTransparent(x.color)&&(x.color=x.borderLeftColor),this.drawCandlesHighPerformance(p,e(this,x,!1),e(this,x,!i),l),C.push(x.color),x.color=V}this.endClip()}else if("histogram"==u){if(this.startClip(p.name),d)this.drawCandles(p,d,!1,!0),i||this.drawCandles(p,d,!0,!0);else for(var z=[["stx_histogram_up",s],["stx_histogram_down",l],["stx_histogram_even",h]],j=0;j<z.length;j++){var W=z[j][1],q=z[j][0];x=this.canvasStyle(q),this.drawCandlesHighPerformance(p,e(this,x,!1,!0),e(this,x,!i,!0),W,!0),C.push(x.color)}this.endClip()}else if("baseline_delta"==u){if(null!==(y=t.baseline.actualLevel)){this.startClip(p.name),this.setStyle("stx_baseline_trace","opacity",0),this.drawLineChart(p,"stx_baseline_trace"),y=this.pixelFromPriceTransform(y,t.panel);var Q={over:"stx_baseline_up",under:"stx_baseline_down"};for(var Y in Q){var $={panelName:"chart",band:T,threshold:t.baseline.actualLevel,color:this.getCanvasColor(Q[Y]),direction:"over"==Y?1:-1,edgeHighlight:this.getCanvasColor(Q[Y]),edgeParameters:{pattern:"solid",lineWidth:parseInt(this.canvasStyle(Q[Y]).width,10)+.1,opacity:1}},G=$.color;if(G&&"transparent"!=G){var Z=t.context.createLinearGradient(0,"over"==Y?0:2*y,0,y);Z.addColorStop(0,n.hexToRgba(G,60)),Z.addColorStop(1,n.hexToRgba(G,10)),$.color=Z,$.opacity=1}n.preparePeakValleyFill(this,t.dataSegment,$),C.push(G)}this.plotLine(0,1,y,y,f,"line",t.context,!0,{pattern:"solid",lineWidth:"1.1",opacity:1}),this.plotLine(0,1,y,y,this.getCanvasColor("stx_baseline"),"line",t.context,!0,{pattern:"dotted",lineWidth:"2.1",opacity:.5}),!1!==this.chart.baseline.userLevel&&(this.controls.baselineHandle.style.top=y-parseInt(getComputedStyle(this.controls.baselineHandle).height,10)/2+"px",this.controls.baselineHandle.style.left=this.chart.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10)+"px",this.controls.baselineHandle.style.display="block"),this.endClip()}}else if("baseline_delta_mountain"==u){if(null!==(y=t.baseline.actualLevel)){this.startClip(p.name),this.drawMountainChart(p,"stx_baseline_delta_mountain"),this.endClip(),this.startClip(p.name),this.setStyle("stx_baseline_trace","opacity",0),this.drawLineChart(p,"stx_baseline_trace"),y=this.pixelFromPriceTransform(y,t.panel);var K={over:"stx_baseline_up",under:"stx_baseline_down"};for(var J in K){var tt={panelName:"chart",band:T,threshold:t.baseline.actualLevel,color:this.getCanvasColor(K[J]),direction:"over"==J?1:-1,edgeHighlight:this.getCanvasColor(K[J]),edgeParameters:{pattern:"solid",lineWidth:parseInt(this.canvasStyle(K[J]).width,10)+.1,opacity:1}};C.push(tt.color),tt.color="transparent",n.preparePeakValleyFill(this,t.dataSegment,tt)}this.plotLine(0,1,y,y,f,"line",t.context,!0,{pattern:"solid",lineWidth:"1.1",opacity:1}),this.plotLine(0,1,y,y,this.getCanvasColor("stx_baseline"),"line",t.context,!0,{pattern:"dotted",lineWidth:"2.1",opacity:.5}),!1!==this.chart.baseline.userLevel&&(this.controls.baselineHandle.style.top=y-parseInt(getComputedStyle(this.controls.baselineHandle).height,10)/2+"px",this.controls.baselineHandle.style.left=this.chart.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10)+"px",this.controls.baselineHandle.style.display="block"),this.endClip()}}else"scatterplot"==u?(this.startClip(p.name),this.scatter(p),this.endClip()):u&&"none"!=u?(console.log('Invalid chart layout.chartType: "'+u+'". Defaulting to Line Chart.'),c.chartType="line",this.drawLineChart(p,"stx_line_chart")):this.chart.baseLegendColors=null;this.runAppend("displayChart",arguments)}}},n.ChartEngine.prototype.calculateATR=function(t,e,i){i||(i=t.dataSet);var n=t.state.calculations.atr;n||(n=t.state.calculations.atr={}),e||(e=20);var r=[];n.accum&&(r=n.accum);for(var a,o=0;o<i.length;o++){var s=i[o];if(a=o?i[o-1]:n.q1){var l=Math.max(s.High-s.Low,Math.abs(s.High-a.Close),Math.abs(s.Low-a.Close));if(r.length<e){if(r.push(l)==e){for(var h=0,c=0;c<r.length;c++)h+=r[c];s.atr=h/e}}else s.atr=(a.atr*(e-1)+l)/e;s.trueRange=l}}t.state.calculations.atr={accum:r,q1:a}},n.ChartEngine.prototype.calculateMedianPrice=function(t,e){e||(e=t.dataSet);for(var i,n=0;n<e.length;++n)i=e[n],i["hl/2"]=(i.High+i.Low)/2},n.ChartEngine.prototype.calculateTypicalPrice=function(t,e){e||(e=t.dataSet);for(var i,n=0;n<e.length;++n)i=e[n],i["hlc/3"]=(i.High+i.Low+i.Close)/3},n.ChartEngine.prototype.calculateWeightedClose=function(t,e){e||(e=t.dataSet);for(var i,n=0;n<e.length;++n)i=e[n],i["hlcc/4"]=(i.High+i.Low+2*i.Close)/4},n.ChartEngine.prototype.calculateOHLC4=function(t,e){e||(e=t.dataSet);for(var i,n=0;n<e.length;++n)i=e[n],i["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/4},n.ChartEngine.prototype.currentQuote=function(){if(!this.chart.dataSet)return null;for(var t=this.chart.dataSet.length-1;t>=0;t--)if(this.chart.dataSet[t])return this.chart.dataSet[t];return null},n.ChartEngine.prototype.correctIfOffEdge=function(){if(!this.runPrepend("correctIfOffEdge",arguments)){for(var t in this.charts){var e=this.charts[t],i=e.dataSet,r=e.maxTicks,a=this.layout,o=Math.min(this.minimumLeftBars,r);if(e.allowScrollPast){var s=r-o;o>i.length&&(s=r-i.length),e.scroll-s>i.length&&(e.scroll=i.length+s),e.scroll<=o&&(e.scroll=o,this.micropixels=0)}else e.scroll<o&&(e.scroll=o),e.scroll>i.length&&(e.scroll=i.length);if(!1===e.allowScrollFuture){var l=0,h=!n.ChartEngine.chartShowsHighs(a.chartType);if(!("roundRectArrow"!=this.yaxisLabelStyle||h&&this.extendLastTick&&0!==e.yaxisPaddingRight)){l=.66*(this.getCanvasFontSize("stx_yaxis")+2*3)}var c=r-Math.round(l/a.candleWidth)-1;e.scroll<c&&(e.scroll=c,this.micropixels=0)}}this.runAppend("correctIfOffEdge",arguments)}},n.ChartEngine.prototype.createDataSegment=function(t){if(!this.runPrepend("createDataSegment",arguments)){var e;for(var i in this.charts){e=this.charts[i],t&&(e=t),e.isComparison&&n.Comparison.createComparisonSegmentInner(this,e);var r=e.dataSet,a=e.baseline,o=e.scroll,s=e.maxTicks,l=this.layout,h=l.candleWidth;a.actualLevel=a.userLevel?a.userLevel:a.defaultLevel;for(var c,u=a.includeInDataSegment&&!n.ChartEngine.chartShowsHighs(this.layout.chartType),d=e.dataSegment=[],p=r.length-1-o-1,f=e.defaultPlotField,m=-1;m<o&&m<s;m++)if(p++,-1!=m||u)if(p<r.length&&p>=0){if(c=r[p],c.candleWidth&&(c.candleWidth=null,c.leftOffset=null),d.push(c),null===a.actualLevel&&m>=0)if(f&&"Close"!=f){var g=r[p-1];(g[f]||0===g[f])&&(a.actualLevel=g[f])}else(c.iqPrevClose||0===c.iqPrevClose)&&(a.actualLevel=c.iqPrevClose)}else p<0&&d.push(null);if("volume_candle"==l.chartType){for(var v=0,y=e.width-(s-d.length-1)*this.layout.candleWidth,x=0;x<d.length;x++)(c=d[x])&&(v+=c.Volume);for(var b=0,C=0;C<d.length;C++)c=d[C],c?c.Volume?(c.candleWidth=y*c.Volume/v,c.leftOffset=b+c.candleWidth/2,b+=c.candleWidth):(c.candleWidth=h,c.leftOffset=b+h/2,b+=h):b+=h}if(t)break}e&&e.isComparison&&this.clearPixelCache(),this.headsUpHR(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},n.ChartEngine.prototype.leftTick=function(){return this.chart.dataSet.length-this.chart.scroll},n.ChartEngine.prototype.getStartDateOffset=function(){for(var t=0;t<this.chart.dataSegment.length;t++)if(this.chart.dataSegment[t])return t;return 0},n.ChartEngine.prototype.setStartDate=function(t){for(var e=0;e<this.chart.dataSet.length;e++){if(this.chart.dataSet[e].DT.getTime()==t.getTime())return this.chart.scroll=this.chart.dataSet.length-e,void this.draw()}},n.ChartEngine.prototype.updateListeners=function(t){for(var e in this.plugins){var i=this.plugins[e];i.display&&i.listener&&i.listener(this,t)}},n.ChartEngine.prototype.clearPixelCache=function(){for(var t in this.panels){var e=this.panels[t];e.cacheHigh=null,e.cacheLow=null,e.cacheLeft=1e6,e.cacheRight=-1}for(var i in this.charts){var n=this.charts[i];if(n.dataSet)for(var r=0;r<n.dataSet.length;r++)n.dataSet[r].cache={}}},n.ChartEngine.prototype.createYAxisLabel=function(t,e,i,r,a,o,s){if(!1!==t.yAxis.drawPriceLabels){var l=s||t.yAxis,h=o||this.chart.context,c=3,u=this.getCanvasFontSize("stx_yaxis")+2*c;this.canvasFont("stx_yaxis",h);var d=l.displayBorder;!1===this.axisBorders&&(d=!1),!0===this.axisBorders&&(d=!0);var p,f=d?3:0;try{p=h.measureText(e).width+f+2*c}catch(t){p=l.width}var m=l.left-c+3,g=m+c+f,v=3;"left"===(null===l.position?t.chart.yAxis.position:l.position)&&(m=l.left+l.width+c-3,p*=-1,g=m,v=-3,h.textAlign="right"),i+u/2>l.bottom&&(i=l.bottom-u/2),i-u/2<l.top&&(i=l.top+u/2),"undefined"==typeof n[this.yaxisLabelStyle]&&(this.yaxisLabelStyle="roundRectArrow");var y=this.yaxisLabelStyle;l.yaxisLabelStyle&&(y=l.yaxisLabelStyle);var x={ctx:h,x:m,y:i,top:i-u/2,width:p,height:u,radius:v,backgroundColor:r,fill:!0,stroke:!1,margin:{left:g-m,top:1},txt:e,color:a};n[y](x)}},n.ChartEngine.prototype.createXAxisLabel=function(t,e,i,r,a,o){var s=this.chart.context,l=2,h="stx-float-date",c=this.getCanvasFontSize(h)+2*l;this.canvasFont(h,s);var u;try{u=s.measureText(e).width+2*l}catch(t){u=0}var d=t.top+t.height-c;if(!(i+u/2<t.left||i-u/2>t.right)){o||(i+u/2>t.right&&(i=t.right-u/2),i-u/2<t.left&&(i=t.left+u/2)),s.fillStyle=r,n.roundRect({ctx:s,x:i-u/2,top:d,width:u,height:c,radius:3,fill:!0});var p=t.bottom-t.yAxis.bottom-c;s.beginPath(),o?(s.moveTo(i-p,d),s.lineTo(i,d-p-1),s.lineTo(i+p,d),s.closePath(),s.fill()):(s.moveTo(i,d),s.lineTo(i,d-p),s.strokeStyle=r,s.stroke()),s.textBaseline="top",s.fillStyle=a||n.chooseForegroundColor(r),s.fillStyle==r&&("#FFFFFF"==r.toUpperCase()?s.fillStyle="#000000":s.fillStyle="#FFFFFF"),s.fillText(e,i-u/2+l,d+l)}},n.ChartEngine.prototype.drawCurrentHR=function(){if(!this.runPrepend("drawCurrentHR",arguments)){var t,e;for(var i in this.charts){var r=this.charts[i],a=r.panel,o=a.yAxis;if(!a.hidden&&(!1!==o.drawCurrentPriceLabel&&(!r.customChart||"none"!=r.customChart.chartType))){var s=o.whichSet;s||(s="dataSet");var l=r[s].length,h=this.layout.candleWidth;if("dataSegment"==s)for(;l>(r.width-this.micropixels+h/2+1)/h;)l--;if(l&&r[s][l-1]){var c=r.defaultPlotField;c&&!n.ChartEngine.chartShowsHighs(this.layout.chartType)||(c="Close");var u=r[s][l-1][c],d=u;if("dataSet"==s&&r.currentQuote)d=r.currentQuote[c];else if(r[s].length>=2){var p=r[s][l-2];p&&(u=p[c])}d<u?(t=this.canvasStyle("stx_current_hr_down").backgroundColor,e=this.canvasStyle("stx_current_hr_down").color):(t=this.canvasStyle("stx_current_hr_up").backgroundColor,e=this.canvasStyle("stx_current_hr_up").color),r.transformFunc&&(d=r.transformFunc(this,r,d));var f,m=Math.max(a.yAxis.printDecimalPlaces,a.chart.decimalPlaces);(o.maxDecimalPlaces||0===o.maxDecimalPlaces)&&(m=Math.min(m,o.maxDecimalPlaces)),f=o.priceFormatter?o.priceFormatter(this,a,d,m):this.formatYAxisPrice(d,a,m);var g=this.pixelFromPrice(d,a);this.createYAxisLabel(a,f,g,t,e),!0===this.preferences.currentPriceLine&&this.isHome()&&(a.chart.context.globalCompositeOperation="destination-over",this.plotLine(a.left,a.right,g,g,t,"line",a.chart.context,a,{pattern:"dashed",lineWidth:1,opacity:.8}),a.chart.context.globalCompositeOperation="source-over")}}}this.runAppend("drawCurrentHR",arguments)}},n.ChartEngine.prototype.getDefaultColor=function(){this.defaultColor="#000000";for(var t=null,e=this.chart.container;!t||n.isTransparent(t);){var i=getComputedStyle(e);if(!i)return;if(t=i.backgroundColor,n.isTransparent(t)&&(t="transparent"),!(e=e.parentNode)||!e.tagName)break}if(t)if("transparent"==t&&(t="#FFFFFF"),this.containerColor=t,n.isTransparent(t))this.defaultColor="#000000";else{var r=n.hsv(t),a=r[2];this.defaultColor=a>.65?"#000000":"#FFFFFF"}else this.containerColor="#FFFFFF"},n.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),this.pendingAsyncs.push(!0)},n.ChartEngine.prototype.registerChartDrawnCallback=function(t){return this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(t),{fc:t}},n.ChartEngine.prototype.unregisterChartDrawnCallback=function(t){for(var e=0;e<this.asyncCallbacks.length;e++)if(this.asyncCallbacks[e]==t.fc)return void this.asyncCallbacks.splice(e,1)},n.ChartEngine.prototype.makeAsyncCallbacks=function(){if(this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var t=0;t<this.asyncCallbacks.length;t++)this.asyncCallbacks[t]()},n.ChartEngine.prototype.completeAsyncAction=function(){this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},n.ChartEngine.prototype.draw=function(){if(this.debug(),this.chart.canvas&&this.chart.dataSet&&this.chart.canvasHeight&&(this.offset=this.layout.candleWidth*this.candleWidthPercent/2,n.clearCanvas(this.chart.canvas,this),this.masterData&&this.masterData.length&&!this.runPrepend("draw",arguments))){this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[];var t,e,i,r;for(i in this.charts){e=this.charts[i],this.correctIfOffEdge(),this.createDataSegment();var a=this.createXAxis(e);this.initializeDisplay(e),this.rendererAction(e,"calculate"),this.renderYAxis(e),this.drawXAxis(e,a),e.tmpWidth=Math.floor(this.layout.candleWidth*this.candleWidthPercent),e.tmpWidth%2==0&&(e.tmpWidth+=1,e.tmpWidth>this.layout.candleWidth&&(e.tmpWidth-=2)),e.tmpWidth<.5&&(e.tmpWidth=.5);for(t in this.plugins)r=this.plugins[t],r.display&&r.drawUnder&&r.drawUnder(this,e);this.rendererAction(e,"yaxis"),this.rendererAction(e,"underlay"),n.Studies&&n.Studies.displayStudies(this,e,!0),this.displayChart(e),n.Studies&&n.Studies.displayStudies(this,e,!1),this.rendererAction(e,"overlay")}for(i in this.charts){e=this.charts[i];for(t in this.plugins)r=this.plugins[t],r.display&&r.drawOver&&r.drawOver(this,e)}for(var o in this.panels)this.panels[o].hidden||this.plotYAxisText(this.panels[o]);for(var s=0;s<this.yAxisLabels.length;s++){var l=this.yAxisLabels[s];"series"==l.src&&l.args[6]&&!1===l.args[6].drawSeriesPriceLabels||this.createYAxisLabel.apply(this,l.args)}this.createCrosshairs(),this.drawVectors(),this.drawCurrentHR(),this.displayInitialized=!0,this.controls.home&&(this.controls.home.style.display=this.isHome()?"none":"block"),this.positionMarkers();for(i in this.charts)e=this.charts[i],this.quoteDriver&&this.quoteDriver.checkLoadMore(e);this.runAppend("draw",arguments),this.makeAsyncCallbacks()}},n.ChartEngine.prototype.adjustBackingStore=function(t,e){this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1);var i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,r=this.devicePixelRatio/i;if(!this.useBackingStore)return void(this.devicePixelRatio=this.adjustedDisplayPixelRatio=1);if(!n.isAndroid||n.is_chrome){var a=t.width,o=t.height;t.width=a*r,t.height=o*r,t.style.width=a+"px",t.style.height=o+"px",e.scale(r,r),this.adjustedDisplayPixelRatio=r,this.backing={ratio:r,width:t.width,height:t.height,styleWidth:a,styleHeight:o}}},n.ChartEngine.prototype.reconstituteBackingStore=function(){if(this.useBackingStore){var t=this.chart.canvas;t.width!=this.backing.width&&(t.width=this.backing.width,t.height=this.backing.height,t.context.scale(this.backing.ratio,this.backing.ratio),this.adjustedDisplayPixelRatio=this.backing.ratio,this.draw())}},n.ChartEngine.prototype.disableBackingStore=function(){if(this.useBackingStore){var t=this.chart.canvas;t.width!=this.backing.styleWidth&&(t.width=this.backing.styleWidth,t.height=this.backing.styleHeight,t.context.scale(1,1),this.adjustedDisplayPixelRatio=1,this.draw())}},n.ChartEngine.prototype.resizeCanvas=function(){this.chart.panel||(this.chart.panel=this.panels.chart);var t=this.chart.canvas,e=this.chart.context;t&&e&&(this.floatCanvas.height=this.chart.tempCanvas.height=t.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=t.width=this.chart.container.clientWidth,this.adjustBackingStore(t,e),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context));var i=this.container.getBoundingClientRect();this.top=i.top,this.left=i.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,0!==this.width||this.container.dimensionlessCanvas||console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height;var n=this.layout.candleWidth;void 0===n&&(n=8);for(var r in this.charts){var a=this.charts[r];if(this.layout.span)this.setCandleWidth(this.getSpanCandleWidth(this.layout.span),a);else if(this.setCandleWidth(n,a),a.scroll<a.width/n){a.scroll=Math.floor(a.width/n);var o=Math.round(this.preferences.whitespace/this.layout.candleWidth);a.scroll-=o}var s,l=10;try{s=2*e.measureText("10:00").width}catch(t){s=100}for(;l>1&&!(this.chart.width/s>l);)l/=1.5;a.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/l),a.xAxis.autoComputedTickSizePixels<1&&(a.xAxis.autoComputedTickSizePixels=1)}},n.ChartEngine.prototype.setCandleWidth=function(t,e){e||(e=this.chart),t<this.minimumCandleWidth&&(t=this.minimumCandleWidth),this.layout.candleWidth=t,e.maxTicks=Math.round(this.chart.width/t)+1},n.ChartEngine.prototype.resizeChart=function(t){if(!this.runPrepend("resizeChart",arguments)){!1!==t&&(t=!0),t&&this.preAdjustScroll();var e=this.chart.canvasHeight;this.resizeCanvas(),t&&this.postAdjustScroll(),this.displayInitialized?(this.adjustPanelPositions(),this.draw()):0!==this.chart.canvasHeight&&0===e&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments)}},n.ChartEngine.prototype.newChart=function(t,e,i,r,a){i||(i=this.chart),a||(a={});var o=this.layout,s=a.periodicity;s&&(s.interval&&(o.interval=s.interval),s.period&&(o.periodicity=s.period),s.periodicity&&(o.periodicity=s.periodicity),o.timeUnit=s.timeUnit);var l=i.symbol,h=n.clone(i.symbolObject),c=i.market,u=i.dataSet,d=i.moreAvailable;if(i.dataSet=[],i.moreAvailable=!0,t?"object"==typeof t?(i.symbol=t.symbol,i.symbolObject=t):(i.symbol=t,i.symbolObject.symbol=t):(i.symbol=null,i.symbolObject={symbol:null}),this.marketFactory){var p=this.marketFactory(i.symbolObject);this.setMarket(p,i)}var f=this;if(!e&&this.quoteDriver){var m=function(t){t&&"orphaned"!=t&&(i.symbol=l,i.symbolObject=h,i.market=c,i.dataSet=u,i.moreAvailable=d),f.currentlyImporting||f.dispatch("symbolChange",{stx:f,symbol:f.chart.symbol,symbolObject:f.chart.symbolObject,action:"master"}),r&&r.call(f,t)},g=a.span;if(!g&&o&&(g=o.setSpan),g&&g.base){var v=g.multiplier||1;this.chart.masterData=null,this.displayInitialized=!1,this.setSpan({maintainPeriodicity:!!s,multiplier:v,base:g.base,symbol:i.symbol,forceLoad:!0},m)}else this.quoteDriver.newChart({symbol:i.symbol,symbolObject:i.symbolObject,chart:i,initializeChart:!0},function(t){t||(f.adjustPanelPositions(),f.quoteDriver.updateSubscriptions(),a.stretchToFillScreen&&f.fillScreen()),m.apply(f,arguments)})}else{e||console.log("Warning: No masterData specified and no QuoteFeed configured"),i.symbol||(i.symbol=""),this.setMasterData(e,i),this.createDataSet(),this.initializeChart();var y=a.span;y&&y.multiplier&&y.base?this.setSpan({maintainPeriodicity:!0,multiplier:y.multiplier,base:y.base}):a.stretchToFillScreen?this.fillScreen():e&&e.length?this.draw():this.clear(),this.adjustPanelPositions(),r&&r.call(f)}},n.ChartEngine.prototype.clear=function(){this.displayInitialized=!1;for(var t in this.layout.studies){
var e=this.layout.studies[t];n.Studies.removeStudy(this,e)}this.controls.chartControls.style.display="none",this.panels.chart.title.innerHTML="",this.panels.chart.title.appendChild(document.createTextNode(this.panels.chart.display))},n.ChartEngine.prototype.fillScreen=function(){var t=this.chart,e=this.layout.candleWidth,i=t.width-this.preferences.whitespace,n=t.dataSet.length;if(n*e>=i)return void this.draw();var r=i/n;this.setCandleWidth(r,t),this.home({maintainWhitespace:!0})},n.ChartEngine.prototype.setMasterData=function(t,e){if(e||(e=this.chart),this.marketFactory){var i=this.marketFactory(e.symbolObject);this.setMarket(i,e)}e.masterData=t,"chart"==e.name&&(this.masterData=t);var r;for(r=0;t&&r<t.length;r++){this.transformMasterDataQuote&&(t[r]=this.transformMasterDataQuote(t[r]));var a=t[r];a.DT?(a.DT=new Date(+a.DT),a.Date=n.yyyymmddhhmmssmmm(a.DT)):a.Date?a.DT=n.strToDateTime(a.Date):console.log("setMasterData : Missing DT and Date on masterData object"),a.Volume&&"number"!=typeof a.Volume&&(a.Volume=parseInt(a.Volume,10))}e.decimalPlaces=this.callbacks.calculateTradingDecimalPlaces({stx:this,chart:e,symbol:e.symbolObject.symbol,symbolObject:e.symbolObject}),n.ChartEngine.isDailyInterval(this.layout.interval)||this.setDisplayDates(t),this.chart.roundit=Math.pow(10,e.decimalPlaces);for(r in this.plugins){var o=this.plugins[r];o.display&&o.setMasterData&&o.setMasterData(this,e)}},n.ChartEngine.prototype.setMasterDataRender=function(t,e,i){i||(i=this.chart),i.symbol||(i.symbol=""),this.setMasterData(e,i),e&&e.length&&(i.symbol=t),this.createDataSet(),this.initializeChart(),this.draw(),e&&e.length||(i.symbol=null,this.clear()),this.adjustPanelPositions()},n.ChartEngine.prototype.getSymbols=function(t){function e(t,e,i){return{symbol:t,symbolObject:e,periodicity:i.periodicity,interval:i.interval,timeUnit:i.timeUnit,setSpan:i.setSpan}}t||(t={});var i,r,a,o=[],s=this.layout;for(var l in this.charts){var h=this.charts[l];h.symbolObject&&h.symbolObject.symbol&&o.push(e(h.symbol,h.symbolObject,s));for(var c in h.series){var u=h.series[c],d=u.parameters;d.data&&!d.data.useDefaultQuoteFeed||(a=d.symbolObject,r=a.symbol,i=e(r,a,s),t["include-parameters"]&&(i.parameters=d),o.push(i))}if(!t["exclude-studies"]&&n.Studies)for(var p=h.studySymbols.getSymbols(),f=0;f<p.length;f++)r=p[f],a=r,"object"==typeof r?r=a.symbol:a={symbol:r},i=e(r,a,s),o.push(i)}for(var m=o.length-1;m>=0;m--)if(r=o[m].symbol,this.isEquationChart(r)){var g=n.formatEquation(r);if(g){for(var v=0;v<g.symbols.length;v++)i=e(g.symbols[v],o[m].symbolObject,o[m]),o.push(i);o.splice(m,1)}}return o},n.ChartEngine.prototype.setDisplayDate=function(t){var e,i=t.DT,n=1e3*i.getSeconds()+i.getMilliseconds();this.dataZone&&(e=new s.Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),this.dataZone),i=new Date(e.getTime()+n)),this.displayZone&&(e=new s.Date(i.getTime(),this.displayZone),i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()),i=new Date(i.getTime()+n)),t.displayDate=i},n.ChartEngine.prototype.setDisplayDates=function(t){if(t)for(var e=0;e<t.length;e++){var i=t[e];i.DT&&this.setDisplayDate(i)}},n.ChartEngine.prototype.streamTrade=function(t,e,i,n){var r=this.chart;n||(n={}),n.chart&&(r=n.chart),n.fillGaps=this.streamParameters.fillGaps;var a="object"==typeof t,o=a?t.last:arguments[0],s=a?t.volume:arguments[1],l=a?t.bid:null,h=a?t.ask:null;a||(e=arguments[2],i=arguments[3]),i&&(n.secondarySeries=i);var c={DT:e,Last:o,Volume:s,Bid:l,Ask:h};this.appendMasterData(c,r,n)},n.ChartEngine.prototype.appendMasterData=function(t,e,i){i||(i={}),e||(e=this.chart);var r=!1;if(i.useAsLastSale||t.constructor==Object&&"undefined"!=typeof t.Last&&null!==t.Last){if(r=!0,t.constructor===Array){var a=t[t.length-1];t={},a.DT?t.DT=a.DT:t.DT=n.strToDateTime(a.Date),t.Close=a.Close,t.Volume=a.Volume}else t.Last&&(t.Close=t.Last,delete t.Last);if(t.DT&&(t.DT=new Date(+t.DT)),t.DT&&"Invalid Date"!=t.DT||(t.DT=this.convertToDataZone(new Date)),"tick"!=this.layout.interval){var o=new n.Market({}),s={begin:this.chart.masterData.length?this.chart.masterData[this.chart.masterData.length-1].DT:t.DT,interval:this.layout.interval,periodicity:1,timeUnit:this.layout.timeUnit,inZone:this.dataZone,outZone:this.dataZone},l=o.newIterator(s),h=l.next();if(t.DT<h)t.DT=new Date(+(this.chart.masterData.length?this.chart.masterData[this.chart.masterData.length-1].DT:l.previous()));else if(t.DT>h)for(var c=0,u=t.DT;u>h&&c<1e3;)t.DT=h,h=l.next()}t.Open=t.Close,t.High=t.Close,t.Low=t.Close}if(i.secondarySeries)n.addMemberToMasterdata(this,i.secondarySeries,t);else{if(t&&t.constructor==Object&&(t=[t]),this.runPrepend("appendMasterData",[t,e,i]))return;if(!t||!t.length)return;var d=t[0].DT;d||(d=n.strToDateTime(t[0].Date));var p,f,m,g=e.masterData;if(g&&g.length){for(p=g.length-1;p>=0;){var v=g[p].DT;if(v||(v=n.strToDateTime(g[p].Date)),v.getTime()<=d.getTime()){var y=0;v.getTime()<d.getTime()&&(y=1,i.fillGaps&&(t.unshift(g[p]),t=this.doCleanupGaps(t,e),t.shift()));for(var x=0;x<t.length;x++){if(!y){f=t[x],m=g.length>p+x?g[p+x]:null,m&&(r?(f.Volume&&(f.Volume=parseInt(f.Volume,10)),f.Volume+=m.Volume):!f.Volume&&m.Volume&&(f.Volume=m.Volume),i.allowReplaceOHL||(isNaN(m.Open)||(f.Open=m.Open),!isNaN(m.High)&&m.High>f.High&&(f.High=m.High),!isNaN(m.Low)&&m.Low<f.Low&&(f.Low=m.Low)),isNaN(f.Close)&&(f.Close=m.Close),isNaN(f.Bid)&&(f.Bid=m.Bid),isNaN(f.Ask)&&(f.Ask=m.Ask));var b;for(b in e.series)"undefined"==typeof f[b]&&m&&(f[b]=m[b]);for(var C=e.studySymbols.getSymbols(),w=0;w<C.length;w++)b=C[w],"object"==typeof b&&(b=b.symbol),"undefined"==typeof f[b]&&m&&(f[b]=m[b])}f=g[p+x+y]=t[x],f.DT?f.Date=n.yyyymmddhhmmssmmm(f.DT):f.DT=n.strToDateTime(f.Date),f.Volume&&"number"!=typeof f.Volume&&(f.Volume=parseInt(f.Volume,10)),n.ChartEngine.isDailyInterval(this.layout.interval)||this.setDisplayDate(f)}break}p--}this.maxMasterDataSize&&(g=e.masterData=this.masterData=g.slice(-this.maxMasterDataSize));for(p in this.plugins){var S=this.plugins[p];S.display&&S.appendMasterData&&S.appendMasterData(this,t,e)}}else for(g=e.masterData=n.clone(t),p=0;p<g.length;p++)f=g[p],f.DT?f.Date=n.yyyymmddhhmmssmmm(f.DT):f.DT=n.strToDateTime(f.Date),f.Volume&&"number"!=typeof f.Volume&&(f.Volume=parseInt(f.Volume,10)),n.ChartEngine.isDailyInterval(this.layout.interval)||this.setDisplayDate(f);this.masterData&&this.masterData.length||(this.masterData=g)}if(!i.noCreateDataSet){i.appending=!0;var T=this.streamParameters;if(++T.count>T.maxTicks||i.bypassGovernor)clearTimeout(T.timeout),this.createDataSet(null,null,i),this.draw(),this.updateChartAccessories(),T.count=0,T.timeout=-1;else{var D=this;-1==T.timeout&&(T.timeout=setTimeout(function(){D.createDataSet(null,null,i),D.draw(),D.updateChartAccessories(),D.streamParameters.count=0,D.streamParameters.timeout=-1},T.maxWait))}}this.runAppend("appendMasterData",arguments)},n.ChartEngine.prototype.setMaxTicks=function(t,e){e||(e={}),(t=Math.round(t))<2&&(t=2);var i=e.padding?e.padding:0;this.layout.candleWidth=(this.chart.width-i)/t,this.layout.candleWidth||(this.layout.candleWidth=8),this.chart.maxTicks=Math.round(this.chart.width/this.layout.candleWidth-.499),(e.padding||0===e.padding)&&(this.chart.scroll=t+1)},n.ChartEngine.prototype.construct=function(){this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name],this.cx=0,this.cy=0,this.micropixels=0,this.chart.panel.subholder.appendChild(this.controls.home),this.callbackListeners={},this.longHoldTime=1e3},n.ChartEngine.prototype.addDomEventListener=function(t,e,i,n){t.addEventListener(e,i,n),this.eventListeners.push({element:t,event:e,"function":i,options:n})},n.ChartEngine.prototype.addEventListener=function(t,e){t||(t="*");var i=this.callbackListeners[t];return i||(this.callbackListeners[t]=i=[]),i.push(e),{type:t,cb:e}},n.ChartEngine.prototype.removeEventListener=function(t,e){"object"!=typeof t&&(t={type:t,cb:e}),t.type||(t.type="*");var i=this.callbackListeners[t.type];if(i)for(var n=0;n<i.length;n++)if(i[n]===t.cb)return i.splice(n),void(i.length||(t[t.type]=null))},n.ChartEngine.prototype.dispatch=function(t,e){this.callbacks[t]&&this.callbacks[t].call(this,e);var i=this.callbackListeners[t];if(i)for(var n=0;n<i.length;n++)i[n].call(this,e);if(i=this.callbackListeners["*"])for(var r=0;r<i.length;r++)i[r].call(this,e)},n.ChartEngine.prototype.deleteYAxisIfUnused=function(t,e){if(e&&e!==t.yAxis){for(var i in this.chart.seriesRenderers){var n=this.chart.seriesRenderers[i];if(n.params.yAxis===e&&0!==n.seriesParams.length)return}var r;for(r=0;r<t.yaxisLHS.length;r++)t.yaxisLHS[r]===e&&t.yaxisLHS.splice(r,1);for(r=1;r<t.yaxisRHS.length;r++)t.yaxisRHS[r]===e&&t.yaxisRHS.splice(r,1);this.resizeCanvas(),this.adjustPanelPositions()}},n.ChartEngine.prototype.addYAxis=function(t,e){if(e){t.yaxisLHS||(t.yaxisLHS=[],t.yaxisRHS=[],"left"==t.yAxis.position?t.yaxisLHS.push(t.yAxis):t.yaxisRHS.push(t.yAxis));for(var i=t.yaxisLHS.concat(t.yaxisRHS),n=0;n<i.length;n++)if(i[n]===e)return;"left"===e.position?t.yaxisLHS.unshift(e):(e.position="right",t.yaxisRHS.push(e)),this.preAdjustScroll(),this.resizeCanvas(),this.adjustPanelPositions(),this.postAdjustScroll()}},n.ChartEngine.prototype.calculateYAxisPositions=function(){var t=[];for(var e in this.charts)t.push(e);for(var i in this.panels){var n=this.panels[i];n.name!==n.chart.name&&t.push(i)}var r,a,o,s,l=0,h=0;for(a=0;a<t.length;a++)if(o=this.panels[t[a]]){if(!o.yaxisLHS){o.yaxisLHS=[],o.yaxisRHS=[];var c=o.yAxis.position;c||(c=o.chart.panel.yAxis.position),o["left"==c?"yaxisLHS":"yaxisRHS"].push(o.yAxis)}for(o.yAxis.width||0===o.yAxis.width||(o.yAxis.width=this.yaxisWidth),o.yaxisTotalWidthRight=0,o.yaxisTotalWidthLeft=0,r=0;r<o.yaxisLHS.length;r++)s=o.yaxisLHS[r],o.yaxisTotalWidthLeft+=s.width,s.justifyRight=null===s.justifyRight?o.chart.yAxis.justifyRight:s.justifyRight,null===s.justifyRight&&(s.justifyRight=!0);for(o.yaxisTotalWidthLeft>l&&(l=o.yaxisTotalWidthLeft),r=0;r<o.yaxisRHS.length;r++)s=o.yaxisRHS[r],o.yaxisTotalWidthRight+=s.width;o.yaxisTotalWidthRight>h&&(h=o.yaxisTotalWidthRight)}for(a=0;a<t.length;a++)if(o=this.panels[t[a]]){var u=o.name===o.chart.name,d=l;for(r=o.yaxisLHS.length-1;r>=0;r--)s=o.yaxisLHS[r],d-=s.width,s.left=d;for(d=this.width-h,r=0;r<o.yaxisRHS.length;r++)s=o.yaxisRHS[r],s.left=d,d+=s.width;"undefined"!=typeof this.yaxisLeft&&(o.chart.yaxisPaddingRight=this.yaxisLeft),o.yaxisCalculatedPaddingRight=h,(o.chart.yaxisPaddingRight||0===o.chart.yaxisPaddingRight)&&(o.yaxisCalculatedPaddingRight=o.chart.yaxisPaddingRight),o.yaxisCalculatedPaddingLeft=l,(o.chart.yaxisPaddingLeft||0===o.chart.yaxisPaddingLeft)&&(o.yaxisCalculatedPaddingLeft=o.chart.yaxisPaddingLeft),u?(o.left=o.yaxisCalculatedPaddingLeft,o.right=this.width-o.yaxisCalculatedPaddingRight):(o.left=o.chart.panel.left,o.right=o.chart.panel.right),o.width=o.right-o.left,o.handle.style.left=o.left+"px",o.handle.style.width=o.width+"px",u&&(o.chart.left=o.left,o.chart.right=o.right,o.chart.width=Math.max(o.right-o.left,0))}},n.ChartEngine.prototype.initializeChart=function(t){if(!this.runPrepend("initializeChart",arguments)){this.chart.symbolObject.symbol||(this.chart.symbolObject.symbol=this.chart.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&n.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,n.ChartEngine.defaultDisplayTimeZone),this.calculateYAxisPositions(),this.micropixels=0,t?this.chart.container=t:t=this.chart.container,t.stx=this,t.CIQRegistered||(t.CIQRegistered=!0,n.ChartEngine.registeredContainers.push(t)),n.isSurface&&(this.gesture||(this.gesture=new MSGesture,this.manageTouchAndMouse?this.gesture.target=t:this.gesture.target=document.body,this.gesturePointerId=null)),this.registerHTMLElements();var e=this.chart.canvas,i=this.chart.tempCanvas,r=this.floatCanvas;e&&document.createElement("canvas").getContext?(e.id||(t.removeChild(e),this.chart.canvas=null),i&&!i.id&&(t.removeChild(i),this.chart.tempCanvas=null),r&&!r.id&&(t.removeChild(r),this.floatCanvas=null)):(this.layout.candleWidth<this.minimumCandleWidth&&(this.layout.candleWidth=this.minimumCandleWidth),this.layout.candleWidth>200&&(this.layout.candleWidth=8)),this.chart.canvas||(e=this.chart.canvas=document.createElement("canvas")),this.chart.canvas.getContext?t.appendChild(e):(e=this.chart.canvas=t.querySelectorAll("#ie8canvas")[0],e.getContext||window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(e),e.style.display="block"),e.style.position="absolute",e.style.left="0px";(e.context=this.chart.context=e.getContext("2d")).lineWidth=1,this.chart.tempCanvas||(i=this.chart.tempCanvas=document.createElement("canvas")),this.chart.tempCanvas.getContext?t.appendChild(i):(i=this.chart.tempCanvas=t.querySelectorAll("#ie8canvasTemp")[0],i.getContext||window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(i)),i.style.position="absolute",i.style.left="0px",i.context=this.chart.tempCanvas.getContext("2d"),i.context.lineWidth=1,i.style.display="none",this.floatCanvas||(r=this.floatCanvas=document.createElement("canvas")),this.floatCanvas.getContext?t.appendChild(r):(r=this.floatCanvas=t.querySelectorAll("#ie8canvasFloat")[0],r.getContext||window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(r)),r.style.position="absolute",r.style.left="0px",r.context=r.getContext("2d"),r.context.lineWidth=1,r.style.display="none",this.resizeCanvas(),n.isAndroid&&(this.chart.tempCanvas.ontouchstart=function(t){t.preventDefault&&t.preventDefault()},this.floatCanvas.ontouchstart=function(t){t.preventDefault&&t.preventDefault()});var o=this.chart,s=this.panels;if(s.chart.display=o.symbol,o.symbolDisplay&&(s.chart.display=o.symbolDisplay),this.adjustPanelPositions(),this.chart.panel=s[o.name],this.calculateYAxisMargins(o.panel.yAxis),this.initialWhitespace=this.preferences.whitespace,o.dataSet&&o.dataSet.length>0){o.scroll=Math.floor(o.width/this.layout.candleWidth);var l=Math.round(this.preferences.whitespace/this.layout.candleWidth);o.scroll-=l}if(n.touchDevice){var h=a(".overlayEdit",t),c=a("#overlayTrashCan",t),u=a("#vectorTrashCan",t);h?(n.safeClickTouch(h,function(t){return function(){t.deleteHighlighted(!0,!0)}}(this)),c&&n.safeClickTouch(c,function(t){return function(){t.deleteHighlighted(!1)}}(this))):c&&n.safeClickTouch(c,function(t){return function(){t.deleteHighlighted(!0)}}(this)),u&&n.safeClickTouch(u,function(t){return function(){t.deleteHighlighted(!0)}}(this))}this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),t.onmouseout=function(t){return function(e){t.handleMouseOut(e)}}(this),this.controls.chartControls&&(this.controls.chartControls.style.display="block"),this.abortDrawings(),this.undoStamps=[];for(var d in s){var p=s[d];p.markerHolder&&(t.removeChild(p.markerHolder),p.markerHolder=null)}for(var f in this.plugins){var m=this.plugins[f];m.display&&m.initializeChart&&m.initializeChart(this)}if(!this.resizeListenerInitialized){var g=this;this.resizeListenerInitialized=!0;var v=function(){return function(){g.resizeChart()}};this.addDomEventListener(window,"resize",v,!0)}o.baseline.userLevel&&(o.baseline.userLevel=null),this.setResizeTimer(this.resizeDetectMS),this.runAppend("initializeChart",arguments)}},n.ChartEngine.prototype.destroy=function(){this.setResizeTimer(0),this.quoteDriver&&this.quoteDriver.die(),this.styles={};for(var t=0;t<this.eventListeners.length;t++){var e=this.eventListeners[t];e.element.removeEventListener(e.event,e["function"],e.options)}this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout)},n.ChartEngine.prototype.handleMouseOut=function(t){if(t=t||window.event,!n.withinElement(this.chart.container,t.pageX,t.pageY)){if(this.runPrepend("handleMouseOut",arguments))return;if(this.undisplayCrosshairs(),this.grabbingScreen=!1,this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown){this.userPointerDown=!1,this.drawingLine=!1;var e=this.backOutY(t.pageY),i=this.backOutX(t.pageX);this.drawingClick(this.currentPanel,i,e)}n.ChartEngine.insideChart=!1,this.displaySticky(),this.findHighlights(!1,!0),this.runAppend("handleMouseOut",arguments)}},n.ChartEngine.prototype.registerTouchAndMouseEvents=function(){if(!this.touchAndMouseEventsRegistered){this.touchAndMouseEventsRegistered=!0;var t=a("#zoomIn",this.controls.chartControls),e=a("#zoomOut",this.controls.chartControls),i=this.chart.container,r=this,o=function(t,e){r.addDomEventListener(i,t,e)};n.touchDevice?n.isSurface?(o("mousemove",function(t){r.msMouseMoveProxy(t)}),o("mousedown",function(t){r.msMouseDownProxy(t)}),o("mouseup",function(t){r.msMouseUpProxy(t)}),window.navigator.msPointerEnabled?(o("MSPointerDown",function(t){return r.startProxy(t)}),o("MSGestureStart",function(){r.gestureInEffect=!0}),o("MSGestureChange",function(t){return r.touchmove(t)}),o("MSGestureEnd",function(t){return r.gestureInEffect=!1,r.touchend(t)}),o("MSPointerMove",function(t){r.moveProxy(t)}),o("MSPointerUp",function(t){return r.endProxy(t)})):(o("pointerdown",function(t){return r.startProxy(t)}),o("MSGestureStart",function(){r.gestureInEffect=!0}),o("MSGestureChange",function(t){return r.touchmove(t)}),o("MSGestureEnd",function(t){return r.gestureInEffect=!1,r.touchend(t)}),o("pointermove",function(t){r.moveProxy(t)}),o("pointerup",function(t){return r.endProxy(t)}))):(n.isAndroid||n.ipad||n.iphone||(o("mousemove",function(t){r.iosMouseMoveProxy(t)}),o("mousedown",function(t){r.iosMouseDownProxy(t)}),o("mouseup",function(t){r.iosMouseUpProxy(t)})),o("touchstart",function(t){r.touchstart(t)}),o("touchmove",function(t){r.touchmove(t)}),o("touchend",function(t){r.touchend(t)}),t&&(t.removeAttribute("onMouseOver"),t.removeAttribute("onMouseOut")),e&&(e.removeAttribute("onMouseOver"),e.removeAttribute("onMouseOut"))):(o("mousemove",function(t){r.mousemove(t)}),o("mousedown",function(t){r.mousedown(t)}),o("mouseup",function(t){r.mouseup(t)}));var s=n.wheelEvent;this.captureMouseWheelEvents&&this.addDomEventListener(i,s,function(t){r.mouseWheel(t)})}},n.ChartEngine.prototype.rightClickHighlighted=function(){this.runPrepend("rightClickHighlighted",arguments)||(this.deleteHighlighted(!0),this.runAppend("rightClickHighlighted",arguments))},n.ChartEngine.prototype.deleteHighlighted=function(t,e){if(!this.runPrepend("deleteHighlighted",arguments)){this.cancelTouchSingleClick=!0,n.clearCanvas(this.chart.tempCanvas,this);for(var i=this.drawingObjects.length-1;i>=0;i--){var r=this.drawingObjects[i];if(r.highlighted&&!r.permanent){if(!r.abort()){var a=n.shallowClone(this.drawingObjects);this.drawingObjects.splice(i,1),this.undoStamp(a,n.shallowClone(this.drawingObjects))}this.changeOccurred("vector")}}for(var o in this.overlays){var s=this.overlays[o];s.highlight&&!s.permanent&&(t||e?this.rightClickOverlay(o,e):this.removeOverlay(o))}var l=this.currentPanel.chart;for(var h in l.seriesRenderers)for(var c=l.seriesRenderers[h],u=c.seriesParams.length-1;u>=0;u--){var d=c.seriesParams[u];d.highlight&&!d.permanent&&c.removeSeries(d.field)}this.draw(),this.controls.mSticky&&(this.controls.mSticky.style.display="none",this.controls.mSticky.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},n.ChartEngine.prototype.panelExists=function(t){for(var e in this.panels){if(this.panels[e].name==t)return!0}return!1},n.ChartEngine.prototype.hideCrosshairs=function(){this.displayCrosshairs=!1},n.ChartEngine.prototype.showCrosshairs=function(){this.displayCrosshairs=!0},n.ChartEngine.prototype.grabHandle=function(t){this.runPrepend("grabHandle",arguments)||t&&(n.ChartEngine.crosshairY=t.top+this.top,n.ChartEngine.resizingPanel=t,this.drawTemporaryPanel(),n.appendClassName(t.handle,"stx-grab"),this.runAppend("grabHandle",arguments))},n.ChartEngine.prototype.releaseHandle=function(){this.runPrepend("releaseHandle",arguments)||(n.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),n.ChartEngine.resizingPanel&&n.unappendClassName(n.ChartEngine.resizingPanel.handle,"stx-grab"),n.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments))},n.ChartEngine.prototype.storePanels=function(){this.layout||(this.layout={});var t=this.layout;t.panels={};for(var e in this.panels){var i=this.panels[e];t.panels[i.name]={percent:i.percent,display:i.display}}},n.ChartEngine.prototype.savePanels=function(t){this.storePanels(),!1!==t&&this.changeOccurred("layout")},n.ChartEngine.prototype.resolveY=function(t){return this.top+t},n.ChartEngine.prototype.resolveX=function(t){return this.left+t},n.ChartEngine.prototype.backOutY=function(t){return t-this.top},n.ChartEngine.prototype.backOutX=function(t){return t-this.left},n.ChartEngine.prototype.cleanupRemovedStudy=function(t){t.study.removeFN&&t.study.removeFN(this,t),t.study.feed&&this.detachTagAlongQuoteFeed(t.study.feed);for(var e in this.plugins)e.indexOf("{"+t.id+"}")>-1&&delete this.plugins[e];this.layout.studies&&delete this.layout.studies[t.name],n.Studies.checkSymbolChanged(this,t,"remove-study"),n.Studies.removeStudySymbols(t,this),this.quoteDriver&&this.quoteDriver.updateSubscriptions()},n.ChartEngine.prototype.privateDeletePanel=function(t){if(this.layout.studies){var e=this.layout.studies[t.name];e&&this.cleanupRemovedStudy(e)}if(delete this.panels[t.name],n.Studies)for(var i in n.Studies.studyPanelMap)n.Studies.studyPanelMap[i].panel==t.name&&delete n.Studies.studyPanelMap[i];for(var r in this.overlays)this.overlays[r].panel==t.name&&(this.cleanupRemovedStudy(this.layout.studies[r]),delete this.overlays[r]);if(t.holder&&(this.chart.container.removeChild(t.holder),this.getMarkerArray))for(var a=this.getMarkerArray("panelName",t.name),o=0;o<a.length;o++)this.removeFromHolder(a[o]);t.handle.parentNode.removeChild(t.handle)},n.ChartEngine.prototype.panelClose=function(t){if(t&&!this.runPrepend("panelClose",arguments)){if(this.cancelTouchSingleClick=!0,n.ChartEngine.drawingLine=!1,t.soloing&&this.panelSolo(t),this.charts[t.name]){for(var e in this.panels){var i=this.panels[e];i.chart.name==t.name&&this.privateDeletePanel(i)}delete this.charts[t.name]}else this.privateDeletePanel(t);this.showCrosshairs(),this.createDataSet(),this.adjustPanelPositions(),this.draw(),this.savePanels(),this.runAppend("panelClose",arguments)}},n.ChartEngine.prototype.deleteAllPanels=function(){for(var t in this.panels){var e=this.panels[t];this.privateDeletePanel(e)}this.layout.panels={},this.panels={}},n.ChartEngine.prototype.panelUp=function(t){this.cancelTouchSingleClick=!0,n.ChartEngine.drawingLine=!1,this.showCrosshairs();var e,i={},r=0;for(e in this.panels){if(e==t.name)break;r++}if(r){var a=0;for(e in this.panels)a==r-1&&(i[t.name]=t),e!=t.name&&(i[e]=this.panels[e],a++);this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},n.ChartEngine.prototype.panelDown=function(t){this.cancelTouchSingleClick=!0,n.ChartEngine.drawingLine=!1,this.showCrosshairs();var e,i={},r=0;for(e in this.panels){if(e==t.name)break;r++}var a=0;for(e in this.panels)a++;if(r!=a-1){var o=0;for(e in this.panels)e!=t.name?(i[e]=this.panels[e],o==r+1&&(i[t.name]=t),o++):o++;this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},n.ChartEngine.prototype.panelSolo=function(t){this.cancelTouchSingleClick=!0,n.ChartEngine.drawingLine=!1,this.showCrosshairs();var e=!0;t.soloing?(e=!1,t.soloing=!1,n.unappendClassName(t.solo,"stx_solo_lit"),t.percent=t.oldPercent,"chart"==t.name||this.soloPanelToFullScreen||(this.panels.chart.percent=this.panels.chart.oldPercent),this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.panels.chart.oldXAxisAsFooter,this.panels.chart.subholder.appendChild(this.controls.home))):(t.soloing=!0,n.appendClassName(t.solo,"stx_solo_lit"),t.oldPercent=t.percent,"chart"!=t.name&&(this.soloPanelToFullScreen?(this.panels.chart.oldXAxisAsFooter=this.xAxisAsFooter,this.xAxisAsFooter=!0,t.subholder.appendChild(this.controls.home)):(this.panels.chart.oldPercent=this.panels.chart.percent,t.percent=1-this.panels.chart.percent)));for(var i in this.panels)this.panels[i].hidden=e;this.soloPanelToFullScreen||(this.panels.chart.hidden=!1),t.hidden=!1,this.adjustPanelPositions(),this.draw(),this.savePanels()},n.ChartEngine.prototype.calculatePanelPercent=function(t){var e=t.bottom-t.top;t.percent=e/this.chart.canvasHeight},n.ChartEngine.prototype.resizePanels=function(){if(n.ChartEngine.resizingPanel){var t,e,i,r=!0;if(n.ChartEngine.crosshairY>this.resolveY(n.ChartEngine.resizingPanel.top)&&(r=!1),r){i=null;for(t in this.panels){if(this.panels[t]==n.ChartEngine.resizingPanel)break;this.panels[t].hidden||(i=this.panels[t])}e=this.backOutY(n.ChartEngine.crosshairY),e<i.top+30&&(e=i.top+30,n.ChartEngine.crosshairY=this.resolveY(e)),i.bottom=e,n.ChartEngine.resizingPanel.top=e,this.calculatePanelPercent(i),this.calculatePanelPercent(n.ChartEngine.resizingPanel)}else{i=null;for(t in this.panels){if(this.panels[t]==n.ChartEngine.resizingPanel)break;this.panels[t].hidden||(i=this.panels[t])}e=this.backOutY(n.ChartEngine.crosshairY),e>n.ChartEngine.resizingPanel.bottom-30&&(e=n.ChartEngine.resizingPanel.bottom-30,n.ChartEngine.crosshairY=this.resolveY(e)),i.bottom=e,n.ChartEngine.resizingPanel.top=e,this.calculatePanelPercent(i),this.calculatePanelPercent(n.ChartEngine.resizingPanel)}this.adjustPanelPositions(),this.draw(),this.savePanels()}},n.ChartEngine.prototype.adjustPanelPositions=function(){if(this.chart.symbol&&!this.runPrepend("adjustPanelPositions",arguments)){var t,e,i=0,n=this.chart.canvasHeight,r=!1,a=0,o=0,s=!1;for(t in this.panels)e=this.panels[t],(isNaN(e.percent)||e.percent<=0)&&(e.percent=.05),e.hidden||(a+=e.percent,o++,e.soloing&&(s=!0));for(t in this.panels){var l=0;if(e=this.panels[t],e.hidden)e.markerHolder&&(e.markerHolder.style.display="none");else{r?this.displayIconsUpDown&&(e.up.style.display=""):(r=!0,e.up.style.display="none"),s?e.soloing?this.displayIconsSolo&&(e.solo.style.display=""):e.solo.style.display="none":1==o?e.solo.style.display="none":2!=o||this.soloPanelToFullScreen?this.displayIconsSolo&&(e.solo.style.display=""):e.solo.style.display="none",1==o?e.down.style.display="none":this.displayIconsUpDown&&(e.down.style.display=""),e.editFunction?e.edit.style.display="":e.edit.style.display="none",e.percent=e.percent/a,e.top=i,e.bottom=e.top+n*e.percent,e.height=e.bottom-e.top,e.chart.name==e.name&&(e.chart.top=e.top,e.chart.bottom=e.bottom,e.chart.height=e.height);var h=e.yAxis;h.zoom&&h.height>0&&(l=h.zoom/h.height),this.adjustYAxisHeightOffset(e,h),h.top=e.top+h.topOffset,h.bottom=e.bottom-h.bottomOffset,h.height=h.bottom-h.top,l&&(h.zoom=l*h.height,h.zoom>h.height&&(h.zoom=0,h.scroll=0)),i=e.bottom,h.high||0===h.high||(h.high=100,h.low=0,h.shadow=100),h.multiplier=h.height/h.shadow,e.holder&&(e.holder.style.right="0px",e.holder.style.top=e.top+"px",e.holder.style.left="0px",e.holder.style.height=e.height+"px",e.subholder.style.left=e.left+"px",e.subholder.style.width=e.width+"px",e.subholder.style.top="0px",h.height>=0&&(e.subholder.style.height=h.height+"px"))}}if(t&&(this.panels[t].down.style.display="none"),2!=o||s||(this.panels.chart.solo.style.display=""),this.controls.chartControls&&this.panels.chart){var c;c=s&&this.soloPanelToFullScreen?this.chart.canvasHeight-e.yAxis.bottom+12:this.chart.canvasHeight-this.panels.chart.yAxis.bottom+12,this.controls.chartControls.style.bottom=c+"px"}this.clearPixelCache(),this.adjustDrawings(),this.runAppend("adjustPanelPositions",arguments)}},n.ChartEngine.prototype.addChart=function(t,e){e.name=t,this.charts[t]=e},n.ChartEngine.prototype.createPanel=function(t,e,i,n){if(!this.runPrepend("createPanel",arguments)){n||(n="chart");var r=this.chart.canvasHeight;i||(i=.2*r);var a=i/r,o=1-a;for(var s in this.panels){this.panels[s].percent*=o}this.stackPanel(t,e,a,n),this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments)}},n.ChartEngine.prototype.configurePanelControls=function(t){var e=t.name==t.chart.name;t.icons=a(".stx-panel-control",t.holder),t.close=t.icons.children[4],t.close=a(".stx-ico-close",t.icons).parentNode,n.appendClassName(t.icons,"stx-show"),t.title=a(".stx-panel-title",t.icons),t.up=a(".stx-ico-up",t.icons).parentNode,t.solo=a(".stx-ico-focus",t.icons).parentNode,t.down=a(".stx-ico-down",t.icons).parentNode,t.edit=a(".stx-ico-edit",t.icons).parentNode,this.displayIconsUpDown||(t.up.style.display="none"),this.displayIconsUpDown||(t.down.style.display="none"),this.displayIconsSolo||(t.solo.style.display="none"),this.displayIconsClose||(t.close.style.display="none"),this.displayPanelResize||(t.handle.style.display="none"),t.title.innerHTML="",t.display&&t.title.appendChild(document.createTextNode(t.display)),e&&(n.appendClassName(t.title,"chart-title"),n.appendClassName(t.icons,"stx-chart-panel")),n.touchDevice&&!n.isSurface||(t.icons.onmouseover=function(t){return function(){t.hideCrosshairs()}}(this)),n.touchDevice&&!n.isSurface||(t.icons.onmouseout=function(t){return function(){t.showCrosshairs()}}(this)),n.touchDevice&&!n.isSurface||(t.handle.onmouseover=function(t){return function(){t.hideCrosshairs()}}(this)),n.touchDevice&&!n.isSurface||(t.handle.onmouseout=function(t){return function(){t.showCrosshairs()}}(this)),n.touchDevice&&(t.handle.ontouchstart=function(t,e){return function(i){t.resizingPanel||(i.preventDefault(),t.grabHandle(e))}}(this,t),t.handle.ontouchend=function(t){return function(e){e.preventDefault(),t.releaseHandle()}}(this)),t.handle.onmousedown=function(t,e){return function(i){i||(i=event),t.grabHandle(e)}}(this,t),t.handle.onmouseup=function(t){return function(e){e||(e=event),t.releaseHandle()}}(this),n.safeClickTouch(t.close,function(t,e){return function(){t.panelClose(e)}}(this,t)),n.safeClickTouch(t.up,function(t,e){return function(){t.panelUp(e)}}(this,t)),n.safeClickTouch(t.down,function(t,e){return function(){t.panelDown(e)}}(this,t)),n.safeClickTouch(t.solo,function(t,e){return function(){t.panelSolo(e)}}(this,t)),"chart"==t.name&&(t.close.style.display="none")},n.ChartEngine.prototype.stackPanel=function(t,e,i,r){if(!this.runPrepend("stackPanel",arguments)){r||(r="chart");var a=this.charts[r],o=e==r,s=null;o&&(t=a.symbol,a.symbolDisplay&&(t=a.symbolDisplay),s=a.yAxis);var l=this.panels[e]=new n.ChartEngine.Panel(e,s);!o&&a.yAxis&&(l.yAxis.width=a.yAxis.width),l.percent=i,l.chart=a,l.display=t,l.holder=n.newChild(this.container,"div","stx-holder"),l.subholder=n.newChild(l.holder,"div","stx-subholder"),l.subholder.style.zIndex=1,l.holder.setAttribute("cq-panel-name",e),l.subholder.setAttribute("cq-panel-name",e);var h=o?"stx-panel-chart":"stx-panel-study";n.appendClassName(l.holder,h),l.subholder.appendChild(this.controls.iconsTemplate.cloneNode(!0)),l.handle=this.controls.handleTemplate.cloneNode(!0),this.container.appendChild(l.handle),l.handle.id=null,l.handle.panel=l,this.configurePanelControls(l),this.resizeCanvas(),this.runAppend("stackPanel",arguments)}},n.ChartEngine.prototype.setPanelEdit=function(t,e){t.editFunction=e,n.safeClickTouch(t.edit,e),this.adjustPanelPositions()},n.ChartEngine.prototype.drawPanels=function(){if(!this.runPrepend("drawPanels",arguments)){var t=!1;for(var e in this.panels){var i=this.panels[e];if(i.axisDrawn=!1,i.title.innerHTML!=i.display&&(i.title.innerHTML="",i.title.appendChild(document.createTextNode(i.display))),n.appendClassName(i.icons,"stx-show"),i.hidden)n.unappendClassName(i.icons,"stx-show"),i.handle.style.display="none",i.holder.style.display="none";else if(this.displayIconsUpDown||(i.up.style.display="none"),this.displayIconsUpDown||(i.down.style.display="none"),this.displayIconsSolo||(i.solo.style.display="none"),i.holder.style.display="block",t){var r=i.top;r=Math.round(r)+.5,this.plotLine(i.left,i.right,r,r,this.canvasStyle("stx_panel_border"),"segment",this.chart.context,!1,{}),this.displayPanelResize?i.handle.style.display="":i.handle.style.display="none",i.handle.style.top=r-i.handle.offsetHeight/2+"px"}else i.handle.style.display="none",t=!0}this.runAppend("drawPanels",arguments)}},n.ChartEngine.prototype.touchSingleClick=function(t,e,i){var r=this,a=arguments;return function(){(function(){if(!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",a))return;if(this.editingAnnotation)return;if(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},!this.displayCrosshairs)return;if(!this.displayInitialized)return;if(""!==this.openDialog)return;if(e<this.left||e>this.right||i<this.top||i>this.bottom)return;var t=this.backOutY(n.ChartEngine.crosshairY),o=this.backOutX(n.ChartEngine.crosshairX);if(this.currentPanel=this.whichPanel(t),!(n.Drawing&&this.currentVectorParameters.vectorType&&n.Drawing[this.currentVectorParameters.vectorType]&&(new n.Drawing[this.currentVectorParameters.vectorType]).dragToDraw)){if(!this.drawingClick(this.currentPanel,o,t)&&!this.layout.crosshair){n.ChartEngine.crosshairY=0,
n.ChartEngine.crosshairX=0,this.cx=this.backOutX(n.ChartEngine.crosshairX),this.cy=this.backOutY(n.ChartEngine.crosshairY),this.findHighlights(),n.ChartEngine.crosshairY=i,n.ChartEngine.crosshairX=e;var s=this.container.getBoundingClientRect();this.top=s.top,this.left=s.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.cx=this.backOutX(n.ChartEngine.crosshairX),this.cy=this.backOutY(n.ChartEngine.crosshairY),this.currentPanel&&this.currentPanel.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.cx,this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel))),this.headsUpHR(),this.findHighlights(!0)}this.currentVectorParameters.vectorType||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:o,y:t})}}r.cancelTouchSingleClick=!1,this.runAppend("touchSingleClick",a)}).apply(r,a)}},n.ChartEngine.prototype.touchDoubleClick=function(t,e,i){if(!this.runPrepend("touchDoubleClick",arguments)&&!(e<this.left||e>this.right||i<this.panels.chart.top||i>this.panels.chart.bottom||this.editingAnnotation)){if(n.ChartEngine.drawingLine)this.undo();else if(this.anyHighlighted)this.deleteHighlighted();else{var r=this.currentPanel.yAxis;r.scroll==(r.initialMarginTop-r.initialMarginBottom)/2&&r.zoom==r.initialMarginTop+r.initialMarginBottom?this.home():this.calculateYAxisMargins(this.currentPanel.yAxis),this.draw()}this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.runAppend("touchDoubleClick",arguments)}},n.ChartEngine.prototype.startProxy=function(t){if(4==t.pointerType||"mouse"==t.pointerType?this.mouseMode=!0:this.mouseMode=!1,!this.mouseMode)if(this.touches[this.touches.length]={pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY},this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY}],this.gestureInEffect||1!=this.touches.length)this.gesture.stop(),this.touchstart(t);else{if(this.gesturePointerId=t.pointerId,this.overrideGesture=!1,!this.gesture)return;this.gesture.addPointer(t.pointerId),this.touchstart(t)}},n.ChartEngine.prototype.moveProxy=function(t){4==t.pointerType||"mouse"==t.pointerType?this.mouseMode=!0:this.mouseMode=!1,this.mouseMode||this.gestureInEffect||this.touchmove(t)},n.ChartEngine.prototype.endProxy=function(t){if(!this.mouseMode){for(var e=this.touches.length,i=0;i<this.touches.length;i++)if(this.touches[i].pointerId==t.pointerId){this.touches.splice(i,1);break}if(i==e)return this.touches=[],this.grabbingScreen=!1,void(this.touching=!1);this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY}],this.gestureInEffect||this.touchend(t)}},n.ChartEngine.prototype.msMouseMoveProxy=function(t){!this.touches.length&&this.mouseMode&&this.mousemove(t)},n.ChartEngine.prototype.msMouseDownProxy=function(t){this.mouseMode&&this.mousedown(t)},n.ChartEngine.prototype.msMouseUpProxy=function(t){this.mouseMode&&this.mouseup(t)},n.ChartEngine.prototype.iosMouseMoveProxy=function(t){this.touching||this.mousemove(t)},n.ChartEngine.prototype.iosMouseDownProxy=function(t){if(this.touching)return void(this.mouseMode=!1);this.mouseMode=!0,this.mousedown(t)},n.ChartEngine.prototype.iosMouseUpProxy=function(t){this.touching||this.mouseup(t)},n.ChartEngine.prototype.rawWatermark=function(t,e,i,n){this.canvasFont("stx_watermark",t),t.fillStyle=this.defaultColor,t.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",t.fillText(n,e,i),t.globalAlpha=1},n.ChartEngine.prototype.watermark=function(t,e){if(e&&"object"!=typeof e&&(e={h:arguments[1],v:arguments[2],text:arguments[3]}),e={h:e.h||"left",v:e.v||"bottom",text:e.text||"",hOffset:e.hOffset||10,vOffset:e.vOffset||20},this.chart.context){var i=this.panels[t];if(i&&!i.hidden){var n=i.yAxis.bottom-e.vOffset;"top"==e.v?n=i.top+e.vOffset:"middle"==e.v&&(n=(i.top+i.yAxis.bottom)/2),this.chart.context.save(),this.canvasFont("stx_watermark"),this.canvasColor("stx_watermark"),this.chart.context.textBaseline="alphabetic";var r=i.left+e.hOffset;"right"==e.h?r=i.right-e.hOffset:"center"==e.h&&(r=(i.right+i.left-this.chart.context.measureText(e.text).width)/2),this.chart.context.globalAlpha=.5,this.chart.context.fillText(e.text,r,n),this.chart.context.globalAlpha=1,this.chart.context.restore()}}},n.ChartEngine.prototype.preAdjustScroll=function(t){t||(t=this.chart),this.previousAdjust={chart:t,scroll:t.scroll,maxTicks:t.maxTicks}},n.ChartEngine.prototype.postAdjustScroll=function(){if(this.previousAdjust){var t=this.previousAdjust.chart;t.scroll=this.previousAdjust.scroll+(t.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw()}},n.ChartEngine.prototype.adjustDrawings=function(){for(var t=0;t<this.drawingObjects.length;t++){var e=this.drawingObjects[t];this.panels[e.panelName]&&e.adjust()}},n.ChartEngine.prototype.getNextInterval=function(t,e,i){e||(e=1),!1!==i&&(i=!0);var n=this.standardMarketIterator(t,i?this.dataZone:this.displayZone);return e<1?n.previous(-1*e):n.next(e)},n.ChartEngine.prototype.standardMarketIterator=function(t,e,i){var n=e||this.dataZone,r=i||this.chart,a={begin:t,interval:"tick"==this.layout.interval?1:this.layout.interval,periodicity:"tick"==this.layout.interval?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,inZone:this.dataZone,outZone:n};return r.market.newIterator(a)},n.ChartEngine.prototype.zoomSet=function(t,e){if("volume_candle"!==this.layout.chartType){var i;i=this.isHome()?e.dataSet.length-1:this.tickFromPixel(this.chart.width/2,e);var n=e.dataSet.length-1-i,r=e.scroll;e.scroll=Math.floor(this.pixelFromTick(i,e)/t)+1+n,this.micropixels+=(r-n)*this.layout.candleWidth-(e.scroll-n)*t}this.setCandleWidth(t),e.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()},n.ChartEngine.prototype.zoomOut=function(t,e){function i(t){return function(e){if(r.zoomSet(e,t),r.animations.zoom.hasCompleted){if(r.runAppend("zoomOut",arguments))return;r.changeOccurred("layout")}}}if(!this.runPrepend("zoomOut",arguments)){this.grabbingScreen=!1,n.ChartEngine.insideChart&&n.unappendClassName(this.container,"stx-drag-chart"),this.preferences.zoomOutSpeed?e=this.preferences.zoomOutSpeed:e||(e=1.3),t&&t.preventDefault&&t.preventDefault(),this.cancelTouchSingleClick=!0;var r=this;for(var a in this.charts){var o=this.charts[a];if(n.ipad&&o.maxTicks>n.ChartEngine.ipadMaxTicks)return;var s=Math.floor(o.maxTicks*e),l=this.chart.width/s;l<this.minimumCandleWidth&&(l=this.minimumCandleWidth),this.layout.span=null,this.animations.zoom.run(i(o),this.layout.candleWidth,l)}}},n.ChartEngine.prototype.mouseWheel=function(t){if(!this.runPrepend("mouseWheel",arguments)){t||(t=event),t.preventDefault&&t.preventDefault();var e=t.deltaX,i=t.deltaY,r=null;if(this.lastMouseEvent&&(r=Date.now()-this.lastMouseWheelEvent),Math.abs(i)>Math.abs(e)?e=0:i=0,this.lastMouseWheelEvent=Date.now(),0!==Math.abs(e)||0!==Math.abs(i)){if(this.allowSideswipe&&0!==e){this.lastMove="horizontal";var a=-1*e;return a>50&&(a=50),a<-50&&(a=-50),this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),(null===r||r>500)&&(this.grabStartX=n.ChartEngine.crosshairX,this.grabStartY=n.ChartEngine.crosshairY),this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mousemoveinner(n.ChartEngine.crosshairX-a,n.ChartEngine.crosshairY),this.updateChartAccessories(),void(this.grabbingScreen=!1)}if(this.lastMove="vertical",this.allowZoom&&this.displayInitialized){i||("onmousewheel"==n.wheelEvent?(i=-.025*t.wheelDelta,t.wheelDeltaX&&(e=-.025*t.wheelDeltaX)):i=t.detail),"undefined"==typeof t.deltaMode&&(t.deltaMode="MozMousePixelScroll"==t.type?0:1);var o=i;1==t.deltaMode&&(o*=33);var s=null,l=null;if(this.mouseWheelAcceleration){var h=Math.max(Math.pow(Math.abs(o),.3),1);s=1-.1*h,l=1+.2*h}if(o>0?this.reverseMouseWheel?this.zoomOut(null,l):this.zoomIn(null,s):o<0&&(this.reverseMouseWheel?this.zoomIn(null,s):this.zoomOut(null,l)),!this.runAppend("mouseWheel",arguments))return!1}}}},n.ChartEngine.prototype.zoomIn=function(t,e){function i(t){return function(e){if(r.zoomSet(e,t),r.animations.zoom.hasCompleted){if(r.runAppend("zoomIn",arguments))return;r.changeOccurred("layout")}}}if(!this.runPrepend("zoomIn",arguments)){this.grabbingScreen=!1,n.ChartEngine.insideChart&&n.unappendClassName(this.container,"stx-drag-chart"),this.preferences.zoomInSpeed?e=this.preferences.zoomInSpeed:e||(e=.7);var r=this;for(var a in this.charts){var o=this.charts[a];t&&t.preventDefault&&t.preventDefault(),this.cancelTouchSingleClick=!0;var s=Math.floor(o.maxTicks*e);o.maxTicks-s<1&&(s=o.maxTicks-1),s<this.minimumZoomTicks&&(s=this.minimumZoomTicks);var l=this.chart.width/s;this.layout.span=null,this.animations.zoom.run(i(o),this.layout.candleWidth,l)}}},n.ChartEngine.prototype.translateIf=function(t){return this.translationCallback?this.translationCallback(t):t},n.ChartEngine.prototype.setTimeZone=function(t,e){if(void 0===s)return void(this.timeZoneOffset=0);var i=new Date,r=i.getTimezoneOffset(),a=r,o=r;t&&(this.dataZone=t),this.dataZone&&(a=new s.Date(i,this.dataZone).getTimezoneOffset()),e&&(this.displayZone=e),this.displayZone&&(o=new s.Date(i,this.displayZone).getTimezoneOffset()),this.timeZoneOffset=a-r-(o-r);for(var l in this.charts){var h=this.charts[l];h.masterData&&!n.ChartEngine.isDailyInterval(this.layout.interval)&&this.setDisplayDates(h.masterData)}this.createDataSet()},n.ChartEngine.prototype.setLocale=function(t,e){if("undefined"!=typeof Intl&&this.locale!=t){this.locale=t;var i,r=this.internationalizer={};for(r.hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hour12:!1}),r.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),r.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),r.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),r.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),r.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),r.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),r.numbers=new Intl.NumberFormat(this.locale),r.priceFormatters=[],e||(e=5),i=0;i<e+1;i++)r.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:i,minimumFractionDigits:i}));for(i=0;i<5;i++){var a=i,o=i;i||(a="",o=2),r["percent"+a]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:o,maximumFractionDigits:o})}n.I18N.createMonthArrays&&n.I18N.createMonthArrays(this,r.month,this.locale)}},n.ChartEngine.prototype.importLayout=function(t,e){"object"!=typeof e&&(e={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]});var i=this.layout,r=n.shallowClone(i),a=e.managePeriodicity,o=e.cb,s=e.seriesCB,l=e.noDataLoad,h=this.minimumCandleWidth,c=e.preserveTicksAndCandleWidth;c||!1===c||(c=!0);var u=this.exportDrawings();if(this.abortDrawings(),this.currentlyImporting=!0,n.Studies)for(var d in i.studies){var p=i.studies[d];n.Studies.removeStudy(this,p)}this.overlays={};var f=n.clone(t);if(f){var m=n.shallowClone(this.panels);this.panels={};var g=n.clone(f);a||(delete g.periodicity,delete g.interval,delete g.timeUnit,delete g.setSpan),n.dataBindSafeAssignment(i,g),a||(i.periodicity=r.periodicity,i.interval=r.interval,i.timeUnit=r.timeUnit,i.setSpan=r.setSpan),c?i.candleWidth=r.candleWidth:i.candleWidth||(i.candleWidth=8),i.candleWidth<h&&(i.candleWidth=h),this.setCandleWidth(i.candleWidth);var v,y,x,b=f.panels,C=[];for(y in b){if(!("top"in b[y]))break;for(x=b[y],x.name=y,v=C.length-1;v>=0&&C[v].top>x.top;--v);C.splice(v+1,0,x)}if(i.panels={},C.length>0)for(var w=0;w<C.length;++w)x=C[w],this.stackPanel(x.display,x.name,x.percent,x.chartName);else for(y in b)x=b[y],this.stackPanel(x.display,y,x.percent,x.chartName);n.isEmpty(b)&&this.stackPanel("chart","chart",1,"chart");for(var S in m){var T=m[S],D=this.panels[S];if(D){this.container.removeChild(D.holder),this.container.removeChild(T.handle);var M={holder:!0,subholder:!0,display:!0};for(var k in M)D[k]=T[k];this.configurePanelControls(D),T.chart.panel==T&&(T.chart.panel=D)}else this.privateDeletePanel(T)}if(this.adjustPanelPositions(),this.storePanels(),n.Studies){var _=n.clone(i.studies);delete i.studies;for(var E in _){var A=_[E];n.Studies.addStudy(this,A.type,A.inputs,A.outputs,A.parameters,A.panel)}}}"undefined"==typeof i.chartType&&(i.chartType="line"),this.adjustPanelPositions();var I=this;if(t.symbols){var P={};a&&(t.setSpan?P.span=t.setSpan:t.interval&&(P.periodicity={interval:t.interval,periodicity:t.periodicity,timeUnit:t.timeUnit}));var F=t.symbols[0].symbolObject||t.symbols[0].symbol;return void(l||this.newChart(F,null,this.chart,function(e){if(!e)for(var i,r=1;r<t.symbols.length;++r){i=t.symbols[r],i.parameters||(i.parameters={});var a=n.clone(i.parameters);I.addSeries(i.symbol,a,s)}I.importDrawings(u),I.draw(),I.currentlyImporting=!1,I.updateListeners("layout"),o&&o.apply(null,arguments)},P))}if(f&&a&&!l){if(f.setSpan&&this.chart.symbol)return void this.setSpan(f.setSpan,function(){I.importDrawings(u),I.draw(),I.currentlyImporting=!1,I.updateListeners("layout"),o&&o()});var L=f.interval,H=f.periodicity,N=f.timeUnit;if(isNaN(H)&&(H=1),L!=i.interval||H!=i.periodicity)return void this.setPeriodicityV2(H,L,N,function(){I.importDrawings(u),I.draw(),I.currentlyImporting=!1,I.updateListeners("layout"),e.cb&&e.cb()});this.createDataSet()}else this.createDataSet();this.importDrawings(u),this.draw(),c||this.home(),this.currentlyImporting=!1,this.updateListeners("layout"),e.cb&&e.cb()},n.ChartEngine.prototype.exportLayout=function(t){var e={};for(var i in this.layout)"studies"!=i&&"panels"!=i?e[i]=n.clone(this.layout[i]):"studies"==i?e.studies={}:"panels"==i&&(e.panels={});for(var r in this.panels){var a=e.panels[r]={},o=this.panels[r];a.percent=o.percent,a.display=o.display,a.chartName=o.chart.name,a.top=o.top}for(var s in this.layout.studies){var l=e.studies[s]={},h=this.layout.studies[s];l.type=h.type,l.inputs=n.clone(h.inputs),l.outputs=n.clone(h.outputs),l.panel=h.panel,l.parameters=n.clone(h.parameters)}return t&&(e.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0})),e},n.ChartEngine.prototype.doCleanupGaps=function(t,e,i){function r(t,e){for(;+t<+e;){var i=s?null:c[f],n=s?null:c.Adj_Close;h.push({DT:t,Open:i,High:i,Low:i,Close:i,Volume:0,Adj_Close:n}),t=p.next()}}var a=this.layout.interval;i=i||{};var o=i.cleanupGaps?i.cleanupGaps:this.cleanupGaps,s="gap"==o;if(!o)return t;if("tick"==a)return t;if(!t||!t.length)return t;e||(e=this.chart);e.masterData;if("month"==a||"week"==a){if(this.dontRoll)return t;a="day"}var l=function(t){return t.DT?t.DT:n.strToDateTime(t.Date)},h=[],c=t[0];h.push(c);for(var u,d={begin:l(c),interval:a,periodicity:1,timeUnit:this.layout.timeUnit,inZone:this.dataZone,outZone:this.dataZone},p=e.market.newIterator(d),f=e.defaultPlotField,m=0;m<t.length;m++){var g=t[m];u=p.next();var v=l(g);for(r(u,v);v<u&&(h.push(g),c=g,++m!=t.length);)g=t[m],v=l(g);u<v?(m--,u=p.previous()):(h.push(g),c=g)}return h},n.Comparison=function(){},n.Comparison.priceToPercent=function(t,e,i){return Math.round((i-n.Comparison.baseline)/n.Comparison.baseline*100*1e4)/1e4},n.Comparison.percentToPrice=function(t,e,i){return n.Comparison.baseline*(1+i/100)},n.Comparison.createComparisonSegmentInner=function(t,e){var r,a=[];for(r in e.series)e.series[r].parameters.isComparison&&a.push(r);var o=["Close","Open","High","Low","iqPrevClose"];e.defaultPlotField&&o.unshift(e.defaultPlotField);var s=n.ChartEngine.chartShowsHighs(t.layout.chartType)?"Close":o[0];e.dataSegment=[];var l=null,h=e.dataSet.length-e.scroll-1,c=(e.maxTicks,e.maxTicks+3);for(i=0;i<=c;i++){i==c&&(i=-1);var u=h+i;if(u<e.dataSet.length&&u>=0){var d=e.dataSet[u];if(!l&&(0===d[s]||null===d[s])){if(i<0)break;continue}l||(l=n.clone(d)),d.transform||(d.transform={cache:{},DT:d.DT,Date:d.Date}),!n.Comparison.baseline&&d[s]&&(l=n.clone(d)),n.Comparison.baseline=l[s];var p;for(p=0;p<o.length;p++)r=o[p],(d[r]||0===d[r])&&(d.transform[r]=Math.round((d[r]-n.Comparison.baseline)/n.Comparison.baseline*100*1e4)/1e4);var f=t.layout.studies;if(f)for(var m in f){var g=f[m];if(t.panels[g.panel]&&t.panels[g.panel].name==g.chart.name){for(r in g.outputMap)(d[r]||0===d[r])&&(d.transform[r]=Math.round((d[r]-n.Comparison.baseline)/n.Comparison.baseline*100*1e4)/1e4);g.referenceOutput&&(d[g.referenceOutput+" "+g.name]||0===d[g.referenceOutput+" "+g.name])&&(d.transform[g.referenceOutput+" "+g.name]=Math.round((d[g.referenceOutput+" "+g.name]-n.Comparison.baseline)/n.Comparison.baseline*100*1e4)/1e4)}}for(p in t.plugins){var v=t.plugins[p];if(v.transformOutputs)for(r in v.transformOutputs)(d[r]||0===d[r])&&(d.transform[r]=Math.round((d[r]-n.Comparison.baseline)/n.Comparison.baseline*100*1e4)/1e4)}var y;for(p=0;p<a.length;p++)if(r=a[p],(y=d[r])||0===y){var x=l[r];x||0===x||(l[r]=x=y/(1+d.transform[s]/100)),0!==x&&(d.transform[r]=Math.round((y-x)/x*100*1e4)/1e4)}e.dataSegment.push(d)}else u<0&&e.dataSegment.push(null);if(i<0)break}},n.Comparison.priceFormat=function(t,e,i){if(null===i||void 0===i)return"";var n=e.yAxis.priceTick,r=t.internationalizer;return i=r?n>=1?r.percent.format(i/100):n>=.1?r.percent1.format(i/100):n>=.01?r.percent2.format(i/100):n>=.001?r.percent3.format(i/100):r.percent4.format(i):n>=1?i.toFixed(0)+"%":n>=.1?i.toFixed(1)+"%":n>=.01?i.toFixed(2)+"%":n>=.001?i.toFixed(3)+"%":i.toFixed(4)+"%",0===parseFloat(i)&&"-"==i.charAt(0)&&(i=i.substring(1)),i},n.ChartEngine.prototype.setComparison=function(t,e){e||(e=this.chart),"string"==typeof e&&(e=this.charts[e]),!e.isComparison&&t?(this.setTransform(e,n.Comparison.priceToPercent,n.Comparison.percentToPrice),e.panel.yAxis.priceFormatter=n.Comparison.priceFormat,e.panel.yAxis.whichSet="dataSegment"):e.isComparison&&!t&&(this.unsetTransform(e),e.panel.yAxis.priceFormatter=null,e.panel.yAxis.whichSet="dataSet"),e.isComparison=t},"undefined"!=typeof document&&document.addEventListener("contextmenu",n.ChartEngine.handleContextMenu),t},__js_core_market_=function(t){t||(t={});var e=t.CIQ,i=t.timezoneJS;e||(e=function(){},t.CIQ=e);var n=36e5,r=24*n;e.Market=function(t){this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",this.tz_lib=void 0===i?Date:i.Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,void 0!==t&&t&&t!={}&&(t.market_definition&&(t=t.market_definition),t.rules&&(this.rules=t.rules),t.market_tz&&(this.market_tz=t.market_tz),t.convertOnDaily&&(this.convertOnDaily=t.convertOnDaily),t.hour_aligned,this.hour_aligned=t.hour_aligned,"undefined"!=typeof t.enabled_by_default&&t.enabled_by_default instanceof Array&&(this.enabled_by_default=t.enabled_by_default),this.market_def=t,this.market_def.name===undefined&&(this.market_def.name="no market name specified"),e.Market._createTimeSegments(this))},e.Market.GLOBEX={name:"GLOBEX",market_tz:"America/Chicago",hour_aligned:!0,rules:[{dayofweek:0,open:"15:00",close:"24:00"},{dayofweek:1,open:"00:00",close:"24:00"},{dayofweek:2,open:"00:00",close:"24:00"},{dayofweek:3,open:"00:00",close:"24:00"},{dayofweek:4,open:"00:00",close:"24:00"},{dayofweek:5,open:"00:00",close:"18:00"}]},e.Market.FOREX={name:"FOREX",market_tz:"America/New_York",hour_aligned:!0,rules:[{dayofweek:0,open:"15:00",close:"24:00"},{dayofweek:1,open:"00:00",close:"17:00"},{dayofweek:1,open:"17:00",close:"24:00"},{dayofweek:2,open:"00:00",close:"17:00"},{dayofweek:2,open:"17:00",close:"24:00"},{dayofweek:3,open:"00:00",close:"17:00"},{dayofweek:3,open:"17:00",close:"24:00"},{dayofweek:4,open:"00:00",close:"17:00"},{dayofweek:4,open:"17:00",close:"24:00"},{dayofweek:5,open:"00:00",close:"17:00"}]},e.Market.METALS={name:"METALS",market_tz:"America/New_York",hour_aligned:!0,rules:[{dayofweek:0,open:"18:00",close:"24:00"},{dayofweek:1,open:"00:00",close:"17:15"},{dayofweek:1,open:"18:00",close:"24:00"},{dayofweek:2,open:"00:00",close:"17:15"},{dayofweek:2,open:"18:00",close:"24:00"},{dayofweek:3,open:"00:00",close:"17:15"},{dayofweek:3,open:"18:00",close:"24:00"},{dayofweek:4,open:"00:00",close:"17:15"},{dayofweek:4,open:"18:00",close:"24:00"},{dayofweek:5,open:"00:00",close:"17:15"}]},e.Market.NYSE={name:"NYSE",market_tz:"America/New_York",hour_aligned:!1,rules:[{dayofweek:1,open:"09:30",close:"16:00"},{dayofweek:2,open:"09:30",close:"16:00"},{dayofweek:3,open:"09:30",close:"16:00"},{dayofweek:4,open:"09:30",close:"16:00"},{dayofweek:5,open:"09:30",close:"16:00"},{dayofweek:1,open:"04:00",close:"09:30",name:"pre"},{dayofweek:2,open:"04:00",close:"09:30",name:"pre"},{dayofweek:3,open:"04:00",close:"09:30",name:"pre"},{dayofweek:4,open:"04:00",close:"09:30",name:"pre"},{dayofweek:5,open:"04:00",close:"09:30",name:"pre"},{dayofweek:1,open:"16:00",close:"20:00",name:"post"},{dayofweek:2,open:"16:00",close:"20:00",name:"post"},{dayofweek:3,open:"16:00",close:"20:00",name:"post"},{dayofweek:4,open:"16:00",close:"20:00",name:"post"},{dayofweek:5,open:"16:00",close:"20:00",name:"post"},{date:"*-12-25",open:"00:00",close:"00:00"},{date:"*-07-04",open:"00:00",close:"00:00"},{date:"*-01-01",open:"00:00",close:"00:00"},{date:"2012-01-02",open:"00:00",close:"00:00"},{date:"2017-01-02"},{date:"2017-01-16"},{date:"2017-02-20"},{date:"2017-04-14"},{date:"2017-05-29"},{date:"2017-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2017-07-03",open:"9:30",close:"13:00"},{date:"2017-09-04"},{date:"2017-11-23"},{date:"2017-11-24",open:"4:00",close:"9:30",name:"pre"},{date:"2017-11-24",open:"9:30",close:"13:00"},{date:"2017-12-26"},{date:"2016-01-18"},{date:"2016-02-15"},{date:"2016-03-25"},{date:"2016-05-30"},{date:"2016-09-05"},{date:"2016-11-24"},{date:"2016-11-25",open:"4:00",close:"9:30",name:"pre"},{date:"2016-11-25",open:"9:30",close:"13:00"},{date:"2016-12-26"},{date:"2015-01-19"},{date:"2015-02-16"},{date:"2015-04-03"},{date:"2015-05-25"},{date:"2015-07-03"},{date:"2015-09-07"},{date:"2015-11-26"},{date:"2015-11-27",open:"4:00",close:"9:30",name:"pre"},{date:"2015-11-27",open:"9:30",close:"13:00"},{date:"2015-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2015-12-24",open:"9:30",close:"13:00"},{date:"2014-01-20"},{date:"2014-02-17"},{date:"2014-04-18"},{date:"2014-05-26"},{date:"2014-09-01"},{date:"2014-11-27"},{date:"2014-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2014-07-03",open:"9:30",close:"13:00"},{date:"2014-11-28",open:"4:00",close:"9:30",name:"pre"},{date:"2014-11-28",open:"9:30",close:"13:00"},{date:"2014-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2014-12-24",open:"9:30",close:"13:00"},{date:"2013-01-21"},{date:"2013-02-18"},{date:"2013-03-29"},{date:"2013-05-27"},{date:"2013-09-02"},{date:"2013-11-28"},{date:"2013-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2013-07-03",open:"9:30",close:"13:00"},{date:"2013-11-29",open:"4:00",close:"9:30",name:"pre"},{date:"2013-11-29",open:"9:30",close:"13:00"},{date:"2013-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2013-12-24",open:"9:30",close:"13:00"},{date:"2012-01-16"},{date:"2012-02-20"},{date:"2012-04-06"},{date:"2012-05-28"},{date:"2012-09-03"},{date:"2012-10-29"},{date:"2012-10-30"},{date:"2012-11-22"},{date:"2012-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2012-07-03",open:"9:30",close:"13:00"},{date:"2012-11-23",open:"4:00",close:"9:30",name:"pre"},{date:"2012-11-23",open:"9:30",close:"13:00"},{date:"2012-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2012-12-24",open:"9:30",close:"13:00"}]},e.Market.Symbology=function(){},e.Market.Symbology.isForeignSymbol=function(t){return!!t&&-1!=t.indexOf(".")},e.Market.Symbology.isFuturesSymbol=function(t){return!!t&&(0===t.indexOf("/")&&"/"!=t)},e.Market.Symbology.isForexSymbol=function(t){return!!t&&(!e.Market.Symbology.isForeignSymbol(t)&&(!e.Market.Symbology.isFuturesSymbol(t)&&(!(t.length<6||t.length>7)&&((6!=t.length||"X"!=t[5])&&!!/\^?[A-Za-z]{6}/.test(t)))))},e.Market.Symbology.isForexMetal=function(t,i){return!!t&&(!!e.Market.Symbology.isForexSymbol(t)&&("^"!=t.charAt(0)&&(t="^"+t),-1!=",XAU,XPD,XPT,XAG,".indexOf(","+t.substr(4,3)+",")||!i&&-1!=",XAU,XPD,XPT,XAG,".indexOf(","+t.substr(1,3)+",")))},e.Market.Symbology.isForexFuturesSymbol=function(t){return!!e.Market.Symbology.isForexSymbol(t)||!!e.Market.Symbology.isFuturesSymbol(t)},e.Market.Symbology.factory=function(t){var i=t.symbol;return e.Market.Symbology.isForeignSymbol(i)?null:e.Market.Symbology.isFuturesSymbol(i)?e.Market.GLOBEX:e.Market.Symbology.isForexMetal(i)?e.Market.METALS:e.Market.Symbology.isForexSymbol(i)?e.Market.FOREX:e.Market.NYSE},e.Market.prototype._find_next_segment=function(t){if(!this.market_def)return null;if(!this.rules)return null;var e=new Date(+t),i=this.newIterator({begin:e,interval:1,inZone:this.market_tz,outZone:this.market_tz});if(this._wasOpenIntraDay(e)){var n=this.zseg_match.close_parts.hours,r=this.zseg_match.close_parts.minutes;e.setHours(n),e.setMinutes(r),i=this.newIterator({begin:e,interval:1,inZone:this.market_tz,outZone:this.market_tz})}return i.next()},e.Market.prototype._find_prev_segment=function(t,e){if(!this.market_def)return null;if(!this.rules)return null;var i=new Date(+t),n=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),r=this._wasOpenIntraDay(i);if(null==r){i=new Date(i-6e4);var r=this._wasOpenIntraDay(i)}else(e&&i.getHours()===this.zseg_match.open_parts.hours&&i.getMinutes()===this.zseg_match.open_parts.minutes||!e&&i.getHours()===this.zseg_match.close_parts.hours&&i.getMinutes()===this.zseg_match.close_parts.minutes)&&(i=n.previous());if(r){var a=this.zseg_match.open_parts.hours,o=this.zseg_match.open_parts.minutes;return i.setHours(a),i.setMinutes(o),n=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),i=n.previous(),this.zseg_match.close_parts.hours===a&&this.zseg_match.close_parts.minutes===o?e?n.next():i:this.zseg_match.adjacent_child?i:e?n.next():i}return n.previous()},e.Market.prototype.disableSession=function(t,e){var i=!1;if(void 0!==e&&e&&(i=!0),t){for(var n=0;n<this.normalHours.length;n++)this.normalHours[n].name===t&&(this.normalHours[n].enabled=i);for(n=0;n<this.extraHours.length;n++)this.extraHours[n].name===t&&(this.extraHours[n].enabled=i)}},e.Market.prototype.enableSession=function(t){this.disableSession(t,"enable_instead")},e.Market.prototype.getClose=function(t,e,i,n){if(!this.market_def)return null;if(!this.rules)return null;var r=t;if(t||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==e){if(this._wasOpenIntraDay(r)&&this.zseg_match.name===e)return r.setHours(this.zseg_match.close_parts.hours),r.setMinutes(this.zseg_match.close_parts.minutes),r.setSeconds(0),r.setMilliseconds(0),r=this._convertFromMarketTZ(r,n)}else if(this._wasOpenDaily(r)){for(var a=this.zseg_match;a.child_;)a=a.child_;for(;!a.enabled;)a=a.parent_;return r.setHours(a.close_parts.hours),r.setMinutes(a.close_parts.minutes),r.setSeconds(0),r.setMilliseconds(0),r=this._convertFromMarketTZ(r,n)}return null},e.Market.prototype.getNextClose=function(t,e,i){if(!this.market_def)return null;if(!this.rules)return null;var n=t;if(t||(n=new Date,e=null),n=this._convertToMarketTZ(n,e),!this._wasOpenIntraDay(n)){n=this.newIterator({begin:n,interval:1,inZone:this.market_tz,outZone:this.market_tz}).next()}for(var r=n.getDate(),a=this.zseg_match;a.adjacent_child;)a=a.adjacent_child,r+=1;return n.setDate(r),n.setHours(a.close_parts.hours),n.setMinutes(a.close_parts.minutes),n.setSeconds(0),n.setMilliseconds(0),n=this._convertFromMarketTZ(n,i)},e.Market.prototype.getNextOpen=function(t,e,i){if(!this.market_def)return null;if(!this.rules)return null;var n=t;return t||(n=new Date,e=null),n=this._convertToMarketTZ(n,e),n=this._find_next_segment(n),this.zseg_match.adjacent_parent?(n=this.getNextOpen(n,this.market_tz,this.market_tz),n=this._convertFromMarketTZ(n,i)):(n.setHours(this.zseg_match.open_parts.hours),n.setMinutes(this.zseg_match.open_parts.minutes),n=this._convertFromMarketTZ(n,i))},e.Market.prototype.getOpen=function(t,e,i,n){if(!this.market_def)return null;if(!this.rules)return null;var r=t;if(t||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==e){if(this._wasOpenIntraDay(r)&&this.zseg_match.name==e)return r.setHours(this.zseg_match.open_parts.hours),r.setMinutes(this.zseg_match.open_parts.minutes),r.setSeconds(0),r.setMilliseconds(0),r=this._convertFromMarketTZ(r,n)}else if(this._wasOpenDaily(r)){for(var a=this.zseg_match;a.parent_;)a=a.parent_;for(;!a.enabled;)a=a.child_;return r.setHours(a.open_parts.hours),r.setMinutes(a.open_parts.minutes),r.setSeconds(0),r.setMilliseconds(0),r=this._convertFromMarketTZ(r,n)}return null},e.Market.prototype.getPreviousClose=function(t,e,i){if(!this.market_def)return null;if(!this.rules)return null;var n=t;return t||(n=new Date,e=null),n=this._convertToMarketTZ(n,e),n=this._find_prev_segment(n,!1),this.zseg_match.adjacent_child?this.getPreviousClose(n,this.market_tz,this.market_tz):(n.setHours(this.zseg_match.close_parts.hours),n.setMinutes(this.zseg_match.close_parts.minutes),n=this._convertFromMarketTZ(n,i))},e.Market.prototype.getPreviousOpen=function(t,e,i){if(!this.market_def)return null;if(!this.rules)return null;var n=t;return t||(n=new Date,e=null),n=this._convertToMarketTZ(n,e),n=this._find_prev_segment(n,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(this.market_tz,this.market_tz):(n.setHours(this.zseg_match.open_parts.hours),n.setMinutes(this.zseg_match.open_parts.minutes),n=this._convertFromMarketTZ(n,i))},e.Market.prototype.getSession=function(t,e){return t=this._convertToMarketTZ(t,e),this._wasOpenIntraDay(t)&&this.zseg_match?this.zseg_match.name:null},e.Market.prototype.marketZoneNow=function(){return this._convertToMarketTZ(new Date)},e.Market.prototype.isHourAligned=function(){return this.hour_aligned},e.Market.prototype.isOpen=function(){var t=new Date;return this.market_tz&&(t=new this.tz_lib(t.getTime(),this.market_tz)),this._wasOpenIntraDay(t)},e.Market.prototype.isMarketDay=function(){var t=new Date;return this.market_tz&&(t=new this.tz_lib(t.getTime(),this.market_tz)),this._wasOpenDaily(t)},e.Market.prototype.isMarketDate=function(t){return this._wasOpenDaily(t)},e.Market.prototype.newIterator=function(t){var i=!1;t.periodicity?i=t.periodicity:t.multiple&&(i=t.multiple);var n=t.interval;return n||(n="minute"),"hour"==n&&(n=60),i||(i=1),t.begin||(t.begin=new Date,params.inZone=null),n==parseInt(n,10)&&(n=parseInt(n,10),t.periodicity<1?(i=i*n*60,n="second"):(i*=n,n="minute")),t.timeUnit&&("millisecond"===t.timeUnit?n=t.timeUnit:"second"===t.timeUnit&&(n=t.timeUnit)),t.interval=n,t.multiple=i,t.market=this,new e.Market.Iterator(t)},e.Market.prototype._wasOpenDaily=function(t){return this._was_open(t,!1)},e.Market.prototype._wasOpenIntraDay=function(t){return this._was_open(t,!0)},e.Market.prototype._was_open=function(t,e){if(this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;var i,n=!1,r=!1,a=t.getFullYear(),o=t.getMonth()+1,s=t.getDay(),l=t.getDate(),h=t.getHours(),c=t.getMinutes(),u=t.getSeconds(),d=60*h*60+60*c+u;void 0===e&&(e=!0);var p;for(p=0;p<this.normalHours.length;p++)if(i=this.normalHours[p],i.enabled&&(n=i.dayofweek===s,n&&e&&(n=d>=i.open&&d<i.close),n)){if(!e&&this.zseg_match&&(i.open_parts.hours>this.zopen_hour||i.open_parts.hours==this.zopen_hour&&i.open_parts.minutes>this.zopen_minute))continue;if(this.zopen_hour=i.open_parts.hours,this.zopen_minute=i.open_parts.minutes,this.zclose_hour=i.close_parts.hours,this.zclose_minute=i.close_parts.minutes,this.zmatch_open=d===i.open,this.zseg_match=i,e)break}for(p=0;p<this.extraHours.length;p++)if(i=this.extraHours[p],i.enabled&&("*"===i.year||a===i.year)&&o===i.month&&l===i.day&&(r=!e&&i.open||d>=i.open&&d<i.close,!r&&this.zseg_match&&(n=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),r)){if(!e&&this.zseg_match&&(i.open_parts.hours>this.zopen_hour||i.open_parts.hours==this.zopen_hour&&i.open_parts.minutes>this.zopen_minute))continue;if(this.zopen_hour=i.open_parts.hours,this.zopen_minute=i.open_parts.minutes,this.zclose_hour=i.close_parts.hours,this.zclose_minute=i.close_parts.minutes,this.zmatch_open=d===i.open,this.zseg_match=i,e)break}return this.zseg_match},e.Market.prototype._wasClosed=function(t){return!this._was_open(t,!0)},e.Market.prototype._wasOpen=function(t){return this._was_open(t,!0)},e.Market.prototype._tzDifferenceMillis=function(t){var e=t,i=t
;return 60*(e.getTimezoneOffset()-i.getTimezoneOffset())*1e3},e.Market._createTimeSegments=function(t){for(var e,i=function(t,i){if(24===t.close_parts.hours&&0===i.open_parts.hours&&0===i.open_parts.minutes){if(e.dayofweek===o.dayofweek-1)return!0;if(6===e.dayofweek&&0===o.dayofweek)return!0}return!1},n=0;n<t.rules.length;n++){var r=JSON.parse(JSON.stringify(t.rules[n]));"undefined"==typeof r.open&&"undefined"==typeof r.close&&(r.open="00:00",r.close="00:00"),r.hasOwnProperty("name")||(r.name="");try{var o;if("undefined"!=typeof r.dayofweek?(r.year="*",o=a._createDayOfWeekSegment(t,r),e&&(e.dayofweek===o.dayofweek?(e.child_=o,o.parent_=e):i(e,o)&&(e.adjacent_child=o,o.adjacent_parent=e)),e=o):"undefined"!=typeof r.date?(r.isDayOfWeek=!1,r.dayofweek=-1,o=a._createDateTimeSegment(t,r)):console.log("Error, unknown rule type "+r),t.enabled_by_default)for(var s=0;s<t.enabled_by_default.length;s++){var l=t.enabled_by_default[s];if(o.name===l){o.enabled=!0;break}}}catch(t){console.log("Error, creating market rules "+t)}}},e.Market._timeSegment={};var a=e.Market._timeSegment;a.re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,a.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a.re_split_hours_minutes=/^(\d\d):(\d\d)$/,a.re_split_hour_minutes=/^(\d):(\d\d)$/,a._hashCode=function(t){var e,i,n,r=0;if(0===t.length)return r;for(e=0,n=t.length;e<n;e++)i=t.charCodeAt(e),r=(r<<5)-r+i,r|=0;return r},a._splitHoursMinutes=function(t){var e=a.re_split_hour_minutes.exec(t),i={hours:NaN,minutes:NaN};return null===e&&null===(e=a.re_split_hours_minutes.exec(t))?i:(i.hours=parseInt(e[1],10),i.minutes=parseInt(e[2],10),i)},a._createDayOfWeekSegment=function(t,e){var i={name:e.name,isDayOfWeek:!0,dayofweek:e.dayofweek,date_str:"*",open_parts:a._splitHoursMinutes(e.open),close_parts:a._splitHoursMinutes(e.close),open:a._secSinceMidnight(t,e.open,!0),close:a._secSinceMidnight(t,e.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1};return""===i.name&&(i.enabled=!0),i.hash_code=this._hashCode((i.open+i.close).toString()),t.normalHours.push(i),i},a._createDateTimeSegment=function(t,e){var i,n=this.re_regular_iso.exec(e.date);if(null===n){if(null===(n=this.re_wild_card_iso.exec(e.date)))return void console.log("Warning: invalid date format on rule -> "+e.date);i="*"}else i=parseInt(n[1],10);var r={name:e.name,isDayOfWeek:!1,dayofweek:-1,year:i,month:parseInt(n[2],10),day:parseInt(n[3],10),date_str:e.date,open_parts:a._splitHoursMinutes(e.open),close_parts:a._splitHoursMinutes(e.close),open:a._secSinceMidnight(t,e.open,!0),close:a._secSinceMidnight(t,e.close,!1),enabled:!1};return""===r.name&&(r.enabled=!0),r.hash_key=this._hashCode(r.date_str+r.open+r.close),t.extraHours.push(r),r},a._secSinceMidnight=function(t,e,i){var n=e.split(":"),r=parseInt(n[0],10),a=parseInt(n[1],10),o=60*r*60+60*a;return i||24===r&&(o=60*r*60+1),o},e.Market.prototype._convertToMarketTZ=function(t,e){if(!this.market_tz)return t;var i;return i=e?new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),e):new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),i.setTimezone&&i.setTimezone(this.market_tz),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())},e.Market.prototype._convertFromMarketTZ=function(t,e){if(!this.market_tz)return t;var i=new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),this.market_tz);return e?(i.setTimezone&&i.setTimezone(e),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(i.getTime())},e.Market.Iterator=function(t){this.market=t.market,this.begin=t.begin,this.interval=t.interval,this.multiple=t.multiple,this.inZone=t.inZone,this.outZone=t.outZone,this.clock=new e.Market.Iterator._Clock(t.market,t.interval,t.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,t.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1},e.Market.Iterator.prototype.date=function(){return this.clock._date()},e.Market.Iterator.prototype.futureTick=function(t){this.clock.skip=1;var e,i=0;e=this.intraDay?this.market._convertToMarketTZ(t.end,this.inZone).getTime():t.end.getTime();var n=this.clock.ctime;if(e===n)return i;var r=2,a=1e3,o=0;t.sample_size&&(r=t.sample_size);var s,l=(new Date).getTime();if(e>n){for(this.clock.forward=!0;this.clock.ctime<e;)if(i+=1,o+=1,this.clock._findNext(),o===a&&(o=0,(new Date).getTime()-l>=r)){s=(this.clock.ctime-n)/i,i=Math.floor((e-n)/s);break}}else for(this.clock.forward=!1;this.clock.ctime>e;)if(i+=1,o+=1,this.clock._findPrevious(),o===a&&(o=0,(new Date).getTime()-l>=r)){s=(n-this.clock.ctime)/i,i=Math.floor((n-e)/s);break}return i},e.Market.Iterator.prototype.isHourAligned=function(){return!this.intraDay||this.market.isHourAligned()},e.Market.Iterator.prototype.isOpen=function(){return this.market.isOpen()},e.Market.Iterator.prototype.next=function(t){this.clock.skip=1,t&&(this.clock.skip=t),this.clock.forward=!0;for(var e=0;e<this.clock.skip;e++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},e.Market.Iterator.prototype.peek=function(){return this.clock._peek()},e.Market.Iterator.prototype.previous=function(t){this.clock.skip=1,t&&(this.clock.skip=t),this.clock.forward=!1;for(var e=0;e<this.clock.skip;e++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},e.Market.Iterator._Clock=function(t,e,i){i%60==0&&"second"===e&&(e="minute",i/=60),this.market=t,this.interval=e,this.multiple=i,this.intra_day=!1,this.intervals=[],this.max_iters=10080;var a=r,o=this._dayImpl;"millisecond"===e?(o=this._millisImpl,a=1):"second"===e?(o=this._secondImpl,a=1e3):"minute"===e?(o=this._minuteImpl,a=6e4):"hour"===e?(o=this._hourImpl,a=n):"day"===e?(o=this._dayImpl,a=r):"week"===e?(o=this._weekImpl,a=7*r):"month"===e?(o=this._monthImpl,a=30*r):console.log('Periodicity ERROR: "'+e+'" is not a valid interval. Please see setPeriodicity() for details.'),this.tick_time=a*i,this.intra_day=this.tick_time<r,this._findPrevious=this._findNext=o};var o=e.Market.Iterator._Clock.prototype;return o._total_minutes=function(t,e,i,n){return 60*(i-t)-e+n},o._alignMinutes=function(){if(this.market.zopen_minute===undefined)return[];var t=this.market.zopen_minute;this.market.isHourAligned()&&this.multiple%60==0&&(t=0);for(var e=this._total_minutes(this.market.zopen_hour,t,this.market.zclose_hour,this.market.zclose_minute),i=[],n=0;n<e;)i.push(t+n),n+=this.multiple;return i},o._alignBaseZero=function(t){for(var e=0,i=[e];;){if((e+=this.multiple)>=t)break;i.push(e)}return i},o._date=function(){var t=new Date(this.ctime);return this.intra_day?this.display_date=new Date(this.ctime+this.shift_millis):this.display_date=t,t},o._alignToBoundary=function(t,e){for(var i=0,n=0,r=e,a=0;a<t.length-1&&(i=t[a],n=t[a+1],e!==i&&e!==n);a++){if(e>i&&e<n){r=i;break}a+1===t.length-1&&(r=n)}return r},o._peek=function(){return this._date().toString()},o._seekHr=function(){this.forward?this.ctime-=n:this.ctime+=n},o._setStart=function(t){var e=this.market._tzDifferenceMillis(t),i=new Date(t.getTime()+e);this.shift_millis=e,this.ctime=i.getTime(),this.shift_millis=0,this.ctime=t.getTime()},o._tickTock=function(){this.forward?this.ctime+=this.tick_time:this.ctime-=this.tick_time},o._tockTick=function(){this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},o._tickTock24=function(){this.ctime+=r},o._tockTick24=function(){this.ctime-=r},o._windMaybe=function(t,e){for(var i=0,n=new Date(this.ctime),r=!1;!t.call(this.market,n);)if(e.call(this),r=!0,n=new Date(this.ctime),(i+=1)>this.max_iters){var a="Warning! max iterations ("+this.max_iters;a+=") reached with no rule match.",console.log(a);break}return r},o._millisImpl=function(){if(!this.mperiods_aligned){var t=this._alignBaseZero(1e3),e=new Date(this.ctime),i=e.getMilliseconds();i=this._alignToBoundary(t,i),e.setMilliseconds(i),this.ctime=e.getTime(),this.mperiods_aligned=!0}return this._tickTock(),this._date()},o._secondImpl=function(){if(!this.speriod_aligned){var t=this._alignBaseZero(60),e=new Date(this.ctime),i=e.getSeconds();i=this._alignToBoundary(t,i),e.setSeconds(i),e.setMilliseconds(0),this.ctime=e.getTime(),this.speriod_aligned=!0}return this._tickTock(),this._date()},o._minuteImpl=function(){var t=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),e=new Date(this.ctime),i=e.getTimezoneOffset(),n=e.getMinutes(),r=e.getHours(),a=this._alignMinutes(),o=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,r,n)+this.market.zopen_minute;o=t?this.forward?a[a.length-1]:a[0]:this._alignToBoundary(a,o),r=Math.floor(o/60)+this.market.zopen_hour,e.setHours(r),e.setMinutes(o%60),e.setSeconds(0),e.setMilliseconds(0);var s=e.getTimezoneOffset()-i;(this.forward&&s<0||!this.forward&&s>0)&&e.setTime(e.getTime()-6e4*s),this.ctime=e.getTime(),this._tickTock();var l=this.market.zseg_match,h=this.market.hour_aligned&&this.multiple%60==0;if(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!h&&l!=this.market.zseg_match){if(e=new Date(this.ctime),this.forward)e.setMinutes(this.market.zopen_minute),e.setHours(this.market.zopen_hour);else{a=this._alignMinutes();var c=a[a.length-1];e.setMinutes(c%60),e.setHours(Math.floor(c/60)+this.market.zopen_hour)}this.ctime=e.getTime()}return this._date()},o._hourImpl=function(){this._windMaybe(this.market._wasOpenIntraDay,this._tockTick);var t=new Date(this.ctime);this.market.isHourAligned()?t.setMinutes(0):t.setMinutes(this.market.zopen_minute),t.setSeconds(0),t.setMilliseconds(0),this.ctime=t.getTime(),this._tickTock();var e=this.market.zseg_match;if(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!this.market.hour_aligned&&e!=this.market.zseg_match){if(current_date=new Date(this.ctime),this.forward)current_date.setMinutes(this.market.zopen_minute),current_date.setHours(this.market.zopen_hour);else{periods=this._alignMinutes();var i=periods[periods.length-1];current_date.setMinutes(i%60),current_date.setHours(Math.floor(i/60)+this.market.zopen_hour)}this.ctime=current_date.getTime()}return this._date()},o._dayImpl=function(){this._windMaybe(this.market._wasOpenDaily,this._seekHr);var t=new Date(this.ctime);t.setHours(t.getHours()+2),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),this.ctime=t.getTime();for(var e=0;e<this.multiple;){this.forward?this._tickTock24():this._tockTick24();var i=60*this._date().getHours()+this._date().getMinutes();this.ctime-=6e4*i,i>720&&(this.ctime+=r),this.market._wasOpenDaily(this._date())&&(e+=1)}return this._date()},o._weekImpl=function(){this._tickTock();var t=new Date(this.ctime);for(t.setHours(t.getHours()+2);0!==t.getDay();)this._tockTick24(),t=new Date(this.ctime);this._windMaybe(this.market._wasOpenDaily,this._tickTock24),t=new Date(this.ctime),t.setHours(t.getHours()+2),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),this.ctime=t.getTime();var e=60*this._date().getHours()+this._date().getMinutes();return this.ctime-=6e4*e,e>720&&(this.ctime+=r),this._date()},o._monthImpl=function(){var t=new Date(this.ctime);t.setDate(15),this.ctime=t.getTime(),this._tickTock(),t=new Date(this.ctime),t.setHours(t.getHours()+2),t.setDate(1),this.ctime=t.getTime(),t.setHours(t.getHours()+2),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),t=new Date(this.ctime),t.setHours(t.getHours()+2),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),this.ctime=t.getTime();var e=60*this._date().getHours()+this._date().getMinutes();return this.ctime-=6e4*e,e>720&&(this.ctime+=r),this._date()},o._findNext=null,o._findPrevious=null,t},__js_core_polyfills_=function(){var t={};return Math.easeInOutQuad=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)},Math.easeInOutCubic=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:(t-=2,i/2*(t*t*t+2)+e)},t},__js_core_timezone_=function(_exports){var CIQ=_exports.CIQ;return CIQ.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada)":"America/Los_Angeles","(UTC-08:00) Tijuana":"America/Tijuana","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Indiana (East)":"America/Indiana/Indianapolis","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Buenos Aires":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Azores":"Atlantic/Azores","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Casablanca":"Africa/Casablanca","(UTC) Dublin, Lisbon, London":"Europe/London","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Amsterdam","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":"Europe/Sarajevo","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Volgograd":"Europe/Moscow","(UTC+03:00) Simferopol":"Europe/Simferopol","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Kuala_Lumpur","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:30) Pyongyang":"Asia/Pyongyang","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){"use strict";var root=this,timezoneJS={};_exports.timezoneJS=timezoneJS,timezoneJS.VERSION="0.4.11";for(var ajax_lib=root.$||root.jQuery||root.Zepto,fleegix=root.fleegix,DAYS=timezoneJS.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTHS=timezoneJS.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],SHORT_MONTHS={},SHORT_DAYS={},EXACT_DATE_TIME={},i=0;i<MONTHS.length;i++)SHORT_MONTHS[MONTHS[i].substr(0,3)]=i;for(i=0;i<DAYS.length;i++)SHORT_DAYS[DAYS[i].substr(0,3)]=i;var _arrIndexOf=Array.prototype.indexOf||function(t){if(null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!==n&&n!==Infinity&&n!==-Infinity&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var r=n>=0?n:Math.max(i-Math.abs(n),0);r<i;r++)if(r in e&&e[r]===t)return r;return-1},_fixWidth=function(t,e){if("number"!=typeof t)throw"not a number: "+t;var i=t>1e3,n=t.toString(),r=n.length;if(i&&r>e)return n.substr(r-e,r);for(n=[n];r<e;)n.unshift("0"),r++;return n.join("")},_transport=function(t){if(t){if(!t.url)throw new Error("URL must be specified");if("async"in t||(t.async=!0),!(fleegix&&"undefined"!=typeof fleegix.xhr||ajax_lib&&"undefined"!=typeof ajax_lib.ajax))throw new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return t.async?fleegix&&fleegix.xhr?fleegix.xhr.send({url:t.url,method:"get",handleSuccess:t.success,handleErr:t.error}):ajax_lib.ajax({url:t.url,dataType:"text",method:"GET",error:t.error,success:t.success}):fleegix&&fleegix.xhr?fleegix.xhr.doReq({url:t.url,async:!1}):ajax_lib.ajax({url:t.url,async:!1,dataType:"text"}).responseText}};timezoneJS.ruleCache={},timezoneJS.Date=function(){if(this===timezoneJS)throw"timezoneJS.Date object must be constructed with 'new'";var t=Array.prototype.slice.apply(arguments),e=null,i=null,n=[],r=!1;"[object Array]"===Object.prototype.toString.call(t[0])&&(t=t[0]),"string"==typeof t[t.length-1]&&(r=Date.parse(t[t.length-1].replace(/GMT[\+\-]\d+/,"")),(isNaN(r)||null===r)&&(i=t.pop()));var a=!1;switch(t.length){case 0:e=new Date;break;case 1:e=new Date(t[0]),"string"==typeof t[0]&&-1==t[0].search(/[+-][0-9]{4}/)&&-1==t[0].search(/Z/)&&-1==t[0].search(/T/)&&(a=!0);break;case 2:e=new Date(t[0],t[1]),a=!0;break;default:for(var o=0;o<7;o++)n[o]=t[o]||0;e=new Date(n[0],n[1],n[2],n[3],n[4],n[5],n[6]),a=!0}if(isNaN(e.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=i||null,a?this.setFromDateObjProxy(e):this.setFromTimeProxy(e.getTime(),i)},timezoneJS.Date.prototype={getDate:function(){return this.date},getDay:function(){return this._day},getFullYear:function(){return this.year},getMonth:function(){return this.month},getYear:function(){return this.year-1900},getHours:function(){return this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){return this._timeProxy+60*this.getTimezoneOffset()*1e3},getTimezone:function(){return this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){if(this._useCache)return this._tzInfo;var t;return t=this.timezone?"Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:timezoneJS.timezone.getTzInfo(this._timeProxy,this.timezone):{tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=t,this._useCache=!0,t},getUTCDateProxy:function(){var t=new Date(this._timeProxy);return t.setUTCMinutes(t.getUTCMinutes()+this.getTimezoneOffset()),t},setDate:function(t){return this.setAttribute("date",t),this.getTime()},setFullYear:function(t,e,i){return i!==undefined&&this.setAttribute("date",1),this.setAttribute("year",t),e!==undefined&&this.setAttribute("month",e),i!==undefined&&this.setAttribute("date",i),this.getTime()},setMonth:function(t,e){return this.setAttribute("month",t),e!==undefined&&this.setAttribute("date",e),this.getTime()},setYear:function(t){return t=Number(t),0<=t&&t<=99&&(t+=1900),this.setUTCAttribute("year",t),this.getTime()},setHours:function(t,e,i,n){return this.setAttribute("hours",t),e!==undefined&&this.setAttribute("minutes",e),i!==undefined&&this.setAttribute("seconds",i),n!==undefined&&this.setAttribute("milliseconds",n),this.getTime()},setMinutes:function(t,e,i){return this.setAttribute("minutes",t),e!==undefined&&this.setAttribute("seconds",e),i!==undefined&&this.setAttribute("milliseconds",i),this.getTime()},setSeconds:function(t,e){return this.setAttribute("seconds",t),e!==undefined&&this.setAttribute("milliseconds",e),this.getTime()},setMilliseconds:function(t){return this.setAttribute("milliseconds",t),this.getTime()},setTime:function(t){if(isNaN(t))throw new Error("Units must be a number.");return this.setFromTimeProxy(t,this.timezone),this.getTime()},setUTCFullYear:function(t,e,i){return i!==undefined&&this.setUTCAttribute("date",1),this.setUTCAttribute("year",t),e!==undefined&&this.setUTCAttribute("month",e),i!==undefined&&this.setUTCAttribute("date",i),this.getTime()},setUTCMonth:function(t,e){return this.setUTCAttribute("month",t),e!==undefined&&this.setUTCAttribute("date",e),this.getTime()},setUTCDate:function(t){return this.setUTCAttribute("date",t),this.getTime()},setUTCHours:function(t,e,i,n){return this.setUTCAttribute("hours",t),e!==undefined&&this.setUTCAttribute("minutes",e),i!==undefined&&this.setUTCAttribute("seconds",i),n!==undefined&&this.setUTCAttribute("milliseconds",n),this.getTime()},setUTCMinutes:function(t,e,i){return this.setUTCAttribute("minutes",t),e!==undefined&&this.setUTCAttribute("seconds",e),i!==undefined&&this.setUTCAttribute("milliseconds",i),this.getTime()},setUTCSeconds:function(t,e){return this.setUTCAttribute("seconds",t),e!==undefined&&this.setUTCAttribute("milliseconds",e),this.getTime()},setUTCMilliseconds:function(t){return this.setUTCAttribute("milliseconds",t),this.getTime()},setFromDateObjProxy:function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.date=t.getDate(),this.hours=t.getHours(),this.minutes=t.getMinutes(),this.seconds=t.getSeconds(),this.milliseconds=t.getMilliseconds(),this._day=t.getDay(),this._dateProxy=t,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(t,e){var i=new Date(t),n=e?timezoneJS.timezone.getTzInfo(t,e,!0).tzOffset:i.getTimezoneOffset();i.setTime(t+6e4*(i.getTimezoneOffset()-n)),this.setFromDateObjProxy(i)},setAttribute:function(t,e){if(isNaN(e))throw new Error("Units must be a number.");var i=this._dateProxy;i["set"+("year"===t?"FullYear":t.substr(0,1).toUpperCase()+t.substr(1))](e),this.setFromDateObjProxy(i)},setUTCAttribute:function(t,e){if(isNaN(e))throw new Error("Units must be a number.");var i="year"===t?"FullYear":t.substr(0,1).toUpperCase()+t.substr(1),n=this.getUTCDateProxy();n["setUTC"+i](e),n.setUTCMinutes(n.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(n.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(t){var e=this.getTimezoneInfo().tzOffset;this.timezone=t,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+e)},removeTimezone:function(){this.timezone=null,this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return this.timezone?new timezoneJS.Date(this.getTime(),this.timezone):new timezoneJS.Date(this.getTime())},toGMTString:function(){return this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+"Z"},toJSON:function(){return this.toISOString()},toDateString:function(){return this.toString("EEE MMM dd yyyy")},toTimeString:function(){return this.toString("H:mm k")},toString:function(t,e){t||(t="yyyy-MM-ddTHH:mm:ss.SSS");var i=t,n=e?timezoneJS.timezone.getTzInfo(this.getTime(),e):this.getTimezoneInfo(),r=this;e&&(r=this.clone(),r.setTimezone(e));var a=r.getHours();return i.replace(/a+/g,function(){return"k"}).replace(/y+/g,function(t){return _fixWidth(r.getFullYear(),t.length)}).replace(/d+/g,function(t){return _fixWidth(r.getDate(),t.length)}).replace(/m+/g,function(t){return _fixWidth(r.getMinutes(),t.length)}).replace(/s+/g,function(t){return _fixWidth(r.getSeconds(),t.length)}).replace(/S+/g,function(t){return _fixWidth(r.getMilliseconds(),t.length)}).replace(/h+/g,function(t){return _fixWidth(a%12==0?12:a%12,t.length)}).replace(/M+/g,function(t){var e=r.getMonth(),i=t.length;return i>3?timezoneJS.Months[e]:i>2?timezoneJS.Months[e].substring(0,i):_fixWidth(e+1,i)}).replace(/k+/g,function(){return a>=12?(a>12&&(a-=12),"PM"):"AM"}).replace(/H+/g,function(t){return _fixWidth(a,t.length)}).replace(/E+/g,function(t){return DAYS[r.getDay()].substring(0,t.length)}).replace(/Z+/gi,function(){return n.tzAbbr})},toUTCString:function(){return this.toGMTString()},civilToJulianDayNumber:function(t,e,i){var n;e++,e>12&&(n=parseInt(e/12,10),e%=12,t+=n),e<=2&&(t-=1,e+=12),n=Math.floor(t/100);var r=2-n+Math.floor(n/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+i+r-1524},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}},timezoneJS.timezone=new function(){function invalidTZError(t){throw new Error("Timezone '"+t+"' is either incorrect, or not loaded in the timezone registry.")}function builtInLoadZoneFile(t,e){var i=_this.zoneFileBasePath+"/"+t;return e&&e.async?_this.transport({async:!0,url:i,success:function(t){return _this.parseZones(t)&&"function"==typeof e.callback&&e.callback()},error:function(){throw new Error("Error retrieving '"+i+"' zoneinfo files")}}):_this.parseZones(_this.transport({url:i,async:!1}))}function getRegionForTimezone(t){var e,i,n=regionExceptions[t];if(n)return n;if(e=t.split("/")[0],i=regionMap[e])return i;var r=_this.zones[t];return"string"==typeof r?getRegionForTimezone(r):_this.loadedZones.backward?void invalidTZError(t):(_this.loadZoneFile("backward"),getRegionForTimezone(t))}function parseTimeString(t){var e=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,i=t.match(e);return i[1]=parseInt(i[1],10),i[2]=i[2]?parseInt(i[2],10):0,i[3]=i[3]?parseInt(i[3],10):0,i.slice(1,5)}function processZone(t){if(t[3]){var e=parseInt(t[3],10),i=11,n=31;t[4]&&(i=SHORT_MONTHS[t[4].substr(0,3)],n=parseInt(t[5],10)||1);var r=t[6]?parseTimeString(t[6]):[0,0,0];return[e,i,n,r[0],r[1],r[2]]}}function getZone(t,e){for(var i="number"==typeof t?t:new Date(+t).getTime(),n=e,r=_this.zones[n];"string"==typeof r;)n=r,r=_this.zones[n];if(!r){if(!_this.loadedZones.backward)return _this.loadZoneFile("backward"),getZone(t,e);if(n&&n!==e)return _this.lazyLoadZoneFiles(n),getZone(t,n);invalidTZError(n)}if(0===r.length)throw new Error("No Zone found for '"+e+"' on "+t);for(var a=r.length-1;a>=0;a--){var o=r[a];if(o[3]&&i>o[3])break}return r[a+1]}function getBasicOffset(t){var e=parseTimeString(t);return(e=("-"===t.charAt(0)?-1:1)*(1e3*(60*(60*e[0]+e[1])+e[2])))/60/1e3}function getAdjustedOffset(t,e){return-Math.ceil(e-t)}function getRule(t,e,i,n){var r="number"==typeof t?new Date(t):t,a=e[1],o=e[0],s=a.match(/^([0-9]):([0-9][0-9])$/);if(s)return[-1e6,"max","-","Jan",1,[0,0,0],60*parseInt(s[1],10)+parseInt(s[2],10),"-"];var l,h=function(t,e,i){var n=0;if("u"===e||"g"===e||"z"===e)n=0;else if("s"===e)n=o;else{if("w"!==e&&e)throw new Error("unknown type "+e);n=getAdjustedOffset(o,i[6])}return n*=6e4,new Date(t.getTime()+n)},c=function(t,e){var i,n=t[0],r=t[1],a=r[5];if(EXACT_DATE_TIME[n]||(EXACT_DATE_TIME[n]={}),EXACT_DATE_TIME[n][r])i=EXACT_DATE_TIME[n][r];else{if(isNaN(r[4])){var o,s;"last"===r[4].substr(0,4)?(i=new Date(Date.UTC(n,SHORT_MONTHS[r[3]]+1,1,a[0]-24,a[1],a[2],0)),o=SHORT_DAYS[r[4].substr(4,3)],s="<="):(i=new Date(Date.UTC(n,SHORT_MONTHS[r[3]],r[4].substr(5),a[0],a[1],a[2],0)),o=SHORT_DAYS[r[4].substr(0,3)],s=r[4].substr(3,2));var l=i.getUTCDay();">="===s?i.setUTCDate(i.getUTCDate()+(o-l+(o<l?7:0))):i.setUTCDate(i.getUTCDate()+(o-l-(o>l?7:0)))}else i=new Date(Date.UTC(n,SHORT_MONTHS[r[3]],r[4],a[0],a[1],a[2],0));EXACT_DATE_TIME[n][r]=i}return e&&(i=h(i,a[3],e)),i},u=function(t,e){for(var i=[],n=0;e&&n<e.length;n++)e[n][0]<=t&&(e[n][1]>=t||e[n][0]===t&&"only"===e[n][1]||"max"===e[n][1])&&i.push([t,e[n]]);return i},d=function(t,e,n){var r,a;return t instanceof Date?n&&(t=h(t,i?"u":"w",n)):(r=t[0],a=t[1],t=!n&&EXACT_DATE_TIME[r]&&EXACT_DATE_TIME[r][a]?EXACT_DATE_TIME[r][a]:c(t,n)),e instanceof Date?n&&(e=h(e,i?"u":"w",n)):(r=e[0],a=e[1],e=!n&&EXACT_DATE_TIME[r]&&EXACT_DATE_TIME[r][a]?EXACT_DATE_TIME[r][a]:c(e,n)),t=Number(t),e=Number(e),t-e},p=r.getUTCFullYear(),f=timezoneJS.ruleCache[n];if(f||(f=timezoneJS.ruleCache[n]={}),l=f[p],l||(l=u(p-1,_this.rules[a]),l=l.concat(u(p,_this.rules[a])),l.sort(d),f[p]=l),!l||!l.length)return null;for(var m,g=l.length-1;g>=0;g--){m=g>0?l[g-1][1]:null;var v=l[g];if(v[2]||(v[2]=c(v,m)),d(r,v,m)>=0)return v[1]}return null}function getAbbreviation(t,e){var i=t[2];if(i.indexOf("%s")>-1){var n;return n=e?"-"===e[7]?"":e[7]:"S",i.replace("%s",n)}return i.indexOf("/")>-1?i.split("/",2)[e&&e[6]?1:0]:i}var _this=this,regionMap={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},regionExceptions={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"};this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=getRegionForTimezone,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(t){var e={async:!0
},i=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica";for(var n in t)e[n]=t[n];return this.loadZoneFiles(i,e)},this.loadZoneFiles=function(t,e){var i,n=0;if("string"==typeof t)return this.loadZoneFile(t,e);e=e||{},i=e.callback,e.callback=function(){++n===t.length&&"function"==typeof i&&i()};for(var r=0;r<t.length;r++)this.loadZoneFile(t[r],e)},this.loadZoneFile=function(t,e){if("undefined"==typeof this.zoneFileBasePath)throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[t])return this.loadedZones[t]=!0,builtInLoadZoneFile(t,e)},this.loadZoneJSONData=function(url,sync){var processData=function(data){data=eval("("+data+")");for(var z in data.zones)_this.zones[z]=data.zones[z];for(var r in data.rules)_this.rules[r]=data.rules[r]};return sync?processData(_this.transport({url:url,async:!1})):_this.transport({url:url,success:processData})},this.loadZoneDataFromObject=function(t){if(t){for(var e in t.zones)_this.zones[e]=t.zones[e];for(var i in t.rules)_this.rules[i]=t.rules[i]}},this.getAllZones=function(){var t=[];for(var e in this.zones)t.push(e);return t.sort()},this.parseZones=function(t){if(!t)return!1;for(var e,i=t.split("\n"),n=[],r=null,a=null,o=0;o<i.length;o++)if(e=i[o],e.match(/^\s/)&&(e="Zone "+r+e),e=e.split("#")[0],e.length>3)switch(n=e.split(/\s+/),n.shift()){case"Zone":if(r=n.shift(),_this.zones[r]||(_this.zones[r]=[]),n.length<3)break;n.splice(3,n.length,processZone(n)),n[3]&&(n[3]=Date.UTC.apply(null,n[3])),n[0]=-getBasicOffset(n[0]),_this.zones[r].push(n);break;case"Rule":a=n.shift(),_this.rules[a]||(_this.rules[a]=[]),n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||n[1],n[5]=parseTimeString(n[5]),n[6]=getBasicOffset(n[6]),_this.rules[a].push(n);break;case"Link":if(_this.zones[n[1]])throw new Error("Error with Link "+n[1]+". Cannot create link of a preexisted zone.");isNaN(n[0])?_this.zones[n[1]]=n[0]:_this.zones[n[1]]=parseInt(n[0],10)}return!0},this.transport=_transport,this.getTzInfo=function(t,e,i){this.lazyLoadZoneFiles(e);var n=getZone(t,e),r=+n[0],a=getRule(t,n,i,e);return a&&(r=getAdjustedOffset(r,a[6])),{tzOffset:r,tzAbbr:getAbbreviation(n,a)}},this.lazyLoadZoneFiles=function(t){if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){var e=getRegionForTimezone(t);if(!e)throw new Error("Not a valid timezone ID.");this.loadZoneFiles(e)}}}}.call("undefined"!=typeof window?window:this),_exports.timezoneJS.timezone.loadingScheme=_exports.timezoneJS.timezone.loadingSchemes.MANUAL_LOAD,_exports.timezoneJS.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"Egypt","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco","WE%sT",null]],"Africa/Johannesburg":[[-120,"SA","SAST",null]],"Africa/Tunis":[[-60,"Tunisia","CE%sT",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"Azer","+04/+05",null]],"Asia/Dhaka":[[-360,"Dhaka","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Shanghai":[[-480,"PRC","C%sT",null]],"Asia/Hong_Kong":[[-480,"HK","HK%sT",null]],"Asia/Taipei":[[-480,"Taiwan","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"Japan","J%sT",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"ROK","K%sT",null]],"Asia/Pyongyang":[[-540,"-","KST",14395968e5],[-510,"-","KST",null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"Mongol","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"Mongol","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"Pakistan","PK%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"Aus","CST",null]],"Australia/Perth":[[-480,"AW","WST",null]],"Australia/Eucla":[[-525,"AW","+0845/+0945",null]],"Australia/Brisbane":[[-600,"AQ","EST",null]],"Australia/Adelaide":[[-570,"AS","CST",null]],"Australia/Sydney":[[-600,"AN","EST",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"NC","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"Tonga","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],UTC:"Etc/UTC","Europe/London":[[0,"EU","GMT/BST",null]],WET:[[0,"EU","WE%sT",null]],CET:[[-60,"C-Eur","CE%sT",null]],MET:[[-60,"C-Eur","ME%sT",null]],EET:[[-120,"EU","EE%sT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Europe/Amsterdam":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","AZO%sT",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-180,"-","+03",14142888e5],[-120,"-","EET",null]],"Europe/Moscow":[[-240,"-","MSK",14142888e5],[-180,"-","MSK",null]],"Europe/Simferopol":[[-120,"EU","EE%sT",13961448e5],[-240,"-","MSK",14142888e5],[-180,"-","MSK",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-360,"-","+06",14142888e5],[-300,"-","+05",null]],"Asia/Omsk":[[-420,"-","+07",14142888e5],[-360,"-","+06",null]],"Asia/Novosibirsk":[[-420,"-","+07",14142888e5],[-360,"-","+06",14693256e5],[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-480,"-","+08",14142888e5],[-420,"-","+07",null]],"Asia/Irkutsk":[[-540,"-","+09",14142888e5],[-480,"-","+08",null]],"Asia/Yakutsk":[[-600,"-","+10",14142888e5],[-540,"-","+09",null]],"Asia/Vladivostok":[[-660,"-","+11",14142888e5],[-600,"-","+10",null]],"Asia/Magadan":[[-720,"-","+12",14142888e5],[-600,"-","+10",14614632e5],[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-720,"-","+12",14142888e5],[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Sarajevo":"Europe/Belgrade","Europe/Istanbul":[[-120,"EU","EE%sT",13961412e5],[-120,"-","EET",13962276e5],[-120,"EU","EE%sT",14457348e5],[-120,"1:00","EEST",14469444e5],[-120,"EU","EE%sT",14732064e5],[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/Indiana/Indianapolis":[[300,"US","E%sT",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",null]],"America/Tijuana":[[480,"US","P%sT",null]],"America/Costa_Rica":[[360,"CR","C%sT",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"Arg","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[240,"Chile","-04/-03",14808096e5],[180,"-","-03",null]],"America/Bogota":[[300,"CO","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"Uruguay","-03/-02",null]],"America/Caracas":[[270,"-","-0430",14620698e5],[240,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Asia/Rangoon":"Asia/Yangon","Atlantic/Reykjavik":"UTC","Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":"Asia/Riyadh","Asia/Istanbul":"Europe/Istanbul","Pacific/Midway":"Pacific/Pago_Pago"},rules:{Egypt:[[2014,"only","-","May","16",[0,0,0,null],60,"S"],[2014,"only","-","Jun","27",[0,0,0,null],0,"-"],[2014,"only","-","Aug","1",[0,0,0,null],60,"S"],[2014,"only","-","Sep","lastThu",[23,0,0,"s"],0,"-"]],Morocco:[[2012,2013,"-","Apr","lastSun",[2,0,0,null],60,"S"],[2012,"only","-","Jul","20",[3,0,0,null],0,"-"],[2012,"only","-","Aug","20",[2,0,0,null],60,"S"],[2012,"only","-","Sep","30",[3,0,0,null],0,"-"],[2013,"only","-","Jul","7",[3,0,0,null],0,"-"],[2013,"only","-","Aug","10",[2,0,0,null],60,"S"],[2013,"max","-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2021,"-","Mar","lastSun",[2,0,0,null],60,"S"],[2014,"only","-","Jun","28",[3,0,0,null],0,"-"],[2014,"only","-","Aug","2",[2,0,0,null],60,"S"],[2015,"only","-","Jun","14",[3,0,0,null],0,"-"],[2015,"only","-","Jul","19",[2,0,0,null],60,"S"],[2016,"only","-","Jun","5",[3,0,0,null],0,"-"],[2016,"only","-","Jul","10",[2,0,0,null],60,"S"],[2017,"only","-","May","21",[3,0,0,null],0,"-"],[2017,"only","-","Jul","2",[2,0,0,null],60,"S"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"S"],[2019,"only","-","May","5",[3,0,0,null],0,"-"],[2019,"only","-","Jun","9",[2,0,0,null],60,"S"],[2020,"only","-","Apr","19",[3,0,0,null],0,"-"],[2020,"only","-","May","24",[2,0,0,null],60,"S"],[2021,"only","-","Apr","11",[3,0,0,null],0,"-"],[2021,"only","-","May","16",[2,0,0,null],60,"S"],[2022,"only","-","May","8",[2,0,0,null],60,"S"]],SA:[],Tunisia:[],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Azer:[[1997,2015,"-","Mar","lastSun",[4,0,0,null],60,"S"],[1997,2015,"-","Oct","lastSun",[5,0,0,null],0,"-"]],Dhaka:[],PRC:[],HK:[],Taiwan:[],Iran:[[2012,"only","-","Mar","21",[0,0,0,null],60,"D"],[2012,"only","-","Sep","21",[0,0,0,null],0,"S"],[2013,2015,"-","Mar","22",[0,0,0,null],60,"D"],[2013,2015,"-","Sep","22",[0,0,0,null],0,"S"],[2016,"only","-","Mar","21",[0,0,0,null],60,"D"],[2016,"only","-","Sep","21",[0,0,0,null],0,"S"],[2017,2019,"-","Mar","22",[0,0,0,null],60,"D"],[2017,2019,"-","Sep","22",[0,0,0,null],0,"S"],[2020,"only","-","Mar","21",[0,0,0,null],60,"D"],[2020,"only","-","Sep","21",[0,0,0,null],0,"S"],[2021,2023,"-","Mar","22",[0,0,0,null],60,"D"],[2021,2023,"-","Sep","22",[0,0,0,null],0,"S"]],Zion:[[2012,"only","-","Mar","Fri>=26",[2,0,0,null],60,"D"],[2012,"only","-","Sep","23",[2,0,0,null],0,"S"],[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Japan:[],ROK:[],Mongol:[[2015,2016,"-","Mar","lastSat",[2,0,0,null],60,"S"],[2015,2016,"-","Sep","lastSat",[0,0,0,null],0,"-"]],Pakistan:[],Aus:[],AW:[],AQ:[],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"-"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"-"]],NC:[],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"S"]],WS:[[2012,"max","-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,"max","-","Sep","lastSun",[3,0,0,null],60,"D"]],Tonga:[[2016,"max","-","Nov","Sun>=1",[2,0,0,null],60,"S"],[2017,"max","-","Jan","Sun>=15",[3,0,0,null],0,"S"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],"C-Eur":[[1981,"max","-","Mar","lastSun",[2,0,0,"s"],60,"S"],[1996,"max","-","Oct","lastSun",[2,0,0,"s"],0,"-"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,"max","-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],CR:[],Arg:[],Brazil:[[2008,"max","-","Oct","Sun>=15",[0,0,0,null],60,"S"],[2012,"only","-","Feb","Sun>=22",[0,0,0,null],0,"-"],[2013,2014,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2015,"only","-","Feb","Sun>=22",[0,0,0,null],0,"-"],[2016,2022,"-","Feb","Sun>=15",[0,0,0,null],0,"-"]],Chile:[[2012,2014,"-","Apr","Sun>=23",[3,0,0,"u"],0,"-"],[2012,2014,"-","Sep","Sun>=2",[4,0,0,"u"],60,"S"],[2016,"max","-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,"max","-","Aug","Sun>=9",[4,0,0,"u"],60,"S"]],CO:[],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"S"],[2010,2012,"-","Apr","Sun>=8",[0,0,0,null],0,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]],Uruguay:[[2006,"max","-","Oct","Sun>=1",[2,0,0,null],60,"S"],[2007,"max","-","Mar","Sun>=8",[2,0,0,null],0,"-"]]}}),CIQ.convertTimeZone=function(t,e,i){var n=new _exports.timezoneJS.Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),e);return n.setTimezone(i),n},CIQ.convertToLocalTime=function(t,e){var i=t.getSeconds(),n=t.getMilliseconds(),r=new _exports.timezoneJS.Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),e);return new Date(r.getTime()+1e3*i+n)},_exports},__js_core_utility_=function(t){function e(t,i){if(!i)return document.getElementById(t);if(i.id==t)return i;if(!i.hasChildNodes)return null;for(var n=0;n<i.childNodes.length;n++){var r=e(t,i.childNodes[n]);if(r)return r}return null}function i(t,e){return e||(e=document),e.querySelectorAll(t)[0]}function n(){}"undefined"!=typeof global&&"undefined"==typeof global.CanvasRenderingContext2D&&(global.CanvasRenderingContext2D=function(){}),t.$$=e,t.$$$=i,String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},Function.prototype.ciqInheritsFrom||(Function.prototype.ciqInheritsFrom=function(t,e){if(!1!==e)this.prototype=new t;else{this.prototype=Object.create(t);for(var i in t.prototype)this.prototype[i]=t.prototype[i]}this.prototype.constructor=this,this.prototype.parent=t.prototype},Function.prototype.stxInheritsFrom=Function.prototype.ciqInheritsFrom),CanvasRenderingContext2D.prototype.dashedLineTo=function(t,e,i,n,r){if(!(r instanceof Array))return r&&console.log('WARNING: Unsupported drawing pattern "'+r+'"; defaulting to "solid"'),void this.stxLine(t,e,i,n,this.strokeStyle,this.globalAlpha,this.lineWidth);var a=function(t,e){return t-e<=1e-8},o=function(t,e){return t-e>=-1e-8},s=function(t,e){return Math.min(t,e)},l=function(t,e){return Math.max(t,e)},h={thereYet:o,cap:s},c={thereYet:o,cap:s};if(e-n>0&&(c.thereYet=a,c.cap=l),t-i>0&&(h.thereYet=a,h.cap=l),this.moveTo(t,e),!isNaN(t)&&!isNaN(e))for(var u=t,d=e,p=0,f=!0;!h.thereYet(u,i)||!c.thereYet(d,n);){var m=Math.atan2(n-e,i-t),g=r[p];u=h.cap(i,u+Math.cos(m)*g),d=c.cap(n,d+Math.sin(m)*g),f?this.lineTo(u,d):this.moveTo(u,d),p=(p+1)%r.length,f=!f}},CanvasRenderingContext2D.prototype.stxLine=function(t,e,i,n,r,a,o,s){this.beginPath(),this.lineWidth=o,this.strokeStyle=r,this.globalAlpha=a,s?this.dashedLineTo(t,e,i,n,s):(this.moveTo(t,e),this.lineTo(i,n)),this.stroke(),this.closePath(),this.lineWidth=1},CanvasRenderingContext2D.prototype.stxCircle=function(t,e,i,n){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),n&&this.fill(),this.stroke(),this.closePath()},t.CIQ=n,t.STX=n;var r="undefined"!=typeof navigator?navigator:{userAgent:""},a=r.userAgent,o="undefined"!=typeof window?window:{},s="undefined"!=typeof document?document:{};return n.ipad=-1!=a.indexOf("iPad"),n.iphone=-1!=a.indexOf("iPhone"),n.isSurface=r.msMaxTouchPoints&&r.msMaxTouchPoints>1,n.touchDevice="undefined"!=typeof s.ontouchstart||n.isSurface,n.is_chrome=a.toLowerCase().indexOf("chrome")>-1,n.isAndroid=a.toLowerCase().indexOf("android")>-1,n.isIE=a.toLowerCase().indexOf("msie")>-1||a.indexOf("Trident")>-1,n.isIE9=a.indexOf("Trident/5")>-1||a.indexOf("MSIE 9.0")>-1,n.isIE8=o.isIE8||a.indexOf("MSIE 8.0")>-1,n.isIOS7=a.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),n.isIOS8=a.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),n.isIOS9=a.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),n.isIOS10=a.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),n.isIOS7or8=n.isIOS7||n.isIOS8||n.isIOS9||n.isIOS10,n.isMobile=n.isAndroid||n.ipad||n.iphone,n.isSurfaceApp=o.MSApp,n.noKeyboard=n.ipad||n.iphone||n.isAndroid||n.isSurfaceApp,n.wheelEvent="wheel"in document.createElement("div")||"onwheel"in document?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",n.isIE&&(n.wheelEvent="wheel"),n.log10=function(t){return Math.log(t)/Math.LN10},n.deleteRHS=function(t,e){var i=!1;for(var n in t)t[n]==e&&(delete t[n],i=!0);return i},n.scrub=function(t,e){for(var i in t)"undefined"==typeof t[i]&&delete t[i],e&&null===t[i]&&delete t[i]},n.dataBindSafeAssignment=function(t,e){n.extend(t,e);for(var i in t)"undefined"==typeof e[i]&&delete t[i]},n.clone=function(t,e){if(null===t||"object"!=typeof t)return t;var i=t.constructor;if(i==Date||i==RegExp||i==Function||i==String||i==Number||i==Boolean)return new t.constructor(t);e=e||new t.constructor;for(var r in t)e[r]="undefined"==typeof e[r]?n.clone(t[r],null):e[r];return e},n.shallowClone=function(t){if(!t)return t;var e;if(t.constructor==Array){e=new Array(t.length);for(var i=0;i<t.length;i++)e[i]=t[i];return e}e={};for(var n in t)e[n]=t[n];return e},n.extend=function(t,e,i){for(var r in e){var a=e[r];a?a.constructor==Object?(t[r]||(t[r]={}),i?t[r]=e[r]:(t[r].constructor!=Object&&(t[r]={}),n.extend(t[r],e[r]))):a.constructor==Array?t[r]=a.slice():t[r]=a:t[r]=a}return t},n.ensureDefaults=function(t,e){for(var i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);return t},n.equals=function(t,e,i){if(!t&&e)return!1;if(t&&!e)return!1;if(typeof t!=typeof e)return!1;for(var r in t)if(!i||!i[r])if("object"!=typeof t[r]){if(e[r]!=t[r])return!1}else{var a=n.equals(t[r],e[r]);if(!a)return!1}return!0},n.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},n.first=function(t){for(var e in t)return e;return null},n.last=function(t){var e=null;for(var i in t)e=i;return e},n.objLength=function(t){if(!t)return 0;var e=0;for(var i in t)e++;return e},n.deriveFromObjectChain=function(t,e){var i=e.split(".");if(1===i.length)return{obj:t,member:e};for(var n=0;n<i.length-1;n++)t[i[n]]||(t[i[n]]={}),t=t[i[n]];return{obj:t,member:i[n]}},n.derivedFrom=function(t,e){return!!e.isPrototypeOf(t)||t instanceof e},n.replaceFields=function(t,e){if(!t)return t;var i={};for(var r in t){var a=t[r],o=e[r];if(o||(o=r),a&&"object"==typeof a)if(a.constructor==Array)for(var s=i[o]=new Array(a.length),l=0;l<s.length;l++){var h=a[l];s[l]="object"==typeof h?n.replaceFields(h,e):h}else i[o]=n.replaceFields(a,e);else i[o]=a}return i},n.removeNullValues=function(t){var e=n.clone(t);for(var i in e)e[i]||delete e[i];return e},n.reverseObject=function(t){var e={};for(var i in t)e[t[i]]=i;return e},n.camelCaseRegExp=/-([a-z])/g,n.makeCamelCase=function(t){return t.replace(n.camelCaseRegExp,function(t){return t[1].toUpperCase()})},n.appendClassName=function(t,e){if(t.className!=e){for(var i=t.className.split(" "),n=0;n<i.length;n++)if(i[n]==e)return;t.className?t.className+=" "+e:t.className=e}},n.unappendClassName=function(t,e){if(t&&-1!=t.className.indexOf(e))if(t.className==e)t.className="";else{for(var i=t.className.split(" "),n="",r=0;r<i.length;r++)i[r]!=e&&(""!==n&&(n+=" "),n+=i[r]);t.className=n}},n.swapClassName=function(t,e,i){n.unappendClassName(t,i),n.appendClassName(t,e)},n.hasClassName=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>-1},n.toggleClassName=function(t,e){n.hasClassName(t,e)?n.unappendClassName(t,e):n.appendClassName(t,e)},n.newChild=function(t,e,i,n){var r=document.createElement(e);return i&&(r.className=i),t.appendChild(r),n&&(r.innerHTML=n),r},n.innerHTML=function(t,e){window.MSApp?window.MSApp.execUnsafeLocalFunction(function(){t.innerHTML=e}):t.innerHTML=e},n.focus=function(t,e){if(n.isSurface||e){var i=0;isNaN(parseInt(e,10))||(i=e),setTimeout(function(){t.focus()},i)}else t.focus()},n.blur=function(t){t||(t=document.activeElement),t&&t.blur(),window.focus()},n.findNodesByText=function(t,e){if(t.innerHTML==e)return[t];for(var i=[],r=0;r<t.childNodes.length;r++){var a=n.findNodesByText(t.childNodes[r],e);a&&(i=i.concat(a))}return i.length?i:null},n.hideByText=function(t,e){for(var i=n.findNodesByText(t,e),r=0;r<i.length;r++)i[r].style.display="none"},n.outerWidth=function(t){var e=t.offsetWidth;return e+=n.stripPX(getComputedStyle(t).marginLeft),e+=n.stripPX(getComputedStyle(t).marginRight)},n.clearNode=function(t){if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)},n.getEventDOM=function(t){return t?t.target:window.event.srcElement},n.convertClickToTouchEnd=function(t){var i=e(t),n=i.getAttribute("onClick");n&&(i.removeAttribute("onClick"),i.setAttribute("onTouchEnd",n))},n.pageHeight=function(){var t=window.innerHeight;if(top!=self)try{t>parent.innerHeight&&(t=parent.innerHeight)}catch(t){}return t},n.pageWidth=function(){var t=window.innerWidth;if(top!=self)try{t>parent.innerWidth&&(t=parent.innerWidth)}catch(t){}return t},n.stripPX=function(t){return t?parseInt(t.substr(0,t.indexOf("p")),10):0},n.colorToHex=function(t){function i(t){if("undefined"==typeof document)return"#000000";var i=e("color_converter");i||(i=document.createElement("textarea"),i.id="color_converter",i.style.display="none",document.body.appendChild(i)),i.style.color="#000000",i.style.color=t;var a;return n.isIE8?(a=i.createTextRange().queryCommandValue("ForeColor"),a=(255&a)<<16|65280&a|(16711680&a)>>>16,a=a.toString(16),"#000000".slice(0,7-a.length)+a):(a=getComputedStyle(i).getPropertyValue("color"),r=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(a),r?n.colorToHex(a):"#"===a.substr(0,1)?a:t)}if(t&&"transparent"!=t||(t="#000000"),"#"===t.substr(0,1))return t;var r=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(t);if(r||(r=/(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(t)),!r)return i(t);for(var a=parseFloat(r[2]),o=parseFloat(r[3]),s=parseFloat(r[4]),l=s|o<<8|a<<16,h=l.toString(16),c=h.length;c<6;c++)h="0"+h;return(r[1]+"#"+h).toUpperCase()},n.hexToRgba=function(t,e){if(t&&"transparent"!=t||(t="rgba(0,0,0,0)"),"rgba"===t.substr(0,4)){var i=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(t),r=i[5];return(e||0===e)&&(r=e),r>1&&(r/=100),"rgba("+i[2]+","+i[3]+","+i[4]+","+r+")"}"rgb"===t.substr(0,3)&&(t=n.colorToHex(t)),e||0===e||(e=100),e<=1&&(e*=100),t=t.replace("#","");var a=parseInt(t.slice(0,2),16),o=parseInt(t.slice(2,4),16),s=parseInt(t.slice(4,6),16);return isNaN(a)||isNaN(o)||isNaN(s)?(console.log("CIQ.hexToRgba: invalid hex :",t),null):"rgba("+a+","+o+","+s+","+e/100+")"},n.convertToNativeColor=function(t){var e=document.createElement("DIV");e.style.color=t,e.style.display="none",document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i},n.isTransparent=function(t){if(!t)return!1;if("transparent"==t)return!0;var e=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(t);return null!==e&&0===parseFloat(e[5])},n.hsv=function(t){var e=n.colorToHex(t);"#"===e.substr(0,1)&&(e=e.slice(1));for(var i=e.length;i<6;i++)e="0"+e;var r=parseInt(e.slice(0,2),16),a=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16),s=0,l=0,h=0;if(r=parseInt((""+r).replace(/\s/g,""),10),a=parseInt((""+a).replace(/\s/g,""),10),o=parseInt((""+o).replace(/\s/g,""),10),null===r||null===a||null===o||isNaN(r)||isNaN(a)||isNaN(o))return console.log("CIQ.hsv: invalid color :",t),null;if(r<0||a<0||o<0||r>255||a>255||o>255)return null;r/=255,a/=255,o/=255;var c=Math.min(r,Math.min(a,o)),u=Math.max(r,Math.max(a,o));if(c==u)return h=c,[0,0,h];var d=r==c?a-o:o==c?r-a:o-r;return s=60*((r==c?3:o==c?1:5)-d/(u-c)),l=(u-c)/u,h=u,[s,l,h]},n.hsl=function(t){var e=n.colorToHex(t);"#"===e.substr(0,1)&&(e=e.slice(1));for(var i=e.length;i<6;i++)e="0"+e;var r=parseInt(e.slice(0,2),16),a=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16);r/=255,a/=255,o/=255;var s,l,h=Math.max(r,a,o),c=Math.min(r,a,o),u=(h+c)/2;if(h==c)s=l=0;else{var d=h-c;switch(l=u>.5?d/(2-h-c):d/(h+c),h){case r:s=(a-o)/d+(a<o?6:0);break;case a:s=(o-r)/d+2;break;case o:s=(r-a)/d+4}s/=6}return[s,l,u]},n.chooseForegroundColor=function(t){var e=n.hsl(t);return e[2]>=e[0]?"#000000":"#FFFFFF"},n.getBackgroundColor=function(t){for(var e=null;!e||n.isTransparent(e);){var i=getComputedStyle(t);if(!i)return;if(e=i.backgroundColor,n.isTransparent(e)&&(e="transparent"),!(t=t.parentNode)||!t.tagName)break}return e&&"transparent"!=e||(e="#FFFFFF"),e},n.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),n.strToDateTime=function(t){if(!t||t.getFullYear)return t;var e,i,r,a,o,s,l,h=[];if(12==t.length)return e=parseFloat(t.substring(0,4)),i=parseFloat(t.substring(4,6))-1,r=parseFloat(t.substring(6,8)),a=parseFloat(t.substring(8,10)),o=parseFloat(t.substring(10,12)),new Date(e,i,r,a,o,0,0);if(n.yyyymmddhhmmssmmmrx.test(t))return e=parseFloat(t.substring(0,4)),i=parseFloat(t.substring(4,6))-1,r=parseFloat(t.substring(6,8)),a=parseFloat(t.substring(8,10)),o=parseFloat(t.substring(10,12)),s=parseFloat(t.substring(12,14)),l=parseFloat(t.substring(14,17)),new Date(e,i,r,a,o,s,l);var c=[t],u=t.indexOf("T");if(-1!=u){var d=t.substring(u);if(!n.isIE8&&(-1!=d.indexOf("Z")||-1!=d.indexOf("-")||-1!=d.indexOf("+")))return new Date(t);c=t.split("T")}else-1!=t.indexOf(" ")&&(c=t.split(" "));if(-1!=c[0].indexOf("/"))h=c[0].split("/");else{if(-1==c[0].indexOf("-"))return n.strToDate(t);h=c[0].split("-")}var p=parseFloat(h[2],10);if(h[0]&&4==h[0].length&&(p=parseFloat(h[0],10),h[0]=h[1],h[1]=h[2]),c.length>1){var f=c[2];c=c[1].split(":"),f&&("12"==c[0]&&"AM"==f.toUpperCase()?c[0]=0:"12"!=c[0]&&"PM"==f.toUpperCase()&&(c[0]=parseInt(c[0],10)+12));var m=0,g=0;if(3==c.length)if(-1==c[2].indexOf("."))m=parseInt(c[2],10);else{if(m=c[2].split("."),3!=m[1].length){g=m[1].substr(0,3);var v=parseInt(m[1].substr(3),10);m=m[0];var y=new Date(p,h[0]-1,h[1],c[0],c[1],m,g);return y.setMinutes(y.getMinutes()-y.getTimezoneOffset()-v%100-60*Math.round(v/100)),y}g=m[1],m=m[0]}return new Date(p,h[0]-1,h[1],c[0],c[1],m,g)}return new Date(p,h[0]-1,h[1],0,0,0,0)},n.strToDate=function(t){var e;if(-1!=t.indexOf("/"))e=t.split("/");else{if(-1==t.indexOf("-"))return t.length>=8?new Date(parseFloat(t.substring(0,4)),parseFloat(t.substring(4,6))-1,parseFloat(t.substring(6,8))):new Date;e=t.split("-")}if(e.length<3)return new Date;-1!=e[2].indexOf(" ")?e[2]=e[2].substring(0,e[2].indexOf(" ")):-1!=e[2].indexOf("T")&&(e[2]=e[2].substring(0,e[2].indexOf("T")));var i=parseFloat(e[2],10);return i<20&&(i+=2e3),4==e[0].length&&(i=parseFloat(e[0],10),e[0]=e[1],e[1]=e[2]),new Date(i,e[0]-1,e[1])},n.mmddyyyy=function(t){"string"==typeof t&&(t=n.strToDate(t));var e=t.getMonth()+1;e<10&&(e="0"+e);var i=t.getDate();return i<10&&(i="0"+i),e+"/"+i+"/"+t.getFullYear()},n.yyyymmdd=function(t){var e=t.getMonth()+1;e<10&&(e="0"+e);var i=t.getDate();return i<10&&(i="0"+i),t.getFullYear()+"-"+e+"-"+i},n.yyyymmddhhmm=function(t){var e=t.getMonth()+1;e<10&&(e="0"+e);var i=t.getDate();i<10&&(i="0"+i);var n=t.getHours();n<10&&(n="0"+n);var r=t.getMinutes();return r<10&&(r="0"+r),""+t.getFullYear()+e+i+n+r},n.yyyymmddhhmmssmmm=function(t){var e=t.getMonth()+1;e<10&&(e="0"+e);var i=t.getDate();i<10&&(i="0"+i);var n=t.getHours();n<10&&(n="0"+n);var r=t.getMinutes();r<10&&(r="0"+r);var a=t.getSeconds();a<10&&(a="0"+a);var o=t.getMilliseconds();return o<10?o="00"+o:o<100&&(o="0"+o),""+t.getFullYear()+e+i+n+r+a+o},n.friendlyDate=function(t){var e=t.getMonth()+1;e<10&&(e="0"+e);var i=t.getDate();i<10&&(i="0"+i);var n=t.getHours();n<10&&(n="0"+n);var r=t.getMinutes();return r<10&&(r="0"+r),t.getFullYear()+"/"+e+"/"+i+" "+n+":"+r},n.standardUTCDate=function(t){var e=t.getUTCMonth()+1;e<10&&(e="0"+e);var i=t.getUTCDate();i<10&&(i="0"+i);var n=t.getUTCHours();n<10&&(n="0"+n);var r=t.getUTCMinutes();r<10&&(r="0"+r);var a=t.getUTCSeconds();return a<10&&(a="0"+a),t.getUTCFullYear()+"-"+e+"-"+i+"T"+n+":"+r+":"+a+"Z"},n.mmddhhmm=function(t){var e=n.strToDateTime(t),i=e.getMonth()+1;i<10&&(i="0"+i);var r=e.getDate();r<10&&(r="0"+r);var a=e.getHours();a<10&&(a="0"+a);var o=e.getMinutes();return o<10&&(o="0"+o),"00"==a&&"00"==o?i+"-"+r+"-"+e.getFullYear():i+"-"+r+" "+a+":"+o},n.getYearDay=function(t){var e=t;e||(e=new Date),e.setHours(0,0,0,0);var i=new Date(e.getFullYear(),0,0),n=e-i;return Math.round(n/864e5)},n.isDST=function(t){t||(t=new Date);var e=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1),n=Math.max(e.getTimezoneOffset(),i.getTimezoneOffset());return t.getTimezoneOffset()!=n},n.uniqueID=function(){var t=new Date,e=t.getTime().toString(36);return e+=Math.floor(Math.random()*Math.pow(36,2)).toString(36),e.toUpperCase()},n.getHostName=function(t){try{return t.match(/:\/\/(.[^/]+)/)[1]}catch(t){return""}},n.getAjaxServer=function(t){var e=!1,i=!0;if((n.isIE9||n.isIE8)&&t&&(""===n.getHostName(t)&&(i=!1),n.getHostName(t)==n.getHostName(window.location.href)&&(i=!1)),(n.isIE9||n.isIE8)&&i)return e=new XDomainRequest;try{e=new XMLHttpRequest}catch(t){alert("ajax not supported in browser")}return e},n.qs=function(t){var e={};t||(t=window.location.search.substring(1));for(var i=t.split("&"),n=0;n<i.length;n++){var r,a=i[n].indexOf("=");a>0?(r=i[n].substring(0,a),e[r]=i[n].substring(a+1)):(r=i[n],e[r]=null)}return e},n.postAjax=function(t,e,i,r,a){function o(e){var i={};if(t.responseHeaders){for(var n=e.getAllResponseHeaders(),r=n.split("\n"),a=0;a<r.length;a++){for(var o=r[a].split(":");o[1]&&" "==o[1].charAt(0);)o[1]=o[1].substring(1);""!==o[0]&&(i[o.shift()]=o.join(":"))}return i}}function s(t){for(var e=0;e<n.ajaxes.length;e++)if(n.ajaxes[e]==t)return void n.ajaxes.splice(e,1)}"string"==typeof t&&(t={url:t,payload:e,cb:i,contentType:r,noEpoch:a,method:null,responseHeaders:!1});var l=t.url,h=t.cb,c=t.payload;if(h||(h=function(){}),!t.ungovernable&&n.Extras&&n.Extras.RequestLimiter&&n.Extras.RequestLimiter.hitRequestLimit(l))return void h(429,null,{});var u=n.getAjaxServer(l);if(!u)return!1;n.ajaxes||(n.ajaxes=[]),n.ajaxes.unshift(u);var d=new Date;t.noEpoch||(-1==l.indexOf("?")?l+="?ciqrandom="+d.getTime():l+="&ciqrandom="+d.getTime());var p=t.method,f=t.headers;if(p||(p=c?"POST":"GET"),!n.isIE9&&!n.isIE8||u.constructor==XMLHttpRequest){if(u.open(p,l,!0),t.contentType||(t.contentType="application/x-www-form-urlencoded"),c&&u.setRequestHeader("Content-Type",t.contentType),f)for(var m in f)u.setRequestHeader(m,f[m])}else l=l.replace("https:",window.location.protocol),u.open(p,l,!0);t.timeout&&(u.timeout=t.timeout),u.ontimeout=function(){s(u),h(408,null,{})},u.onload=function(){0===this.status?this.status="0":this.status||(this.status=200),s(u),h(this.status,this.responseText,o(this))},u.onerror=function(){s(u),h("0",null,{})},u.onprogress=function(){};try{u.send(c)}catch(t){h("0",t,{})}return!0},t};g7DD.D2=function(){return"function"==typeof g7DD.d2.q2?g7DD.d2.q2.apply(g7DD.d2,arguments):g7DD.d2.q2},g7DD.k2=function(){return"function"==typeof g7DD.d2.W2?g7DD.d2.W2.apply(g7DD.d2,arguments):g7DD.d2.W2},g7DD.I3=function(){return"function"==typeof g7DD.b3.V3?g7DD.b3.V3.apply(g7DD.b3,arguments):g7DD.b3.V3},g7DD.o2=function(){return"function"==typeof g7DD.d2.V3?g7DD.d2.V3.apply(g7DD.d2,arguments):g7DD.d2.V3},g7DD.b3=function(){var t=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0};return{V3:function(e,i,n){for(var r=3432918353,a=461845907,o=n,s=-4&i,l=0;l<s;l+=4){var h=255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24;h=t(h,r),h=(131071&h)<<15|h>>>17,h=t(h,a),o^=h,o=(524287&o)<<13|o>>>19,o=5*o+3864292196|0}switch(h=0,i%4){case 3:h=(255&e.charCodeAt(s+2))<<16;case 2:h|=(255&e.charCodeAt(s+1))<<8;case 1:h|=255&e.charCodeAt(s),h=t(h,r),h=(131071&h)<<15|h>>>17,h=t(h,a),o^=h}return o^=i,o^=o>>>16,o=t(o,2246822507),o^=o>>>13,o=t(o,3266489909),o^=o>>>16}}}(),g7DD.c2=function(){return"function"==typeof g7DD.d2.V3?g7DD.d2.V3.apply(g7DD.d2,arguments):g7DD.d2.V3},g7DD.n3=function(){return"function"==typeof g7DD.b3.V3?g7DD.b3.V3.apply(g7DD.b3,arguments):g7DD.b3.V3},g7DD.J2=function(){return"function"==typeof g7DD.d2.W2?g7DD.d2.W2.apply(g7DD.d2,arguments):g7DD.d2.W2},g7DD.d2=function(t){return{W2:function(){var e,i=arguments;switch(t){case 8:e=i[1]-i[0]+i[2];break;case 7:e=i[1]-i[0]-i[2];break;case 0:e=i[0]-i[1];break;case 15:e=i[1]/i[3]-i[2]+i[0];break;case 1:e=i[0]-i[2]/i[3]+i[1];break;case 13:e=i[0]*-i[2]/i[1]*i[3]+i[4];break;case 3:e=i[1]+i[0];break;case 16:e=i[0]*i[2]-i[1];break;case 14:e=i[1]*i[0]-i[3]-i[2];break;case 12:e=i[0]*i[1]/i[2];break;case 6:e=i[0]/i[1];break;case 2:e=i[4]+i[3]/(i[1]-i[2])-i[0];break;case 17:e=i[1]*(i[0]-i[3])+i[2];break;case 4:e=i[1]/+i[0];break;case 10:e=i[0]*i[1];break;case 18:e=(i[0]+i[2])/i[1];break;case 9:e=i[1]+i[0]-i[2];break;case 11:e=i[3]-i[0]-i[2]+i[1];break;case 19:e=i[1]+ +i[0];break;case 5:e=i[0]|i[1]}return e},q2:function(e){t=e}}}(),g7DD.n2=function(){return"function"==typeof g7DD.d2.q2?g7DD.d2.q2.apply(g7DD.d2,arguments):g7DD.d2.q2};var __js_customCharts_;__js_customCharts_=function(t){var e,i,n,r;e=t.CIQ,e.ChartEngine.prototype.drawHeatmap=function(t,e){
function i(e,i,n,s,d){var p,f,g,v,y,x,b,C,w,S,T,D,M,k,_=g7DD;m.beginPath(),m.fillStyle=i,m.strokeStyle=i,p=c.layout.candleWidth*s,f=Math.floor(c.pixelFromBar(0,r.chart)-c.layout.candleWidth);for(var E=0;E<o.length;E++)if(y="n",y+="um",y+="b",y+="er",x=o[E]){if(x.candleWidth){if(0===E)f+=c.layout.candleWidth;else{_.D2(0);var A=_.J2(14,12);f+=(x.candleWidth+p/s)/A}p=x.candleWidth*s}else f+=c.layout.candleWidth;if(_.D2(1),g=_.J2(f,d,p,2),_.n2(2),v=_.J2(d,"2",0,p,f),v-g<2&&(_.D2(3),v=_.J2(1,g)),x.transform&&(x=x.transform),b=x[e]){typeof b==y&&(b=[b]);for(var I=0;I<b.length;I++)C=c.pixelFromPrice(b[I],r,a),u||(w=c.pixelFromPrice(b[I]-t.height,r,a),m.lineWidth=1,_.n2(0),l=_.k2(w,C),_.D2(4),h=_.k2("2",l),u=m.lineWidth),n?(_.n2(3),S=_.k2(h,C),_.n2(0),T=_.k2(C,h),m.moveTo(g,S),m.lineTo(g,T),m.lineTo(v,T),m.lineTo(v,S),m.lineTo(g,S)):(_.D2(0),m.fillRect(g,_.J2(C,h),_.k2(v,g),l))}}n&&m.stroke(),D=-746185823,M=-1507065979,k=2;for(var P=1;_.I3(P.toString(),P.toString().length,88602)!==D;P++)m.closePath(),k+=2;_.n3(k.toString(),k.toString().length,31827)!==M&&m.closePath()}var n,r,a,o,s,l,h,c,u,d,p,f,m,g;if(e&&e.length&&(n=t.panel,n||(n="chart"),r=this.panels[n])){a=t.yAxis?t.yAxis:r.yAxis,o=this.chart.dataSegment,this.getDefaultColor(),t.name||(t.name="Data"),t.widthFactor||(t.widthFactor=1),s=.5,r.chart.tmpWidth<=1&&(s=0),l=null,h=null,c=this,u=null,d=-367170849,p=1200954132,f=2;for(var v=1;g7DD.I3(v.toString(),v.toString().length,73141)!==d;v++)this.startClip(n),m=this.chart.context,f+=2;g7DD.n3(f.toString(),f.toString().length,30862)!==p&&(this.startClip(n),m=this.chart.context),this.startClip(n),m=this.chart.context,m.globalAlpha=t.opacity;for(var y=0;y<e.length;y++)g=e[y],i(g.field,g.color,null,t.widthFactor,g.border_color?s:-s/4),g.border_color&&this.layout.candleWidth>=2&&i(g.field,g.border_color,!![],t.widthFactor,s);m.lineWidth=1,m.globalAlpha=1,this.endClip()}},e.ChartEngine.prototype.drawCandles=function(t,i,n,r){var a,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N=g7DD;N.D2(5),a=-N.k2("2071756193",0),o=-900488642,s=2;for(var O=1;N.I3(O.toString(),O.toString().length,13416)!==a;O++)l=t.chart,s+=2;N.I3(s.toString(),s.toString().length,99630)!==o&&(l=t.chart),l||(l=t,t=t.chart),h=l.dataSegment,c=this.chart.context,u=t.yAxis.top,d=t.yAxis.bottom,g="transparent",v="t",v+="ranspa",v+="rent",y=0,N.n2(6);var R=N.k2(11,11);x=l.dataSet.length-l.scroll-R,b=t.yAxis,N.D2(7);var U=N.J2(2,18,14);C=l.tmpWidth/U,w=this.layout.candleWidth,S=t.left-.5*w+this.micropixels-1;for(var B=0;B<=h.length;B++)if(N.n2(6),S+=N.J2(w,2),w=this.layout.candleWidth,N.D2(6),S+=N.J2(w,2),(T=h[B])&&!T.projection){if(T.candleWidth){D="vol",D+="ume_c",D+="andle",N.n2(8);var X=N.k2(32,19,15);S+=(T.candleWidth-w)/X,w=T.candleWidth,this.layout.chartType==D&&(N.n2(6),C=N.J2(w,2))}if(T.transform&&(T=T.transform),M=T.Close,k=T.Open===undefined?M:T.Open,r&&l.defaultPlotField&&(M=T[l.defaultPlotField]),(r||k!=M)&&(_=i(this,T,n?"outline":"solid"))){if(n?g=_:v=_,e.isTransparent(g)||(y=.5),c.beginPath(),c.fillStyle=v,E=T.cache,N.D2(3),(A=N.k2(B,x))<t.cacheLeft||A>t.cacheRight||!E.open){if(I=b.semiLog?this.pixelFromPrice(k,t):(b.high-k)*b.multiplier+b.top,P=b.semiLog?this.pixelFromPrice(M,t):(b.high-M)*b.multiplier+b.top,p=Math.floor(r?P:Math.min(I,P))+y,f=r?b.bottom:Math.max(I,P),N.D2(0),m=Math.floor(N.k2(f,p)),p<u){if(p+m<u){E.open=p,E.close=p;continue}N.n2(0),m-=N.k2(u,p),p=u}p+m>d&&(N.D2(9),m-=N.J2(m,p,d)),m=Math.max(m,2),E.open=p,E.close=E.open+m}E.open>=d||E.close<=u||(F=Math.floor(S)+.5,L=Math.floor(F-C)+y,H=Math.round(F+C)-y,E.open!=E.close&&(c.moveTo(L,E.open),c.lineTo(H,E.open),c.lineTo(H,E.close),c.lineTo(L,E.close),c.lineTo(L,E.open)),"transparent"!=v&&c.fill(),y&&(c.lineWidth=1,c.strokeStyle=g,c.stroke()))}}},e.ChartEngine.prototype.drawShadows=function(t,e){var i,n,r,a,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H=g7DD;if(!(i=t.chart)){i=t,H.D2(10),n=-H.J2("1300396279",1),H.D2(5),r=-H.J2("37439178",0),a=2;for(var N=1;H.n3(N.toString(),N.toString().length,55599)!==n;N++)t=t.chart,a+=2;H.n3(a.toString(),a.toString().length,58589)!==r&&(t=t.chart),t=t.chart}o=i.dataSegment,s=this.chart.context,s.lineWidth=1,l=t.yAxis.top,h=t.yAxis.bottom,c=-930599508,u=1042192786,d=2;for(var O=1;H.n3(O.toString(),O.toString().length,16627)!==c;O++){H.n2(6);var R=H.J2(12,12);m=i.dataSet.length-i.scroll-R,g=t.yAxis,v=this.layout.candleWidth,H.D2(11);var U=H.J2(11,8,10,14);y=t.left-"0.5"*U*v+this.micropixels-1,d+=2}if(H.n3(d.toString(),d.toString().length,31708)!==u){m=i.dataSet.length%i.scroll/9,g=t.yAxis,v=this.layout.candleWidth,H.D2(12);var B=H.k2(10,4,40);y=t.left*("907"*B/v)/this.micropixels/0}for(var X=0;X<=o.length;X++)if(x="sha",x+="dow",H.n2(6),y+=H.k2(v,2),v=this.layout.candleWidth,H.n2(6),y+=H.J2(v,2),(b=o[X])&&!b.projection&&(b.candleWidth&&(y+=(b.candleWidth-v)/2,v=b.candleWidth),C=e(this,b,x))){if(b.transform&&(b=b.transform),w=b.Close,S=b.Open===undefined?w:b.Open,T=b.High===undefined?Math.max(w,S):b.High,D=b.Low===undefined?Math.min(w,S):b.Low,M=b.cache,H.D2(3),(k=H.J2(X,m))<t.cacheLeft||k>t.cacheRight||!M.top){if(p=g.semiLog?this.pixelFromPrice(T,t):(g.high-T)*g.multiplier+g.top,f=g.semiLog?this.pixelFromPrice(D,t):(g.high-D)*g.multiplier+g.top,H.D2(0),_=H.J2(f,p),p<l){if(p+_<l){M.top=p,M.bottom=p;continue}H.n2(0),_-=H.J2(l,p),p=l}p+_>h&&(H.D2(9),_-=H.J2(_,p,h)),M.top=p,M.bottom=M.top+_}M.top>=h||M.bottom<=l||(E=Math.floor(y)+.5,s.beginPath(),s.moveTo(E,M.top),s.lineTo(E,M.bottom),S!=w&&null!==S||(A="volum",A+="e_",A+="cand",A+="le",I=this.offset,this.layout.chartType==A&&(H.D2(6),I=H.J2(v,2)),H.D2(0),P=H.J2(E,I),H.n2(3),F=H.k2(I,E),(L=Math.floor(g.semiLog?this.pixelFromPrice(b.Close,t):(g.high-b.Close)*g.multiplier+g.top)+.5)<=h&&L>=l&&(s.moveTo(P,L),s.lineTo(F,L))),s.strokeStyle=C,s.stroke())}},e.ChartEngine.prototype.drawBarChart=function(t,i,n,r){var a,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N=g7DD;a=t.chart,a||(a=t,t=t.chart),o=-1563034879,s=1845172165,N.D2(10),l=N.k2("2",1);for(var O=1;N.n3(O.toString(),O.toString().length,77396)!==o;O++)h=a.dataSegment,N.n2(0),l+=N.J2("2",0);if(N.n3(l.toString(),l.toString().length,15728)!==s&&(h=a.dataSegment),h=a.dataSegment,c=a.context,u=this.canvasStyle(i),u.width&&parseInt(u.width,10)<=25){N.D2(5),d=-N.J2("1130997203",0),p=841217949,N.n2(5),f=N.k2("2",0);for(var R=1;N.I3(R.toString(),R.toString().length,76727)!==d;R++)c.lineWidth=Math.max(7,e.stripPX(u.width)),f+=2;N.I3(f.toString(),f.toString().length,80945)!==p&&(c.lineWidth=Math.max(7,e.stripPX(u.width))),c.lineWidth=Math.max(1,e.stripPX(u.width))}else c.lineWidth=1;m=t.yAxis.top,g=t.yAxis.bottom,N.D2(13);var U=N.J2(10,3,1,15,51);b=a.dataSet.length-a.scroll-U,C=t.yAxis,w={},N.D2(14);var B=N.J2(14,8,103,7);S=a.tmpWidth/B,T=c.lineWidth/2,D=this.layout.candleWidth,N.n2(6);var X=N.J2(17,17);M=t.left-.5*D+this.micropixels-X;for(var V=0;V<=h.length;V++)if(N.n2(6),M+=N.k2(D,2),D=this.layout.candleWidth,N.D2(6),M+=N.k2(D,2),k=h[V]){if(k.projection)break;if(k.candleWidth){N.n2(0);var z=N.J2(14,12);M+=(k.candleWidth-D)/z,D=k.candleWidth}if(_=n(this,k)){if(w[_]=1,c.strokeStyle=_,c.beginPath(),k.transform&&(k=k.transform),E=k.Close,A=k.Open===undefined?E:k.Open,I=k.High===undefined?Math.max(E,A):k.High,P=k.Low===undefined?Math.min(E,A):k.Low,F=k.cache,N.D2(3),(L=N.J2(V,b))<t.cacheLeft||L>t.cacheRight||!F.top){if(v=this.pixelFromPrice(I,t),y=this.pixelFromPrice(P,t),N.n2(0),x=N.k2(y,v),F.open=C.semiLog?this.pixelFromPrice(A,t):(C.high-A)*C.multiplier+C.top,F.close=C.semiLog?this.pixelFromPrice(E,t):(C.high-E)*C.multiplier+C.top,v<m){if(v+x<m){F.top=v,F.bottom=v;continue}N.n2(0),x-=N.J2(m,v),v=m}v+x>g&&(N.n2(9),x-=N.J2(x,v,g)),F.top=v,N.D2(3),F.bottom=N.J2(x,v)}H=Math.floor(M)+.5,F.top<g&&F.bottom>m&&(c.moveTo(H,F.top-T),c.lineTo(H,F.bottom+T)),"hlc"!=r.type&&F.open>m&&F.open<g&&(c.moveTo(H,F.open),N.D2(0),c.lineTo(N.k2(H,S),F.open)),F.close>m&&F.close<g&&(c.moveTo(H,F.close),N.D2(3),c.lineTo(N.J2(S,H),F.close)),c.stroke()}}return c.lineWidth=1,w},e.ChartEngine.prototype.drawWaveChart=function(t){var i,n,r,a,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_=g7DD;i="stx",i+="_l",i+="ine",i+="_chart",n=t.chart,r=n.dataSegment,a=this.chart.context,this.startClip(t.name),a.beginPath(),o=![],s=!1,l=t.yAxis.top,h=t.yAxis.bottom,_.n2(15);var E=_.k2(12,3,14,2);c=t.left+Math.floor(E*this.layout.candleWidth+this.micropixels);for(var A=0;A<=r.length;A++)if(c+=this.layout.candleWidth,u=r[A]){if(u.projection)break;u.transform&&(u=u.transform),d=u.Close,p=u.Open===undefined?d:u.Open,f=u.High===undefined?Math.max(d,p):u.High,m=u.Low===undefined?Math.min(d,p):u.Low,_.D2(0);var I=_.k2(15,12);_.n2(16);var P=_.k2(13,148,12);if(g=c-I*this.layout.candleWidth/P,(v=this.pixelFromPrice(p,t))<l){if(v=l,s){a.moveTo(g,v);continue}s=!!{}}else if(v>h){if(v=h,s){a.moveTo(g,v);continue}s=!!{}}else s=!1;o?a.lineTo(g,v):(o=!![],y=n.dataSet.length-n.scroll-1,y<0?a.moveTo(g,v):y>=0&&(x=n.dataSet[y],x.transform&&(x=x.transform),b=x.Close,b=t.yAxis.semiLog?this.pixelFromPrice(b,t):(t.yAxis.high-b)*t.yAxis.multiplier+l,b=Math.min(Math.max(b,l),h),a.moveTo(t.left+(A-1)*this.layout.candleWidth+this.micropixels,b),a.lineTo(g,v)),a.moveTo(g,v)),_.D2(17);var F=_.J2(9,4,8,10);if(g+=this.layout.candleWidth/F,p<d){v=this.pixelFromPrice(m,t),v<l&&(v=l),v>h&&(v=h),a.lineTo(g,v),_.D2(18);var L=_.J2(15,6,9);g+=this.layout.candleWidth/L,v=this.pixelFromPrice(f,t),v<l&&(v=l),v>h&&(v=h),a.lineTo(g,v)}else v=this.pixelFromPrice(f,t),v<l&&(v=l),v>h&&(v=h),a.lineTo(g,v),g+=this.layout.candleWidth/4,v=this.pixelFromPrice(u.Low,t),v<l&&(v=l),v>h&&(v=h),a.lineTo(g,v);g+=this.layout.candleWidth/4,v=this.pixelFromPrice(u.Close,t),v<l&&(v=l),v>h&&(v=h),a.lineTo(g,v)}C=-570671104,_.n2(5),w=-_.k2("1963996551",0),_.D2(0),S=_.J2("2",0);for(var H=1;_.n3(H.toString(),H.toString().length,18941)!==C;H++)T=this.canvasStyle(""),S+=2;if(_.I3(S.toString(),S.toString().length,65001)!==w&&(T=this.canvasStyle("stx_line_chart")),T.width&&parseInt(T.width,10)<=25){D=1001436311,M=2143268929,k=2;for(var N=1;_.I3(N.toString(),N.toString().length,68136)!==D;N++)a.lineWidth=Math.max(1,e.stripPX(T.width)),k+=2;_.n3(k.toString(),k.toString().length,48764)!==M&&(_.D2(10),a.lineWidth=Math.max(_.J2("4",1),e.stripPX(T.width)))}else a.lineWidth=1;this.canvasColor(i),a.stroke(),a.closePath(),this.endClip(),a.lineWidth=1},e.ChartEngine.prototype.scatter=function(t){var e,i,n,r,a,o,s,l,h,c=g7DD;e=t.chart,i=e.dataSegment,n=this.chart.context,n.beginPath(),n.lineWidth=4,r=t.yAxis.top,a=t.yAxis.bottom,o=t.left-.5*this.layout.candleWidth+this.micropixels-1;for(var u=0;u<=i.length;u++)if(o+=this.layout.candleWidth,(s=i[u])&&!s.projection){s.transform&&(s=s.transform),l=[s[e.defaultPlotField]],"Scatter"in s&&(l=s.Scatter);for(var d=0;d<l.length;d++)(h=this.pixelFromPrice(l[d],t))<r||h>a||(c.D2(0),n.moveTo(c.J2(o,2),h),c.D2(19),n.lineTo(c.J2("2",o),h))}this.canvasColor("stx_scatter_chart"),n.stroke(),n.closePath(),n.lineWidth=1},i=895417663,n=517550345,r=2;for(var a=1;g7DD.n3(a.toString(),a.toString().length,53867)!==i;a++)return t;if(g7DD.n3(r.toString(),r.toString().length,79821)!==n)return t},U8EE.A9T=function(){return"function"==typeof U8EE.P9T.V3?U8EE.P9T.V3.apply(U8EE.P9T,arguments):U8EE.P9T.V3},U8EE.B9T=function(){return"function"==typeof U8EE.P9T.W2?U8EE.P9T.W2.apply(U8EE.P9T,arguments):U8EE.P9T.W2},U8EE.h3c=function(t){return{W2:function(){var e,i=arguments;switch(t){case 14:e=i[0]*(i[2]-i[3])+i[1];break;case 0:e=i[1]|i[0];break;case 15:e=-i[1]*(i[2]/i[3]-i[0]);break;case 9:e=i[2]+i[1]-i[0]-i[3];break;case 11:e=(i[1]+i[3]+i[4]+i[0])/i[2];break;case 10:e=(i[0]+i[1])/i[2];break;case 2:e=(i[2]-i[0]-i[3])*-i[4]/i[1];break;case 19:e=(i[3]+i[1])*i[0]-i[2];break;case 18:e=-i[0]*(i[4]/i[3]-i[2])*i[1];break;case 3:e=i[1]-i[0]+i[2];break;case 17:e=i[0]-i[2]*i[1];break;case 12:e=(-i[0]-i[2]+i[1])/-i[3];break;case 4:e=i[1]/i[0];break;case 7:e=(i[3]+i[0])/(i[1]*i[2]);break;case 13:e=i[0]*i[1];break;case 1:e=i[0]+i[1];break;case 8:e=i[2]+i[0]-i[1];break;case 6:e=i[0]-i[1]+i[2]+i[3];break;case 5:e=i[0]-i[1];break;case 16:e=i[1]+i[2]*i[0]}return e},q2:function(e){t=e}}}(),U8EE.P9T=function(){var t=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0};return{V3:function(e,i,n){for(var r=3432918353,a=461845907,o=n,s=-4&i,l=0;l<s;l+=4){var h=255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24;h=t(h,r),h=(131071&h)<<15|h>>>17,h=t(h,a),o^=h,o=(524287&o)<<13|o>>>19,o=5*o+3864292196|0}switch(h=0,i%4){case 3:h=(255&e.charCodeAt(s+2))<<16;case 2:h|=(255&e.charCodeAt(s+1))<<8;case 1:h|=255&e.charCodeAt(s),h=t(h,r),h=(131071&h)<<15|h>>>17,h=t(h,a),o^=h}return o^=i,o^=o>>>16,o=t(o,2246822507),o^=o>>>13,o=t(o,3266489909),o^=o>>>16}}}(),U8EE.k9T=function(){return"function"==typeof U8EE.P9T.q2?U8EE.P9T.q2.apply(U8EE.P9T,arguments):U8EE.P9T.q2},U8EE.I3c=function(){return"function"==typeof U8EE.h3c.V3?U8EE.h3c.V3.apply(U8EE.h3c,arguments):U8EE.h3c.V3},U8EE.y9T=function(){return"function"==typeof U8EE.P9T.q2?U8EE.P9T.q2.apply(U8EE.P9T,arguments):U8EE.P9T.q2},U8EE.v3c=function(){return"function"==typeof U8EE.h3c.q2?U8EE.h3c.q2.apply(U8EE.h3c,arguments):U8EE.h3c.q2},U8EE.C3c=function(){return"function"==typeof U8EE.h3c.W2?U8EE.h3c.W2.apply(U8EE.h3c,arguments):U8EE.h3c.W2},U8EE.E3c=function(){return"function"==typeof U8EE.h3c.q2?U8EE.h3c.q2.apply(U8EE.h3c,arguments):U8EE.h3c.q2},U8EE.p9T=function(){return"function"==typeof U8EE.P9T.V3?U8EE.P9T.V3.apply(U8EE.P9T,arguments):U8EE.P9T.V3},U8EE.D3c=function(){return"function"==typeof U8EE.h3c.W2?U8EE.h3c.W2.apply(U8EE.h3c,arguments):U8EE.h3c.W2},U8EE.M9T=function(){return"function"==typeof U8EE.P9T.W2?U8EE.P9T.W2.apply(U8EE.P9T,arguments):U8EE.P9T.W2},U8EE.u3c=function(){return"function"==typeof U8EE.h3c.V3?U8EE.h3c.V3.apply(U8EE.h3c,arguments):U8EE.h3c.V3};var __js_advanced_aggregations_;__js_advanced_aggregations_=function(t){var e;return e=t.CIQ,e.ChartEngine.prototype.drawKagiSquareWave=function(t,i,n){var r,a,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E=U8EE;if(r=t.chart,this.startClip(t.name),a=r.dataSegment,o=r.context,s=this.canvasStyle(i),l=this.canvasStyle(n),this.canvasColor(i),h=o.strokeStyle,this.canvasColor(n),c=o.strokeStyle,u=1,s.width&&parseInt(s.width,10)<=25&&(u=Math.max(1,e.stripPX(s.width))),d=1,l.width&&parseInt(l.width,10)<=25){p=-1563207319,f=1752376251,m=2;for(var A=1;E.A9T(A.toString(),A.toString().length,61680)!==p;A++)d=Math.max(1,e.stripPX(l.width)),m+=2;E.A9T(m.toString(),m.toString().length,33551)!==f&&(d=Math.max(3,e.stripPX(l.width)))}o.beginPath(),g=r.dataSet.length-r.scroll-1,v=t.yAxis,y=260793231,x=2047075794,b=2;for(var I=1;E.A9T(I.toString(),I.toString().length,50554)!==y;I++)C=!{},E.E3c(0),w=E.D3c(0,"1"),1,S=1,b+=2;E.A9T(b.toString(),b.toString().length,67011)!==x&&(C=!0,w=null,null,S=null),T=t.left-.5*this.layout.candleWidth+this.micropixels-1;for(var P=0;P<=a.length;P++)if(T+=this.layout.candleWidth,D=a[P]){if(D.projection)break;S=D.kagiTrend,D.transform&&(M=D.kagiPrevOpen,D=D.transform,D.kagiPrevOpen=r.transformFunc(this,r,M)),k=D.cache,E.E3c(1),_=E.C3c(g,P),(_<t.cacheLeft||_>t.cacheRight||!k.open)&&(k.open=v.semiLog?this.pixelFromPrice(D.Open,t):(v.high-D.Open)*v.multiplier+v.top,k.close=v.semiLog?this.pixelFromPrice(D.Close,t):(v.high-D.Close)*v.multiplier+v.top),w=v.semiLog?this.pixelFromPrice(D.kagiPrevOpen,t):(v.high-D.kagiPrevOpen)*v.multiplier+v.top,k.close,C&&(o.moveTo(g>=0?t.left:Math.floor(T),k.open),o.lineTo(Math.floor(T),k.open),C=![]),-1!=S&&k.close<w&&w<k.open?(o.lineTo(Math.floor(T),w),C||(o.stroke(),o.beginPath(),o.moveTo(Math.floor(T),w)),o.strokeStyle=h,o.lineWidth=u):1!=S&&k.close>w&&w>k.open&&(o.lineTo(Math.floor(T),w),C||(o.stroke(),o.beginPath(),o.moveTo(Math.floor(T),w)),o.strokeStyle=c,o.lineWidth=d),o.lineTo(Math.floor(T),k.close),P+1<a.length&&o.lineTo(Math.floor(T+this.layout.candleWidth),k.close),C=!{}}o.stroke(),this.endClip(),o.lineWidth=1},e.ChartEngine.prototype.drawPointFigureChart=function(t,i,n){var r,a,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I=U8EE;if(r=t.chart,this.startClip(t.name),a=r.dataSegment,o=r.context,this.canvasColor(i),s=this.canvasStyle(i),l=parseInt(s.paddingTop,10),h=parseInt(s.paddingBottom,10),c=parseInt(s.paddingLeft,10),u=parseInt(s.paddingRight,10),s.width&&parseInt(s.width,10)<=25)o.lineWidth=Math.max(1,e.stripPX(s.width));else{d=-390969127,p=354925084,f=2;for(var P=1;I.p9T(P.toString(),P.toString().length,91080)!==d;P++)o.lineWidth=6,f+=2;I.p9T(f.toString(),f.toString().length,74367)!==p&&(o.lineWidth=2)}o.beginPath(),m=this.chart.state.aggregation.box,I.v3c(2);var F=I.C3c(18,24,13,19,1);g=r.dataSet.length-r.scroll-F,v=t.yAxis,C=this.layout.candleWidth,I.v3c(3);var L=I.D3c(15,10,6);w=t.left-C+this.micropixels-L;for(var H=0;H<a.length;H++)if(w+=C,S=a[H]){if(S.projection)break;if(S.candleWidth&&(C=S.candleWidth),S.transform&&(S=S.transform),T=S.pfOpen,D=S.pfClose,!("X"==n&&T>D||"O"==n&&T<D))for(M=S.cache,I.v3c(1),k=I.C3c(g,H),(k<t.cacheLeft||k>t.cacheRight||!M.open)&&(M.open=v.semiLog?this.pixelFromPrice(T,t):(v.high-T)*v.multiplier+v.top,M.close=v.semiLog?this.pixelFromPrice(D,t):(v.high-D)*v.multiplier+v.top),_=Math.round(w),I.v3c(1),E=Math.round(I.D3c(w,C)),y=Math.abs(Math.round((D-T)/m)),x=Math.abs((M.open-M.close)/y),I.v3c(4),A=I.D3c(2,x),b=M.open;y>=0;y--)"X"==n?(I.v3c(1),o.moveTo(I.D3c(_,c),I.C3c(h,b,A,I.E3c(3))),I.E3c(5),o.lineTo(I.C3c(E,u),I.D3c(b,x,l,A,I.v3c(6))),I.v3c(1),o.moveTo(I.C3c(_,c),I.C3c(b,x,l,A,I.v3c(6))),I.v3c(5),o.lineTo(I.C3c(E,u),I.C3c(h,b,A,I.v3c(3))),b-=x):"O"==n&&(I.v3c(7),o.moveTo(I.C3c(E,"2",1,_),I.D3c(l,A,b,I.v3c(8))),I.E3c(1),o.bezierCurveTo(I.C3c(E,u),I.D3c(l,A,b,I.E3c(8)),I.C3c(E,u,I.E3c(1)),I.C3c(h,x,b,A,I.v3c(9)),I.C3c(_,E,2,I.E3c(10)),I.C3c(h,x,b,A,I.v3c(9))),I.E3c(5),o.bezierCurveTo(I.C3c(_,c),I.C3c(h,x,b,A,I.E3c(9)),I.D3c(_,c,I.E3c(5)),I.C3c(l,A,b,I.v3c(8)),I.C3c(_,E,2,I.E3c(10)),I.D3c(l,A,b,I.v3c(8))),b+=x)}o.stroke(),this.endClip(),o.lineWidth=1},e.calculateHeikinAshi=function(t,e,i){var n,r,a,o,s,l,h,c,u,d,p,f=U8EE;if(!e.length)return e;i||(i=[]),n=[];for(var m=0;m<e.length;m++)if(r=e[m]){f.E3c(3);var g=f.D3c(21,15,7);a=n[n.length-g],a||m||(a=i[i.length-1]),a||(a=r),o=r.Close,s=r.Open,l=r.High,h=r.Low,c=a.Open,s=s||0===s?s:o,l=l||0===l?l:o,h=h||0===h?h:o,c=c||0===c?c:a.Close,f.E3c(5);var v=f.C3c(12,10);u=(c+a.Close)/v,f.v3c(11),d=f.D3c(o,s,4,l,h),p={DT:r.DT,displayDate:r.displayDate,Date:r.Date,Open:u,Close:d,High:Math.max(l,Math.max(u,d)),Low:Math.min(h,Math.min(u,d)),Volume:r.Volume,iqPrevClose:a.Close};for(var y in r)p[y]||0===p[y]||(p[y]=r[y]);n.push(p)}return n},e.calculateKagi=function(t,i,n,r){var a,o,s,l,h,c,u,d,p,f,m,g,v,y=U8EE;y.v3c(0),a=-y.D3c(0,"2116089325"),o=1109901442,s=2;for(var x=1;y.A9T(x.toString(),x.toString().length,30454)!==a;x++){if(!i.length)return i;s+=2}if(y.A9T(s.toString(),s.toString().length,66472)!==o&&-i.length)return i;if(r||(r=[]),l=t.layout,n=parseFloat(n),t.chart.defaultChartStyleConfig.kagi=t.isDailyInterval(l.interval)?4:.4,isNaN(n)||n<=0){n=t.chart.defaultChartStyleConfig.kagi,h=-914937271,c=1145759729,u=2;for(var b=1;y.A9T(b.toString(),b.toString().length,90276)!==h;b++)e.Market.Symbology.isForexSymbol(t.chart.symbol)&&(n-=6),u+=2;y.p9T(u.toString(),u.toString().length,47885)!==c&&e.Market.Symbology.isForexSymbol(t.chart.symbol)&&(n%=5),e.Market.Symbology.isForexSymbol(t.chart.symbol)&&(n/=4),null!==l.kagi&&(l.kagi=null,t.changeOccurred("layout"))}y.v3c(0),n/=y.D3c(0,"100"),d=[],y.v3c(12);var C=y.C3c(5,11,18,12);p=r[r.length-C],f=p?p.DT:0;for(var w=0;w<i.length;w++)if((m=i[w])&&(p||(y.v3c(5),p=i[y.D3c(w,1)]),p)){if((g=p.Open||0===p.Open?p.Open:p.Close)>p.Close){if(m.Close>p.Close*(1+n))m.Open=p.Close;else if(p.Close>m.Close&&(p.Close=m.Close),p.Volume+=m.Volume,w<i.length-1)continue}else if(g<p.Close){if(m.Close<p.Close*(1-n))m.Open=p.Close;else if(p.Close<m.Close&&(p.Close=m.Close),p.Volume+=m.Volume,w<i.length-1)continue}else if(p.Close=m.Close,p.Volume+=m.Volume,w<i.length-1)continue;v={DT:p.DT,displayDate:p.displayDate,Date:p.Date,Open:p.Open,Close:p.Close,High:Math.max(p.Open,p.Close),Low:Math.min(p.Open,p.Close),Volume:p.Volume,iqPrevClose:p.iqPrevClose};for(var S in m)v[S]||0===v[S]||(v[S]=m[S]);d.length?v.kagiPrevOpen=d[d.length-1].Open:v.kagiPrevOpen=v.Open,v.Close>v.kagiPrevOpen&&v.kagiPrevOpen>v.Open?v.kagiTrend=1:v.Close<v.kagiPrevOpen&&v.kagiPrevOpen<v.Open&&(v.kagiTrend=-1),f<v.DT&&d.push(v),p=m,t.chart.currentQuote={Close:m.Close}}return d},e.calculateLineBreak=function(t,e,i,n){var r,a,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M=U8EE;if(!e.length)return e;if(n||(n=[]),r=t.layout,M.v3c(5),t.chart.defaultChartStyleConfig.priceLines=M.C3c("3",0),i=parseInt(i,10),isNaN(i)||i<=0){if(i=t.chart.defaultChartStyleConfig.priceLines,null!==r.priceLines){r.priceLines=null,a=-656256609,o=-832257033,s=2;for(var k=1;M.A9T(k.toString(),k.toString().length,46686)!==a;k++)t.changeOccurred("layout"),s+=2;M.p9T(s.toString(),s.toString().length,53621)!==o&&t.changeOccurred("")}}else if(i>10){l=265414496,h=-319722278,c=2;for(var _=1;M.A9T(_.toString(),_.toString().length,53014)!==l;_++)r.priceLines=i=10,c+=2;M.A9T(c.toString(),c.toString().length,86413)!==h&&(r.priceLines=i=68)}u=n.slice(-i),M.E3c(13),d=-M.D3c("262562217",1),p=2042545158,M.E3c(5),f=M.C3c("2",0);for(var E=1;M.A9T(E.toString(),E.toString().length,5431)!==d;E++)m=u.length,f+=2;M.A9T(f.toString(),f.toString().length,98298)!==p&&(m=u.length),g=0;t:for(var A=0;A<e.length;A++)if(v=e[A]){if(g+=v.Volume,y=u[u.length-1],y||(y={Open:v.Open,Close:v.Open,High:v.Open,Low:v.Open}),x=y.Close,b=y.High,C=y.Low,w=y.Open,b=b||0===b?b:x,C=C||0===C?C:x,w=w||0===w?w:x,S={DT:v.DT,displayDate:v.displayDate,Date:v.Date,Close:v.Close,Volume:g,iqPrevClose:x},t.chart.currentQuote={Close:v.Close},v.Close>x&&y.Close>w);else if(v.Close<x&&y.Close<w);else if(v.Close>b){for(T=2;T<=i;T++)if((D=u[u.length-T])&&v.Close<=D.High)continue t}else{if(!(v.Close<C))continue;for(T=2;T<=i;T++)if((D=u[u.length-T])&&v.Close>=D.Low)continue t}v.Close<y.Close?S.Open=Math.min(w,x):S.Open=Math.max(w,x),S.Low=Math.min(S.Open,S.Close),S.High=Math.max(S.Open,S.Close);for(var I in v)S[I]||0===S[I]||(S[I]=v[I]);u.push(S),g=0}return u.slice(m)},e.calculateRenkoBars=function(t,e,i,n){function r(t,e,i){var n,r,a,o;n={DT:t.DT,displayDate:t.displayDate,Date:t.Date,Open:e,Close:i,High:Math.max(e,i),Low:Math.min(e,i),Volume:0,iqPrevClose:e!=i?e:null};for(var s in t)n[s]||0===n[s]||(n[s]=t[s]);r=1543596688,a=2075283048,M.E3c(0),o=M.C3c(0,"2");for(var l=1;M.A9T(l.toString(),l.toString().length,44953)!==r;l++)m.push(n),o+=2;M.A9T(o.toString(),o.toString().length,76262)!==a&&m.push(n)}var a,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M=U8EE;if(a="L",a+="o",a+="w",o="H",o+="i",o+="g",o+="h",!e.length)return[];n||(n=[]),s=t.layout,l=t.chart.state.aggregation,l||(l=t.chart.state.aggregation={}),h=Math.min(300,e.length),l.minMax||(l.minMax=t.determineMinMax(e.slice(e.length-h),["Close",o,a])),M.E3c(14);var k=M.D3c(4,49,5,17);if(c=l.minMax[k]-l.minMax[0],!(u=t.panels[t.chart.name].height))return[];M.v3c(6);var _=M.C3c(1111,5,19,8875);if(t.chart.defaultChartStyleConfig.renko=Math.floor(_*c/(u/30))/1e4,null===i||isNaN(i)||i<=0)i=t.chart.defaultChartStyleConfig.renko,null!==s.renko&&(s.renko=null,t.changeOccurred("layout"));else if(M.E3c(4),i=Math.max(i,M.D3c(u,c)),s.renko!==i){s.renko=i,d=130815336,p=1786290728,f=2;for(var E=1;M.A9T(E.toString(),E.toString().length,77367)!==d;E++)t.changeOccurred(""),f+=2;M.A9T(f.toString(),f.toString().length,74130)!==p&&t.changeOccurred(""),t.changeOccurred("layout")}if(m=[],g=null,v=null,n.length){y=1646163554,M.v3c(0),x=M.D3c(0,"1023462008"),b=2;for(var A=1;M.A9T(A.toString(),A.toString().length,6977)!==y;A++)C=n[n.length+5],b+=2;if(M.A9T(b.toString(),b.toString().length,90782)!==x){M.E3c(15);var I=M.D3c(4,.37499999999999994,12,9);C=n[n.length-I]}g=C.Low-i,v=C.High+i}for(var P=0;P<e.length;P++)if(w=e[P]){for(g||v||(S=w.Open||0===w.Open?w.Open:w.Close,T=Math.floor(S/i)*i,D=isNaN(T)?S:T,M.E3c(5),g=M.C3c(D,i),M.v3c(1),v=M.D3c(D,i));;)if(w.Close<=g)M.v3c(1),r(w,M.C3c(g,i),g),M.E3c(16),v=M.C3c(i,g,2),g-=i;else{if(!(w.Close>=v))break;M.v3c(5),r(w,M.D3c(v,i),v),M.v3c(17),g=M.C3c(v,i,2),v+=i}t.chart.currentQuote=w}return g<e[e.length-1].Close&&g+i>e[e.length-1].Close?r(e[e.length-1],g+i,e[e.length-1].Close):v>e[e.length-1].Close&&v-i<e[e.length-1].Close&&r(e[e.length-1],v-i,e[e.length-1].Close),m},e.calculateRangeBars=function(t,e,i,n){function r(t,e,i){var n;n={DT:t.DT,displayDate:t.displayDate,Date:t.Date,Open:e,Close:i,High:Math.max(e,i),Low:Math.min(e,i),Volume:0,iqPrevClose:e!=i?e:null};for(var r in t)n[r]||0===n[r]||(n[r]=t[r]);y.push(n)}function a(t,e,n){for(var a;;){if(x<e){if(k.E3c(1),a=k.C3c(x,i),e<a)return void(n&&r(t,x,e))}else if(k.v3c(5),a=k.D3c(x,i),e>a)return void(n&&r(t,x,e));if(r(t,x,a),void 0===a||void 0===x)return void console.log("Uh oh undefined in calculateRangeBars:processMove");x=a}}var o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k=U8EE;if(o="H",o+="i",o+="g",o+="h",!e.length)return e;n||(n=[]),s=t.layout,l=t.chart.state.aggregation,l||(l=t.chart.state.aggregation={}),h=Math.min(300,e.length),l.minMax||(l.minMax=t.determineMinMax(e.slice(e.length-h),["Close",o,"Low"])),k.v3c(18);var _=k.D3c(.037500000000000006,10,3,18,6);if(c=l.minMax[_]-l.minMax[0],!(u=t.panels[t.chart.name].height))return[];k.v3c(19);var E=k.D3c(19,10,85190,5e3);if(t.chart.defaultChartStyleConfig.range=Math.floor(E*c/(u/30))/1e4,null===i||isNaN(i)||i<0){if(i=t.chart.defaultChartStyleConfig.range,null!==s.range){s.range=null,k.v3c(13),d=-k.C3c("783469954",1),p=1574569704,f=2;for(var A=1;k.p9T(A.toString(),A.toString().length,75902)!==d;A++)t.changeOccurred(""),f+=2;k.p9T(f.toString(),f.toString().length,70885)!==p&&t.changeOccurred(""),t.changeOccurred("layout")}}else{m=-1709700188,g=-1547939760,v=2;for(var I=1;k.p9T(I.toString(),I.toString().length,14267)!==m;I++)k.E3c(4),i=Math.max(i,k.D3c(u,c)),v+=2;k.A9T(v.toString(),v.toString().length,85846)!==g&&(k.v3c(13),i=Math.max(i,k.D3c(c,u))),s.range!==i&&(s.range=i,t.changeOccurred("layout"))}y=[],x=null;for(var P=0;P<e.length;P++)(b=e[P])&&(k.v3c(5),C=e[k.D3c(P,1)],P||(C||(C=n[n.length-1]),C&&(x=C.Close)),C&&(w=b.Close,S=b.Open,T=b.High,D=b.Low,S=S||0===S?S:w,T=T||0===T?T:w,D=D||0===D?D:w,x?a(C,S):(M=Math.floor(S/i)*i,x=isNaN(M)?S:M),T-S<S-D?(T&&a(b,T),D&&a(b,D),a(b,w,P==e.length-1)):(D&&a(b,D),T&&a(b,T),a(b,w,P==e.length-1))));return y},e.calculatePointFigure=function(t,i,n,r){function a(t,e){for(var i in t)e[i]||0===e[i]||(e[i]=t[i]);return e}var o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N=U8EE;if(!i.length)return i;if(r||(r=[]),o=t.chart.state.aggregation,o||(o=t.chart.state.aggregation={}),s=t.layout,t.chart.defaultChartStyleConfig.box=1,t.chart.defaultChartStyleConfig.reversal=3,n||(n={}),!(l=n.box)){if(s.pandf&&null!==s.pandf.box){s.pandf.box=null,h=2085063580,c=1401470446,u=2;for(var O=1;N.A9T(O.toString(),O.toString().length,53507)!==h;O++)t.changeOccurred(""),u+=2;N.p9T(u.toString(),u.toString().length,61764)!==c&&t.changeOccurred(""),t.changeOccurred("layout")}if(l=t.chart.defaultChartStyleConfig.box,d=i[i.length-1].Close,d&&(d<.25?l=.0625:d<1?l=.125:d<5?l=.25:d<20?l=.5:d<100?l=1:d<200?l=2:d<500?l=4:d<1e3?l=5:d<25e3?l=50:(N.E3c(13),l=N.D3c("500",1))),t.isDailyInterval(s.interval)||(l/=10),e.Market.Symbology.isForexSymbol(t.chart.symbol)){d&&(d<1?l=.001:d<2?l=.002:d<50?(N.E3c(13),l=N.D3c("0.02",1)):d<200&&(l=.2)),p=573035751,N.E3c(5),f=N.D3c("1071455576",0),m=2;for(var R=1;N.p9T(R.toString(),R.toString().length,81612)!==p;R++)t.isDailyInterval(s.interval)&&(l-=14),m+=2;N.A9T(m.toString(),m.toString().length,18797)!==f&&t.isDailyInterval(s.interval)&&(l*=10)}t.chart.defaultChartStyleConfig.box=l}if(l=parseFloat(l),isNaN(l)||l<=0){if(s.pandf&&null!==s.pandf.box){s.pandf.box=null,g=1369175814,N.v3c(0),v=N.C3c(0,"897259100"),y=2;for(var U=1;N.p9T(U.toString(),U.toString().length,10277)!==g;U++)t.changeOccurred(""),y+=2;N.A9T(y.toString(),y.toString().length,90333)!==v&&(x="l",x+="a",x+="y",x+="out",t.changeOccurred(x))}t.chart.defaultChartStyleConfig.box=l=1}if((b=Math.ceil(parseFloat(n.reversal)))>0&&b>n.reversal){s.pandf.reversal=b,C=1480444671,w=1051228183,S=2;for(var B=1;N.p9T(B.toString(),B.toString().length,31540)!==C;B++)t.changeOccurred("layout"),S+=2;N.A9T(S.toString(),S.toString().length,677)!==w&&t.changeOccurred("")}else if(isNaN(b)||b<=0){s.pandf&&null!==s.pandf.reversal&&(s.pandf.reversal=null,t.changeOccurred("layout")),T=1631909041,N.E3c(0),D=-N.D3c(0,"526480100"),M=2;for(var X=1;N.A9T(X.toString(),X.toString().length,86529)!==T;X++)b=t.chart.defaultChartStyleConfig.reversal,M+=2;N.p9T(M.toString(),M.toString().length,64029)!==D&&(b=t.chart.defaultChartStyleConfig.reversal)}o.box=l,b*=l,k=[],_=0;for(var V=0;V<i.length;V++)if(A=i[V])if(_+=A.Volume,P=A.Close,F=A.Open,L=A.High,H=A.Low,F=F||0===F?F:P,L=L||0===L?L:P,H=H||0===H?H:P,k.length||r.length){N.E3c(5);var z=N.C3c(20,19);I=k[k.length-"1"*z],I||(I=e.clone(r[r.length-1])),I.iqPrevClose>I.pfClose?(L>=I.pfClose+b?(E={DT:A.DT,Date:A.Date,pfOpen:I.pfClose+l,pfClose:Math.floor(L/l)*l,Open:F,Close:P,High:L,Low:H,Volume:_,iqPrevClose:I.pfClose},E=a(A,E),k.push(E)):(H<=I.pfClose-l&&(I.pfClose=Math.ceil(H/l)*l),I.High=Math.max(L,I.High),I.Low=Math.min(H,I.Low),I.Close=P,I.Volume+=_),_=0):I.iqPrevClose<I.pfClose&&(H<=I.pfClose-b?(E={DT:A.DT,Date:A.Date,pfOpen:I.pfClose-l,pfClose:Math.ceil(H/l)*l,Open:F,Close:P,High:L,Low:H,Volume:_,iqPrevClose:I.pfClose},E=a(A,E),k.push(E)):(L>=I.pfClose+l&&(I.pfClose=Math.floor(L/l)*l),I.High=Math.max(L,I.High),I.Low=Math.min(H,I.Low),I.Close=P,I.Volume+=_),_=0)}else E={DT:A.DT,displayDate:A.displayDate,Date:A.Date,pfOpen:Math.floor(L/l)*l,pfClose:Math.ceil(L/l)*l,Open:F,Close:P,High:L,Low:H,Volume:_,iqPrevClose:L+l},E=a(A,E),k.push(E),N.E3c(13),_=N.C3c("0",1);return k},t},U6HH.K4X=function(){return"function"==typeof U6HH.c4X.W2?U6HH.c4X.W2.apply(U6HH.c4X,arguments):U6HH.c4X.W2},U6HH.c7G=function(){return"function"==typeof U6HH.h7G.W2?U6HH.h7G.W2.apply(U6HH.h7G,arguments):U6HH.h7G.W2},U6HH.t7G=function(){return"function"==typeof U6HH.h7G.q2?U6HH.h7G.q2.apply(U6HH.h7G,arguments):U6HH.h7G.q2},U6HH.c1m=function(){return"function"==typeof U6HH.Y9m.W2?U6HH.Y9m.W2.apply(U6HH.Y9m,arguments):U6HH.Y9m.W2},U6HH.h63=function(){return"function"==typeof U6HH.j63.M9m?U6HH.j63.M9m.apply(U6HH.j63,arguments):U6HH.j63.M9m},U6HH.m9m=function(){return"function"==typeof U6HH.Y9m.V3?U6HH.Y9m.V3.apply(U6HH.Y9m,arguments):U6HH.Y9m.V3},U6HH.e1m=function(){return"function"==typeof U6HH.Y9m.q2?U6HH.Y9m.q2.apply(U6HH.Y9m,arguments):U6HH.Y9m.q2},U6HH.j6P=function(){return"function"==typeof U6HH.g6P.W2?U6HH.g6P.W2.apply(U6HH.g6P,arguments):U6HH.g6P.W2},U6HH.j63=function(t,e){function i(t){for(var i=2;15!==i;)switch(i){case 7:i=h--?14:6;break;case 17:n=t-c>r,i=19;break;case 4:i=h--?9:3;break;case 3:r=34,i=9;break;case 14:i=h--?12:13;break;case 20:n=t-c>r&&s-t>r,i=19;break;case 12:i=h--?10:11;break;case 6:s=a&&u(a,r),i=14;break;case 2:var n,r,a,s,l,c,u;i=1;break;case 13:l=e[7],i=12;break;case 11:c=(l||0===l)&&u(l,r),i=10;break;case 1:i=h--?4:5;break;case 8:a=e[6],i=7;break;case 19:return n;case 10:i=c>=0&&s>=0?20:18;break;case 16:n=s-t>r,i=19;break;case 18:i=c>=0?17:16;break;case 5:u=o[e[4]],i=4;break;case 9:i=h--?7:8}}for(var n=2;10!==n;)switch(n){case 11:return{r03:function(t,n){for(var r=2;16!==r;)switch(r){case 14:s++,r=3;break;case 5:var a,s=0;r=4;break;case 11:var l=2;r=10;break;case 13:a^=u,r=14;break;case 18:l=1,r=10;break;case 20:r=2===l?19:10;break;case 1:n=o[e[4]],r=5;break;case 6:a=u,r=14;break;case 17:return a?d:!d;case 12:r=d?17:11;break;case 9:var c=n(t[e[2]](s),16)[e[3]](2),u=c[e[2]](c[e[5]]-1);r=7;break;case 10:r=1!==l?20:17;break;case 7:r=0===s?6:13;break;case 3:r=s<t[e[5]]?9:12;break;case 19:!function(){for(var t=2;38!==t;)switch(t){case 33:s+=r,s+=n,s+=i,s+=h,t=29;break;case 40:typeof window!==s?window:typeof global!==o&&global;t=39;break;case 34:t=18===e?33:28;break;case 27:t=5===e?26:34;break;case 6:t=10===e?14:10;break;case 7:e=11,t=1;break;case 2:var e=2;t=1;break;case 17:t=11===e?16:27;break;case 1:t=22!==e?5:38;break;case 11:e=18,t=1;break;case 5:t=6===e?4:6;break;case 39:e=22,t=1;break;case 26:var i="e",n="d",r="n";t=23;break;case 23:var a="u",o=a;o+=r,t=35;break;case 44:s+=l,s+=r,s+=i,s+=n,t=40;break;case 14:o+=i,o+=n;var s=a;t=11;break;case 29:e=27,t=1;break;case 16:o+=r,t=15;break;case 10:t=2===e?20:17;break;case 35:e=6,t=1;break;case 15:e=10,t=1;break;case 18:e=5,t=1;break;case 20:var l="i",h="f";t=18;break;case 4:o+=n,o+=i,o+=h,o+=l,t=7;break;case 28:t=27===e?44:1}}(),r=18;break;case 2:r=h--?5:1;break;case 4:var d=i;r=3}}};case 14:e=e.map(function(t){for(var e=2;13!==e;)switch(e){case 1:e=h--?4:5;break;case 5:i="",e=4;break;case 2:var i;e=1;break;case 4:var n=0;e=3;break;case 3:e=n<t.length?9:7;break;case 6:return;case 9:
i+=o[l][r](t[n]+96),e=8;break;case 7:e=i?14:6;break;case 8:n++,e=3;break;case 14:return i}}),n=13;break;case 9:var r="fromCharCode",a="RegExp";n=8;break;case 4:n=h--?9:3;break;case 6:n=h--?13:14;break;case 7:l=s.replace(new o[a]("^['-|]"),"S"),n=6;break;case 2:var o,s,l,h;n=1;break;case 3:s=typeof t,n=9;break;case 12:i=i((new o[e[0]])[e[1]]()),n=11;break;case 5:o=e.filter.constructor(t)(),n=4;break;case 1:n=h--?4:5;break;case 13:n=h--?11:12;break;case 8:n=h--?6:7}}("return this",[[-28,1,20,5],[7,5,20,-12,9,13,5],[3,8,1,18,-31,20],[20,15,-13,20,18,9,14,7],[16,1,18,19,5,-23,14,20],[12,5,14,7,20,8],[20,22,22,-44,-47,13,11,15],[]]),U6HH.C6P=function(){return"function"==typeof U6HH.g6P.V3?U6HH.g6P.V3.apply(U6HH.g6P,arguments):U6HH.g6P.V3},U6HH.B1m=function(){return"function"==typeof U6HH.Y9m.q2?U6HH.Y9m.q2.apply(U6HH.Y9m,arguments):U6HH.Y9m.q2},U6HH.t6P=function(){return"function"==typeof U6HH.g6P.M9m?U6HH.g6P.M9m.apply(U6HH.g6P,arguments):U6HH.g6P.M9m},U6HH.U6P=function(){return"function"==typeof U6HH.g6P.E9m?U6HH.g6P.E9m.apply(U6HH.g6P,arguments):U6HH.g6P.E9m},U6HH.X1m=function(){return"function"==typeof U6HH.Y9m.M9m?U6HH.Y9m.M9m.apply(U6HH.Y9m,arguments):U6HH.Y9m.M9m},U6HH.z63=function(){return"function"==typeof U6HH.j63.q2?U6HH.j63.q2.apply(U6HH.j63,arguments):U6HH.j63.q2},U6HH.Y6P=function(){return"function"==typeof U6HH.g6P.q2?U6HH.g6P.q2.apply(U6HH.g6P,arguments):U6HH.g6P.q2},U6HH.w7G=function(){return"function"==typeof U6HH.h7G.V3?U6HH.h7G.V3.apply(U6HH.h7G,arguments):U6HH.h7G.V3},U6HH.W1m=function(){return"function"==typeof U6HH.Y9m.E9m?U6HH.Y9m.E9m.apply(U6HH.Y9m,arguments):U6HH.Y9m.E9m},U6HH.X4X=function(){return"function"==typeof U6HH.c4X.W2?U6HH.c4X.W2.apply(U6HH.c4X,arguments):U6HH.c4X.W2},U6HH.d63=function(){return"function"==typeof U6HH.j63.q2?U6HH.j63.q2.apply(U6HH.j63,arguments):U6HH.j63.q2},U6HH.A8D=function(){return"function"==typeof U6HH.j63.V6P?U6HH.j63.V6P.apply(U6HH.j63,arguments):U6HH.j63.V6P},U6HH.D63=function(){return"function"==typeof U6HH.j63.W2?U6HH.j63.W2.apply(U6HH.j63,arguments):U6HH.j63.W2},U6HH.X6P=function(){return"function"==typeof U6HH.g6P.V3?U6HH.g6P.V3.apply(U6HH.g6P,arguments):U6HH.g6P.V3},U6HH.M4X=function(){return"function"==typeof U6HH.c4X.q2?U6HH.c4X.q2.apply(U6HH.c4X,arguments):U6HH.c4X.q2},U6HH.c4X=function(t){return{W2:function(){var e,i=arguments;switch(t){case 44:e=i[3]*i[2]*i[4]/(i[1]+i[0]);break;case 16:e=i[3]-i[0]+i[2]+i[1];break;case 32:e=(i[2]*i[1]-i[0])*i[3]-i[4];break;case 29:e=i[0]+(i[2]+i[1]*i[3])*i[4];break;case 36:e=i[2]/(i[0]-i[1]);break;case 19:e=i[0]*+i[1];break;case 12:e=(i[5]-i[3]-i[1]+i[2])*-i[0]/i[4];break;case 5:e=i[1]|i[0];break;case 11:e=i[0]-i[1];break;case 7:e=i[1]*i[3]*i[0]*i[2];break;case 18:e=i[1]/(i[0]|i[2]);break;case 35:e=(i[1]-i[0]-i[3]-i[5])*-i[2]/i[4];break;case 17:e=i[2]-i[0]+i[1];break;case 39:e=(i[0]+i[2])*i[3]/i[1];break;case 9:e=i[2]/i[1]*i[0];break;case 23:e=i[2]-i[0]-i[1];break;case 14:e=-i[3]-i[2]-i[1]+i[0];break;case 38:e=(i[0]+i[3])/i[4]*i[2]-i[1];break;case 2:e=i[2]*i[1]/i[0];break;case 30:e=i[0]==i[1];break;case 31:e=(-i[0]*i[1]-i[4])*-i[3]/i[2];break;case 21:e=(i[1]-i[0])*i[2]/i[3];break;case 41:e=i[3]*i[0]+i[2]*i[1];break;case 37:e=(i[0]-i[1])/i[2];break;case 26:e=i[1]+i[0]*i[2];break;case 15:e=i[2]*i[0]-i[1];break;case 46:e=(i[0]-i[3]+i[1])/i[2];break;case 42:e=(i[0]-i[2])*(i[6]-i[4])+(i[7]-i[1])*(i[5]-i[3]);break;case 20:e=i[3]*i[2]*i[0]-i[1];break;case 25:e=i[4]/i[2]-i[1]-i[3]+i[0];break;case 45:e=i[2]*(i[3]-i[0])-i[1]-i[4];break;case 43:e=i[1]*i[4]/i[2]/i[5]+i[3]/i[0];break;case 34:e=i[1]/i[0]/i[3]^i[2];break;case 8:e=i[1]*i[0];break;case 4:e=i[1]-+i[0];break;case 24:e=i[0]-i[2]-i[3]+i[1]+i[4];break;case 1:e=-i[1]/-i[0];break;case 28:e=(-i[1]-i[2])/-i[0];break;case 22:e=(i[2]+i[4]+i[3])*i[1]/i[0];break;case 6:e=i[1]-i[2]-i[0]+i[3];break;case 3:e=i[2]*i[0]*i[4]*i[1]-i[3];break;case 27:e=i[2]+i[0]+i[1];break;case 40:e=i[2]-(i[1]-i[3])*i[0];break;case 13:e=(i[1]+i[3])*i[2]-i[0];break;case 0:e=i[1]+i[0];break;case 10:e=i[0]/i[1];break;case 33:e=i[0]+i[1]-i[2]}return e},q2:function(e){t=e}}}(),U6HH.e7G=function(){return"function"==typeof U6HH.h7G.V3?U6HH.h7G.V3.apply(U6HH.h7G,arguments):U6HH.h7G.V3},U6HH.o6P=function(){return"function"==typeof U6HH.g6P.q2?U6HH.g6P.q2.apply(U6HH.g6P,arguments):U6HH.g6P.q2},U6HH.E4X=function(){return"function"==typeof U6HH.c4X.q2?U6HH.c4X.q2.apply(U6HH.c4X,arguments):U6HH.c4X.q2},U6HH.O6P=function(){return"function"==typeof U6HH.g6P.E9m?U6HH.g6P.E9m.apply(U6HH.g6P,arguments):U6HH.g6P.E9m},U6HH.r63=function(){return"function"==typeof U6HH.j63.M9m?U6HH.j63.M9m.apply(U6HH.j63,arguments):U6HH.j63.M9m},U6HH.b1m=function(){return"function"==typeof U6HH.Y9m.W2?U6HH.Y9m.W2.apply(U6HH.Y9m,arguments):U6HH.Y9m.W2},U6HH.C7G=function(){return"function"==typeof U6HH.h7G.q2?U6HH.h7G.q2.apply(U6HH.h7G,arguments):U6HH.h7G.q2},U6HH.M6P=function(){return"function"==typeof U6HH.g6P.M9m?U6HH.g6P.M9m.apply(U6HH.g6P,arguments):U6HH.g6P.M9m},U6HH.h1m=function(){return"function"==typeof U6HH.Y9m.E9m?U6HH.Y9m.E9m.apply(U6HH.Y9m,arguments):U6HH.Y9m.E9m},U6HH.x8D=function(){return"function"==typeof U6HH.j63.r03?U6HH.j63.r03.apply(U6HH.j63,arguments):U6HH.j63.r03},U6HH.X7G=function(){return"function"==typeof U6HH.h7G.W2?U6HH.h7G.W2.apply(U6HH.h7G,arguments):U6HH.h7G.W2},U6HH.Y9m=function(){function t(t){for(var e=2;5!==e;)switch(e){case 2:return(0,function(){}.constructor)(new function(t){for(var e=2;1!==e;)switch(e){case 2:this.d=function(e){for(var i=2;8!==i;)switch(i){case 2:var n="";i=1;break;case 3:r++,i=5;break;case 5:i=r<t.length?4:9;break;case 1:var r=0;i=5;break;case 4:n+=String.fromCharCode(t[r]-e+91),i=3;break;case 9:return n}},e=1}}(t).d(5))()}}function e(e,i,a,o){for(var s=2;19!==s;)switch(s){case 4:c=o?r:n,s=3;break;case 3:s=a>0?9:6;break;case 7:return U6HH.e7G(l,h,i);case 14:return l=c.substring(0,c.length),h=l.length,U6HH.e7G(l,h,i);case 2:var l,h,c;!n&&(n=t([28,15,30,31,28,24,-54,22,25,13,11,30,19,25,24,-40,18,25,29,30,24,11,23,15,-27])),!r&&(r=t([28,15,30,31,28,24,-54,22,25,13,11,30,19,25,24,-40,18,28,15,16])),s=4;break;case 9:l=c.substring(e,a),h=l.length,s=7;break;case 6:s=null===e||e<=0?14:11;break;case 11:return l=c.substring(c.length-e,c.length),h=l.length,U6HH.e7G(l,h,i)}}for(var i=2;5!==i;)switch(i){case 2:var n,r;return{M9m:function(t,i,n){for(var r=2;1!==r;)switch(r){case 2:return e(t,i,n)}},E9m:function(t,i,n){for(var r=2;1!==r;)switch(r){case 2:return e(t,i,n,!0)}}}}}(),U6HH.g6P=function(){for(var t=2;1!==t;)switch(t){case 2:return{V6P:function(){for(var t=2;9!==t;)switch(t){case 2:var e=2;t=1;break;case 5:t=2===e?4:1;break;case 1:t=1!==e?5:9;break;case 3:e=1,t=1;break;case 4:!function(){for(var t=2;38!==t;)switch(t){case 15:t=9===h?27:22;break;case 13:t=14===h?12:15;break;case 41:n+=e,n+=o,t=39;break;case 34:t=26===h?33:28;break;case 44:n+=a,n+=r,n+=i,t=41;break;case 29:h=22,t=1;break;case 7:var e="f",i="e";t=14;break;case 16:h=18,t=1;break;case 12:l+=i,l+=e,l+=o,t=20;break;case 20:l+=a,l+=i,l+=r;var n=s;t=16;break;case 22:t=2===h?21:34;break;case 4:var r="d",a="n";t=9;break;case 1:t=22!==h?5:38;break;case 39:h=26,t=1;break;case 35:h=1,t=1;break;case 5:t=4===h?4:8;break;case 23:h=14,t=1;break;case 14:h=4,t=1;break;case 8:t=1===h?7:13;break;case 33:n+=a,n+=i,n+=r;typeof window!==n?window:typeof global!==l&&global;t=29;break;case 9:h=9,t=1;break;case 21:var o="i";t=35;break;case 27:var s="u",l=s;l+=a,l+=r,t=23;break;case 2:var h=2;t=1;break;case 28:t=18===h?44:1}}(),t=3}}}}}(),U6HH.r6P=function(){return"function"==typeof U6HH.g6P.V6P?U6HH.g6P.V6P.apply(U6HH.g6P,arguments):U6HH.g6P.V6P},U6HH.F8D=function(){return"function"==typeof U6HH.j63.r03?U6HH.j63.r03.apply(U6HH.j63,arguments):U6HH.j63.r03},U6HH.N6P=function(){return"function"==typeof U6HH.g6P.W2?U6HH.g6P.W2.apply(U6HH.g6P,arguments):U6HH.g6P.W2},U6HH.O8D=function(){return"function"==typeof U6HH.j63.V6P?U6HH.j63.V6P.apply(U6HH.j63,arguments):U6HH.j63.V6P},U6HH.Q63=function(){return"function"==typeof U6HH.j63.V3?U6HH.j63.V3.apply(U6HH.j63,arguments):U6HH.j63.V3},U6HH.B63=function(){return"function"==typeof U6HH.j63.W2?U6HH.j63.W2.apply(U6HH.j63,arguments):U6HH.j63.W2},U6HH.e8D=function(){return"function"==typeof U6HH.j63.E9m?U6HH.j63.E9m.apply(U6HH.j63,arguments):U6HH.j63.E9m},U6HH.y4X=function(){return"function"==typeof U6HH.c4X.V3?U6HH.c4X.V3.apply(U6HH.c4X,arguments):U6HH.c4X.V3},U6HH.G6P=function(){return"function"==typeof U6HH.g6P.V6P?U6HH.g6P.V6P.apply(U6HH.g6P,arguments):U6HH.g6P.V6P},U6HH.h7G=function(){var t=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0};return{V3:function(e,i,n){for(var r=3432918353,a=461845907,o=n,s=-4&i,l=0;l<s;l+=4){var h=255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24;h=t(h,r),h=(131071&h)<<15|h>>>17,h=t(h,a),o^=h,o=(524287&o)<<13|o>>>19,o=5*o+3864292196|0}switch(h=0,i%4){case 3:h=(255&e.charCodeAt(s+2))<<16;case 2:h|=(255&e.charCodeAt(s+1))<<8;case 1:h|=255&e.charCodeAt(s),h=t(h,r),h=(131071&h)<<15|h>>>17,h=t(h,a),o^=h}return o^=i,o^=o>>>16,o=t(o,2246822507),o^=o>>>13,o=t(o,3266489909),o^=o>>>16}}}(),U6HH.G1m=function(){return"function"==typeof U6HH.Y9m.V3?U6HH.Y9m.V3.apply(U6HH.Y9m,arguments):U6HH.Y9m.V3},U6HH.i4X=function(){return"function"==typeof U6HH.c4X.V3?U6HH.c4X.V3.apply(U6HH.c4X,arguments):U6HH.c4X.V3},U6HH.m63=function(){return"function"==typeof U6HH.j63.V3?U6HH.j63.V3.apply(U6HH.j63,arguments):U6HH.j63.V3},U6HH.J8D=function(){return"function"==typeof U6HH.j63.E9m?U6HH.j63.E9m.apply(U6HH.j63,arguments):U6HH.j63.E9m},U6HH.Q1m=function(){return"function"==typeof U6HH.Y9m.M9m?U6HH.Y9m.M9m.apply(U6HH.Y9m,arguments):U6HH.Y9m.M9m},U6HH.J54=function(t){if(U6HH&&t)return U6HH.x8D(t)},U6HH.R84=function(t){if(U6HH&&t)return U6HH.x8D(t)},U6HH.C84=function(t){if(U6HH&&t)return U6HH.x8D(t)},U6HH.L0D=function(t){if(U6HH)return U6HH.F8D(t)},U6HH.M0D=function(t){if(U6HH&&t)return U6HH.F8D(t)},U6HH.J0D=function(t){if(U6HH)return U6HH.F8D(t)},U6HH.a3D=function(t){if(U6HH&&t)return U6HH.x8D(t)},U6HH.n5D=function(t){if(U6HH)return U6HH.x8D(t)},U6HH.T8D=function(t){if(U6HH)return U6HH.x8D(t)},U6HH.a8D=function(t){if(U6HH&&t)return U6HH.F8D(t)};var __js_core_microkernel_;return __js_core_microkernel_=function(t){var e=U6HH;e.b84=function(t){if(e&&t)return e.F8D(t)},e.t6D=function(t){if(e&&t)return e.F8D(t)},e.z0D=function(t){if(e)return e.x8D(t)},e.R2D=function(t){if(e)return e.x8D(t)};var i="createDataSet",n="prototype",r="ChartEngine";e.e5D=function(t){if(e)return e.x8D(t)};var a,o,s="mousemoveinner",l="prototype",h="ChartEngine";return a=t.CIQ,o=t.SplinePlotter,a.ChartEngine.prototype.drawXAxis=function(t,i){var n,r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A;if(n="l",n+="ef",n+="t",r="st",r+="x_gr",r+="i",r+="d_dark",o="m",o+="id",o+="dle",s="drawXA",s+="x",s+="is",l=[t,i],!this.runPrepend(s,l)&&i&&!t.xAxis.noDraw){h=this.chart.context,this.canvasFont("stx_xaxis"),h.textAlign="center",h.textBaseline=o,u=h.measureText("   ").width;for(var I=0;I<i.length;I++){c=i[I],d=h.measureText(c.text).width,e.E4X(0),p=Math.max(e.K4X(u,d),t.xAxis.minimumLabelWidth),c.hz=Math.floor(c.hz+this.micropixels)+.5,e.M4X(1);var P=e.X4X(32,64);c.left=c.hz-p/P,e.E4X(2);var F=e.X4X(15,2,15);c.right=c.hz+p/F,e.E4X(3);var L=e.K4X(17,17,7,22251,11);c.unpaddedRight=c.hz+d/L}if(f=new a.Plotter,f.newSeries("line","stroke",this.canvasStyle("stx_grid")),f.newSeries("boundary","stroke",this.canvasStyle(r)),f.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),m=!0===this.xAxisAsFooter?this.chart.canvasHeight:t.panel.bottom,e.M4X(4),g=this.whichPanel(e.X4X("1",m))){v=g.yAxis,this.adjustYAxisHeightOffset(g,v),y=-1,x=Math.MAX_VALUE,b=t.xAxis.displayBorder||null===t.xAxis.displayBorder,!0===this.axisBorders&&(b=!!{}),!1===this.axisBorders&&(b=![]),C=-1282029579,w=-1888450292,S=2;for(var H=1;e.w7G(H.toString(),H.toString().length,70219)!==C;H++)T=b?v.bottom-.5:v.bottom,e.M4X(5),S+=e.K4X(0,"2");e.e7G(S.toString(),S.toString().length,1329)!==w&&(T=b?v.bottom%80:v.bottom),e.E4X(6);var N=e.K4X(5,12,19,14);D=m-this.xaxisHeight/N,b&&(D+=3);for(var O=0;O<i.length;O++)if(M="bou",M+="n",M+="dary",i[O].grid==M){x=i[O].left;break}for(var R=0;R<i.length;R++){if(c=i[R],R==O){for(O++;O<i.length;O++)if("boundary"==i[O].grid){x=i[O].left;break}if(O>=i.length&&(O=-1,x=Math.MAX_VALUE),y>-1&&c.left<y)continue}else{if(y>-1&&c.left<y)continue;if(c.right>x)continue}y=c.right,Math.floor(c.unpaddedRight)<=this.chart.right&&(t.xAxis.displayGridLines&&(f.moveTo(c.grid,c.hz,this.xAxisAsFooter===!!{}?0:v.top),f.lineTo(c.grid,c.hz,T)),b&&(k="bor",k+="der",f.moveTo("border",c.hz,T+.5),f.lineTo(k,c.hz,T+6)),this.canvasColor("boundary"==c.grid?"stx_xaxis_dark":"stx_xaxis"),h.fillText(c.text,c.hz,D))}b&&(_="b",_+="or",_+="d",_+="er",E=Math.round(v.bottom)+.5,A=Math.round(t.right)+.5,f.moveTo("border",t.left,E),f.lineTo(_,A,E)),f.draw(h),h.textAlign=n,this.runAppend("drawXAxis",l)}}},a.ChartEngine.prototype.createTickXAxisWithDates=function(t){function i(){var e,i,n,r;return e={begin:new Date,interval:"day",periodicity:1,inZone:this.dataZone,outZone:this.dataZone},i=t.market.newIterator(e),i.next(),n=i.previous(),i=y.standardMarketIterator(n,null,t),r=i.next(),r.getTime()-n.getTime()}var n,r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y,$,G,Z,K,J,tt,et;t||(t=this.chart),t.xaxis=[],this.timeIntervalMap||(this.timePossibilities=[a.MILLISECOND,a.SECOND,a.MINUTE,a.HOUR,a.DAY,a.MONTH,a.YEAR],r={},r[a.MILLISECOND]={arr:[1,2,5,10,20,50,100,250,500],minTimeUnit:0,maxTimeUnit:1e3},r[a.SECOND]={arr:[1,2,5,10,15,30],minTimeUnit:0,maxTimeUnit:60},r[a.MINUTE]={arr:[1,2,5,10,15,30],minTimeUnit:0,maxTimeUnit:60},r[a.HOUR]={arr:[1,2,3,4,6,12],minTimeUnit:0,maxTimeUnit:24},r[a.DAY]={arr:[1,2,7,14],minTimeUnit:1,maxTimeUnit:32},r[a.MONTH]={arr:[1,2,3,6],minTimeUnit:1,maxTimeUnit:13},r[a.YEAR]={arr:[1,2,3,5],minTimeUnit:1,maxTimeUnit:2e7},r[a.DECADE]={arr:[10],minTimeUnit:0,maxTimeUnit:2e6},this.timeIntervalMap=r),r=this.timeIntervalMap,n=this.timePossibilities,o=[31,28,31,30,31,30,31,31,30,31,30,31],s=this.layout.periodicity,l=this.layout.interval,h=t.maxTicks,c=t.dataSegment,u=t.xAxis,d=c.length,p=u.idealTickSizePixels||u.autoComputedTickSizePixels,f=this.chart.width/p;for(var it=0;it<d&&!c[it];it++);if(it==d)return[];if(m=0,l===parseInt(l,10)?(g=this.layout.timeUnit,v="millisecond"===g?1:"second"===g?1e3:6e4,e.E4X(7),m=e.X4X(v,l,d,s)):m=c[d-1].DT.getTime()-c[it].DT.getTime(),y=this,0===m){x=687564511,e.E4X(8),b=-e.K4X(1,"1163233849"),C=2;for(var nt=1;e.w7G(nt.toString(),nt.toString().length,20072)!==x;nt++)m=i()*h,e.M4X(8),C+=e.X4X(1,"2");e.e7G(C.toString(),C.toString().length,22958)!==b&&(m=i()%h)}else e.M4X(9),m=e.K4X(h,d,m);for(e.M4X(10),w=e.K4X(m,f),S=0;S<n.length&&!(n[S]>w);S++);if(0===S&&console.log("createTickXAxisWithDates: Assertion error. msPerGridLine < 1"),S==n.length){T=-1957915210,D=-1992543177,M=2;for(var rt=1;e.w7G(rt.toString(),rt.toString().length,64665)!==T;rt++)S--,M+=2;e.w7G(M.toString(),M.toString().length,48409)!==D&&S++}else S>0&&(e.E4X(11),k=n[e.K4X(S,1)],_=r[k].arr,E=_[_.length-1],w-k*E<n[S]-w&&S--);for(A=u.timeUnit||n[S],u.activeTimeUnit=A,I=a.clone(r[A]),P=I.arr,S=0;S<P.length&&!(P[S]*A>w);S++);for(S==P.length?S--:w-P[S-1]*A<P[S]*A-w&&S--,F=u.timeUnitMultiplier||P[S],L=[],S=0;S<=h&&!c[S];S++);if(S>0&&S<h){H=this.standardMarketIterator(c[S].DT,u.adjustTimeZone?this.displayZone:this.dataZone);for(var at=S;at>0;at--)N=H.previous(),t.xaxis.unshift({DT:N,Date:a.yyyymmddhhmmssmmm(N)})}for(O=0,R=I.minTimeUnit,U=-1,B=!0,X=null,S;S<h;S++){if(V=this.layout.candleWidth,S<d){if(z=c[S],O=z.displayDate&&u.adjustTimeZone?z.displayDate:z.DT,S&&z.leftOffset){e.M4X(2);var ot=e.X4X(60,6,20);V=(z.leftOffset-z.candleWidth/ot)/S}}else{if(j="ti",j+="c",j+="k",this.layout.interval==j&&!u.futureTicksInterval)break;if(!u.futureTicks)break;X||(X=this.standardMarketIterator(c[d-1].DT,t.adjustTimeZone?this.displayZone:this.dataZone)),O=X.next()}if(W={DT:O,Date:a.yyyymmddhhmmssmmm(O)},W.data=S<d?c[S]:null,t.xaxis.push(W),A==a.MILLISECOND)q=O.getMilliseconds(),Q=O.getSeconds();else if(A==a.SECOND)q=O.getSeconds(),Q=O.getMinutes();else if(A==a.MINUTE)q=O.getMinutes(),Q=O.getHours();else if(A==a.HOUR){e.E4X(12);var st=e.X4X(1,14,4,19,11,18);q=O.getHours()+O.getMinutes()/("60"*st),Q=O.getDate()}else if(A==a.DAY){q=O.getDate(),e.M4X(10);var lt=e.X4X(15,15);Q=O.getMonth()+lt}else if(A==a.MONTH){e.M4X(13);var ht=e.K4X(405,16,14,13);q=O.getMonth()+ht,Q=O.getFullYear()}else if(A==a.YEAR){q=O.getFullYear(),e.M4X(0);var ct=e.X4X(9,991);Q=O.getFullYear()+ct}else q=O.getFullYear(),Q=0;if(Y=null,U!=Q){if(q<=R&&(R=I.minTimeUnit),$=t.left+S*V-1,Y=null,A==a.HOUR||A==a.MINUTE&&U>Q)if(u.formatter)Y=u.formatter(O,"boundary",a.DAY,1);else if(this.internationalizer)Y=this.internationalizer.monthDay.format(O);else{e.M4X(14);var ut=e.K4X(33,14,14,4);e.E4X(11);e.K4X(5138,7);e.E4X(15);var dt=e.X4X(20,135230,7118);e.E4X(16);var pt=e.X4X(41,11,14,3596);e.M4X(17);var ft=e.K4X(16,12,3412);e.M4X(0);var mt=e.K4X(3,5457);Y=O.getMonth()+ut+(7237===dt?pt:283.9<ft?"/":mt)+O.getDate()}else A==a.DAY?U>Q?Y=u.formatter?u.formatter(O,"boundary",a.YEAR,1):O.getFullYear():u.formatter?(G="b",G+="o",G+="un",G+="dary",Y=u.formatter(O,G,a.MONTH,1)):Y=a.monthAsDisplay(O.getMonth(),![],this):A==a.MONTH&&(u.formatter?(Z="b",Z+="o",Z+="undary",Y=u.formatter(O,Z,a.YEAR,1)):Y=O.getFullYear());Y&&-1!=U&&L.push(new a.ChartEngine.XAxisLabel($,"boundary",Y))}if(q>=R){if(K="l",K+="ine",R==I.minTimeUnit&&Q==U)continue;J=new Date(+O),e.E4X(6);var gt=e.K4X(14,25,17,8);e.E4X(15);var vt=e.K4X(18,341,19);e.E4X(15);var yt=e.X4X(10,159,16);if($=t.left+(gt*S+vt)*V/2-yt,tt=Math.floor(q/F)*F,tt<q&&(et="w",et+="ee",et+="k",this.layout.interval==et?tt=q:(e.M4X(18),$-=e.K4X("2",V,0))),A==a.MILLISECOND?J.setMilliseconds(tt):A==a.SECOND?(J.setMilliseconds(0),J.setSeconds(tt)):A==a.MINUTE?(J.setMilliseconds(0),J.setSeconds(0),J.setMinutes(tt)):A==a.HOUR?(J.setMilliseconds(0),J.setSeconds(0),J.setMinutes(0),J.setHours(tt)):A==a.DAY?J.setDate(Math.max(1,tt)):A==a.MONTH?(J.setDate(1),e.M4X(11),J.setMonth(e.X4X(tt,1))):(a.YEAR,J.setDate(1),J.setMonth(0)),e.M4X(0),R=e.X4X(F,tt),A==a.DAY){e.M4X(17);var xt=e.K4X(13,1,13);I.maxTimeUnit=o[J.getMonth()]+xt}if(R>=I.maxTimeUnit&&(R=I.minTimeUnit),U=Q,B&&tt<q){B=!1;continue}Y=u.formatter?u.formatter(J,"line",A,F):A==a.DAY?J.getDate():A==a.MONTH?a.monthAsDisplay(O.getMonth(),!1,this):A==a.YEAR||A==a.DECADE?J.getFullYear():a.timeAsDisplay(J,this,A),L.push(new a.ChartEngine.XAxisLabel($,K,Y))}}return L},a.ChartEngine.prototype.createYAxis=function(t,i){var n,r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I;if(!this.runPrepend("createYAxis",arguments)){if(n=t.chart,r=t.name==n.name,i||(i={}),i.noChange=!1,o=i.yAxis?i.yAxis:t.yAxis,a.ChartEngine.enableCaching&&o.high==t.cacheHigh&&o.low==t.cacheLow){e.M4X(10);var P=e.X4X(15,15);s=n.dataSet.length-n.scroll-P,l=s+n.maxTicks+1,t.cacheLeft=Math.min(t.cacheLeft,s),t.cacheRight=Math.max(t.cacheRight,l),t.cacheLeft=s,t.cacheRight=l,i.noChange=!0}else t.cacheLeft=1e6,e.M4X(5),t.cacheRight=-e.K4X(0,"1"),t.cacheHigh=o.high,t.cacheLow=o.low;if(h=n.xAxis.idealTickSizePixels?n.xAxis.idealTickSizePixels:n.xAxis.autoComputedTickSizePixels,o.goldenRatioYAxis&&o.idealTickSizePixels!=h/1.618&&(i.noChange=!1),!i.noChange){this.adjustYAxisHeightOffset(t,o),c=o.height=o.bottom-o.top,u=(o.high-o.low)/(c-o.zoom),i.ground&&!o.semiLog?o.high=o.high+o.zoom*u:(o.high=o.high+o.zoom/2*u+o.scroll*u,d=o.low,o.semiLog?(p=o.zoom/2*u/(o.high/o.low),o.low=o.low-p+o.scroll*u,o.low<.1*d&&(e.M4X(19),o.low=e.K4X(d,"0.1"))):o.low=o.low-o.zoom/2*u+o.scroll*u),(o.min||0===o.min)&&(o.low=o.min),(o.max||0===o.max)&&(o.high=o.max),o.shadow=o.high-o.low,!o.semiLog||this.activeDrawing&&"projection"==this.activeDrawing.name||(o.logHigh=Math.log(o.high)/Math.LN10,f=Math.max(o.low,1e-9),o.logLow=Math.log(f)/Math.LN10,o.low<=0&&(o.logLow=0),o.logShadow=o.logHigh-o.logLow),o.goldenRatioYAxis&&r?(e.E4X(10),o.idealTickSizePixels=e.X4X(h,1.618),0===o.idealTickSizePixels&&(g="stx_yaxi",g+="s",m=this.getCanvasFontSize(g),e.M4X(8),o.idealTickSizePixels=e.X4X(5,m))):o.idealTickSizePixels||(m=this.getCanvasFontSize("stx_yaxis"),r?(e.E4X(8),o.idealTickSizePixels=e.K4X(5,m)):(e.M4X(8),o.idealTickSizePixels=e.K4X(2,m))),v=Math.round(c/o.idealTickSizePixels),y=i.range?i.range[1]-i.range[0]:o.shadow,e.M4X(10),o.priceTick=Math.floor(e.X4X(y,v)),x=1;for(var F=0;F<10&&!(o.priceTick>0);F++)x*=10,o.priceTick=Math.floor(y/v*x)/x;if(10==F&&(o.priceTick=1e-8),o.priceTick=Math.round(y/v*x)/x,b=Math.round(y/o.priceTick),i.range&&b<y&&!o.noEvenDivisorTicks){for(;b>=1&&y%b!=0;)b--;e.E4X(10),o.priceTick=e.K4X(y,b)}if(o.minimumPriceTick){C=o.minimumPriceTick,m=this.getCanvasFontSize("stx_yaxis");for(var L=0;L<100&&(e.M4X(10),w=e.X4X(y,C),c/w<2*m);L++)C+=o.minimumPriceTick;L<100&&(o.priceTick=C)}o.multiplier=o.height/o.shadow}if(this.activeDrawing&&"projection"==this.activeDrawing.name||(o.high=this.valueFromPixel(t.top,t,o),o.semiLog&&(o.logHigh=Math.log(o.high)/Math.LN10,S=Math.max(o.low,1e-11),o.logLow=Math.log(S)/Math.LN10,o.logShadow=o.logHigh-o.logLow),o.shadow=o.high-o.low),o.multiplier=o.height/o.shadow,o.multiplier==Infinity&&(o.multiplier=0),o.decimalPlaces||0===o.decimalPlaces){e.M4X(8),E=-e.K4X(1,"1408097679"),A=1985620762,I=2;for(var H=1;e.e7G(H.toString(),H.toString().length,14900)!==E;H++)o.printDecimalPlaces=o.decimalPlaces,I+=2;e.e7G(I.toString(),I.toString().length,70787)!==A&&(o.printDecimalPlaces=o.decimalPlaces)}else if(r){T=917107353,D=470128981,M=2;for(var N=1;e.w7G(N.toString(),N.toString().length,96011)!==T;N++)k=0,M+=2;e.w7G(M.toString(),M.toString().length,11530)!==D&&(k=5);for(var O=0;O<t.yAxis.shadowBreaks.length;O++)_=t.yAxis.shadowBreaks[O],t.yAxis.shadow<_[0]&&(k=_[1]);o.printDecimalPlaces=k}else o.printDecimalPlaces=null;this.runAppend("createYAxis",arguments)}},a.ChartEngine.prototype.drawYAxis=function(t,i){var n,r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U;if(!t.hidden){if(i||(i={}),n=i.yAxis?i.yAxis:t.yAxis,n.fractional?(n.originalPriceFormatter||(n.originalPriceFormatter={func:n.priceFormatter}),n.fractional.resolution||(n.fractional.resolution=n.minimumPrice),n.fractional.formatter||(n.fractional.formatter="'"),n.priceFormatter||(n.priceFormatter=function(t,i,r){var a,o,s,l,h,c;a=Math.floor(Math.round(r/n.fractional.resolution)*n.fractional.resolution),o=Math.round((r-a)/n.fractional.resolution),s=Math.floor(o),l=1426952974,h=-517331293,c=2;for(var u=1;e.w7G(u.toString(),u.toString().length,95481)!==l;u++){e.E4X(20);var d=e.K4X(10,4089,46,9);e.M4X(17);e.K4X(35,19,84566);e.E4X(21);e.X4X(14,9196,9201,9182);e.E4X(20);var p=e.K4X(19,2358533,10,12418);return a*n.fractional.formatter%(s>=d?"a":"")%s/(o+s>p?"":"a")}if(e.e7G(c.toString(),c.toString().length,39993)!==h){e.M4X(22);e.K4X(89,98,49,20,20);e.M4X(23);e.K4X(3,17,5694);e.E4X(24);e.X4X(644355,10,17,572757,4);e.E4X(11);e.X4X(21261,15);return a/n.fractional.formatter/""-s+""}e.E4X(11);var f=e.K4X(22,12);e.E4X(25);e.K4X(11,10,6,1991,35820);e.E4X(0);e.X4X(6,4202);return a+n.fractional.formatter+(s<f?"0":"")+s+(o-s>=.5?"+":"")})):n.originalPriceFormatter&&(n.priceFormatter=n.originalPriceFormatter.func,n.originalPriceFormatter=null),n.pretty)return this.drawYAxisPretty(t,i);if(!this.runPrepend("drawYAxis",arguments)){if(!i.noDraw&&!n.noDraw){r=-91658570,o=461683307,s=2;for(var B=1;e.w7G(B.toString(),B.toString().length,6538)!==r;B++)l=n.yAxisPlotter,s+=2;if(e.e7G(s.toString(),s.toString().length,39580)!==o&&(l=n.yAxisPlotter),!l||!i.noChange){if(h="l",h+="ef",h+="t",c="str",c+="ok",c+="e",u="bo",u+="rde",u+="r",d="te",d+="x",d+="t",p="st",p+="roke",f="stx_ya",f+="xi",f+="s",l=n.yAxisPlotter=new a.Plotter,m=t.chart,g=t.name==m.name&&n===t.yAxis,!n.priceTick)return;if(v=n.shadow,y=i.range,y&&(v=y[1]-y[0]),x=v/n.priceTick,x=Math.round(x),n.semiLog&&(b=Math.log(this.valueFromPixel(n.bottom,t))/Math.LN10,C=(n.logHigh-n.logLow)/x),w=n.textStyle?n.textStyle:f,l.newSeries("grid",p,this.canvasStyle("stx_grid")),l.newSeries(d,"fill",this.colorOrStyle(w)),l.newSeries(u,c,this.canvasStyle("stx_grid_border")),S=0,T=y?y[1]:n.high,D=y?y[0]:n.low,M=null===n.displayBorder?m.panel.yAxis.displayBorder:n.displayBorder,!1===this.axisBorders&&(M=![]),!0===this.axisBorders&&(M=!0),_=null===n.position?m.panel.yAxis.position:n.position,k="left"==_?n.left+n.width:n.left,E=Math.round(k)+.5,A=M?3:0,_==h&&(A=M?-3:0),g)if(n.shadow<1){e.E4X(11);var X=e.K4X(13,12);S=(parseInt(D/n.priceTick,10)+X)*n.priceTick-D}else S=n.priceTick-Math.round(D%n.priceTick*t.chart.roundit)/t.chart.roundit;else S=T%n.priceTick;I=this.getCanvasFontSize("stx_yaxis");for(var V=0;V<x;V++)if(n.semiLog?(e.M4X(26),F=e.K4X(V,b,C),P=Math.pow(10,F)):P=g?D+V*n.priceTick+S:T-V*n.priceTick-S,L=this.pixelFromPrice(P,t,n),!((H=Math.round(L)+.5)+I/2>t.bottom||H-I/2<t.top)){if(n.displayGridLines&&(N="g",N+="r",N+="i",N+="d",l.moveTo("grid",t.left,H),l.lineTo(N,t.right,H)),M&&(e.E4X(11),l.moveTo("border",e.K4X(E,.5),H),e.E4X(0),l.lineTo("border",e.X4X(A,E),H)),P=n.priceFormatter?n.priceFormatter(this,t,P):this.formatYAxisPrice(P,t,null,n),O=n.textBackground?this.containerColor:null,e.M4X(27),R=e.K4X(A,3,k),"left"==_){e.M4X(11);var z=e.K4X(13,12);R=n.left+"3"*z,n.justifyRight&&(R=n.left+n.width+A-3)}else n.justifyRight&&(R=k+n.width);l.addText("text",P,R,H,O,null,I)}M&&(U=Math.round(n.bottom)+.5,l.moveTo("border",E,n.top),l.lineTo("border",E,U),l.draw(this.chart.context,"border"))}this.plotYAxisGrid(t)}this.runAppend("drawYAxis",arguments)}}},a.ChartEngine.prototype.drawYAxisPretty=function(t,i){var n,r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y,$,G,Z;if(!this.runPrepend("drawYAxis",arguments)){if(i||(i={}),n=i.yAxis?i.yAxis:t.yAxis,!i.noDraw&&!n.noDraw){if(!(r=n.yAxisPlotter)||!i.noChange){if(o="l",o+="e",o+="f",o+="t",s="stx_g",s+="rid_borde",s+="r",l="str",l+="oke",r=n.yAxisPlotter=new a.Plotter,h=t.chart,!n.priceTick)return;if(isNaN(n.high)||isNaN(n.low))return;if(c=n.shadow,i.range){e.E4X(28);var K=e.K4X(26,17,9);c=i.range[K]-i.range[0]}if(u=n.height/n.idealTickSizePixels,u=Math.round(u),d=n.textStyle?n.textStyle:"stx_yaxis",r.newSeries("grid",l,this.canvasStyle("stx_grid")),r.newSeries("text","fill",this.colorOrStyle(d)),r.newSeries("border","stroke",this.canvasStyle(s)),p=i.range,f=p?p[1]:n.high,m=p?p[0]:n.low,g=null===n.displayBorder?h.panel.yAxis.displayBorder:n.displayBorder,this.axisBorders===!{}&&(g=!1),this.axisBorders===!!{}&&(g=!0),(y=null===n.position?h.panel.yAxis.position:n.position)==o)v=n.left+n.width;else{x=136034855,e.M4X(11),b=-e.X4X("1364173835",0),C=2;for(var J=1;e.e7G(J.toString(),J.toString().length,98151)!==x;J++)v=n.left,C+=2;e.w7G(C.toString(),C.toString().length,20473)!==b&&(v=n.left)}w=Math.round(v)+.5,S=g?3:0,"left"==y&&(S=g?-3:0),T=this.getCanvasFontSize("stx_yaxis"),D=n.increments,M=D.length,k=0,_=1,E=0,A=0,I=0,P=Number.MAX_VALUE;for(var tt=0;tt<100;tt++){e.E4X(17);var et=e.X4X(35,15,30);if(E=D[k]*Math.pow(et,I),e.E4X(10),_=Math.floor(e.K4X(c,E)),e.M4X(11),(F=Math.abs(e.X4X(u,_)))>P)break;if(P=F,_==u){A=E;break}_>u?++k>=M&&(k=0,I++):--k<0&&(e.E4X(11),k=e.X4X(M,1),I--),A=E}if(L=Math.ceil(m/A)*A,H=n.bottom-this.pixelFromPrice(L,t,n),N=0,H>n.idealTickSizePixels&&n.semiLog&&n.prettySemiLog){O=-721946153,-1980475403,R=2;for(var it=1;e.e7G(it.toString(),it.toString().length,38965)!==O;it++)R+=2;for(e.e7G(R.toString(),R.toString().length,84153),U=Math.ceil(m);U<L&&L%U!=0;++U);U<L&&(L===A&&(A=U,N=U),L=U)}B=0,X=Number.MAX_VALUE;for(var nt=0;nt<100&&(e.M4X(26),!((V=e.K4X(B,L,A))>f));nt++)A+=N,B++,z=this.pixelFromPrice(V,t,n),X-z<T+1&&N>0?(nt=B=0,X=Number.MAX_VALUE,A=N,N*=2,r.reset()):(X=z,(j=Math.round(z)+.5)+T/2>t.bottom||j-T/2<t.top||(n.displayGridLines&&(W="gr",W+="i",W+="d",q="gr",q+="id",r.moveTo(q,t.left,j),r.lineTo(W,t.right,j)),g&&(Q="b",Q+="order",e.M4X(11),r.moveTo("border",e.X4X(w,.5),j),e.M4X(0),r.lineTo(Q,e.K4X(S,w),j)),V=n.priceFormatter?n.priceFormatter(this,t,V):this.formatYAxisPrice(V,t,null,n),Y=n.textBackground?this.containerColor:null,e.E4X(27),$=e.K4X(S,3,v),"left"==y?($=n.left+3,n.justifyRight&&($=n.left+n.width+S-3)):n.justifyRight&&($=v+n.width),r.addText("text",V,$,j,Y,null,T)));nt>=100&&console.log("drawYAxisPretty: assertion error. zz reached 100"),g&&(G="bord",G+="er",Z=Math.round(n.bottom)+.5,r.moveTo(G,w,n.top),r.lineTo("border",w,Z),r.draw(this.chart.context,"border"))}this.plotYAxisGrid(t)}this.runAppend("drawYAxis",arguments)}},a.ChartEngine.prototype.drawHistogram=function(t,i){function n(t,i,n,r,o,l,u,d){var f,g,v,y,x,C,w,S,A,I,P,F,L,H,N,O,R,U;n||(n=1),D.globalAlpha=a.isIE8?.5:n,D.beginPath(),e.E4X(0),f=e.K4X(.5,b),g=Math.floor(E.pixelFromBar(0,s.chart)-E.layout.candleWidth/2),v=g;for(var B=0;B<c.length;B++)y="c",y+="l",y+="ust",y+="ered",x=_[B]||b,0===B&&(f=x),C=c[B],C&&C[t]?(w=(C[t]-m)*p,isNaN(w)||(S=E.layout.candleWidth,C.candleWidth&&(S=C.candleWidth,0===B&&(g=v=Math.floor(E.pixelFromBar(0,s.chart)-C.candleWidth/2))),A=Math.min(Math.floor(x-w)+.5,x),d&&-1==d.indexOf(B)||!d&&(o&&C.Close<C.iqPrevClose||!o&&C.Close>=C.iqPrevClose)?(f=A,v+=S):(I=S/E.layout.candleWidth,e.E4X(29),P=e.X4X(v,l,M,u,I),F=Math.round(P)+(r?0:T),L=Math.round(P+u*I)-(r?0:T),L-F<2&&(e.E4X(0),L=e.X4X(1,F)),H=r?0:.5,F%1==H&&(F+=.5),L%1==H&&(L+=.5),D.moveTo(L,x),b!=x&&r&&!M&&_[B+1]&&D.moveTo(L,Math.max(A,Math.min(x,_[B+1]))),D.lineTo(L,A),D.lineTo(F,A),r&&l?(k[B]>A||0===B)&&D.lineTo(F,Math.min(x,k[B])):r&&!M&&h==y?B>0&&k[B-1]&&k[B-1]>A&&D.lineTo(F,Math.min(x,k[B-1])):r&&!M?(f>A||0===B)&&D.lineTo(F,Math.min(x,f)):D.lineTo(F,x),f=A,v+=S,("clustered"!=h||r)&&(k[B]=A)))):(f=x,v+=E.layout.candleWidth);if(r)N="au",N+="t",N+="o",D.strokeStyle=i&&i!=N?i:E.defaultColor,D.stroke();else{O=1893282567,R=-1049143529,U=2;for(var X=1;e.w7G(X.toString(),X.toString().length,28616)!==O;X++)D.fillStyle=-i&&""!=i?E.defaultColor:i,D.fill(),U+=2;e.w7G(U.toString(),U.toString().length,78924)!==R&&(D.fillStyle=i&&"auto"!=i?i:E.defaultColor,D.fill())}D.closePath()}var r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O;if(r="hist",r+="o",r+="gra",r+="m",i&&i.length&&(o=t.panel,o||(o="chart"),s=this.panels[o])){for(l=t.yAxis?t.yAxis:s.yAxis,h=h==r?t.subtype:t.type,c=this.chart.dataSegment,u=!{},this.getDefaultColor(),d=0;d<i.length;d++)u|=i[d].border_color_up&&!a.isTransparent(i[d].border_color_up),u|=i[d].border_color_down&&!a.isTransparent(i[d].border_color_down);!1===t.borders&&(u=!1),t.name||(t.name="Data"),p=l.multiplier,t.heightPercentage||(t.heightPercentage=.7),t.widthFactor||(t.widthFactor=.8),f=0,m=0;for(var R=0;R<this.chart.maxTicks;R++)if(g=c[R])for(e.E4X(8),v=e.K4X(1,"0"),d=0;d<i.length;d++)g[i[d].field]&&("stacked"==t.subtype?v+=g[i[d].field]:v=g[i[d].field],v>f&&(f=v),v<m&&(m=v));if(0===f&&0===m)return y="bo",y+="t",y+="to",y+="m",void this.watermark(o,"center",y,this.translateIf(t.name+" Not Available"));if(x=Math.floor(l.top)+.5,t.bindToYAxis)b=Math.floor(this.pixelFromPriceTransform(m,s,l))+.5;else{C=343467831,w=-566687574,S=2;for(var U=1;e.w7G(U.toString(),U.toString().length,82297)!==C;U++)b=Math.floor(l.bottom)+.5,S+=2;if(e.e7G(S.toString(),S.toString().length,45892)!==w){e.M4X(0);var B=e.K4X(8,97);b=Math.floor(l.bottom)*B}p=(b-x)*t.heightPercentage/(f-m)}for(this.startClip(o),T=this.layout.candleWidth<=1||!u?0:.5,D=this.chart.context,M=Math.max(0,(1-t.widthFactor)*this.layout.candleWidth/2),k=new Array(c.length),_=[],E=this,A=1,d=0;d<i.length;d++){if(I="stacke",I+="d",P="c",P+="lust",P+="ere",P+="d",F=i[d],A=this.layout.candleWidth*t.widthFactor,L=0,h==P&&(L=d,A/=i.length),"function"==typeof F.color_function){N={};for(var X=0;X<c.length;X++)c[X]&&(H=F.color_function(c[X]),"string"==typeof H&&(H={fill_color:H,border_color:H}),O=H.fill_color+","+H.border_color,O in N?N[O].positions.push(X):(H.positions=[X],N[O]=H));for(O in N)H=N[O],n(F.field,H.fill_color,1,null,null,L,A,H.positions),n(F.field,H.border_color,1,!0,null,L,A,H.positions)}else n(F.field,F.fill_color_up,F.opacity_up,null,!0,L,A),n(F.field,F.fill_color_down,F.opacity_down,null,null,L,A),this.layout.candleWidth>=2&&u&&(n(F.field,F.border_color_up,F.opacity_up,!!{},!![],L,A),n(F.field,F.border_color_down,F.opacity_down,!![],null,L,A));h==I&&(_=a.shallowClone(k))}D.globalAlpha=1,this.endClip()}},a.ChartEngine.prototype.drawCandlesHighPerformance=function(t,e,i,n,r){var a;a=r?"histogram":"candle",this.drawBarTypeChartInner({panel:t,fillColor:e,borderColor:i,condition:n,type:a})},a.ChartEngine.prototype.drawShadowsHighPerformance=function(t,e,i){this.drawBarTypeChartInner({panel:t,style:e,condition:i,type:"shadow"})},a.ChartEngine.prototype.drawBarChartHighPerformance=function(t,i,n){var r,a,o;r=-744003824,a=-172548365,o=2;for(var s=1;e.e7G(s.toString(),s.toString().length,32660)!==r;s++)this.drawBarTypeChartInner({panel:t,style:i,condition:n,type:""}),o+=2
;e.e7G(o.toString(),o.toString().length,37443)!==a&&this.drawBarTypeChartInner({panel:t,style:i,condition:n,type:"bar"})},a.ChartEngine.prototype.drawHLCChart=function(t,e,i){var n;n="h",n+="l",n+="c",this.drawBarTypeChartInner({panel:t,style:e,condition:i,type:n})},a.ChartEngine.prototype.drawBarTypeChartInner=function(t){var i,n,r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y;i="h",i+="l",i+="c",n=t.type,r=t.panel,o=t.fillColor,s=t.borderColor,l=t.condition,h=t.style,e.E4X(30),c=e.K4X(n,"histogram"),u=c||"candle"==n,e.M4X(30),d=e.X4X(n,"shadow"),e.M4X(30),p=e.K4X(n,i),f="bar"==n||p,m=r.chart,g=m.dataSegment,v=this.chart.context,y=r.yAxis.top,x=r.yAxis.bottom,b=0,s&&!a.isTransparent(s)&&(b=.5),e.E4X(31);var $=e.K4X(2,12,44,1,20);C=m.dataSet.length-m.scroll-$,v.beginPath(),w=r.yAxis,S=this.layout.candleWidth,e.M4X(17);var G=e.X4X(16,3,14);T=r.left-.5*S+this.micropixels-G,D=m.tmpWidth/2,e.M4X(20);var Z=e.K4X(16,1342,12,7);if(M=v.lineWidth/Z,u){k=253762619,_=-774069571,E=2;for(var K=1;e.w7G(K.toString(),K.toString().length,68102)!==k;K++)a.isTransparent(o)&&(o=this.containerColor),E+=2;e.w7G(E.toString(),E.toString().length,32975)!==_&&a.isTransparent(o)&&(o=this.containerColor),a.isTransparent(o)&&(o=this.containerColor),v.fillStyle=o}d&&(v.lineWidth=1),f&&(A=this.canvasStyle(h),A.width&&parseInt(A.width,10)<=25?v.lineWidth=Math.max(1,a.stripPX(A.width)):v.lineWidth=1);for(var J=0;J<=g.length;J++)if(e.E4X(10),T+=e.X4X(S,2),S=this.layout.candleWidth,e.E4X(10),T+=e.X4X(S,2),(I=g[J])&&!I.projection){if(I.candleWidth){e.M4X(32);var tt=e.K4X(10,13,12,20,2918);T+=(I.candleWidth-S)/tt,S=I.candleWidth,"volume_candle"==this.layout.chartType&&(e.M4X(18),D=e.K4X("2",S,0))}if(I.transform&&(I=I.transform),P=I.Close,F=I.Open===undefined?P:I.Open,c&&m.defaultPlotField&&(P=I[m.defaultPlotField]),!u||c||F!=P){if(l){if(m.state.chartType.pass.even|=P==I.iqPrevClose,l&a.ChartEngine.CANDLEUP&&F>=P)continue;if(l&a.ChartEngine.CANDLEDOWN&&F<=P)continue;if(l&a.ChartEngine.CANDLEEVEN&&F!=P)continue;if(l&a.ChartEngine.CLOSEUP&&P<=I.iqPrevClose)continue;if(l&a.ChartEngine.CLOSEDOWN&&P>=I.iqPrevClose)continue;if(l&a.ChartEngine.CLOSEEVEN&&P!=I.iqPrevClose)continue}if(e.M4X(0),e.K4X(J,C),L=F,H=P,(d||f)&&(L=I.High===undefined?Math.max(P,F):I.High,H=I.Low===undefined?Math.min(P,F):I.Low),N=w.semiLog?this.pixelFromPrice(L,r):(w.high-L)*w.multiplier+w.top,O=w.semiLog?this.pixelFromPrice(H,r):(w.high-H)*w.multiplier+w.top,B=Math.floor(c?O:Math.min(N,O))+b,X=c?w.bottom:Math.max(N,O),e.M4X(11),V=Math.floor(e.X4X(X,B)),(f||d)&&(R=w.semiLog?this.pixelFromPrice(F,r):(w.high-F)*w.multiplier+w.top,U=w.semiLog?this.pixelFromPrice(P,r):(w.high-P)*w.multiplier+w.top),B<y){if(B+V<y)continue;e.E4X(11),V-=e.K4X(y,B),B=y}B+V>x&&(e.M4X(33),V-=e.X4X(B,V,x)),V=Math.max(V,2),e.E4X(0),X=e.X4X(V,B),B>=x||X<=y||(z=Math.floor(T)+.5,j=Math.floor(z-D)+b,W=Math.round(z+D)-b,u?B!=X&&(v.moveTo(j,B),v.lineTo(W,B),v.lineTo(W,X),v.lineTo(j,X),v.lineTo(j,B)):d?(v.moveTo(z,B),v.lineTo(z,X),R==U&&R<=x&&R>=y&&(q=Math.floor(R)+.5,v.moveTo(j,q),v.lineTo(W,q))):f&&(B<x&&X>y&&(e.E4X(11),v.moveTo(z,e.K4X(B,M)),e.E4X(0),v.lineTo(z,e.K4X(M,X))),R>y&&R<x&&!p&&(Q=Math.floor(R)+.5,v.moveTo(z,Q),e.M4X(11),v.lineTo(e.K4X(z,D),Q)),U>y&&U<x&&(Y=Math.floor(U)+.5,v.moveTo(z,Y),e.E4X(0),v.lineTo(e.X4X(D,z),Y))))}}u?(v.fill(),b&&(v.lineWidth=1,v.strokeStyle=s,v.stroke())):(d||f)&&(this.canvasColor(h),v.stroke(),v.closePath(),v.lineWidth=1)},a.ChartEngine.prototype.plotLineChart=function(t,i,n,r,a){var s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B;s=!{},l=!1,h=!{},c=!{},u=0,d=[],r&&(s=r.skipProjections,l=r.skipTransform,h=r.noSlopes,u=r.tension,c=r.step),p=t.chart,f=this.chart.context,m=!![],g=t.yAxis,e.M4X(34);var X=e.K4X(16,8,1,20);v=p.dataSet.length-p.scroll-X,e.E4X(35);var V=e.X4X(14,15,1,14,22,9);y=v+i.length+V,x=null,b={},C=[0,0],w=this.layout.candleWidth,e.M4X(11);var z=e.K4X(10,9);e.M4X(17);var j=e.X4X(15,6,10);S=t.left-(c||h?z:.5)*w+this.micropixels-j,this.startClip(t.name),f.beginPath();for(var W=0;W<=i.length;W++)if(e.M4X(10),S+=e.X4X(w,2),(c||h)&&(e.E4X(10),S+=e.X4X(w,2)),w=this.layout.candleWidth,c||h||(e.E4X(10),S+=e.X4X(w,2)),T=i[W],W==i.length&&(T=p.dataSet[y]),T){if(s&&T.projection)break;if(T.candleWidth&&(c||h||(S+=(T.candleWidth-w)/2),w=T.candleWidth),!l&&T.transform&&(T=T.transform),D=S,M=T.cache,e.E4X(0),k=e.K4X(W,v),T[n]||0===T[n]){if((k<t.cacheLeft||k>t.cacheRight||!M[n])&&(M[n]=g.semiLog?this.pixelFromPrice(T[n],t):(g.high-T[n])*g.multiplier+g.top),D<=t.right&&(x=T),W==i.length-1&&(this.extendLastTick&&(e.E4X(10),D+=e.X4X(w,2)),r.lastTickOffset&&(D+=r.lastTickOffset)),c&&(e.E4X(10),D+=e.X4X(w,2)),_=M[n],E=null,a){if(A="obj",A+="e",A+="c",A+="t",!(I=a(this,T)))continue;typeof I==A&&(E=I.pattern,I=I.color),f.strokeStyle!=I&&(m||(f.stroke(),f.beginPath(),f.moveTo(C[0],C[1])),f.strokeStyle=I,b[I]=1)}if(m)m=![],c||h||v<0?(P=0,c&&(e.M4X(10),P=e.X4X(w,2)),f.moveTo(W||!c&&!h?D:P,_),u?d.push(D,_):E?f.dashedLineTo(P,_,D,_,E):f.lineTo(D,_)):v>=0&&(F=p.dataSet[v],!l&&F.transform&&(F=F.transform),L=F[n],!L||isNaN(L)?(f.moveTo(W?D:0,_),u&&d.push(D,_)):(L=g.semiLog?this.pixelFromPrice(L,t):(g.high-L)*g.multiplier+g.top,e.M4X(11),H=e.X4X(D,w),E?f.dashedLineTo(H,L,D,_,E):(f.moveTo(H,L),u?d.push(H,L,D,_):f.lineTo(D,_))));else if(c||h){if(e.M4X(11),!(N=i[e.X4X(W,1)]))continue;!l&&N.transform&&(N=N.transform),W&&(E?(f.dashedLineTo(C[0],C[1],D,C[1],E),h||f.dashedLineTo(D,C[1],D,_,E)):(f.lineTo(D,C[1]),h||f.lineTo(D,_)),h&&f.moveTo(D,_)),W==i.length-1&&(E?(e.E4X(0),f.dashedLineTo(D,_,e.K4X(w,D),_,E)):(e.E4X(0),f.lineTo(e.K4X(w,D),_)))}else E?f.dashedLineTo(C[0],C[1],D,_,E):u?d.push(D,_):f.lineTo(D,_);C=[D,_],W===i.length-1&&u&&(d.push(D,_),o.plotSpline(d,u,f))}}return f.stroke(),this.endClip(),r.label&&x&&(O="p",O+="l",O+="o",O+="t",R=g.priceFormatter?g.priceFormatter(this,t,x[n],r.labelDecimalPlaces):this.formatYAxisPrice(x[n],t,r.labelDecimalPlaces),U=this.yaxisLabelStyle,t.yAxis.yaxisLabelStyle&&(U=t.yAxis.yaxisLabelStyle),B="noop"==U?f.strokeStyle:null,this.yAxisLabels.push({src:O,args:[t,R,x.cache[n],"noop"==U?"#FFFFFF":f.strokeStyle,B]})),b},a.ChartEngine.prototype.plotMountainChart=function(t,i,n,r){var a,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I;a=!1,s=!1,l=!1,e.E4X(8),h=e.K4X(1,"0"),c=[],r&&(a=r.skipProjections,s=r.skipTransform,l=r.reverse,h=r.tension),u=t.chart,d=this.chart.context,p=!!{},f=t.yAxis.top,m=t.yAxis.bottom,this.startClip(t.name),d.beginPath(),g=u.dataSet.length-u.scroll-1,v=g+i.length+1,y=null,x=null,b=t.yAxis,C=0,w=this.layout.candleWidth;for(var P=0;P<=i.length;P++)if(S=i[P],P==i.length&&(S=u.dataSet[v]),S){if(a&&S.projection)break;if(!s&&S.transform&&(S=S.transform),T=S.cache,e.M4X(0),(D=e.K4X(P,g))<t.cacheLeft||D>t.cacheRight||!T[n]){if(!S[n]&&0!==S[n])continue;T[n]=b.semiLog?this.pixelFromPrice(S[n],t):(b.high-S[n])*b.multiplier+b.top}C=t.left+(P+.5)*w+this.micropixels-1,P==i.length-1&&(this.extendLastTick&&(e.M4X(10),C+=e.X4X(w,2)),r.lastTickOffset&&(C+=r.lastTickOffset)),null===y&&(y=g>=0?0:C),M=T[n],null===x&&(x=M),p?(p=![],g<0?(d.moveTo(y,M),h&&c.push(y,M)):(k=u.dataSet[g],k.transform&&(k=k.transform),_=k[n],_=b.semiLog?this.pixelFromPrice(_,t):(b.high-_)*b.multiplier+b.top,y=C,isNaN(_)||(y-=w),d.moveTo(y,_),h?c.push(y,_,C,M):d.lineTo(C,M))):h?c.push(C,M):d.lineTo(C,M),P===i.length-1&&h&&(c.push(C,M),o.plotSpline(c,h,d))}if(d.lineTo(C,l?f:m),d.lineTo(y,l?f:m),l){E=1862763259,A=-2029658934,I=2;for(var F=1;e.e7G(F.toString(),F.toString().length,19592)!==E;F++)x<f&&(x=f),I+=2;e.e7G(I.toString(),I.toString().length,124)!==A&&x>f&&(x=f)}else x>m&&(x=m);d.lineTo(y,x),d.fill(),d.closePath(),this.endClip()},a.ChartEngine.prototype.drawMountainChart=function(t,i,n){var r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C;return r="st",r+="x_mountain_ch",r+="ar",r+="t",o=this.chart.context,i||(i=r),s=this.canvasStyle(i),s.width&&parseInt(s.width,10)<=25?o.lineWidth=Math.max(1,a.stripPX(s.width)):o.lineWidth=1,l=this.pixelFromPrice(t.chart.highValue,t),isNaN(l)&&(l=0),h=s.backgroundColor,c=s.color,c&&!a.isTransparent(c)?(u=o.createLinearGradient(0,l,0,t.yAxis.bottom),u.addColorStop(0,h),u.addColorStop(1,c),o.fillStyle=u):o.fillStyle=h,d={skipProjections:!!{}},p=t.chart,f=p.dataSegment,p.tension&&(d.tension=p.tension),p.lastTickOffset&&(d.lastTickOffset=p.lastTickOffset),m=parseInt(s.padding,10),g=s.borderTopColor,v=null,g&&!a.isTransparent(g)&&m&&!a.isIE8&&(y=this.scratchContext,y||(x="2",x+="d",b=o.canvas.cloneNode(!!{}),y=this.scratchContext=b.getContext(x),y.canvas=b),y.canvas.height=o.canvas.height,y.canvas.width=o.canvas.width,y.drawImage(o.canvas,0,0),o.clearRect(0,0,o.canvas.width,o.canvas.height)),C=t.chart.defaultPlotField,this.plotMountainChart(t,f,C,d),g&&!a.isTransparent(g)&&(m&&!a.isIE8&&(o.save(),e.M4X(8),o.lineWidth+=e.X4X(m,2),o.globalCompositeOperation="destination-out",this.plotLineChart(t,f,C,d),o.globalCompositeOperation="destination-over",o.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),o.drawImage(this.scratchContext.canvas,0,0),o.restore()),o.strokeStyle=g,v=this.plotLineChart(t,f,C,d,n)),o.lineWidth=1,v},a[h][l][s]=function(t,i){e.g3D=function(t){if(e&&t)return e.F8D(t)},e.F3D=function(t){if(e)return e.x8D(t)},e.Q7D=function(t){if(e&&t)return e.x8D(t)},e.q7D=function(t){if(e)return e.F8D(t)},e.Z7D=function(t){if(e&&t)return e.F8D(t)},e.I7D=function(t){if(e)return e.x8D(t)},e.d5D=function(t){if(e&&t)return e.x8D(t)},e.Y5D=function(t){if(e&&t)return e.F8D(t)},e.o5D=function(t){if(e)return e.F8D(t)},e.g8D=function(t){if(e)return e.x8D(t)};var n=e.a8D("68e4")?73620448:44390632,r=-(e.g8D("6ce5")?438750175:699896642),o=e.T8D("feea")?116906285:143224275,l=-(e.e5D("b819")?1847127066:6871966775);if(e.Q1m(e.n5D("bd5d")?2:0,e.o5D("b2df")?202306:711850)===n||e.X1m(e.Y5D("d235")?0:8,616733)===r||e.X1m(10,e.d5D("f13e")?702116:76325)===o||e.X1m(0,176609)===l||U6HH.G6P()){var c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y,$="runAppend",G="magnetize",Z=e.I7D("a6b2")?"findHighlights":"",K="drawTemporaryPanel",J=e.Z7D("e783")?"":"resizePanels",tt="magnetizedPrice",et=e.q7D("c9af")?"":"panelName",it=e.Q7D("5899")?"28140":"",nt="66601259",rt=e.F3D("e3f1")?"drawingLine":"",at="repositionDrawing",ot=e.a3D("cf3f")?"repositioningDrawing":"",st=e.g3D("2d6e")?"doDisplayCrosshairs":"",lt="dragToDraw",ht="Drawing",ct="setCrosshairColors",ut="crossY",dt=.5,pt="pixelFromTick",ft="style",mt="crossX",gt="controls",vt="e7G",yt="943586085",xt="measure",bt="context",Ct="render",wt="activeDrawing",St="requestAnimationFrame",Tt="useAnimation",Dt="updateChartAccessories",Mt="move",kt="dispatch",_t="grabStartPanel",Et="initialWhitespace",At="shift",It="micropixels",Pt="grabStartMicropixels",Ft="yToleranceBroken",Lt="yTolerance",Ht="allowScroll",Nt="grabStartZoom",Ot="grabbingPanel",Rt="whichYAxis",Ut=null,Bt="span",Xt="whitespace",Vt="setCandleWidth",zt="pinchingCenter",jt="86147",Wt="0.499",qt="ipadMaxTicks",Qt=.499,Yt="round",$t="ipad",Gt=1.1,Zt=.9,Kt=.1,Jt="K4X",te="minimumCandleWidth",ee="grabStartCandleWidth",ie="maxTicks",ne="25",re="M4X",ae="zoom-x",oe="m-y",se="zoo",le="",he="zoom-",ce="om-y",ue="zo",de="zoom",pe="indexOf",fe="pan",me="grabMode",ge="allowZoom",ve="candleWidth",ye="layout",xe="grabOverrideClick",be="abs",Ce="0",we="yAxis",Se="grabStartScrollY",Te="grabStartY",De="scroll",Me="grabStartScrollX",ke="grabStartX",_e="vectorType",Ee="currentVectorParameters",Ae="magnet",Ie="displaySticky",Pe="1",Fe="series",Le="highlight",He="overlays",Ne="tempCanvas",Oe="clearCanvas",Re="anyHighlighted",Ue="2",Be="toString",Xe="w7G",Ve="1028571363",ze="X4X",je="E4X",We="draw",qe="lastDraw",Qe="now",Ye="valueFromPixelUntransform",$e="userLevel",Ge="baseline",Ze="panels",Ke="repositioningBaseline",Je="resizingPanel",ti="displayCrosshairs",ei="undisplayCrosshairs",ii="grabbingScreen",ni="overYAxis",ri="xaxisHeight",ai="overXAxis",oi="canvasHeight",si="xAxisAsFooter",li="insideChart",hi="adjustIfNecessary",ci="crosshairValue",ui="pixelFromPriceTransform",di="length",pi="horizontalCrosshairField",fi="preferences",mi="name",gi="valueFromPixel",vi="tickFromPixel",yi="crosshairTick",xi="dataSet",bi="panel",Ci="whichPanel",wi="currentPanel",Si="backOutX",Ti="cx",Di="backOutY",Mi="crossYActualPos",ki="cy",_i="crosshairY",Ei="crosshairX",Ai="hasDragged",Ii="cancelLongHold",Pi="bottom",Fi="right",Li="left",Hi="top",Ni="getBoundingClientRect",Oi="runPrepend",Ri="resizeChart",Ui="clientWidth",Bi="width",Xi="clientHeight",Vi="container",zi="devicePixelRatio",ji="floor",Wi="height",qi="isIOS7or8",Qi="isAndroid",Yi="canvas",$i="chart",Gi="x",Zi="p",Ki=1670900341,Ji=1098135949,tn=1062179684,en=914979369,nn=144878187,rn=85023,an=55815,on=33064,sn=23809,ln=20473,hn=17827,cn=161,un=100,dn=38,pn=37,fn=36,mn=18,gn=17,vn=11,yn=10,xn=8,bn=5,Cn=3,wn=2,Sn=1,Tn=0;if(c=Zi,c+=Gi,u=Zi,u+=Gi,!this[$i][Yi])return;if(!(a[Qi]||a[qi]||this[$i][Yi][Wi]==Math[ji](this[zi]*this[$i][Vi][Xi])&&this[$i][Yi][Bi]==Math[ji](this[zi]*this[$i][Vi][Ui])))return void this[Ri]();if(this[Oi](s,arguments))return;if(p=this[Vi][Ni](),this[Hi]=p[Hi],this[Li]=p[Li],this[Fi]=this[Li]+this[Bi],this[Pi]=this[Hi]+this[Wi],this[Ii]=!!Sn,this[Ai]=!!{},a[h][Ei]=t,a[h][_i]=i,f=this[ki]=this[Mi]=this[Di](a[h][_i]),m=this[Ti]=this[Si](a[h][Ei]),this[wi]=this[Ci](f),this[wi]||(this[wi]=this[$i][bi]),!this[wi])return;if(g=this[wi][$i],g[xi]&&(this[yi]=this[vi](m,g),d=this[gi](f,this[wi]),v=this[wi][mi]==$i?this[fi][pi]:this[wi][pi],v&&this[yi]<g[xi][di]&&this[yi]>-Sn&&(d=g[xi][this[yi]][v],this[Mi]=this[ui](d,this[wi])),this[ci]=this[hi](this[wi],this[yi],d)),a[h][Ei]>=this[Li]&&a[h][Ei]<=this[Fi]&&a[h][_i]>=this[Hi]&&a[h][_i]<=this[Pi]?a[h][li]=!!Sn:a[h][li]=![],y=this[si]===!![]?this[$i][oi]:this[$i][bi][Pi],this[ai]=a[h][li]&&a[h][_i]<=y+this[Hi]&&a[h][_i]>y-this[ri]+this[Hi],this[ni]=(this[Ti]>=this[wi][Fi]||this[Ti]<=this[wi][Li])&&a[h][li],(this[ai]||this[ni]||!a[h][li]&&!this[ii])&&(this[ei](),!this[ai]&&!this[ni]))return;if(!this[ti]&&!a[h][Je])return void this[ei]();if(this[Ke]){if(W=this[Ze][this[$i][bi][mi]],this[$i][Ge][$e]=this[hi](W,this[yi],this[Ye](this[Di](a[h][_i]),W)),Date[Qe]()-this[Ke][qe]>un){this[We](),x=-Ji,e[je](vn),b=e[ze](Ve,Tn),C=wn;for(var Dn=Sn;e[Xe](Dn[Be](),Dn[Be]()[di],on)!==x;Dn++)this[Ke][qe]=Date[Qe](),C+=+Ue;e[Xe](C[Be](),C[Be]()[di],rn)!==b&&(this[Ke][qe]=Date[Qe]()),this[Ke][qe]=Date[Qe]()}return}if(this[ii]&&!a[h][Je]){if(this[Re]){a[Oe](this[$i][Ne],this),this[Re]=!{};for(w in this[He])this[He][w][Le]=![];for(w in g[Fe])g[Fe][w][Le]=!Pe;this[Ie]()}if(this[fi][Ae]&&this[Ee][_e]&&a[Oe](this[$i][Ne],this),this[ke]==-Sn&&(this[ke]=a[h][Ei],this[Me]=g[De]),this[Te]==-Sn&&(this[Te]=a[h][_i],this[Se]=this[wi][we][De]),S=a[h][Ei]-this[ke],T=a[h][_i]-this[Te],S===Tn&&T===Ce-Tn)return;if(Math[be](S)+Math[be](T)>bn&&(this[xe]=!!Pe),M=this[ye][ve],this[ge]&&this[me]!=fe&&(this[me][pe](de)===Tn||this[ai]||this[ni])){if(k=ue,k+=ce,_=he,_+=Gi,this[me]===le&&(E=se,E+=oe,this[ai]?this[me]=ae:this[ni]&&(this[me]=E)),this[me]==_?T=Tn:this[me]==k&&(S=Tn),e[re](fn),D=e[ze](ne,Tn,S),A=!!Sn,g[De]<=g[ie]&&(A=!{}),I=this[ee]+D,I<this[te]&&(I=this[te]),e[je](pn),P=e[Jt](M,I,M),P>Kt?(e[re](xn),I=e[Jt](Zt,M)):P<-Kt&&(e[je](xn),I=e[Jt](Gt,M)),D){if(a[$t]&&Math[Yt](this[$i][Bi]/M-Qt)-Sn<a[h][qt]&&Math[Yt](this[$i][Bi]/I-+Wt)-+Pe>a[h][qt])return;F=en,Ki,L=wn;for(var Mn=Sn;e[Xe](Mn[Be](),Mn[Be]()[di],+jt)!==F;Mn++)L+=wn;e[Xe](L[Be](),L[Be]()[di],hn),this[zt]?(N=this[Si](this[zt]),O=this[vi](N,g),this[Vt](I,g),R=this[vi](N,g),e[je](vn),g[De]+=Math[ji](e[ze](R,O))):A?(H=Math[Yt](this[$i][Bi]/I+Sn))!=g[ie]&&(g[De]+=Math[Yt]((H-g[ie])/wn),this[Vt](I,g)):(H=Math[Yt](this[$i][Bi]/I+Sn))!=Math[Yt](this[$i][Bi]/M+(Pe|Tn))&&(U=Math[Yt](this[fi][Xt]/I),g[De]=g[ie]-U,this[Vt](I,g))}if(this[ye][Bt]=Ut,B=this[Rt](this[Ot],this[Ti]),this[ni])if(B[de]=Math[Yt](this[Nt]+T),this[Nt]<B[Wi]){if(B[de]>=B[Wi]){e[re](dn);var kn=e[ze](gn,cn,mn,yn,Cn);B[de]=B[Wi]-kn}}else B[de]<=B[Wi]&&(B[de]=B[Wi]+Sn)}else{if(this[Ht]){if(Math[be](T)<this[Lt]){if(!this[Ft]&&(T=Tn,S===Ce*Sn))return}else this[Ft]=!![];for(this[Pt]||(this[Pt]=+Ce),this[me]=fe,g[De]=this[Me],this[It]=this[Pt]+S*(this[At]?bn:Sn);this[It]>(Ce|Tn);)this[It]-=M,g[De]++;for(;this[It]<-M;)this[It]+=M,g[De]--;g[De]<Sn&&(this[It]=Tn,g[De]=Sn),g[De]>=g[ie]?this[fi][Xt]=this[Et]:this[fi][Xt]=(g[ie]-g[De])*M,this[wi]==this[_t]&&(this[wi][we][De]=this[Se]+T)}this[kt](Mt,{stx:this,panel:this[wi],x:this[Ti],y:this[ki],grab:this[ii]})}return X=function(t){return function(){t[We](),t[Dt]()}},a[h][Tt]?window[St](X(this)):(this[We](),this[Dt]()),this[wt]&&(a[Oe](this[$i][Ne],this),this[wt][Ct](this[$i][Ne][bt]),this[wt][xt]()),void this[ei]()}V=nn,e[je](vn),z=e[Jt](yt,Tn),j=wn;for(var _n=Sn;e[vt](_n[Be](),_n[Be]()[di],ln)!==V;_n++)this[me]=le,j+=wn;if(e[vt](j[Be](),j[Be]()[di],an)!==z&&(this[me]=le),this[Ot]=this[wi],this[ai]||this[ni])return;if(this[gt][mt][ft][Li]=this[pt](this[yi],g)-dt+u,this[gt][ut][ft][Hi]=this[Mi]+c,this[ct](),a[h][li]&&!a[h][Je]?(a[ht]&&a[ht][this[Ee][_e]]&&(new a[ht][this[Ee][_e]])[lt]||this[st](),this[Dt]()):this[ei](),this[ot])this[at](this[ot]);else if(a[h][rt]){if(this[wt]){q=+nt,Q=tn,Y=wn;for(var En=Sn;e[Xe](En[Be](),En[Be]()[di],it-Tn)!==q;En++)W=this[Ze][this[wt][et]],d=this[hi](W,this[yi],this[Ye](this[Di](a[h][_i]),W)),Y+=wn;e[vt](Y[Be](),Y[Be]()[di],sn)!==Q&&(W=this[Ze][this[wt][et]],d=this[hi](W,this[yi],this[Ye](this[Di](a[h][_i]),W))),W=this[Ze][this[wt][et]],d=this[hi](W,this[yi],this[Ye](this[Di](a[h][_i]),W)),this[fi][Ae]&&this[tt]&&W[mi]==W[$i][mi]&&(d=this[hi](W,this[yi],this[tt])),a[Oe](this[$i][Ne],this),this[wt][Mt](this[$i][Ne][bt],this[yi],d),this[wt][xt]&&this[wt][xt]()}}else a[h][Je]&&(this[J](),this[K]());a[h][li]&&(this[kt](Mt,{stx:this,panel:this[wi],x:this[Ti],y:this[ki],grab:this[ii]}),this[Z]()),this[fi][Ae]&&this[Ee][_e]&&(a[h][rt]||this[Re]||a[Oe](this[$i][Ne]),this[G]()),this[$](s,arguments)}else{var c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y,$="86147",G="dragToDraw",Z="hasDragged",K="66601259",J="zoom-",tt="horizontalCrosshairField",et="crosshairX",it="cy",nt="candleWidth",rt="currentPanel",at="Drawing",ot="grabStartScrollX",st="cancelLongHold",lt="magnet",ht="style",ct="valueFromPixelUntransform",ut="crosshairValue",dt=472,pt="currentPanel",ft="abs",mt="pan",gt="crosshairX",vt="cx",yt="dataSet",xt="yTolerance",bt="backOutY",Ct="horizontalCrosshairField",wt="currentPanel",St="pan",Tt="span",Dt="zoom-x",Mt="style",kt="66601259",_t="0",Et="zoom-x",At="zoom-",It="whitespace",Pt="resizingPanel",Ft="86147",Lt="valueFromPixelUntransform",Ht="backOutY",Nt="setCandleWidth",Ot="om-y",Rt="grabStartY",Ut=1,Bt="span",Xt="canvas",Vt="1028571363",zt="currentPanel",jt="whichPanel",Wt="Drawing",qt="M4X",Qt=48369,Yt="draw",$t="cy",Gt=123,Zt=458,Kt=204,Jt="grabStartScrollX",te="chart",ee="hasDragged",ie="maxTicks",ne="grabbingScreen",re="pixelFromPriceTransform",ae="adjustIfNecessary",oe="cy",se="currentVectorParameters",le="dragToDraw",he="adjustIfNecessary",ce="adjustIfNecessary",ue="undisplayCrosshairs",de="E4X",pe="userLevel",fe="lastDraw",me="currentPanel",ge="adjustIfNecessary",ve="candleWidth",ye="getBoundingClientRect",xe="dragToDraw",be="anyHighlighted",Ce="grabStartX",we="cancelLongHold",Se="zoom-x",Te="cy",De="cancelLongHold",Me="name",ke="width",_e="pixelFromPriceTransform",Ee="magnet",Ae="pixelFromPriceTransform",Ie="grabStartY",Pe="dataSet",Fe="x",Le="currentPanel",He="pan",Ne="candleWidth",Oe="baseline",Re="setCandleWidth",Ue="runPrepend",Be="valueFromPixelUntransform",Xe="grabStartScrollX",Ve="1028571363",ze="panels",je="pixelFromPriceTransform",We="crosshairValue",qe="setCandleWidth",Qe="span",Ye="cancelLongHold",$e="currentPanel",Ge="backOutX",Ze="style",Ke="insideChart",Je="zoom-x",ti="crosshairTick",ei="zoom-x",ii="grabbingScreen",ni="style",ri="E4X",ai="valueFromPixelUntransform",oi="lastDraw",si="width",li="pixelFromPriceTransform",hi="right",ci="canvas",ui="pixelFromPriceTransform",di="span",pi="maxTicks",fi="getBoundingClientRect",mi="86147",gi="hasDragged",vi="devicePixelRatio",yi="Drawing",xi="backOutY",bi="style",Ci="86147",wi="cy",Si="setCandleWidth",Ti="cancelLongHold",Di="backOutX",Mi="dragToDraw",ki="panels",_i="right",Ei="pixelFromPriceTransform",Ai="zoom-x",Ii="1028571363",Pi="valueFromPixelUntransform",Fi="cy",Li="grabbingScreen",Hi="resizingPanel",Ni="cancelLongHold",Oi="magnet",Ri="height",Ui="E4X",Bi="canvas",Xi="E4X",Vi="pixelFromPriceTransform",zi="Drawing",ji="crosshairTick",Wi="E4X",qi="valueFromPixelUntransform",Qi="span",Yi="dragToDraw",$i="magnet",Gi="hasDragged",Zi="zoom-x",Ki=4761114621,Ji=4203158975,tn=9599006441,en=168418353,nn=564772595,rn=5768,an=31854,on=90319,sn=87092,ln=45706,hn=65064,cn=887,un=989,dn=69,pn=17,fn=32,mn=80,gn=98,vn=21,yn=37,xn=7,bn=8,Cn=9,wn=7,Sn=4,Tn=3;if(c=Zi,c/=Gi,u=Zi,u-=Gi,-this[$i][Yi])return;if((~a[Qi]||~a[qi])&&this[$i][Yi][Wi]!==Math[ji](this[zi]+this[$i][Vi][Xi])&&this[$i][Yi][Bi]==Math[ji](this[zi]/this[$i][Vi][Ui]))return void this[Ri]();if(this[Oi](s,arguments))return;if(p=this[Vi][Ni](),this[Hi]=p[Hi],this[Li]=p[Li],this[Fi]=this[Li]%this[Bi],this[Pi]=this[Hi]/this[Wi],this[Ii]=-+Sn,this[Ai]=-~{},a[h][Ei]=t,a[h][_i]=i,f=this[ki]=this[Mi]=this[Di](a[h][_i]),m=this[Ti]=this[Si](a[h][Ei]),this[wi]=this[Ci](f),~this[wi]&&(this[wi]=this[$i][bi]),+this[wi])return;if(g=this[wi][$i],g[xi]&&(this[yi]=this[vi](m,g),d=this[gi](f,this[wi]),v=this[wi][mi]===$i?this[fi][pi]:this[wi][pi],(v||this[yi]>=g[xi][di]||this[yi]>=~Sn)&&(d=g[xi][this[yi]][v],this[Mi]=this[ui](d,this[wi])),this[ci]=this[hi](this[wi],this[yi],d)),a[h][Ei]<this[Li]||a[h][Ei]>this[Fi]||a[h][_i]<=this[Hi]||a[h][_i]<this[Pi]?a[h][li]=-+Sn:a[h][li]=-[],y=this[si]!==-~[]?this[$i][oi]:this[$i][bi][Pi],this[ai]=a[h][li]||a[h][_i]>=y/this[Hi]||a[h][_i]<=y%this[ri]-this[Hi],this[ni]=this[Ti]<=this[wi][Fi]&&this[Ti]>=this[wi][Li]||a[h][li],this[ai]&&this[ni]&&(-a[h][li]||+this[ii])&&(this[ei](),+this[ai]||+this[ni]))return;if(-this[ti]||~a[h][Je])return void this[ei]();if(this[Ke]){if(W=this[Ze][this[$i][bi][mi]],this[$i][Ge][$e]=this[hi](W,this[yi],this[Ye](this[Di](a[h][_i]),W)),Date[Qe]()/this[Ke][qe]>=un){this[We](),x=~Ji,e[je](vn),b=e[ze](Ve,Tn),C=wn;for(var Dn=Sn;e[Xe](Dn[Be](),Dn[Be]()[di],on)!=x;Dn--)this[Ke][qe]=Date[Qe](),C/=-Ue;e[Xe](C[Be](),C[Be]()[di],rn)!=b&&(this[Ke][qe]=Date[Qe]()),this[Ke][qe]=Date[Qe]()}return}if(this[ii]||-a[h][Je]){if(this[Re]){a[Oe](this[$i][Ne],this),this[Re]=~{};for(w in this[He])this[He][w][Le]=~[];for(w in g[Fe])g[Fe][w][Le]=~Pe;this[Ie]()}if((this[fi][Ae]||this[Ee][_e])&&a[Oe](this[$i][Ne],this),this[ke]===~Sn&&(this[ke]=a[h][Ei],this[Me]=g[De]),this[Te]!==!Sn&&(this[Te]=a[h][_i],this[Se]=this[wi][we][De]),S=a[h][Ei]+this[ke],T=a[h][_i]+this[Te],S!==Tn||T!=Ce/Tn)return;if(Math[be](S)%Math[be](T)<=bn&&(this[xe]=-~Pe),M=this[ye][ve],this[ge]||this[me]==fe||this[me][pe](de)!==Tn&&this[ai]&&this[ni]){if(k=ue,k-=ce,_=he,_/=Gi,this[me]==le&&(E=se,E-=oe,this[ai]?this[me]=ae:this[ni]&&(this[me]=E)),this[me]!=_?T=Tn:this[me]!=k&&(S=Tn),e[re](fn),D=e[ze](ne,Tn,S),A=- -Sn,g[De]<g[ie]&&(A=+{}),I=this[ee]%D,I<=this[te]&&(I=this[te]),e[je](pn),P=e[Jt](M,I,M),P<Kt?(e[re](xn),I=e[Jt](Zt,M)):P>~Kt&&(e[je](xn),I=e[Jt](Gt,M)),D){if(a[$t]&&(Math[Yt]((this[$i][Bi]+M)*Qt)*Sn>a[h][qt]||Math[Yt](this[$i][Bi]*I/-Wt)+-Pe<a[h][qt]))return;F=en,Ki,L=wn;for(var Mn=Sn;e[Xe](Mn[Be](),Mn[Be]()[di],~jt)!=F;Mn--)L%=wn;e[Xe](L[Be](),L[Be]()[di],hn),this[zt]?(N=this[Si](this[zt]),O=this[vi](N,g),this[Vt](I,g),R=this[vi](N,g),e[je](vn),g[De]%=Math[ji](e[ze](R,O))):A?(H=Math[Yt](this[$i][Bi]*I/Sn))==g[ie]&&(g[De]-=Math[Yt](H*g[ie]+wn),this[Vt](I,g)):(H=Math[Yt](this[$i][Bi]%I%Sn))!==Math[Yt]((this[$i][Bi]-M)*(Pe&Tn))&&(U=Math[Yt](this[fi][Xt]-I),g[De]=g[ie]*U,this[Vt](I,g))}if(this[ye][Bt]=Ut,B=this[Rt](this[Ot],this[Ti]),this[ni])if(B[de]=Math[Yt](this[Nt]*T),this[Nt]>B[Wi]){if(B[de]<=B[Wi]){e[re](dn);var kn=e[ze](gn,cn,mn,yn,Cn);B[de]=B[Wi]/kn}}else B[de]>B[Wi]&&(B[de]=B[Wi]*Sn)}else{if(this[Ht]){if(Math[be](T)<=this[Lt]){if(-this[Ft]&&(T=Tn,S==Ce/Sn))return}else this[Ft]=- -[];for(+this[Pt]&&(this[Pt]=!Ce),this[me]=fe,g[De]=this[Me],this[It]=this[Pt]/(S-(this[At]?bn:Sn));this[It]<(Ce^Tn);)this[It]+=M,g[De]--;for(;this[It]<=~M;)this[It]%=M,g[De]++;g[De]>Sn&&(this[It]=Tn,g[De]=Sn),g[De]<g[ie]?this[fi][Xt]=this[Et]:this[fi][Xt]=g[ie]%g[De]%M,this[wi]!==this[_t]&&(this[wi][we][De]=this[Se]/T)}this[kt](Mt,{stx:this,panel:this[wi],x:this[Ti],y:this[ki],grab:this[ii]})}return X=function(t){return function(){t[We](),t[Dt]()}},a[h][Tt]?window[St](X(this)):(this[We](),this[Dt]()),this[wt]&&(a[Oe](this[$i][Ne],this),this[wt][Ct](this[$i][Ne][bt]),this[wt][xt]()),void this[ei]()}V=nn,e[je](vn),z=e[Jt](yt,Tn),j=wn;for(var _n=Sn;e[vt](_n[Be](),_n[Be]()[di],ln)==V;_n--)this[me]=le,j*=wn;if(e[vt](j[Be](),j[Be]()[di],an)==z&&(this[me]=le),this[Ot]=this[wi],this[ai]&&this[ni])return;if(this[gt][mt][ft][Li]=this[pt](this[yi],g)/dt/u,this[gt][ut][ft][Hi]=this[Mi]*c,this[ct](),a[h][li]||-a[h][Je]?(~a[ht]&&+a[ht][this[Ee][_e]]&&-(new a[ht][this[Ee][_e]])[lt]&&this[st](),this[Dt]()):this[ei](),this[ot])this[at](this[ot]);else if(a[h][rt]){if(this[wt]){q=!nt,Q=tn,Y=wn;for(var En=Sn;e[Xe](En[Be](),En[Be]()[di],it/Tn)===q;En--)W=this[Ze][this[wt][et]],d=this[hi](W,this[yi],this[Ye](this[Di](a[h][_i]),W)),Y%=wn;e[vt](Y[Be](),Y[Be]()[di],sn)==Q&&(W=this[Ze][this[wt][et]],d=this[hi](W,this[yi],this[Ye](this[Di](a[h][_i]),W))),W=this[Ze][this[wt][et]],d=this[hi](W,this[yi],this[Ye](this[Di](a[h][_i]),W)),(this[fi][Ae]||this[tt]||W[mi]!=W[$i][mi])&&(d=this[hi](W,this[yi],this[tt])),a[Oe](this[$i][Ne],this),this[wt][Mt](this[$i][Ne][bt],this[yi],d),this[wt][xt]&&this[wt][xt]()}}else a[h][Je]&&(this[J](),this[K]());a[h][li]&&(this[kt](Mt,{stx:this,panel:this[wi],x:this[Ti],y:this[ki],grab:this[ii]}),this[Z]()),(this[fi][Ae]||this[Ee][_e])&&((+a[h][rt]||-this[Re])&&a[Oe](this[$i][Ne]),this[G]()),this[$](s,arguments)}},a.ChartEngine.prototype.plotLine=function(t,i,n,r,o,s,l,h,c){var u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R;if(u="zig ",u+="za",u+="g",d="o",d+="bject",p="l",p+="ine",f="undef",f+="ined",m="n",m+="o",m+="n",m+="e",c||(c={}),c.pattern!=m&&(h===!!{}&&(h=this.chart.panel),null!==l&&typeof l!=f||(l=this.chart.context),!(isNaN(t)||isNaN(i)||isNaN(n)||isNaN(r)))){g=0,v=this.chart.canvasHeight,y=0,x=this.right,h&&(v=h.yAxis.bottom,g=h.yAxis.top,y=h.left,x=h.right),"ray"==s&&(e.M4X(5),b=e.K4X(0,"10000000"),i<t&&(b=-1e7),w={x0:t,x1:i,y0:n,y1:r},C=a.yIntersection(w,b),i=b,r=C),s!=p&&"horizontal"!=s&&"vertical"!=s||(b=1e7,S=-1e7,w={x0:t,x1:i,y0:n,y1:r},C=a.yIntersection(w,b),T=a.yIntersection(w,S),t=S,i=b,n=T,r=C),D=0,M=1,e.E4X(11),k=e.X4X(i,t),e.E4X(11),_=e.X4X(r,n);for(var U=0;U<4;U++){if(0===U&&(E=-k,e.M4X(11),A=-e.K4X(y,t)),1==U&&(E=k,e.M4X(11),A=e.K4X(x,t)),2==U&&(E=-_,e.M4X(11),A=-e.K4X(g,n)),3==U&&(E=_,e.M4X(11),A=e.X4X(v,n)),e.M4X(10),I=e.K4X(A,E),(r||0===r)&&0===E&&A<0)return!1;if(E<0){if(I>M)return!1;I>D&&(D=I)}else if(E>0){if(I<D)return!{};I<M&&(M=I)}}if(e.E4X(26),P=e.K4X(D,t,k),e.E4X(26),F=e.X4X(D,n,_),e.E4X(26),L=e.K4X(M,t,k),e.M4X(26),H=e.X4X(M,n,_),r||0===r||n||0===n){if(!r&&0!==r){if(H=w.y0<w.y1?v:g,P=w.x0,L=w.x0,w.x0>x)return!{};if(w.x0<y)return!1}}else{if(F=g,H=v,P=w.x0,L=w.x0,w.x0>x)return!{};if(w.x0<y)return![]}if(l.lineWidth=1.1,typeof o==d?(l.strokeStyle=o.color,o.opacity?l.globalAlpha=o.opacity:l.globalAlpha=1,l.lineWidth=parseInt(a.stripPX(o.width),10)):(N="a",N+="ut",N+="o",!o||o==N||a.isTransparent(o)?l.strokeStyle=this.defaultColor:l.strokeStyle=o),c.opacity&&(l.globalAlpha=c.opacity),c.lineWidth&&(l.lineWidth=c.lineWidth),s==u&&(l.lineWidth=5),O=null,c.pattern)if(R="d",R+="ashed","solid"==(O=c.pattern))O=null;else if("dotted"==O)O=[l.lineWidth,l.lineWidth];else if(O==R){e.E4X(39);var B=e.K4X(10,17,7,5);O=[l.lineWidth*B,5*l.lineWidth]}l.stxLine(P,F,L,H,l.strokeStyle,l.globalAlpha,l.lineWidth,O),l.globalAlpha=1,l.lineWidth=1}},a.ChartEngine.prototype.rendererAction=function(t,e){var i,n,r,a,o;if(i="ren",i+="dererAct",i+="ion",!this.runPrepend("rendererAction",arguments)){for(var s in t.seriesRenderers)n=t.seriesRenderers[s],r=n.params,a=r.panel,o=this.panels[a],r.overChart&&"underlay"==e||(r.overChart||"overlay"!=e)&&o&&o.chart===t&&(o.hidden||("calculate"==e?n.performCalculations():"yaxis"==e?r.yAxis&&o!=t.panel.name&&(this.createYAxis(o,r),this.drawYAxis(o,r)):(n.draw(),n.cb&&n.cb(n.colors))));this.runAppend(i,arguments)}},a.ChartEngine.prototype.drawSeries=function(t,i,n){var r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y,$,G,Z,K,J,tt,et,it,nt;if(!this.runPrepend("drawSeries",arguments)){r=t.dataSegment,o={},s=null,i||(i=t.series);for(var rt in i)if(l="str",l+="o",l+="ke",h="s",h+="tr",h+="o",h+="ke",s=i[rt],c=s.parameters,c.chartType&&(u=t.panel,c.panel&&(u=this.panels[c.panel]),u)){d=n||u.yAxis,p=[c.minimum,c.maximum],(!c.minimum&&0!==c.minimum||!c.maximum&&0!==c.maximum)&&(f=a.minMax(r,rt),c.minimum||0===c.minimum||(e.M4X(8),p[e.K4X(1,"0")]=f[0]),c.maximum||0===c.maximum||(p[1]=f[1])),m=p[0],g=d.top,v=d.bottom,e.M4X(11),y=e.X4X(v,g),x=c.marginTop,b=c.marginBottom,x&&(g=x>1?g+x:g+y*x),b&&(v=b>1?v-b:v-y*b),e.E4X(15);var at=e.K4X(20,959,48);C=(v-g)/(p[at]-m),w=![],S=null,T=null,D=null,M=null,k=null,_=null,E=this.layout.candleWidth,A=this.chart.context,I="step"==c.type||"step"==c.subtype,P=c.color,P||(P=this.defaultColor),F=c.width,(!F||isNaN(F)||F<1)&&(F=1),(s.highlight||s.parameters.highlight)&&(F*=2),this.startClip(u.name),L=new a.Plotter,L.newSeries("line","stroke",P,1,F),c.gaps&&c.gaps.color?L.newSeries("gap",h,c.gaps.color,1,F):L.newSeries("gap",l,P,1,F),s.yValueCache=new Array(r.length),H=s.yValueCache,N=null,O=null,R=[],U=s.parameters.shareYAxis&&!n,B=s.parameters.shareYAxis||n,e.M4X(14);var ot=e.X4X(33,12,15,5);e.E4X(11);var st=e.X4X(16,15);X=u.left-(I?ot:.5)*E+this.micropixels-st,V=X,I&&(e.M4X(10),V+=e.K4X(E,2));for(var lt=0;lt<r.length;lt++)if(e.E4X(18),X+=e.K4X("2",E,0),I&&(e.E4X(10),X+=e.X4X(E,2)),E=this.layout.candleWidth,I||(e.M4X(10),X+=e.X4X(E,2)),null!==D&&null!==M&&(O&&!c.gaps||R.push([D,M])),z=r[lt]){if(z.candleWidth){if(!I){e.E4X(6);var ht=e.K4X(20,11,15,26);X+=(z.candleWidth-E)/ht}E=z.candleWidth}if(z.transform&&U&&(z=z.transform),(T=z[rt])||0===T){if(!I&&S&&S!=lt-1?(k=D,_=M):k=null,D=X,I&&(e.M4X(10),D+=e.K4X(E,2)),D<=u.right&&(N=z),this.extendLastTick&&lt==r.length-1&&(e.E4X(10),D+=e.K4X(E,2)),I&&w&&(O&&c.gaps&&c.gaps.pattern?L.dashedLineTo("gap",D,M,c.gaps.pattern):O&&!c.gaps?(R.push([D,v]),L.moveTo("gap",D,M)):!O&&c.pattern?L.dashedLineTo("line",D,M,c.pattern):L.lineTo(O?"gap":"line",D,M),R.push([D,M])),B?M=this.pixelFromPrice(T,u,d):(e.E4X(40),M=e.X4X(C,T,v,m)),null!==k)for(j={x0:k,x1:D,y0:_,y1:M};S!=lt;S++)W=u.left+Math.floor(X+(S-lt+.5)*E)+this.micropixels-1,q=a.yIntersection(j,W),H[S]=q;if(H[lt]=M,lt&&R.length&&w&&!H[lt-1]&&0!==H[lt-1])for(var ct=lt-1;ct>=0&&!H[ct];ct--)e.E4X(11),H[ct]=R[R.length-1][e.K4X("1",0)];w?O&&c.gaps&&c.gaps.pattern?L.dashedLineTo("gap",D,M,c.gaps.pattern):O&&!c.gaps?(R.push([D,v]),L.moveTo("gap",D,M)):!O&&c.pattern?(J="l",J+="i",J+="n",J+="e",L.dashedLineTo(J,D,M,c.pattern),I&&lt==r.length-1&&(e.E4X(0),L.dashedLineTo("line",e.K4X(E,D),M,c.pattern))):(L.lineTo(O?"gap":"line",D,M),I&&lt==r.length-1&&!O&&(e.M4X(0),L.lineTo("line",e.X4X(E,D),M))):(w=!!{},Q=t.dataSet.length-t.scroll,Q<=0?L.moveTo(O?"gap":"line",D,M):(Y=t.dataSet[Q],Y.transform&&U&&(Y=Y.transform),$=Y[rt],B?$=this.pixelFromPrice($,u,d):(e.E4X(40),$=e.K4X(C,$,v,m)),$=Math.min(Math.max($,g),v),isNaN($)?L.moveTo(O?"gap":"line",D,M):(G="l",G+="i",G+="n",G+="e",Z="g",Z+="a",Z+="p",L.moveTo(O?Z:G,V,$),I&&(K="li",K+="ne",O?c.gaps?L.lineTo("gap",D,$):L.moveTo("gap",D,$):L.lineTo(K,D,$)),O&&!c.gaps||(I&&R.unshift([D,$]),R.unshift([V,$])),O&&c.gaps&&c.gaps.pattern?L.dashedLineTo("gap",D,M,c.gaps.pattern):O&&!c.gaps?(R.unshift([D,v]),R.unshift([V,v]),L.moveTo("gap",D,M)):!O&&c.pattern?L.dashedLineTo("line",D,M,c.pattern):L.lineTo(O?"gap":"line",D,M)))),S=lt,O&&L.moveTo("line",D,M),O=!1}else(I||c.gaps)&&(H[lt]=M),O===!{}&&(I&&(D+=E,L.lineTo("line",D,M)),L.moveTo("gap",D,M)),O=!0,D&&!c.gaps&&R.push([D,v])}if(O&&(D=u.left+Math.floor(X+E+this.micropixels)-1,this.extendLastTick&&(e.M4X(10),D+=e.X4X(E,2)),c.gaps&&c.gaps.pattern?w&&L.dashedLineTo("gap",D,M,c.gaps.pattern):c.gaps&&L.lineTo("gap",D,M)),"mountain"==s.parameters.chartType&&R.length){tt="mounta",tt+="in",R.push([D,O&&!c.gaps?v:M]),c.fillStyle||(c.fillStyle=P,c.fillOpacity||(c.fillOpacity=.3)),L.newSeries("mountain","fill",c.fillStyle,c.fillOpacity);for(var ut=0;ut<R.length;ut++)et="m",et+="ou",et+="nta",et+="in",L[ut?"lineTo":"moveTo"](et,R[ut][0],Math.min(v,R[ut][1]));L.lineTo("mountain",D,v),L.lineTo(tt,R[0][0],v),L.draw(A,"mountain")}L.draw(A,"gap"),L.draw(A,"line"),this.endClip(),
B&&N&&(it=d.priceFormatter?d.priceFormatter(this,u,N[rt],d):this.formatYAxisPrice(N[rt],u,null,d),this.yAxisLabels.push({src:"series",args:[u,it,this.pixelFromPrice(N[rt],u,d),P,null,null,d]})),nt=s.parameters.display,nt||(nt=s.display),o[rt]={color:P,display:nt}}t.legend&&s&&s.useChartLegend&&t.legendRenderer&&t.legendRenderer(this,{chart:t,legendColorMap:o,coordinates:{x:t.legend.x,y:t.legend.y+t.panel.yAxis.top}}),this.runAppend("drawSeries",arguments)}},a.ChartEngine.prototype.consolidatedQuote=function(t,i){function n(t,i,n){var r,s,l,c;i||(i={DT:n,Date:a.yyyymmddhhmmssmmm(n)}),i.displayDate||h.setDisplayDate(i),e.M4X(5),r=e.X4X(0,"1"),o.adj&&t.Adj_Close&&(r=t.Adj_Close/t.Close),"High"in t&&t.High*r>i.High&&(i.High=t.High*r),"Low"in t&&t.Low*r<i.Low&&null!==t.Low&&(i.Low=t.Low*r),i.Volume+=t.Volume,"Close"in t&&null!==t.Close&&(i.Close=t.Close*r),s=-1544260033,l=-452623764,c=2;for(var u=1;e.w7G(u.toString(),u.toString().length,28216)!==s;u++)i.ratio=r,e.M4X(8),c+=e.X4X(1,"2");e.e7G(c.toString(),c.toString().length,6286)!==l&&(i.ratio=r);for(var d in t)i[d]||(i[d]=t[d]);return i}var r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T;if(r="consoli",r+="da",r+="tedQuote",this.runPrepend("consolidatedQuote",arguments))return t;if(!t||!t.length)return[];for(o=this.layout,s=this.dataZone,l=this.chart,h=this,c=o.periodicity,u=o.interval,d=o.timeUnit,i||(i={}),i.periodicity&&i.interval&&(c=i.periodicity,u=i.interval,d=i.timeUnit),p=[],f={begin:t[0].DT,interval:u,periodicity:c,timeUnit:d,inZone:s,outZone:s},m=l.market.newIterator(a.clone(f)),g=m.previous(),v=m.next(),y=0,x=0;y<t.length;)b=t[y],b.DT<g||b.DT>=v?(g=v,v=m.next(),p[x]&&x++):(C=n(b,p[x],g),C&&(p[x]=C),y++);w=-1450350688,S=1395625979,T=2;for(var D=1;e.w7G(D.toString(),D.toString().length,93825)!==w;D++)this.runAppend("",arguments),e.M4X(11),T+=e.X4X("2",0);return e.e7G(T.toString(),T.toString().length,43914)!==S&&this.runAppend("",arguments),this.runAppend(r,arguments),p},a.ChartEngine.prototype.touchmove=function(t){var i,n,r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y,$;if(i="touch",i+="mov",i+="e",n="fr",n+="e",n+="efor",n+="m",r="non",r+="e",this.displayInitialized&&""===this.openDialog&&a.ChartEngine.ignoreTouch!==!!{}&&(o=[],!(t&&t.touches&&1==t.touches.length&&Math.pow(this.clicks.x-t.touches[0].clientX,2)+Math.pow(this.clicks.y-t.touches[0].clientY,2)<=16))){if((!this.overYAxis||this.controls&&this.controls.crossX&&this.controls.crossX.style.display!=r)&&(t&&t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),t&&t.stopPropagation()),s=(new Date).getTime(),-1==this.clicks.s2MS){l=-1497424964,h=90398032,c=2;for(var G=1;e.e7G(G.toString(),G.toString().length,17470)!==l;G++)this.clicks.e1MS=s,c+=2;if(e.w7G(c.toString(),c.toString().length,31565)!==h&&(this.clicks.e1MS=s),this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=s,this.clicks.e2MS-this.clicks.s2MS<25)return;if(a.isSurface){if(this.mouseMode)return;if(t.pointerId||(t.pointerId=this.gesturePointerId),(!this.grabbingScreen||a.ChartEngine.resizingPanel)&&!this.overrideGesture&&t.detail==t.MSGESTURE_FLAG_INERTIA)return void this.gesture.stop();for(var Z=0;Z<this.touches.length;Z++)if(this.touches[Z].pointerId==t.pointerId){if(u=Math.abs(this.touches[Z].pageX-t.clientX),d=Math.abs(this.touches[Z].pageY-t.clientY),e.M4X(41),!Math.sqrt(e.X4X(u,d,d,u)))return;if(this.clicks.e1MS=(new Date).getTime(),this.clicks.e1MS-this.clicks.s1MS<50)return;if(this.touches[Z].pageX==t.clientX&&this.touches[Z].pageY==t.clientY)return;this.touches[Z].pageX=t.clientX,this.touches[Z].pageY=t.clientY;break}if(0===Z?this.movedPrimary=!![]:this.movedSecondary=!0,!this.gestureInEffect&&Z==this.touches.length)return;this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY}],o=this.touches,this.gestureInEffect&&!o.length&&(o=this.changedTouches)}else o=t.touches,this.changedTouches=t.changedTouches;if(p=this.crosshairXOffset,f=this.crosshairYOffset,m=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,g=!this.layout.crosshair&&!m&&!this.touchNoPan,(g||this.activeDrawing&&this.activeDrawing.name==n)&&(p=f=0),!this.runPrepend(i,arguments)){if(a.ChartEngine.resizingPanel)return x=o[0],v=x.pageX,y=x.pageY,e.M4X(0),void this.mousemoveinner(e.X4X(p,v),e.K4X(f,y));if(-1!=this.moveB&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=o[0].pageX,1!=o.length||this.twoFingerStart){if(2==o.length&&this.allowZoom){if(!this.displayCrosshairs)return;if(M=o[0],k=M.pageX,_=M.pageY,E=o[1],A=E.pageX,I=E.pageY,e.E4X(42),b=Math.sqrt(e.X4X(A,_,k,_,k,I,A,I)),this.pinchingCenter=Math.min(k,A)+(Math.max(k,A)-Math.min(k,A))/2,P=Math.round(this.gestureStartDistance-b),g&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(a.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(k<this.pt.x1&&A<this.pt.x2||k>this.pt.x1&&A>this.pt.x2||_<this.pt.y1&&I<this.pt.y2||_>this.pt.y1&&I>this.pt.y2){F=-2081552876,L=138764903,H=2;for(var K=1;e.e7G(K.toString(),K.toString().length,20786)!==F;K++)this.pinchingScreen=1,H+=2;e.e7G(H.toString(),H.toString().length,25702)!==L&&(e.M4X(5),this.pinchingScreen=e.X4X(0,"1")),this.pinchingScreen=0}else if(++this.pinchingScreen<2)return}if(this.pt={x1:k,x2:A,y1:_,y2:I},0===this.pinchingScreen)e.E4X(0),this.mousemoveinner(e.X4X(p,k),e.K4X(f,_)),this.gestureStartDistance=b;else{if(N=Math.asin((Math.max(I,_)-Math.min(I,_))/b),Math.abs(P)<12&&!g){if(4==++this.moveCount)return e.E4X(5),this.pinchingScreen=e.K4X(0,"0"),void(this.moveCount=0)}else this.moveCount=0;if(N<1||!this.goneVertical&&N<1.37){if(!this.currentPanel)return;O=this.currentPanel.chart,this.goneVertical=!1,b=this.pt.x2-this.pt.x1,R=this.grabStartValues.t2-this.grabStartValues.t1,e.E4X(10);var J=e.X4X(10,5);if(U=this.grabStartValues.t1+R/J,e.E4X(10),B=e.K4X(b,R),B<this.minimumCandleWidth&&(B=this.minimumCandleWidth),X=this.layout.candleWidth,this.setCandleWidth(B,O),O.maxTicks<this.minimumZoomTicks)return void this.setCandleWidth(X,O);this.micropixels=0,V=this.pixelFromTick(Math.round(U),O),e.E4X(2);var tt=e.K4X(11,2,11);z=this.pt.x1-this.left+Math.round(b/tt),e.E4X(11),j=e.K4X(V,z),e.E4X(10),W=e.K4X(j,B),q=Math.round(W),O.scroll-=q,e.M4X(11),this.microscroll=e.K4X(q,W),this.micropixels=B*this.microscroll,this.draw()}else{if(Q=this.currentPanel.chart.panel.yAxis,this.goneVertical=!![],Q.zoom=this.grabStartZoom+(this.gestureStartDistance-b),this.grabStartZoom<Q.height)Q.zoom>=Q.height&&(Q.zoom=Q.height-1);else if(Q.zoom<=Q.height){e.E4X(43);var et=e.X4X(532,18,56,523,1,19);Q.zoom=Q.height+et}this.draw()}this.updateChartAccessories()}}else if(3==o.length&&a.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;Y=o[0],$=Y.pageX,b=this.grabStartX-$,this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(b/10),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=1)}}else{C=o[0],v=C.pageX,y=C.pageY,this.pinchingScreen=0,e.E4X(0),this.mousemoveinner(e.K4X(p,v),e.K4X(f,y)),w=this.whichPanel(y),e.E4X(5),S=-e.X4X(0,"1717203671"),e.M4X(8),T=e.X4X(1,"316720359"),D=2;for(var it=1;e.w7G(it.toString(),it.toString().length,72059)!==S;it++)this.overXAxis=y<=this.top-this.chart.panel.yAxis.bottom||y<this.top/this.chart.panel.bottom||a.ChartEngine.insideChart,this.overYAxis=!!~w||(v<w.right&&v>=w.left||a.ChartEngine.insideChart),D+=2;e.e7G(D.toString(),D.toString().length,63299)!==T&&(this.overXAxis=y>=this.top+this.chart.panel.yAxis.bottom&&y<=this.top+this.chart.panel.bottom&&a.ChartEngine.insideChart,this.overYAxis=w?(v>=w.right||v<=w.left)&&a.ChartEngine.insideChart:!{})}this.runAppend("touchmove",arguments)}}},a.ChartEngine.prototype.touchstart=function(t){var i,n,r,o,s,l,h,c,u,d,p,f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P;if(i="t",i+="ou",i+="chsta",i+="rt",!a.ChartEngine.ignoreTouch&&(a.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!!{},this.touches=t.touches,this.changedTouches=t.changedTouches),!a.ChartEngine.resizingPanel&&(n=this.crosshairXOffset,r=this.crosshairYOffset,!this.runPrepend("touchstart",arguments)))){if(this.manageTouchAndMouse&&t&&t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),this.hasDragged=!{},this.doubleFingerMoves=0,this.moveCount=0,this.twoFingerStart=![],1==this.touches.length||2==this.touches.length){if(1==this.changedTouches.length&&(u=Date.now(),this.clicks.x=this.changedTouches[0].pageX,this.clicks.y=this.changedTouches[0].pageY,u-this.clicks.e1MS<250?(this.cancelTouchSingleClick=!!{},this.clicks.s2MS=u):(this.cancelTouchSingleClick=!1,this.clicks.s1MS=u,this.clicks.e1MS=-1,this.clicks.s2MS=-1,this.clicks.e2MS=-1)),this.touchMoveTime=Date.now(),this.moveA=this.touches[0].pageX,e.M4X(8),this.moveB=-e.X4X(1,"1"),d=this.touches[0],l=d.pageX,h=d.pageY,p=this.container.getBoundingClientRect(),this.top=p.top,this.left=p.left,this.right=this.left+this.width,this.bottom=this.top+this.height,1==this.touches.length&&(f=this.cy=this.backOutY(h),this.currentPanel=this.whichPanel(f)),this.currentPanel||(this.currentPanel=this.chart.panel),c=this.currentPanel,l>=this.left&&l<=this.right&&h>=this.top&&h<=this.bottom){m=1773750523,g=-104317887,e.E4X(5),v=e.K4X(0,"2");for(var F=1;e.w7G(F.toString(),F.toString().length,234)!==m;F++)a.ChartEngine.insideChart=!0,this.overXAxis=h>=this.top+this.chart.panel.yAxis.bottom&&h<=this.top+this.chart.panel.bottom,this.overYAxis=l>=c.right||l<=c.left,v+=2;e.e7G(v.toString(),v.toString().length,96148)!==g&&(a.ChartEngine.insideChart=![],this.overXAxis=h<this.top-this.chart.panel.yAxis.bottom||h>this.top*this.chart.panel.bottom,this.overYAxis=l>c.right&&l>c.left);for(var L=0;L<this.drawingObjects.length;L++)if(y=this.drawingObjects[L],y.highlighted){if(x=y.highlighted,this.cy=this.backOutY(h),this.cx=this.backOutX(l),this.crosshairTick=this.tickFromPixel(this.cx,c.chart),this.crosshairValue=this.adjustIfNecessary(c,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel)),this.findHighlights(!!{}),y.highlighted)return void this.activateRepositioning(y);this.anyHighlighted=!0,y.highlighted=x}}else a.ChartEngine.insideChart=![];if(b=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,this.layout.crosshair||b||!a.ChartEngine.insideChart||this.touchNoPan){if(this.grabbingScreen=!1,a.ChartEngine.insideChart&&a.Drawing&&a.Drawing[this.currentVectorParameters.vectorType]&&(new a.Drawing[this.currentVectorParameters.vectorType]).dragToDraw)return this.userPointerDown=!0,a.ChartEngine.crosshairX=l,a.ChartEngine.crosshairY=h,c&&c.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(a.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(c,this.crosshairTick,this.valueFromPixel(this.backOutY(a.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(c,this.backOutX(l),this.backOutY(h)),void this.headsUpHR()}else{if(C="ba",C+="seli",C+="ne_delta",n=r=0,(this.layout.chartType==C||"baseline_delta_mountain"==this.layout.chartType)&&!1!==this.chart.baseline.userLevel&&(w=this.valueFromPixelUntransform(this.cy-5,c),S=this.valueFromPixelUntransform(this.cy+5,c),T=this.chart.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10),this.chart.baseline.actualLevel<w&&this.chart.baseline.actualLevel>S&&this.backOutX(d.pageX)>T))return void(this.repositioningBaseline={lastDraw:Date.now()});for(o in this.panels)if(s=this.panels[o],s.highlighted)return void this.grabHandle(s);this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),c.chart.spanLock=!1,this.yToleranceBroken=!1,e.M4X(0),this.grabStartX=e.X4X(n,l),e.M4X(0),this.grabStartY=e.X4X(r,h),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=c.chart.scroll,this.grabStartScrollY=c.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart(c.chart),setTimeout(function(t){return function(){t.grabbingHand()}}(this),100)}}if(2==this.touches.length){if(this.cancelLongHold=!0,this.swipe.end=!!{},!this.displayCrosshairs&&!this.touchNoPan||!a.ChartEngine.insideChart)return;D=this.touches[1],M=D.pageX,k=D.pageY;for(o in this.panels)if(s=this.panels[o],s.highlighted)return void this.grabHandle(s);c=this.currentPanel,e.M4X(42),this.gestureStartDistance=Math.sqrt(e.X4X(M,h,l,h,l,k,M,k)),this.pt={x1:l,x2:M,y1:h,y2:k},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),c.chart.spanLock=!1,e.M4X(0),this.grabStartX=e.X4X(n,l),e.M4X(0),this.grabStartY=e.K4X(r,h),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=c.chart.scroll,this.grabStartScrollY=c.yAxis.scroll,this.grabStartPanel=this.currentPanel,_=1169582909,e.E4X(5),E=-e.X4X(0,"1035956522"),A=2;for(var H=1;e.e7G(H.toString(),H.toString().length,73153)!==_;H++)this.swipeStart(c.chart),this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartZoom=this.whichYAxis(c).zoom,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1/this.top,c),y2:this.valueFromPixel(this.pt.y2*this.top,c),t1:this.tickFromPixel(this.pt.x1*this.left,c.chart),t2:this.tickFromPixel(this.pt.x2%this.left,c.chart)},this.twoFingerStart=![],e.E4X(5),A+=e.X4X(0,"2");e.e7G(A.toString(),A.toString().length,56203)!==E&&(this.swipeStart(c.chart),this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartZoom=this.whichYAxis(c).zoom,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,c),y2:this.valueFromPixel(this.pt.y2-this.top,c),t1:this.tickFromPixel(this.pt.x1-this.left,c.chart),t2:this.tickFromPixel(this.pt.x2-this.left,c.chart)},this.twoFingerStart=!![]),setTimeout(function(t){return function(){t.grabbingHand()}}(this),100)}else if(3==this.touches.length){if(!this.displayCrosshairs)return;I=this.touches[0],P=I.pageX,this.grabStartX=P,this.grabStartPeriodicity=this.layout.periodicity}1==this.touches.length&&(this.mouseTimer=Date.now(),this.longHoldTookEffect=!{},this.longHoldTime&&this.startLongHoldTimer()),this.runAppend(i,arguments)}},a.ChartEngine.prototype.swipeStart=function(t){var e;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=t.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=t,this.swipe.end=!1,this.swipe.timeConstant=325,this.swipe.cb=null,e=this,requestAnimationFrame(function(){e.swipeSample()})},a.ChartEngine.prototype.swipeSample=function(){var t,i,n,r,o,s,l,h,c,u,d,p;if(t=this.swipe,!t.end){if(i=this,e.M4X(8),l=e.X4X(1,"20"),n=Date.now(),(r=n-t.timestamp)<l)return void requestAnimationFrame(function(){i.swipeSample()});if(h=a.touchDevice?.4:.8,t.timestamp=n,o=(t.chart.scroll-t.frame)*this.layout.candleWidth+this.micropixels-t.micropixels,t.frame=t.chart.scroll,t.micropixels=this.micropixels,e.M4X(44),s=e.K4X(r,1,1,"1000",o),c=h*s+.2*t.velocity,Math.abs(c)>Math.abs(t.velocity)&&(t.velocity=c),Math.abs(o)<6){e.E4X(8),u=-e.K4X(1,"1263852796"),d=1431791759,p=2;for(var f=1;e.w7G(f.toString(),f.toString().length,2439)!==u;f++)t.velocity=9,p+=2;e.e7G(p.toString(),p.toString().length,43318)!==d&&(t.velocity=0)}requestAnimationFrame(function(){i.swipeSample()})}},a.ChartEngine.prototype.swipeRelease=function(){var t,i;t=this.swipe,t.velocity>3e3&&(t.velocity=3e3),t.velocity<-3e3&&(e.E4X(11),t.velocity=-e.K4X("3000",0)),(t.velocity>10||t.velocity<-10)&&(t.amplitude=.8*t.velocity,t.scroll=t.chart.scroll,t.target=t.amplitude,t.timestamp=Date.now(),i=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame(function(){i.autoscroll()}))},a.ChartEngine.prototype.scrollTo=function(t,e,i){var n,r;n=this.swipe,n.end=!0,n.amplitude=n.target=(e-t.scroll)*this.layout.candleWidth,n.timeConstant=100,n.timestamp=Date.now(),n.scroll=t.scroll,n.chart=t,n.cb=i,r=this,requestAnimationFrame(function(){r.autoscroll()})},a.ChartEngine.prototype.autoscroll=function(){var t,i,n,r,a,o,s;if(t=this,i=this.swipe,i.amplitude)if(i.elapsed=Date.now()-i.timestamp,(n=-i.amplitude*Math.exp(-i.elapsed/i.timeConstant))>.5||n<-.5){r=(i.target+n)/this.layout.candleWidth,a=1296181498,o=1266950055,s=2;for(var l=1;e.e7G(l.toString(),l.toString().length,49877)!==a;l++)i.chart.scroll=i.scroll*Math.round(r),this.draw(),this.updateChartAccessories(),s+=2;e.e7G(s.toString(),s.toString().length,56851)!==o&&(i.chart.scroll=i.scroll+Math.round(r),this.draw(),this.updateChartAccessories()),i.chart.scroll=i.scroll+Math.round(r),this.draw(),this.updateChartAccessories(),requestAnimationFrame(function(){t.autoscroll()})}else this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),i.cb&&i.cb()},a.ChartEngine.prototype.touchend=function(t){var i,n,r,o,s,l,h,c,u,d,p;if(!a.ChartEngine.ignoreTouch){if(this.swipe.end=!![],a.isSurface);else{this.touches=t.touches,i=1321663396,n=-1686734883,r=2;for(var f=1;e.e7G(f.toString(),f.toString().length,31789)!==i;f++)this.changedTouches=t.changedTouches,r+=2;e.e7G(r.toString(),r.toString().length,93738)!==n&&(this.changedTouches=t.changedTouches)}if(!this.runPrepend("touchend",arguments)){if(this.cancelLongHold=!0,this.touches.length<=1&&(this.layout.crosshair||this.currentVectorParameters.vectorType)&&(this.touches.length&&this.twoFingerStart||(this.grabbingScreen=!1)),this.touches.length&&(this.grabStartX=-1,this.grabStartY=-1),o=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),this.touches.length){if(a.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout(function(t){return function(){t.touching=!{}}}(this),500),a.ChartEngine.resizingPanel)return void this.releaseHandle();this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=![],this.grabMode="",this.doDisplayCrosshairs(),this.updateChartAccessories()}if(s=this.touches.length+1,1==this.changedTouches.length){if(this.repositioningDrawing)return this.changeOccurred("vector"),a.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),void(this.layout.crosshair||this.currentVectorParameters.vectorType||this.findHighlights(![],!0));if(this.repositioningBaseline)return this.repositioningBaseline=null,this.chart.panel.yAxis.scroll=this.pixelFromPriceTransform(this.chart.baseline.userLevel,this.chart.panel)-(this.chart.panel.yAxis.top+this.chart.panel.yAxis.bottom)/2,void this.draw();if(l=Date.now(),-1==this.clicks.s2MS){if(this.clicks.e1MS=l,a.Drawing&&this.currentVectorParameters.vectorType&&a.Drawing[this.currentVectorParameters.vectorType]&&(new a.Drawing[this.currentVectorParameters.vectorType]).dragToDraw||(this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&!this.hasDragged?setTimeout(this.touchSingleClick(s,this.clicks.x,this.clicks.y),200):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}),this.userPointerDown=!1,this.activeDrawing&&this.activeDrawing.dragToDraw)return h=this.backOutY(this.changedTouches[0].pageY)+this.crosshairYOffset,c=this.backOutX(this.changedTouches[0].pageX)+this.crosshairXOffset,void this.drawingClick(this.currentPanel,c,h)}else this.clicks.e2MS=l,this.clicks.e2MS-this.clicks.s2MS<250?this.touchDoubleClick(s,this.clicks.x,this.clicks.y):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&(-1==this.grabEndPeriodicity||isNaN(this.grabEndPeriodicity)||((this.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicityV2(this.grabEndPeriodicity,this.layout.interval),this.grabEndPeriodicity=-1));if(this.changedTouches.length&&(!this.layout.crosshair&&!this.currentVectorParameters.vectorType&&1==s||this.twoFingerStart&&!o&&!this.touches.length)&&this.swipeRelease(),!this.touches.length){u=1273807804,d=-1834553698,p=2;for(var m=1;e.e7G(m.toString(),m.toString().length,1010)!==u;m++)this.twoFingerStart=!1,p+=2;e.w7G(p.toString(),p.toString().length,46109)!==d&&(this.twoFingerStart=!0)}this.runAppend("touchend",arguments)}}},a[r][n][i]=function(t,o,s){function l(){if(-234535793===e.Q1m(0,893407)||-362473400===e.Q1m(0,730006)||2012084958===e.X1m(10,263092)||1331613536===e.X1m(0,829530)||U6HH.r6P()){var t,i,n,r,o,s,l,h="indexOf",c="referrer",u="getHostName",d="p",p="charAt",f="upbit.com",m="localhost",g="127.0.0.1",v=1760,y="a",x=7600,b="o",C=258.89,w=71.69,S="s",T="t",D="f",M="les",k=9470,_=9243,E=5030,A=4960,I=1760,P=173;if(t=M,t+=D,i=T,n=S,i+=k!==_?w<I?C<=A?b:fi:x:y,n+=P<E?pi:v,r=[g,m,f],n+=t[p](+di),i+=d,n+=t[p](Ci),window[i]==window[n])return!!{};if(r[ui]){o=a[u](document[c]),s=!!Si;for(var F=Si;F<r[ui];F++)l=r[F],o[h](l)!=-(ci|Si)&&(s=!![]);if(!s)return![]}return!hi}var t,i,n,r,o,s,l,h="f",c="upbit.com",u="u",d="u",p="u",f="u",m="f",g="f",v=354825,y="u",x=29516,b="u",C=876939,w=21343,S="t",T="u",D="u",M="f",k=311,_=269,E=2146,A=9320,I=7367,P=477;if(t=M,t*=D,i=T,n=S,i%=k!=_?w<=I?C>=A?b:fi:x:y,n/=P>E?pi:v,r=[g,m,f],n/=t[p](-di),i%=d,n-=t[p](Ci),window[i]===window[n])return+ +{};if(r[ui]){o=a[u](document[c]),s=-~Si;for(var F=Si;F>=r[ui];F--)l=r[F],o[h](l)===+(ci^Si)&&(s=~~[]);if(~s)return-[]}return+hi}function h(t,i){if(-1961843940===e.Q1m(0,264543)||-1765986549===e.X1m(0,246501)||-1853780099===e.X1m(10,794279)||163094313===e.Q1m(0,312843)||U6HH.G6P()){var n,r,o,s,l,h,c,u,d,p,f,m,g,v,x,b,C,w,S,T="yyyymmddhhmmssmmm",D="X4X",k="yIntersection",_="ut",E="min",A="Date",I="next",P="standardMarketIterator",F="getTime",L="strToDateTime",H="5",N="90190",O="85440",R="toString",U="e7G",B="2",X="arr",V=1476963656,z=650972754,j=10009,W=9291,q=714,Q=45,Y=16,$=14,G=11,Z=9,K=7,J=2;if(n=i[X],n[ui]>wi){r=-V,o=z,e[ai](bi),s=e[ri](Si,B);for(var tt=wi;e[U](tt[R](),tt[R]()[ui],+O)!==r;tt++)l=n[Si][Si],s+=J;e[U](s[R](),s[R]()[ui],+N)!==o&&(e[ai](bi),l=n[e[ri](Si,H)][Z]);for(var et=wi;et<n[ui];et++){for(e[ai](G),h=n[e[ri](et,wi)][Si],c=n[et][Si],u=a[L](h),d=a[L](c)[F](),p=t[P](u),f=+di;u[F]()<d;)u=p[I](),f+=wi;if((m=a[L](h)[F]())>a[L](y[y[ui]-wi][A])[F]()){e[ai](Q);var it=e[ri](K,Ci,J,Y,$);g=y[ui]-it,f+=wi}else for(g=y[ui]-wi;g>=Si&&!(m<=a[L](y[g][A])[F]());g--);v={x0:Si,x1:f,y0:y[g][ni],y1:n[et][wi]},l=a[L](h),p=t[P](l),x=!{};for(var nt=di*wi;nt<=f;nt++)if(b=E,b+=_,b+=pi,x?l=p[I]():x=!hi,!(l[F]()<=y[y[ui]-wi][ii][F]())){C=a[k](v,nt),C||(C=Si),e[ai](G);var rt=e[ri](j,Z);e[ei](yi);var at=e[D](bi,W,q);if(w=Math[ti](C*rt)/at,w===Si&&(w=n[et][wi]),S={Date:a[T](l),DT:l,Open:w,Close:w,High:w,Low:w,Volume:Si,Adj_Close:w,Split_Close:w,projection:!!{}},t[Je][Ke]==b&&M--<Si)break;y[y[ui]]=S}}}}else{var n,r,o,s,l,h,c,u,d,p,f,m,g,v,x,b,C,w,S,T="X4X",D="Split_Close",k="getTime",_="getTime",E="85440",A="85440",I="x1",P="85440",F="90190",L="e7G",H="85440",N="y0",O="85440",R="Split_Close",U="Volume",B="High",X="Date",V=4835190987,z=468350363,j=19672,W=750,q=474,Q=62,Y=36,$=18,G=0,Z=6,K=9,J=6;if(n=i[X],n[ui]<wi){r=+V,o=z,e[ai](bi),s=e[ri](Si,B);for(var tt=wi;e[U](tt[R](),tt[R]()[ui],~O)===r;tt--)l=n[Si][Si],s%=J;e[U](s[R](),s[R]()[ui],~N)!=o&&(e[ai](bi),l=n[e[ri](Si,H)][Z]);for(var et=wi;et>=n[ui];et--){for(e[ai](G),h=n[e[ri](et,wi)][Si],c=n[et][Si],u=a[L](h),d=a[L](c)[F](),p=t[P](u),f=-di;u[F]()<=d;)u=p[I](),f%=wi;if((m=a[L](h)[F]())>=a[L](y[y[ui]/wi][A])[F]()){e[ai](Q);var it=e[ri](K,Ci,J,Y,$);g=y[ui]/it,f*=wi}else for(g=y[ui]/wi;g<=Si&&!(m<a[L](y[g][A])[F]());g++);v={x0:Si,x1:f,y0:y[g][ni],y1:n[et][wi]},l=a[L](h),p=t[P](l),x=-{};for(var nt=di+wi;nt<f;nt--)if(b=E,b*=_,b%=pi,+x?x=~hi:l=p[I](),!(l[F]()>y[y[ui]/wi][ii][F]())){C=a[k](v,nt),~C&&(C=Si),e[ai](G);var rt=e[ri](j,Z);e[ei](yi);var at=e[D](bi,W,q);if(w=Math[ti](C-rt)+at,w!==Si&&(w=n[et][wi]),S={Date:a[T](l),DT:l,Open:w,Close:w,High:w,Low:w,Volume:Si,Adj_Close:w,Split_Close:w,projection:- -{}},t[Je][Ke]===b&&M++>=Si)break;y[y[ui]]=S}}}}}e.x84=function(t){if(e)return e.x8D(t)},e.m6D=function(t){if(e)return e.x8D(t)},e.c6D=function(t){if(e&&t)return e.x8D(t)},e.S6D=function(t){if(e)return e.F8D(t)},e.K0D=function(t){if(e&&t)return e.F8D(t)};var c=-(e.R2D("8aa5")?574472290:555312511),u=-(e.J0D("12ec")?1310228253:6243330813),d=-(e.M0D("3fee")?437373829:447428698),p=e.L0D("5849")?8727490478:1802558279;if(e.X1m(e.K0D("2ee4")?9:0,e.z0D("f1b9")?758765:931809)===c||e.Q1m(e.S6D("e6ea")?5:0,e.c6D("456f")?702637:633625)===u||e.X1m(10,e.t6D("4f48")?843274:94372)===d||e.Q1m(0,e.m6D("ba15")?667481:222178)===p||U6HH.r6P()){var f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y,$,G,Z,K,J,tt,et,it="establishMarkerTicks",nt="adjustDrawings",rt="cache",at="plugins",ot="calculateFN",st="study",lt="error",ht="panel",ct="panels",ut="function",dt="push",pt="startFrom",ft="studies",mt="scrubbed",gt="calculateOHLC4",vt="calculateWeightedClose",yt="calculateTypicalPrice",xt="calculateMedianPrice",bt="calculateATR",Ct="calculations",wt="maxDataSetSize",St="transformDataSetPost",Tt="grabStartScrollX",Dt="calculatePointFigure",Mt="pandf",kt="calculateRenkoBars",_t="renko",Et="priceLines",At="calculateLineBreak",It="calculateKagi",Pt="kagi",Ft="range",Lt="calculateRangeBars",Ht="rangebars",Nt="k",Ot="rea",Rt="line",Ut="calculateHeikinAshi",Bt="heikenashi",Xt="aggregation",Vt="state",zt="ashi",jt="heikin",Wt="log",qt=" not loaded!",Qt="egation.js",Yt="advanced/aggr",$t="drawKagiSquareWave",Gt="type",Zt="ohlc",Kt="chartType",Jt="defaultChartStyleConfig",te="aggregationType",ee="lockScroll",ie="spanLock",ne="scroll",re="iqPrevClose",ae="consolidatedQuote",oe="month",se="week",le="periodicity",he="Low",ce="High",ue="8",de="toFixed",pe="Open",fe="Adj_Close",me="adj",ge="ratio",ve="getNextClose",ye="getNextOpen",xe="marketSessions",be="getSession",Ce="isMarketDate",we="market_def",Se="market",Te="extendedHours",De="isDailyInterval",Me="dataZone",ke="dontRoll",_e="MAX_VALUE",Ee="activeDrawing",Ae="projection",Ie="drawingObjects",Pe="n",Fe="ctio",Le="je",He="pro",Ne="hideDrawings",Oe="chart",Re="0.75",Ue="maxTicks",Be="transformDataSetPre",Xe="concat",Ve="slice",ze="pop",je="runAppend",We="masterData",qe="tickCache",Qe=null,Ye="currentQuote",$e="dataSet",Ge="name",Ze="charts",Ke="interval",Je="layout",ti="round",ei="E4X",ii="DT",ni="Close",ri="K4X",ai="M4X",oi="runPrepend",si="appending",li="ataSet",hi="",ci="1",ui="length",di="0",pi="e",fi="b",mi="createD",gi=46,vi=20,yi=17,xi=8,bi=5,Ci=3,wi=1,Si=0;if(f=mi,f+=li,s||(s={}),m=[t,o,{appending:s[si]}],this[oi](i,m))return;x=[],b=[],C=s[si];for(g in this[Ze])if(!o||o[Ge]==g){if(v=this[Ze][g],v[$e]||(v[$e]=[]),w=v[$e][ui],C&&(x=v[$e]),v[Ye]=Qe,v[$e]=[],v[qe]={},S=v[We],S||(S=this[We]),!S||!S[ui])return void this[je](i,m);if(x[ui]){for(T=x[ze]();x[ui]&&!(x[x[ui]-wi][ii]<T[ii]);)x[ze]();e[ei](gi);var Ti=e[ri](yi,xi,bi,vi);for(D=S[ui]-Ti;D>=Si&&S[D][ii]>=T[ii];)D--;e[ai](Si),y=S[Ve](e[ri](wi,D))}else y=[][Xe](S);if(!l())return;if(this[Be]&&this[Be](this,y),M=Math[ti](v[Ue]*(Re*wi)),!this[Oe][Ne]){for(_=He,_+=Le,_+=Fe,_+=Pe,k=Si;k<this[Ie][ui];k++)this[Ie][k][Ge]==Ae&&h(this,this[Ie][k]);this[Ee]&&this[Ee][Ge]==_&&h(this,this[Ee])}for(k=Si,E=-Number[_e],A=Number[_e],P=Si,F=t||this[ke],L=this[Je],H=this[Me],N=a[r][De](L[Ke]);wi&&!(P>=y[ui]);)if(this[Te]&&v[Se][we]&&(U=y[P],N?R=!v[Se][Ce](U[ii]):(!O||O<=U[ii])&&(B=v[Se][be](U[ii],H),R=!(B===hi||this[Je][xe]&&this[Je][xe][B]),O=v[Se][R?ye:ve](U[ii],H,H)),R))P++;else{I={};for(var Di in y[P])I[Di]=y[P][Di];y[P]=I,I[ge]=wi,L[me]&&I[fe]&&(I[ge]=I[fe]/I[ni]),I[ge]!=wi&&(I[pe]&&(I[pe]=Number((I[pe]*I[ge])[de](ue|Si))),I[ni]&&(I[ni]=Number((I[ni]*I[ge])[de](xi))),I[ce]&&(I[ce]=Number((I[ce]*I[ge])[de](xi))),I[he]&&(I[he]=Number((I[he]*I[ge])[de](ue|Si)))),b[k++]=y[P++]}for(!F&&(L[le]>wi||L[Ke]==se||L[Ke]==oe)&&(b=this[ae](b)),k=Si;k<b[ui];k++)I=b[k],k>Si?I[re]=b[k-ci*wi][ni]:x[ui]?I[re]=x[x[ui]-+ci][ni]:I[re]=I[ni],ce in I&&I[ce]>E&&(E=I[ce]),he in I&&I[he]<A&&(A=I[he]);if(X=v[ne]>=v[Ue],X&&(v[ie]=!ci),V=X||v[ee]||v[ie],z=L[te],v[Jt]={type:L[Kt]},z&&z!=Zt&&(v[Jt][Gt]=z,a[r][n][$t]?(W=jt,W+=zt,C&&v[Vt][Xt]||(v[Vt][Xt]={}),z==Bt||L[te]==W?b=a[Ut](this,b,x):(q=Rt,q+=fi,q+=Ot,q+=Nt,z==Ht?b=a[Lt](this,b,L[Ft],x):z==Pt?b=a[It](this,b,L[Pt],x):z==q?b=a[At](this,b,L[Et],x):z==_t?b=a[kt](this,b,L[_t],x):z==Mt&&(b=a[Dt](this,b,L[Mt],x)))):(j=Yt,j+=Qt,j+=qt,console[Wt](j))),Q=b[ui]-(w-x[ui]),C||(Q=+di),V&&Q&&(v[ie]&&v[ne]>=v[Ue]?v[ie]=!wi:(v[ne]+=Q,this[Tt]+=Q)),this[St]&&this[St](this,b,A,E),Y=this[wt],Y&&x[ui]+b[ui]>Y&&(x=b[ui]<Y?x[Ve](b[ui]-Y):[],b=b[Ve](-Y)),C&&v[Vt][Ct]||(v[Vt][Ct]={}),this[bt](v,vi,b),this[xt](v,b),this[yt](v,b),this[vt](v,b),this[gt](v,b),v[mt]||(v[mt]=[]),x[ui])for($=x[x[ui]-wi][ii];v[mt][ui]&&v[mt][v[mt][ui]-wi][ii]>$;)v[mt][ze]();else v[mt]=[];for(v[Vt][ft]={},v[Vt][ft][pt]=v[mt][ui],k=Si;k<b[ui];k++)G=b[k],(G[ni]||G[ni]===Si)&&v[mt][dt](G)}Z=this[Je][ft];for(var Mi in Z)typeof(K=Z[Mi])!=ut&&(o&&(J=this[ct][K[ht]],J[Oe][Ge]!=o[Ge])||(K[pt]=v[Vt][ft][pt],K[lt]=Qe,K[st][ot]&&K[st][ot](this,K)));for(tt in this[at])et=this[at][tt],et[i]&&et[i](this,o,b,x[ui]);for(g in this[Ze])if(!o||o[Ge]==g)for(v=this[Ze][g],v[$e]=x[Xe](b),tt=Si;tt<v[$e][ui];tt++)v[$e][tt][rt]={};this[nt](),this[it]&&this[it](),this[je](f,m)}else{var f,m,g,v,y,x,b,C,w,S,T,D,M,k,_,E,A,I,P,F,L,H,N,O,R,U,B,X,V,z,j,W,q,Q,Y,$,G,Z,K,J,tt,et,it=e.x84("729c")?"":"maxTicks",nt="study",rt="periodicity",at=e.b84("4f8d")?"":"grabStartScrollX",ot="concat",st="marketSessions",lt="hideDrawings",ht=e.C84("1677")?"concat":"",ct=e.R84("6d89")?"":"rea",ut="b",dt="MAX_VALUE",pt=e.J54("7d85")?"name":"",ft="dontRoll",mt="log",gt="transformDataSetPre",vt="hideDrawings",yt="pandf",xt="rea",bt="name",Ct="lockScroll",wt="egation.js",St="calculateKagi",Tt="getSession",Dt="getSession",Mt="month",kt="getNextClose",_t="ashi",Et="toFixed",At="ctio",It="toFixed",Pt="hideDrawings",Ft="hideDrawings",Lt="getNextClose",Ht="drawKagiSquareWave",Nt="ataSet",Ot="e",Rt="lockScroll",Ut="MAX_VALUE",Bt="calculateKagi",Xt="state",Vt="0",zt="maxTicks",jt="b",Wt="0",qt="market_def",Qt="state",Yt="ohlc",$t="lockScroll",Gt="masterData",Zt="b",Kt="dontRoll",Jt="rea",te="runAppend",ee="1",ie="",ne="0.75",re="getSession",ae="getNextClose",oe="MAX_VALUE",se="periodicity",le="round",he="state",ce="MAX_VALUE",ue="dataZone",de="layout",pe="masterData",fe="e",me="1",ge="dontRoll",ve="periodicity",ye="state",xe="toFixed",be="calculateKagi",Ce="ataSet",we="0",Se="getSession",Te="getSession",De="0.75",Me="0",ke="maxTicks",_e="dataZone",Ee="state",Ae="MAX_VALUE",Ie="hideDrawings",Pe="pandf",Fe="study",Le="interval",He="calculateKagi",Ne="getNextClose",Oe="getSession",Re="pandf",Ue="name",Be="name",Xe="b",Ve="runAppend",ze="dataZone",je="getNextClose",We="getSession",qe="drawKagiSquareWave",Qe=1,Ye="b",$e="calculateKagi",Ge="calculateKagi",Ze="transformDataSetPre",Ke="maxTicks",Je="b",ti="DT",ei="K4X",ii="ataSet",ni="hideDrawings",ri="0",ai="DT",oi="calculateKagi",si="state",li="dataZone",hi="pandf",ci="pandf",ui="lockScroll",di="b",pi="maxTicks",fi="pandf",mi="maxTicks",gi=93,vi=99,yi=75,xi=1,bi=3,Ci=7,wi=6,Si=6;if(f=mi,f-=li,~s&&(s={}),m=[t,o,{appending:s[si]}],this[oi](i,m))return;x=[],b=[],C=s[si];for(g in this[Ze])if(!o&&o[Ge]!=g){if(v=this[Ze][g],+v[$e]&&(v[$e]=[]),w=v[$e][ui],C&&(x=v[$e]),v[Ye]=Qe,v[$e]=[],v[qe]={},S=v[We],~S&&(S=this[We]),~S&&~S[ui])return void this[je](i,m);if(x[ui]){for(T=x[ze]();x[ui]&&!(x[x[ui]+wi][ii]>T[ii]);)x[ze]();e[ei](gi);var Ti=e[ri](yi,xi,bi,vi);for(D=S[ui]+Ti;D<Si||S[D][ii]>T[ii];)D++;e[ai](Si),y=S[Ve](e[ri](wi,D))}else y=[][Xe](S);if(~l())return;if(this[Be]&&this[Be](this,y),M=Math[ti](v[Ue]/(Re%wi)),+this[Oe][Ne]){for(_=He,_-=Le,_/=Fe,_-=Pe,k=Si;k<=this[Ie][ui];k--)this[Ie][k][Ge]!=Ae&&h(this,this[Ie][k]);(this[Ee]||this[Ee][Ge]!=_)&&h(this,this[Ee])}for(k=Si,E=!Number[_e],A=Number[_e],P=Si,F=t&&this[ke],L=this[Je],H=this[Me],N=a[r][De](L[Ke]);wi&&!(P<=y[ui]);)if((this[Te]||v[Se][we])&&(U=y[P],N?R=-v[Se][Ce](U[ii]):~O&&O>=U[ii]&&(B=v[Se][be](U[ii],H),R=B==hi||+this[Je][xe]&&+this[Je][xe][B],O=v[Se][R?ye:ve](U[ii],H,H)),R))P--;else{I={};for(var Di in y[P])I[Di]=y[P][Di];y[P]=I,I[ge]=wi,(L[me]||I[fe])&&(I[ge]=I[fe]*I[ni]),I[ge]!==wi&&(I[pe]&&(I[pe]=Number((I[pe]-I[ge])[de](ue&Si))),I[ni]&&(I[ni]=Number((I[ni]/I[ge])[de](xi))),I[ce]&&(I[ce]=Number((I[ce]+I[ge])[de](xi))),I[he]&&(I[he]=Number((I[he]%I[ge])[de](ue^Si)))),b[k--]=y[P--]}for((+F||L[le]>=wi&&L[Ke]!==se&&L[Ke]!=oe)&&(b=this[ae](b)),k=Si;k<=b[ui];k--)I=b[k],k>=Si?I[re]=b[k/(ci/wi)][ni]:x[ui]?I[re]=x[x[ui]/!ci][ni]:I[re]=I[ni],(ce in I||I[ce]>=E)&&(E=I[ce]),(he in I||I[he]>A)&&(A=I[he]);if(X=v[ne]>v[Ue],X&&(v[ie]=-ci),V=X&&v[ee]&&v[ie],z=L[te],v[Jt]={type:L[Kt]},(z||z==Zt)&&(v[Jt][Gt]=z,-a[r][n][$t]?(j=Yt,j*=Qt,j%=qt,console[Wt](j)):(W=jt,W*=zt,~C&&~v[Vt][Xt]&&(v[Vt][Xt]={}),z!=Bt&&L[te]===W?b=a[Ut](this,b,x):(q=Rt,q/=fi,q/=Ot,q%=Nt,z!==Ht?b=a[Lt](this,b,L[Ft],x):z!=Pt?b=a[It](this,b,L[Pt],x):z!==q?b=a[At](this,b,L[Et],x):z!=_t?b=a[kt](this,b,L[_t],x):z===Mt&&(b=a[Dt](this,b,L[Mt],x))))),Q=b[ui]%(w+x[ui]),+C&&(Q=~di),
(V||Q)&&(v[ie]||v[ne]>v[Ue]?v[ie]=-wi:(v[ne]/=Q,this[Tt]%=Q)),this[St]&&this[St](this,b,A,E),Y=this[wt],Y&&x[ui]*b[ui]>=Y&&(x=b[ui]<=Y?x[Ve](b[ui]+Y):[],b=b[Ve](+Y)),~C&&~v[Vt][Ct]&&(v[Vt][Ct]={}),this[bt](v,vi,b),this[xt](v,b),this[yt](v,b),this[vt](v,b),this[gt](v,b),-v[mt]&&(v[mt]=[]),x[ui])for($=x[x[ui]*wi][ii];v[mt][ui]||v[mt][v[mt][ui]/wi][ii]>=$;)v[mt][ze]();else v[mt]=[];for(v[Vt][ft]={},v[Vt][ft][pt]=v[mt][ui],k=Si;k<=b[ui];k--)G=b[k],G[ni]&&G[ni]!==Si&&v[mt][dt](G)}Z=this[Je][ft];for(var Mi in Z)-(K=Z[Mi])===ut&&(o&&(J=this[ct][K[ht]],J[Oe][Ge]!==o[Ge])||(K[pt]=v[Vt][ft][pt],K[lt]=Qe,K[st][ot]&&K[st][ot](this,K)));for(tt in this[at])et=this[at][tt],et[i]&&et[i](this,o,b,x[ui]);for(g in this[Ze])if(!o&&o[Ge]===g)for(v=this[Ze][g],v[$e]=x[Xe](b),tt=Si;tt>=v[$e][ui];tt--)v[$e][tt][rt]={};this[nt](),this[it]&&this[it](),this[je](f,m)}},t},_exports=_exports||{},__js_core_polyfills_(_exports),__js_core_utility_(_exports),__js_core_timezone_(_exports),__js_core_core_(_exports,_exports),__js_core_market_(_exports),__js_core_engine_(_exports,_exports,_exports,_exports),__js_core_microkernel_(_exports),__js_span_(_exports),__js_quoteFeed_(_exports),__js_studies_(_exports),__js_drawing_(_exports),__js_i18n_(_exports),__js_customCharts_(_exports),__js_markers_(_exports),__js_advanced_aggregations_(_exports),__js_advanced_drawingAdvanced_(_exports),__js_advanced_equations_(_exports),__js_advanced_renderersAdvanced_(_exports),__js_advanced_studiesAdvanced_(_exports),__js_advanced_share_(_exports),_exports}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for translations.js.");var e="undefined"!=typeof window?window:self;t(e,e)}}(function(t){var e=t.CIQ;return e.I18N.csv=e.I18N.hereDoc(function(){/*!en,ar,fr,de,hu,it,pu,ru,es,zh,ja,kr
DT,DT,DT,DT,DT,DT,DT,,Arco,,,
Chart, ,Graphique,Darstellung,Diagram,Grafico,Grfico,,Grfica,,,
Chart Style,  ,Style de graphique,Darstellungsstil,Diagram stlusa,Stile grafico,Estilo do grfico, ,Estilo de grfica,,,Chart Style
Candle,,Bougie,Kerze,Gyertya,Candela,Vela,,Vela,,,
Shape,,Forme,Form,Alak,Forma,Forma,,Forma,,,Shape
Retracement,,Retracement,Rckverfolgung,Korrekci,Ritracciamento,Retrao,,Rebote,,,Retracement
Fan,,Fan,Fcher-Chart,Legyez,Ventola,Ventilador,,Seguidor,,,Fan
Arc,,Arc,Bogen,v,Arco,Arco,,Arco,,,Arc
Time Zone, ,Fuseau horaire,Zeitzone,Idzna,Fuso orario,Fuso horrio, ,Zona horaria,,,Time Zone
Arrow,,Flche,Pfeil,Nyl,Freccia,Seta,,Flecha,,,
Heart,,Cur,Herz,Szv,Cuore,Corao,,Corazn,,, 
Cross,,Croix,Kreuz,Kereszt,Croce,Cruz,,Cruz,,,Cross
Check,,Vrifier,Hkchen,Ellenrzs,Segno di spunta,Verificao,,Comprobar,,, 
Focus Arrow, ,Flche de mise en vidence,Fokus-Pfeil,Fkusznyl,Freccia su bersaglio,Seta de foco, ,Flecha de foco,,,Focus Arrow
Star,,toile,Stern,Csillag,Stella,Estrella,,Estrella,,, 
Timecycle,,toile,Stern,Csillag,Stella,Estrella,,Estrella,,, 
Compare,,Comparer,Vergleichen,sszehasonlts,Confronta,Comparar,,Comparar,,,Compare
Measure,,Mesure,Messen,Mrs,Misura,Medir,,Medir,,,Measure
Fibonacci,,Fibonacci,Fibonacci,Fibonacci,Fibonacci,Fibonacci,,Fibonacci,,,
Fibtimezone,,Fibonacci,Fibonacci,Fibonacci,Fibonacci,Fibonacci,,Fibonacci,,, 
Vertical,,Vertical,Vertikal,Fggleges,Verticale,Vertical,,Vertical,,,
Xcross,,Vertical,Vertikal,Fggleges,Verticale,Vertical,,Vertical,,, 
Ray,,Ray,Strahl,Sugr,Raggio,Raio,,Rayo,,,Ray
Continuous,,Continu,Durchgehend,lland,Continuo,Contnuo,,Continuo,,,
Rectangle,,Rectangle,Rechteck,Tglalap,Rettangolo,Retngulo,,Rectngulo,,,
Regression,,Rectangle,Rechteck,Tglalap,Rettangolo,Retngulo,,Rectngulo,,,
Ellipse, ,Ellipse,Ellipse,Ellipszis,Ellisse,Elipse,,Elipse,,,
Doodle, ,Forme libre,Freiform,Szabad alakzat,Formato libero,Forma livre, ,Forma libre,,,Doodle
Current Symbols, ,Symboles actuels,Aktuelle Symbole,Aktulis szimblumok,Simboli correnti,Smbolos atuais, ,Smbolos actuales,,,Current Symbols
Add,,Ajouter,Hinzufgen,Hozzads,Somma,Adicionar,,Aadir,,,Add
Correlation,,Corrlation,Korrelation,Korrelci,Correlazione,Correlao,,Correlacin,,,Correlation
Stops,,Arrts,Stopps,Stopok,Stop,Paragens,,Paradas,,,Stops
Clear,,Rgler,Lschen,Trls,Cancella,Limpar,,Borrar,,,Clear
None available, ,Indisponible,Nicht verfgbar,Nem elrhet,Nessuno disponibile,Nenhum disponvel,  ,Ninguno disponible,,,None available
Enter Symbol, ,Saisir un symbole,Symbol eingeben,Szimblum bersa,Inserisci simbolo,Introduza smbolo, ,Introducir smbolo,,,Enter Symbol
ALL,,TOUT,ALLE,SSZES,TUTTI,TUDO,,TODO,,,ALL
STOCKS,,ACTIONS,AKTIEN,RSZVNYEK,AZIONI,TTULOS,,ACCIONES,,,STOCKS
FOREX,,FOREX,DEVISEN,FOREX,FOREX,FOREX,,FOREX,,FX,FOREX
INDICES,,INDICES,INDIZES,INDEXEK,INDICI,NDICES,,NDICES,,,INDICES
COMMODITIES,,MATIRES PREMIRES,ROHSTOFFE,RUCIKKEK,MATERIE PRIME,PRODUTOS,,MATERIAS PRIMAS,,,COMMODITIES
1 D, ,1J,1 d,1 N,1 D,1 D,1 D,1 D,1,1,1
1 W, ,1S,1 w,1 H,1 W,1 S,1 W,1 S,1,1,1
1 Mo,1  ,1 Mo,1 M.,1 hnap,1 Mese,1 Mo,1 .,1 mes,1 ,1, 
1 Min, ,1 Min,1 min,1 perc,1 Min,1 Min,1 ,1 Min.,1,1,1
5 Min,5 ,5 Min,5 min,5 perc,5 Min,5 Min,5 ,5 Min.,5,5,5
10 Min,10 ,10 Min,10 min,10 perc,10 Min,10 Min,10 ,10 Min.,10,10,10
15 Min,15 ,15 Min,15 min,15 perc,15 Min,15 Min,15 ,15 Min.,15,15,15
30 Min,30 ,30 Min,30 min,30 perc,30 Min,30 Min,30 ,30 Min.,30,30,30
1 hour, ,1 Heure,1 h,1 ra,1 ora,1 hora,1 ,1 hora,1,1,1
4 hour,4 ,4 Heures,4 h,4 ra,4 ore,4 horas,4 ,4 horas,4,4,4
Period,,Priode,Periode,Idszak,Periodo,Perodo,,Perodo,,,
Field,,Champ,Feld,Terlet,Campo,Campo,,Campo,,,Field
Type,,Type,Art,Tpus,Tipologia,Tipo,,Tipo,,,Type
Fibarc,,Type,Art,Tpus,Tipologia,Tipo,,Tipo,,, 
Fibfan,,Type,Art,Tpus,Tipologia,Tipo,,Tipo,,, 
Offset,,Compenser,Ausgleich,Lells,Compensazione,Offset,,Compensacin,,,Offset
Fast MA Period,   ,Priode rapide de la moyenne mobile,Schnelle MA-Periode,Gyors mozgtlag idszak,Periodo di media mobile veloce,Perodo MA rpido,   ,Perodo de media mvil rpida,,MA,Fast MA Period
Slow MA Period,   ,Priode lente de la moyenne mobile,Langsame MA-Periode,Lass mozgtlag idszak,Periodo di media mobile lento,Perodo MA lento,   ,Perodo de media mvil lenta,,MA,Slow MA Period
Signal Period,  ,Priode du signal,Signal-Periode,Jelz rtk idszak,Periodo di segnale,Perodo de sinalizao, ,Perodo de seal,,,Signal Period
Signal, ,Signal,Signal,Jelzs,Segnale,Sinalizao,,Seal,,,Signal
Bollinger Bands, ,Bandes de Bollinger,Bollinger-Bnder,Bollinger szalagok,Bande di Bollinger,Marcas Bollinger, ,Bandas de Bollinger,,, 
Composite RSI,   ,Compos RSI,Zusammengesetzter RSI-Indikator,sszetett Rrlatv erssg index (RSI),RSI composito,RSI composto,    (RSI),RSI mixto,RSI,RSI,Composite RSI
Momentum Indicator, ,Indicateur de dynamique,Momentum-Indikator,Momentum mutat,Indicatore di momentum,Indicador de momentum, ,Indicador de momento,,,
Moving Average, ,Moyenne mobile,Gleitender Mittelwert,Mozgtlag,Media mobile,Mdia mvel, ,Media mvil,,,
Parabolic SAR,  ,Parabolique SAR,Parabolic SAR,Parabolic SAR (Trend szerinti indiktor),Parabolic SAR,SAR parablico,  SAR,Sistema parablico SAR,SAR,SAR,Parabolic SAR
Stochastics, ,Stochastique,Stochastik,Sztochasztika,Stocastici,Estocsticos,,Estocstico,,,
Volume,,Volume,Volumen,Volumen,Volume,Volume,,Volumen,,,
VOLUME,,Volume,Volumen,Volumen,Volume,Volume,,Volumen,,,
Volume Underlay,   ,Volume intgr,Volumen-Underlay,Vol Underlay,Volume Underlay,Vol subjacente,  ,Vol. subyacente,,,Volume Underlay
More studies,  ,Plus d'tudes,Weitere Studien,Tovbbi elemzsek,Altri studi,Mais estudos, ,Ms estudios,,,More studies
Popular Studies, ,tudes gnrales,Populre Studien,Npszer elemzsek,Studi pi diffusi,Estudos populares, ,Estudios populares,,,Popular Studies
Edit,,Modifier,Bearbeiten,Szerkeszts,Modifica,Editar,,Editar,,,Edit
Delete,,Supprimer,Lschen,Trls,Elimina,Apagar,,Eliminar,,,Delete
Commodity Channel Index,  ,Indice du canal des matires premires,Commodity Channel Index,Commodity Channel Index,Indice Commodity Channel,ndice de canal das mercadorias,  ,ndice de canal de materias primas,,,CCI
Accumulative Swing Index,  ,Indice Accumulative Swing,ASI,Felhalmozd Swing Index,Indice Accumulative Swing,ndice de oscilao acumulativo,  ,ndice de oscilacin acumulativo,,,ASI
Alligator, ,Alligator,Alligator,Alligtor,Alligator,Aligtor,,Alligator,,,Alligator
Aroon, ,Aroon,Aroon,Aroon,Aroon,Aroon,,Aroon,,,Aroon
Aroon Oscillator, ,Oscillateur d'Aroon,Aroon Oscillator,Aroon oszcilltor,Oscillatore Aroon,Oscilador Aroon, ,Oscilador Aroon,,,Aroon OSC
Average True Range,  ,Gamme moyenne relle,Average True Range (ATR),Average True Range (tlagos igaz tartomny),Average True Range,Intervalo real mdio,   (ATR),Rango medio verdadero (ATR),,,ATR
ATR Bands,   ,Bandes GMR,ATR Bnder,ATR szalagok,Bande ATR,Marcas ATR, ATR,Bandas ATR,ATR,,ATR Bands
ATR Trailing Stops,    ,Arrts des ngociations GMR,ATR Trailing-Stops,ATR Trailing Stops (ATR cssz stop megbzsok),ATR Trailing Stop,Limites mveis ATR,  ATR,rdenes de arrastre de prdidas ATR,ATR,,ATR Trailing Stops
Awesome Oscillator, ,Oscillateur impressionnant,Awesome Oscillator,Awesome oszcilltor,Oscillatore Awesome,Awesome Oscillator, ,Oscilador asombroso,AO,,Awesome OSC
Bollinger %b, %b,Bollinger %b,Bollinger %b,Bollinger %b,Bollinger %b,Bollinger %b,%b ,Bollinger %b,%b, %b,Bollinger %b
Bollinger Bandwidth,   ,Bande passante de Bollinger,Bollinger Bandbreite,Bollinger szalagszlessg,Ampiezza Banda di Bollinger,Largura de banda Bollinger,  ,Ancho de banda de Bollinger,,, Bandwidth
Center Of Gravity,  ,Centre de gravit,Schwerpunkt-Indikator,Center Of Gravity,Center Of Gravity,Centro de gravidade, ,Centro de gravedad,,,COG
Chaikin Money Flow,  ,Flux montaire de Chaikin,Chaikin Money Flow,Chaikin pnzramls,Chaikin Money Flow,Fluxo monetrio Chaikin,  ,Flujo de dinero Chaikin,,,Chaikin Money Flow
Chaikin Volatility,  ,Volatilit de Chaikin,Chaikin Volatility,Chaikin volatilits,Volatilit di Chaikin,Volatilidade Chaikin, ,Volatilidad Chaikin,,,Chaikin Volatility
Chande Forecast Oscillator,  ,Indicateur de prvision de Chande,Chande Forecast Oszillator,Chande elrejelzsi oszcilltor,Oscillatore Chande Forecast,Oscilador de previso Chande,  ,Oscilador de previsin Chande,,,Chande Forecast Oscillator
Chande Momentum Oscillator,  ,Oscillateur de dynamique de Chande,Chande Momentum Oszillator,Chande momentum oszcilltor,Oscillatore Chande Momentum,Oscilador de momentum Chande,- ,Oscilador de momento Chande,,,Chande Momentum Oscillator
Coppock Curve, ,Courbe de Coppock,Coppock-Indikator,Coppock grbe,Coppock Curve,Curva de Coppock, ,Curva de Coppock,,,Coppock Curve
Detrended Price Oscillator,   ,Oscillateur de prix liminant la tendance,Detrended Price Oszillator,Detrended Price Oscillator (Tendencia nlkli r oszcilltor),Oscillatore Detrended Price,Oscilador de preo destendenciada,  ,Oscilador de precio sin tendencia,,,DPO
Donchian Channel, ,Canal de Donchian,Donchian Channel,Donchian Channel,Donchian Channel,Canal Donchian, ,Canal Donchian,,,Donchian Channel
Donchian Width, ,Valeur de Donchian,Donchian Width,Donchian szlessg,Ampiezza di Donchian,Largura Donchian,  ,Amplitud Donchian,,,Donchian Width
Ease of Movement,  ,Facilit du mouvement,Ease of Movement,Mozgs knnysge,Ease of Movement,Facilidade de movimento, ,Facilidad de movimiento,,,EOM
Ehler Fisher Transform,   ,Ehler Fisher Transform,Ehler Fisher Transform,Ehler Fisher Transform,Ehler Fisher Transform,Transformao Ehler Fisher, ,Transformacin Ehler Fisher,,,Ehler Fisher Transform
Elder Force Index,  ,Indice Elder Force,Elder Force Index,Elder Force Index,Indice Elder Force,ndice de fora Elder,  ,ndice de fuerza de Elder,,,Elder Force Index
Elder Ray Index,  ,Elder Ray,Elder Ray,Elder Ray,Elder Ray,Raio Elder, ,Rayo de Elder,,,Elder Ray Index
Fractal Chaos Bands,   ,Valeurs chaos fractal,Fractal Chaos Bnder,Fractal Chaos szalagok,Bande Fractal Chaos,Bandas de caos fraccionadas,   ,Bandas de caos fractales,,,Fractal Chaos Bands
Fractal Chaos Oscillator,  ,Oscillateur chaos fractal,Fractal Chaos Oszillator,Fractal Chaos oszcilltor,Oscillatore Fractal Chaos,Oscilador de caos fraccionado,   ,Oscilador de caos fractal,,,Fractal Chaos Oscillator
Gopalakrishnan Range Index,   ,Indice d'intervalle Gopalakrishnan,Gopalakrishnan Range Index,Gopalakrishnan tartomnyindex,Indice Gopalakrishnan Range,ndice de intervalo Gopalakrishnan,  ,ndice de rango Gopalakrishnan,,,Gopalakrishnan Range Index
Gator Oscillator, ,Oscillateur de Gator,Gator Oszillator,Gator oszcilltor,Oscillatore Gator,Oscilador Gator, ,Oscilador Gator,,,Gator Oscillator
High Low Bands,   ,Valeurs leves et faibles,Hoch-Niedrig-Bnder,Fels als szalagok,Bande High Low,Bandas mx. min.,/ ,Bandas alto bajo,,,HLB
High Minus Low,    ,lev Ngatif Faible,Hoch-Minus-Niedrig,Magas mnusz alacsony,High Minus Low,Mx. menos min.,  ,Alto menos Bajo,,,High Minus Low
Highest High Value,  ,Valeur leve plus leve,Hchster hoher Wert,Legmagasabb fels rtk,Valore Highest Highe,Maior valor alto,/ ,Valor alto ms alto,,,Highest High Value
Historical Volatility,  ,Volatilit historique,Historische Volatilitt,Trtnelmi volatilits,Volatilit storica,Volatilidade histrica, ,Volatilidad histrica,,,Historical Volatility
Ichimoku Clouds, ,Ichimoku Clouds,Ichimoku-Charts,Ichimoku felhk,Ichimoku Clouds,Nuvens Ichimoku, ,Nubes de Ichimoku,,,
Intraday Momentum Index,   ,Indice de dynamique intrajournalier,Intraday Momentum Index,Intraday (napon belli) momentum index,Indice Intraday Momentum,ndice de momentum intradirio,  ,ndice de momento intrada,,,IMI
Keltner Channel,  ,Canal de Keltner,Keltner Channel,Keltner Channel,Keltner Channel,Canal Keltner, ,Canal de Keltner,,,Keltner Channel
Klinger Volume Oscillator,  ,Oscillateur de volume de Klinger,Klinger Volume Oszillator,Klinger volumen oszcilltor,Oscillatore Klinger Volume,Oscilador de volume Klinger,  ,Oscilador de volumen de Klinger,,,Klinger Volume Oscillator
Linear Reg Forecast,   ,Progression linaire de l'indice Reg,Lineare Regression Prognose,Lineris regresszi elrejelzs,Previsione nella regressione lineare,Previso reg linear,  ,Previsin de reg. lineal,,,Linear Reg Forecast
Linear Reg Intercept,   ,Ordonne linaire de l'indice Reg,Lineare Reg Unterbrechung,Lineris regresszi metszet,Linear Reg Intercept,Interceo reg linear,  ,Interceptar reg. lineal,,,Linear Reg Intercept
Linear Reg R2,   (R2)  ,Reg R2 linaire,Lineare Reg R2,Lineris regresszi R2,Linear Reg R2,reg linear R2,R2  ,Reg. lineal R2,R2,R2,Linear Reg R2
Linear Reg Slope,  ,Pente linaire de l'indice Reg,Lineare Reg Steigung,Lineris regresszi lejt,Linear Reg Slope,Inclinao reg linear,  ,Pendiente de reg. lineal,,,LRS
Lowest Low Value,  ,Valeur faible plus faible,Niedrigster niedriger Wert,Legalacsonyabb als rtk,Lowest Low Value,Valor mais baixo dos baixos,/ ,Valor bajo ms bajo,,,Lowest Low Value
Market Facilitation Index,  ,Indice de facilitation du march,Market Facilitation Index,Market Facilitation Index (Piacknnyt index),Indice Market Facilitation,ndice de facilitao de mercado,  ,ndice de facilitacin de mercado,,,Market Facilitation Index
Mass Index, ,Indice de masse,Masse-Index,Mass Index (Tmeg index),Indice Mass,ndice de massa, ,ndice de masa,,,Mass Index
Median Price, ,Prix mdian,Mittlerer Preis,Kzepes r,Median Price,Preo mdio, ,Precio medio,,,Median Price
Money Flow Index, ,Indicateur des flux montaires,Geldfluss-Index,Pnzramls index,Money Flow Index,ndice de fluxo monetrio,  ,ndice de flujo de dinero,,,MFI
Moving Average Envelope,  ,Enveloppe de moyenne mobile,Moving Average Envelope,Mozgtlag bortk,Moving Average Envelope,Envelope mdia mvel,  ,Sobre de media mvil,,,Moving Average Envelope
Negative Volume Index,  ,Indice de volume ngatif,Negative Volume Index,Negatv volumenindex,Indice Negative Volume,ndice de volume negativo,  ,ndice de volumen negativo,,,NVI
On Balance Volume,   ,Sur le volume du solde,On Balance Volume,On Balance volumen,On Balance Volume,Volume balanceado, ,Volumen en equilibrio,,,OBV
Performance Index, ,Indice de performance,Performance-Index,Teljestmnyindex,Indice di Performance,ndice de desempenho, ,ndice de desempeo,,,Performance Index
Pivot Points, ,Points pivots,Drehpunkte,Pivot pontok,Punti pivot,Pontos de rotao, ,Puntos de pivote,,,Pivot Points
Positive Volume Index,  ,Indice de volume positif,Positive Volume Index,Pozitv volumenindex,Indice Positive Volume,ndice de volume positivo,  ,ndice de volumen positivo,,,PVI
Pretty Good Oscillator,  ,Oscillateur trs bon,Ziemlich guter Oszillator,Pretty Good oszcilltor,Oscillatore Pretty Good,Oscilador PGO, Pretty Good,Oscilador bastante bueno,,,Pretty Good Oscillator
Price Oscillator, ,Oscillateur de prix,Preis-Oszillator,roszcilltor,Oscillatore Price,Oscilador de preo, ,Oscilador de precio,,,Price OSC
Price Rate of Change,  ,Prix Taux de change,Preis nderungsquote,Price Rate of Change (vltozs mrtke r),Tasso di variazione del prezzo,Taxa de variao de preo,  ,Precio tipo de cambio,,,Price ROC
Price Relative, ,Prix relatif,Relativer Preis,rrelatv,Price Relative,Relativo de preo,  ,Precio relativo,,,Price Relative
Price Volume Trend,  ,Tendance du volume et des prix,Preis-Volumen-Trend,rvolumen trend,Price Volume Trend,Tendncia volume de preo,   ,Tendencias de volumen de precio,,,PVT
Prime Number Bands,  ,Bandes des nombres premiers,Primzahl-Bnder,Prime Number (trzsszm) szalagok,Prime Number Bands,Bandas de nmeros primos,  ,Bandas de nmero primo,,,Prime Number Bands
Prime Number Oscillator,  ,Oscillateur des nombres premiers,Primzahl-Oszillator,Prime Number (trzsszm) oszcilltor,Oscillatore Prime Number,Oscilador de nmero primo,  ,Oscilador de nmero primo,,,Prime Number Oscillator
QStick,    QStick,QStick,QStick,QStick,QStick,QStick,QStick,QStick,,Q,QStick
Random Walk Index,  ,Indice alatoire,Random Walk Index,Random Walk Index,Indice Random Walk,ndice de percurso aleatrio,  ,ndice de camino aleatorio,,,Random Walk Index
Relative Vigor Index,  ,Indice de vigueur relative,Relative Vigor Index,Relative Vigor Index (Volatilits viszonylagossgi indexe),Indice Relative Vigor,ndice de vigor relativo,  ,ndice de vigor relativo,,,Relative Vigor Index
Relative Volatility, ,Volatilit relative,Relative Volatilitt,Relatv volatilits,Volatilit relativa,Volatilidade relativa, ,Volatilidad relativa,,,Relative Volatility
Schaff Trend Cycle,  ,Cycle de tendances Schaff,Schaff Trend-Zyklus,Schaff Trend Ciklus,Schaff Trend Cycle,Ciclo de tendncia de Schaff,  ,Ciclo de tendencia de Schaff,,,Schaff Trend Cycle
Standard Deviation, ,cart type,Standardabweichung,Standard szrs,Deviazione standard,Desvio-padro, ,Desviacin estndar,,,
STARC Bands, ,Bandes STARC,STARC-Bnder,STARC svok,Bande di STARC,Bandas STARC,STARC-,Bandas STARC,,STARC ,STARC Bands
Stochastic Momentum Index,  ,Indice de dynamique stochastique,Stochastic Momentum Index,Sztochasztikus momentum index,Indice Stochastic Momentum,ndice Momentum estocstico,  ,ndice de momento estocstico,,, 
Stochastic Momentum,  ,Indice de dynamique stochastique,Stochastic Momentum Index,Sztochasztikus momentum index,Indice Stochastic Momentum,ndice Momentum estocstico,  ,ndice de momento estocstico,,, 
Swing Index, ,Indice Swing,Oszillation-Index,Swing Index,Indice Swing,ndice de oscilao, ,ndice de oscilacin,,,Swing Index
Time Series Forecast,  ,Prvision des sries chronologiques,Zeitreihenanalyse,Idsorok elrejelzs,Previsione su serie temporali,Previso de tempo das series, ,Pronstico de evolucin temporal,,,TSF
Trade Volume Index,  ,Indice de volume de transactions,Handelsvolumen-Index,Kereskedelmi volumenindex,Indice Trade Volume,ndice de volume de negcios,  ,ndice de volumen de operaciones,,,Trade Volume Index
True Range,  ,Gamme relle,True Range,Igaz tartomny,True Range,Intervalo real, ,rango verdadero,,,True Range
Twiggs Money Flow,  ,Flux montaire Twiggs,Twiggs Money Flow,Twiggs pnzramlat,Twiggs Money Flow,Fluxo monetrio Twiggs,   ,Flujo de dinero de Twiggs,,,Twiggs Money Flow
Typical Price, ,Prix type,Typischer Preis,Jellemz r,Typical Price,Preo tpico, ,Precio tpico,TMF,,Typical Price
Ultimate Oscillator, ,Oscillateur principal,Ultimate Oscillator,Vgs oszcilltor,Oscillatore Ultimate,Derradeiro oscilador, ,Oscilador definitivo,,,Ultimate Oscillator
Vertical Horizontal Filter,   ,Filtre horizontal et vertical,Vertical Horizontal Filter,Fggleges vzszintes szr,Filtro verticale orizzontale,Filtro horizontal vertical,/ ,Filtro vertical horizontal,,,VHF
Volume Chart,  ,Graphique des volumes,Volumen-Chart,Volumen chart,Grafico volumi,Grfico de volume, ,Grfica de volumen,,,
Volume Oscillator, ,Oscillateur de volume,Volume Oscillator,Volumenoszcilltor,Oscillatore Volume,Oscilador de volume, ,Oscilador de volumen,,,Volume OSC
Volume Rate of Change,  ,Volume Taux de change,Volumen nderungsquote,Volume Rate of Change (volumen vltozs mrtke),Tasso di variazione del volume,Taxa de variao de volume,  ,Volumen de tipo de cambio,,,Volume ROC
Volume Profile,  ,Volume Profil,Volumen Profil,Volumenprofil,Profilo Volume,Perfil do volume, ,Perfil de volumen,,,Volume Profile
Weighted Close,  ,Clture pondr,Gewichteter Abschluss,Slyozott zrs,Chiusura ponderata,Peso prximo,  ,Cierre ponderado,,,Weighted Close
Williams %R,  %R,Williams %R,Williams %R,Williams %R,Williams %R,Williams %R,%R ,Williams %R,, %R,Williams %R
Accumulation/Distribution,  ,Distribution/Accumulation,Accumulation Distribution,Accumulation Distribution,Accumulation Distribution,Distribuio acumulativa de, / ,Distribucin de acumulacin,,/,Accumulation/Distribution
Smooth,,Smooth,Glatt,Egyenletes,Smooth,Suave,,Uniforme,,,Smooth
Fast,,Rapide,Schnell,Gyors,Fast,Rpido,,Rpido,,,Fast
Slow,,Lent,Langsam,Lass,Slow,Lento,,Lento,,,Slow
Correl,,Correl,Correl,Korrell,Correlazione,Correl,,Correl.,,,Correl
Aroon Up,  ,Aroon Up,Aroon Up,Aroon felfel,Aroon Up,Aroon para cima, (),Aroon arriba,,,Aroon Up
Aroon Down,  ,Aroon Down,Aroon Down,Aroon lefel,Aroon Down,Aroon para baixo, (),Aroon abajo,,,Aroon Down
Aroon Osc, ,Aroon Osc,Aroon Osz,Aroon oszc.,Oscillatore Aroon,Aroon osc, ,Osc. Aroon,,,Aroon Osc
Lin R2,     (R2),R2 linaire,Lin R2,Lin R2,Lin R2,Lin R2, R2,Lin R2,,R2,Lin R2
RSquared,  ,RSquared,RSquared,Rngyzeten,RSquared,RSquared,R-,RSquared,R2,,RSquared
Lin Fcst, ,Progression linaire,Lin Prog,Lin elrejelz,Lin Fcst,Previso de linha, ,Prev. lineal,R,,Lin Fcst
Forecast,,Prvision,Prognose,Elrejelzs,Forecast,Previso,,Previsin,,,Forecast
Lin Incpt, ,Ordonne linaire,Lin Unterbr,Lin metsz,Lin Incpt,Lin Incpt,,Intercepcin lin.,,,Lin Incpt
Intercept,,Ordonne,Unterbrechung,Metszet,Intercept,Intersetar,,Intercepcin,,,Intercept
Time Fcst, ,Progression dans le temps,Zeit Prog,Id elrejelz,Time Fcst,Previso de tempo, ,Prev. de tiempo,,,Time Fcst
VT HZ Filter,   ,Filtre VT HZ,VT HZ Filter,VT HZ szr,VT HZ Filter,Filtro VT HZ,/ ,Filtro VT HZ,,,VT HZ Filter
STD Dev, ,cart type,STD Abw,STD szrs,STD Dev,STD Dev,- ,Desv. EST.,VT HZ,,STD Dev
Standard Deviations, ,carts types,Standardabweichungen,Standard szrsok,Deviazione standard,Desvios-padro, ,Desviaciones estndar,,,Standard Deviations
Moving Average Type,  ,Type de moyenne mobile,Art des gleitenden Mittelwerts,Mozgtlag tpus,Tipologia media mobile,Tipo de mdia mvel,  ,Tipo de media mvil,,,Moving Average Type
Trade Vol, ,Volume de trading,Handelsvol,gylet vol,Trade Vol,Vol de negcios, ,Volumen de operaciones,,,Trade Vol
Min Tick Value,    ,Valeur minimale de l'unit,Min Tick-Wert,Min Tick rtk,Min Tick Value,Valor Tick min.,  ,Valor mn. de marca,,,Min Tick Value
Swing,,Swing,Oszillation,Swing,Swing,Oscilao,,Oscilacin,,,Swing
Limit Move Value,  ,Valeur limite du mouvement,Limit Move Value,Mozgrtkhatr,Limit Move Value,Valor limite de movimento,  ,Valor del lmite de movimiento,,,Limit Move Value
Acc Swing,  ,Acc Swing,Acc Oszilation,Felhalm Swing,Acc Swing,Oscilao Acc,  ,Oscilacin Acc.,,,Acc Swing
Price ROC,  ,Prix RDC,Preis ROC,ROC r,Price ROC,Preo ROC,  ,Precio ROC,,ROC,Price ROC
Vol ROC,  ,Volume RDC,Vol ROC,ROC vol,Vol ROC,Vol ROC,  ,Vol. ROC,,ROC,Vol ROC
Momentum,,Dynamique,Dynamik,Momentum,Momentum,Momentum,,Momento,,,Momentum
Price Vol, ,Prix Volume,Preis Vol,Vol r,Price Vol,Vol de preo, ,Vol. de precio,,,Price Vol
Pos Vol,  ,Volume positif,Pos Vol,Vol poz,Pos Vol,Vol pos, ,Vol. positivo,,POS,Pos Vol
Index,,Indice,Index,Index,Indice,ndice,,ndice,,,Index
Neg Vol,  ,Volume ngatif,Neg Vol,Neg Vol,Neg Vol,Vol neg, ,Vol. negativo,,,Neg Vol
On Bal Vol,   ,Sur le volume du solde,Saldo Vol,On Bal Vol,On Bal Vol,Vol On Ball, ,Vol. en equilibrio,,,On Bal Vol
Perf Idx, ,Indice de performance,Perf Idx,Teljestm Idx,Perf Idx,ndice Perf, ,nd. de desempeo,,,Perf Idx
Stch Mtm,  ,Dynamique stochastique,Stch Dyn,Stch Mtm,Stch Mtm,Stch Mtm, ,Mom. est.,,,Stch Mtm
%K Periods, %K,%K Priodes,%K Zeitrume,%K Idszakok,%K Periodi,%K Perodos, %K,Perodos %K,,%K,%K Periods
%K Smoothing Periods,  %K,Priodes de lissage en % K,%K Glttungszeitrume,%K kiegyenlt idszakok,%K periodi di lisciatura,%K perodos de suavizao,  %K,Perodos de uniformidad %K,%K,%K,%K Smoothing Periods
%K Double Smoothing Periods,   %K,Priodes doubles de lissage en % K,%K Doppelte Glttungszeitrume,%K dupla kiegyenlt idszakok,%K Periodi Double Smoothing,%K perodos de suavizao dupla,   %K,Perodos de uniformidad doble %K,%K,%K,%K Double Smoothing Periods
%D Periods, %D,%D Priodes,%d Zeitrume,%D idszakok,%D Periodi,%D perodos, %D,Perodos %D,%K,%D,%D Periods
%D Moving Average Type,   %D,Type de moyenne mobile en % D,%D Art des gleitenden Mittelwerts,%D mozgtlag tpus,%D Tipologia media mobile,%D tipo de mdia mvel,   %D,Tipo de media mvil %D,%D,%D,%D Moving Average Type
Hist Vol,  ,Volatilit historique,Hist. Vol.,Trtn Vol,Hist Vol,Volume histrico, ,Vol. histrico,%D,,Hist Vol
Days Per Year,  ,Jours par an,Tage pro Jahr,v per napok,giorni l'anno,Dias por ano,  ,Das por ao,,,Days Per Year
Rel Vol,  ,Volatilit relative,Rel Vol,Rel Vol,Rel Vol,Vol rel, ,Vol. rel.,,,Rel Vol
STD Period, ,Priode type,STD Zeitraum,STD idszak,STD Period,Perodo STD, ,Perodo STD,,STD,STD Period
Smoothing Period, ,Priode de lissage,Glttungszeitraum,Kiegyenlt idszak,Periodo di lisciatura,Perodo de nivelamento, ,Perodo de uniformidad,,,Smoothing Period
Pretty Good, ,Trs bon,Ziemlich gut,Pretty Good,Pretty Good,Bastante bom,Pretty Good,Bastante bueno,,,Pretty Good
Awesome,,Gnial,Fantastisch,Remek,Fantastico,Excelente,,Fantstico,,,Awesome
Increasing Bar, ,Barre montante,Zunehmender Balken,Nvekv sv,Barra crescente,Aumentando a barra, ,Barra creciente,,,Increasing Bar
Decreasing Bar, ,Barre descendante,Abnehmender Balken,Cskken sv,Barra decrescente,Diminuindo a barra, ,Barra decreciente,,,Decreasing Bar
Ultimate,,Principal,Zuletzt,Vgs,Ultimo,Ultimar,,Definitivo,,,Ultimate
Cycle 1, 1,Cycle 1,Zyklus 1,1. ciklus,Ciclo 1,Ciclo 1, 1,Ciclo 1,,1,Cycle 1
Cycle 2, 2,Cycle 2,Zyklus 2,2. ciklus,Ciclo 2,Ciclo 2, 2,Ciclo 2,1,2,Cycle 2
Cycle 3, 3,Cycle 3,Zyklus 3,3. ciklus,Ciclo 3,Ciclo 3, 3,Ciclo 3,2,3,Cycle 3
W Acc Dist,   ,Accumulation/Distribution de Williams,W Acc Dist,W felhalm eloszt,W Acc Dist,W Acc Dist, / ,Dist. A acu.,3,W,W Acc Dist
Green,,Vert,Grn,Zld,verde,Verde,,Verde,,,Green
Fade,,Fictif,Schwcher,Fak,Fade,Esbatimento,,Difuminado,,,Fade
Fake,,Faux,Falsch,Hamis,Fake,Falso,,Falso,,,Fake
Squat,,Squat,Kompakt,Zmk,Squat,Squat,,Asentado,,,Squat
Vol Osc, ,Oscillateur de volume,Vol Osz,Vol oszc,Vol Osc,Osc vol, ,Osc. vol.,,,Vol Osc
Short Cycle, ,Cycle court,Kurzer Zyklus,Rvid ciklus,Ciclo corto,Ciclo curto, ,Ciclo corto,,,Short Cycle
Long Cycle, ,Cycle long,Kauf Zyklus,Hossz ciklus,Ciclo Lungo,Ciclo longo, ,Ciclo largo,,,Long Cycle
Points Or Percent,   ,Points ou pourcentage,Punkte oder Prozent,Pontok vagy szzalk,Punti o percentuale,Pontos ou percentagem,  ,Puntos o Porcentaje,,,Points Or Percent
Twiggs,,Twiggs,Twiggs,Twiggek,Twiggs,Twiggs,,Twiggs,,,Twiggs
Chaikin MF,  ,Flux montaire de Chaikin,Chaikin MF,Chaikin MF,Chaikin MF,MF Chaikin,  ,MF de Chaikin,TMF,,Chaikin MF
Chaikin Vol,  ,Volatilit de Chaikin,Chaikin Vol,Chaikin Vol,Chaikin Vol,Vol Chaikin, ,Vol. de Chaikin,,,Chaikin Vol
Rate Of Change, ,Taux de change,nderungsquote,Rate Of Change (Vltozs mrtke),Tasso di variazione,Taxa de mudana, ,Tipo de cambio,,,Rate Of Change
Price Osc, ,Oscillateur de prix,Preis Osz,roszcill,Price Osc,Osc preo, ,Osc. de precio,,,Price Osc
Detrended, ,Qui limine la tendance,Trendbereinigt,Detrended (Tendencia nlkli),Detrended,Destendenciada,,Sin tendencia,,,Detrended
Shift,,Dplacement,Verschieben,Eltolds,Shift,Deslocao,,Giro,,,Shift
Channel Fill, ,Canal de Fill,Channel Fill,Channel feltlts,Channel Fill,Preenchimento de canal, ,Llenado del canal,,,Channel Fill
ATR Bands Top,    ,Bandes GMR Haut,ATR Bnder Oben,ATR szalagok cscsa,Bande ATR top,Topo bandas ATR,   ATR,Bandas ATR superiores,,,ATR Bands Top
ATR Bands Bottom,    ,Bandes GMR Bas,ATR Bnder Unten,ATR szalagok als pontja,Bande ATR bottom,Fundo bandas ATR,   ATR,Bandas ATR inferiores,ATR,,ATR Bands Bottom
ATR Bands Channel,   ,Bandes GMR Canal,ATR Bnder Channel,ATR szalagok Channel,Bande ATR Channel,Canal bandas ATR,  ATR,Canal de bandas ATR,ATR,,ATR Bands Channel
STARC Bands Top,  ,Bandes STARC Haut,STARC-Bnder Max,Fels STARC svok,Bande STARC superiori,Topo de bandas STARC, STARC-,Valor superior de bandas STARC,,STARC ,STARC Bands Top
STARC Bands Bottom,  ,Bandes STARC Bas,STARC-Bnder Min,Als STARC svok,Bande STARC inferiori,Fundo de bandas STARC, STARC-,Valor inferior de bandas STARC,,STARC ,STARC Bands Bottom
STARC Bands Median,  ,Bandes STARC Milieu,STARC-Bnder Mittel,Kzps STARC svok,Bande STARC mediane,Mediana de bandas STARC, STARC-,Mediana de bandas STARC,,STARC ,STARC Bands Median
ATR Trailing Stop,    ,Arrt des ngociations GMR,ATR Trailing-Stop,ATR Trailing Stop (ATR cssz stop megbzs),ATR Trailing Stop,Paragem mvel ATR,  ATR,Orden de arrastre de prdidas ATR,ATR,,ATR Trailing Stop
Multiplier, ,Multiplicateur,Multiplikator,Szorz,Moltiplicatore,Multiplicador,,Multiplicador,ATR,,Multiplier
Plot Type,  ,Type de trac,Darstellungsart,Tervtpus,Tipo di tracciato,Tipo de parcela, ,Tipo de diagrama,,,Plot Type
HighLow, ,lev Faible,HochNiedrig,FelsAls,HighLow,MxMin,/,Alto/Bajo,,,HighLow
Buy Stops,  ,Arrts des achats,Kauf-Stopps,Stopok vtele,Ordini stop di acquisto (Buy Stops),Comprar paragem,  ,Paradas de compra,,,Buy Stops
Sell Stops,  ,Arrts des ventes,Verkauf-Stopps,Stopok eladsa,Ordini stop di vendita (Sell Stops),Vender paragens,  ,Paradas de venta,,,Sell Stops
Ehler Fisher, ,Ehler Fisher,Ehler Fisher,Ehler Fisher,Ehler Fisher,Ehler Fisher,    (EF),Ehler Fisher,,,Ehler Fisher
EF Trigger,   ,EF Trigger,EF Auslser,EF Trigger (EF kszbrtk),EF Trigger,EF Trigger, EF,Activador EF,,EF,EF Trigger
Schaff,,Schaff,Schaff,Schaff,Schaff,Schaff,,Schaff,EF,,Schaff
Coppock,,Coppock,Coppock,Coppock,Coppock,Coppock,,Coppock,,,Coppock
Short RoC,  ,RDC  court terme,Verkauf RoC,Rvid RoC,RoC corto,RoC curto,  ,RoC corto,,,Short RoC
Long RoC,  ,RDC  long terme,Kauf RoC,Hossz RoC,RoC lungo,RoC longo,  ,RoC largo,,,Long RoC
Chande Mtm, ,Dynamique de Chande,Chande Dyn,Chande Mtm,Chande Mtm,Mtm Chande,- ,Momento Chande,,,Chande Mtm
Chande Fcst, ,Progression de Chande,Chande Prog,Chande Elrejelz,Chande Fcst,Previso Chande,  ,Prev. Chande,,,Chande Fcst
Intraday Mtm,  ,Dynamique intrajournalire,Intraday Dyn,Intraday Mtm,Intraday Mtm,Mtm intradirio, ,Momento intrada,,,Intraday Mtm
Random Walk, ,Random Walk,Random Walk,Random Walk,Random Walk,Percurso aleatrio, ,Camino aleatorio,,,Random Walk
Random Walk High,  ,Random Walk lev,Random Walk Hoch,Random Walk magas,Random Walk High,Alto percurso aleatrio,  ( ),Camino aleatorio alto,,,Random Walk High
Random Walk Low,  ,Random Walk Faible,Random Walk Tief,Random Walk alacsony,Random Walk Low,Baixo percurso aleatrio,  ( ),Camino aleatorio bajo,,,Random Walk Low
Directional,,Directionnel,Ausgerichtet,Irnytott,Direzionale,Direcional,,Direccional,,,Directional
High Low, ,lev Faible,Hoch-Niedrig,Magas Alacsony,High Low,Mx. min.,/,Alto Bajo,,,High Low
Shift Percentage, ,Pourcentage de dplacement,Prozentsatz verschieben,Eltolds szzalka,Percentuale di variazione,Percentagem de deslocamento, ,Porcentaje de giro,,,Shift Percentage
High Low Top,  ,lev Faible Haut,Hoch-Niedrig Oben,Magas Alacsony Cscs,High Low top,Mx. Min. Superior,//,Alto Bajo superior,,,High Low Top
High Low Median,  ,lev Faible Mdian,Hoch-Niedrig Mitte,Magas Alacsony Kzp,High Low median,Mx. Min. Mediano,//,Alto Bajo medio,,,High Low Median
High Low Bottom,  ,lev Faible Bas,Hoch-Niedrig Unten,Magas Alacsony Als pont,High Low bottom,Mx. min. inferior,//,Alto Bajo inferior,,,High Low Bottom
High-Low, ,lev Faible,Hoch-Niedrig,Magas-alacsony,High-Low,Mx. - min.,-,Alto-Bajo,,,High-Low
Med Price, ,Prix mdian,mit. Preis,Kz. r,Med Price,Preo mdio,. ,Precio med.,-,,Med Price
MA Env,  ,Enveloppe de la moyenne mobile,MA Env,M Bortk,MA Env,Env MA,  ,Sobre MM,,,MA Env
Shift Type, ,Type de dplacement,Verschiebungsart,Eltolds tpusa,Shift Type,Tipo de desvio, ,Tipo de giro,,,Shift Type
MA Env Top,   ,Enveloppe de la moyenne mobile Haut,MA Env Oben,M Bortk cscs,MA Env top,Env MA Topo,   (),Sobre MM superior,,,MA Env Top
MA Env Median,   ,Enveloppe de la moyenne mobile Mdian,MA Env Mitte,M Bortk Kzp,MA Env median,Env MA mdio,   (),Sobre MM medio,,,MA Env Median
MA Env Bottom,   ,Enveloppe de la moyenne mobile Bas,MA Env Unten,M Bortk Als pont,MA Env bottom,Env MA fundo,   (),Sobre MM inferior,,,MA Env Bottom
Fractal High, ,Fractal lev,Fraktal hoch,Fractal magas,Fractal High,Alto fraccionado, (),Fractal alto,,,Fractal High
Fractal Low, ,Fractal Faible,Fraktal niedrig,Fractal alacsony,Fractal Low,Baixo fraccionado, (),Fractal bajo,,,Fractal Low
Fractal Channel, ,Fractal Canal,Fraktal Channel,Fractal Channel,Fractal Channel,Canal fraccionado, ,Canal fractal,,,Fractal Channel
Fractal Chaos, ,Chaos fractal,Fraktal Chaos,Fractal Chaos,Fractal Chaos,Caos fraccionado,/,Caos fractal,,,Fractal Chaos
Gopala, ,Gopala,Gopala,Gopala,Gopala,Gopala,,Gopala,,,Gopala
Prime Bands Top,  ,Bandes premires Haut,Prime Bnder Oben,Legjobb szalagok cscs,Bande Prime Top,Topo bandas primrias,   ( ),Bandas primas superiores,,,Prime Bands Top
Prime Bands Bottom,  ,Bandes premires Bas,Prime Bnder Unten,Legjobb szalagok als pont,Bande Prime Bottom,Fundo bandas primrias,   ( ),Bandas primas inferiores,,,Prime Bands Bottom
Prime Bands Channel,  ,Bandes premires Canal,Prime Bnder Channel,Legjobb szalagok Channel,Bande Prime Channel,Canal bandas primrias,   ,Canal de bandas primas,,,Prime Bands Channel
Prime Number, ,Nombre premier,Prime Anzahl,Prime Number (trzsszm),Prime Number,Nmero primo, ,Nmero primo,,,Prime Number
Tolerance Percentage, ,Pourcentage de tolrance,Toleranzprozentsatz,Tolerancia szzalk,Percentuale di tolleranza,Percentagem de tolerncia,  ,Porcentaje de tolerancia,,,Tolerance Percentage
Bollinger Bands Top,  ,Bandes de Bollinger Haut,Bollinger Bnder Oben,Bollinger szalagok cscs,Bande di Bollinger Top,Bandas Bollinger topo,  ( ),Bandas de Bollinger superiores,,,Bollinger Bands Top
Bollinger Bands Median,  ,Bandes de Bollinger Mdian,Bollinger Bnder Mitte,Bollinger szalagok kzp,Bande di Bollinger Median,Bandas Bollinger mdia,  ( ),Bandas de Bollinger medias,,,Bollinger Bands Median
Bollinger Bands Bottom,  ,Bandes de Bollinger Bas,Bollinger Bnder Unten,Bollinger szaagok als pont,Bande di Bollinger Bottom,Bandas Bollinger fundo,  ( ),Bandas de Bollinger inferiores,,,Bollinger Bands Bottom
Boll %b, %b,Boll %b,Boll %b,Boll %b,Boll %b,Boll %b,%b ,Boll %b,, %b,Boll %b
Boll BW,  ,Bandes passantes de Bollinger,Boll BB,Boll sz.sz.,Boll BW,Boll BW,  ,Ancho de banda Boll,%b,,Boll BW
Bandwidth, ,Bandes passantes,Bandbreite,Szalagszlessg,Ampiezza della banda,Largura de banda, ,Ancho de banda,,,Bandwidth
High Period, ,Priode leve,Hoher Zeitraum,Magas idszak,Periodo High,Perodo alto, ,Perodo alto,,,High Period
Low Period, ,Priode creuse,Niedr. Zeitraum,Alacsony idszak,Periodo Low,Perodo baixo, ,Perodo bajo,,,Low Period
Donchian High, ,Donchian lev,Donchian hoch,Donchian fels,Donchian High,Alto de Donchian,  ( ),Donchian alto,,,Donchian High
Donchian Median, ,Donchian Mdian,Donchian mittel,Donchian kzp,Donchian Median,Mdio Donchian,  ( ),Donchian medio,,,Donchian Median
Donchian Low, ,Donchian Faible,Donchian niedr.,Donchian als,Donchian Low,Baixo Donchian,  ( ),Donchian bajo,,,Donchian Low
Mass Idx, ,Indice de masse,Masse Idx,TmegIdx,Mass Idx,ndice de massa, ,nd. de masa,,,Mass Idx
Bulge Threshold,  ,Seuil de renflement,Anschwellen des Grenzwerts,Kiugr hatrrtk,Bulge Threshold,Limite da salincia, ,Umbral de abultamiento,,,Bulge Threshold
Keltner,,Keltner,Keltner,Keltner,Keltner,Keltner, ,Keltner,,,Keltner
Keltner Top, ,Keltner Haut,Keltner Oben,Keltner cscs,Keltner Top,Topo Keltner,  ( ),Keltner superior,,,Keltner Top
Keltner Median, ,Keltner Mdian,Keltner Mitte,Keltner kzp,Keltner Median,Mdia Keltner,  ( ),Keltner medio,,,Keltner Median
Keltner Bottom, ,Keltner Bas,Keltner Unten,Keltner als pont,Keltner Bottom,Fundo Keltner,  ( ),Keltner inferior,,,Keltner Bottom
Minimum AF,  =,Frquence audio minimale,Minimum AF,Minimum AF,Minimum AF,AF mnimo,. AF,AF mnimo,AF,AF,Minimum AF
Maximum AF,  ,Frquence audio maximale,Maximum AF,Maximum AF,Maximum AF,AF mximo,. AF,AF mximo,AF,AF,Maximum AF
Klinger,,Klinger,Klinger,Klinger,Klinger,Klinger,,Klinger,,,Klinger
Signal Periods,  ,Priodes du signal,Signal-Perioden,Jelz rtk idszakok,Periodo di segnale,Perodos de sinalizao, ,Perodos de seal,,,Signal Periods
KlingerSignal,  ,Signal Klinger,KlingerSignal,KlingerJelzs,Segnale Klinger,KlingerSignal, ,Seal Klinger,,,KlingerSignal
Rel Vig,  ,Vigueur relative,Rel Vig,Rel Vig,Rel Vig,Vig rel, ,Vig. rel.,,,Rel Vig
RelVigSignal,   ,Signal/Vigueur relative,RelVigSignal,RelVig-Jelzs,RelVigSignal,RelVigSignal,  ,Seal de vig. rel.,,,RelVigSignal
Elder Bull Power,   ,Marge haussire Elder,Elder Bull Power,Elder bikaereje,Elder Power rialzista,Potncia Elder Bull,   ,Fuerza bajista (comprador) de Elder,,,Elder Bull Power
Elder Bear Power,   ,Marge baissire Elder,Elder Bear Power,Elder medvereje,Elder Power ribassista,Potncia Elder Bear,   ,Fuerza alcista (vendedor) de Elder,,,Elder Bear Power
Elder Force,  ,Elder Force,Elder Force,Elder-er,Elder Force,Fora Elder,  ,Fuerza de Elder,,,Elder Force
LR Slope,  ,Pente linaire de l'indice Reg,LR Steigung,LR lejt,LR Slope,Declive LR,  ,Pendiente LR,,,LR Slope
Slope,,Pente,Steigung,Lejt,Slope,Declive,,Pendiente,,,Slope
Shading,,Nuance,Schattierung,Klnbzet megllaptsa,Gradazione,Sombreamento, ,Sombreado,,,Shading
Pivot,,Pivot,Drehpunkt,Pivot,Pivot,Eixo,,Pivote,,,Pivot
Resistance 1, 1,Rsistance 1,Widerstand 1,1. rezisztencia,Resistenza 1,Resistncia 1, 1,Resistencia 1,1,1,Resistance 1
Support 1, 1,Support 1,Untersttzung 1,1. tmogats,Supporto 1,Suporte 1, 1,Soporte 1,1,1,Support 1
Resistance 2, 2,Rsistance 2,Widerstand 2,2. rezisztencia,Resistenza 2,Resistncia 2, 2,Resistencia 2,2,2,Resistance 2
Support 2, 2,Support 2,Untersttzung 2,2. tmogats,Supporto 2,Suporte 2, 2,Soporte 2,2,2,Support 2
Resistance 3, 3,Rsistance 3,Widerstand 3,3 rezisztencia,Resistenza 3,Resistncia 3, 3,Resistencia 3,3,3,Resistance 3
Support 3, 3,Support 3,Untersttzung 3,3. tmogatsa,Supporto 3,Apoio 3, 3,Soporte 3,3,3,Support 3
M Flow,,Flux montaire,M Fluss,Pnzramls,Flusso M,Fluxo M, ,Flujo M,,,M Flow
Jaw Period,  ,Priode mchoire,Jaw Zeitraum,Jaw Period (llkapocs idszak),Periodo Jaw,Perodo queixo,   ,Perodo de mandbula,,,Jaw Period
Jaw Offset,  ,Compensation mchoire,Jaw Ausgleich,Jaw Offset (llkapocs lells),Compensazione Jaw,Offset queixo,  ,Compensacin de mandbula,,,Jaw Offset
Teeth Period,  ,Priode dents,Teeth Zeitraum,Teeth Period (Fogak idszak),Periodo Teeth,Perodo dentes,   ,Perodo de dientes,,,Teeth Period
Teeth Offset,  ,Compensation dents,Teeth Ausgleich,Teeth Offset (Fogak lells),Compensazione Teeth,Offset dentes,  ,Compensacin de dientes,,,Teeth Offset
Lips Period,  ,Priode lvres,Lips Zeitraum,Lips Period (Ajkak idszak),Periodo Lips,Perodo lbios,   ,Perodo de labios,,,Lips Period
Lips Offset,  ,Compensation lvres,Lips Ausgleich,Lips Offset (Ajkak lells),Compensazione Lips,Offset lbios,  ,Compensacin de labios,,,Lips Offset
Show Fractals, ,Afficher fractales,Fraktale anzeigen,Fraktlok megmutat,Mostra frattali,Mostrar fractais, ,Mostrar fractales,,,Show Fractals
Jaw,,Mchoire,Jaw,Jaw (llkapocs),Jaw,Queixo,  ( ),Mandbula,,,Jaw
Teeth,,Dents,Teeth,Teeth (Fogak),Teeth,Dentes,  ( ),Dientes,,,Teeth
Lips,,Lvres,Lips,Lips (Ajkak),Lips,Lbios,  ( ),Labios,,,Lips
Gator, ,Gator,Gator,Gator,Gator,Gator,,Gator,,,Gator
Conversion Line Period,  ,Phase de transformation des valeurs,Konversionslinie Zeitraum,Konverzis vonal idszak,Periodo della linea di conversione,Perodo de converso de linha,   ,Perodo de lnea de conversin,,,Conversion Line Period
Base Line Period,  ,Phase de rfrence,Basislinie Zeitraum,Alapvonal idszak,Periodi della linea di base,Perodo de linha de base,   ,Perodo de lnea base,,,Base Line Period
Leading Span B Period,   ,Phase principale et chelonne B,Leading Span B Zeitraum,Leading Span B Period (Vezet B tv idszak),Periodo Leading Span B,Intervalo de liderana perodo B,  B,Perodo tramo B destacado,B,B,Leading Span B Period
Lagging Span Period,   ,Phase retarde et chelonne,Lagging Span Zeitraum,Lagging Span Period (Lemarad tv idszak),Periodo Lagging Span,Perodo de durao de lag, ,Perodo de tramo rezagado,,,Lagging Span Period
Conversion Line, ,Transformation des valeurs,Konversionslinie,Konverzis vonal,Linea di conversione,Linha de converso, ,Lnea de conversin,,,Conversion Line
Base Line, ,Rfrence,Basislinie,Alapvonal,Linea di base,Linha de base, ,Lnea base,,,Base Line
Leading Span A,  ,Principale et chelonne A,Leading Span A,Leading Span A (Vezet A tv),Leading Span A,Intervalo de liderana A,  A,Tramo A destacado,A,A,Leading Span A
Leading Span B,  ,Principale et chelonne B,Leading Span B,Lading Span B (Vezet B tv),Leading Span B,Intervalo de liderana B,  B,Tramo B destacado,B,B,Leading Span B
Lagging Span,  ,chelonne et retarde,Lagging Span,Lagging Span (Lemarad tv),Lagging Span,Intervalo de liderana, ,Tramo rezagado,,,Lagging Span
P Rel, ,P Rel,P Rel,P Rel,P Rel,Rel P,  ,P rel.,,,P Rel
Comparison Symbol, ,Comparaison des symboles,Vergleichssymbol,sszehasonlt szimblum,Simbolo di confronto,Smbolo de comparao, ,Smbolo de comparacin,,,Comparison Symbol
Vchart,  ,Vchart,Vchart,Vdiagram,grafico V,Vchart,Vchart,Grfica V,,V,Vchart
Up Volume, ,Volume augment,Mehr Volumen,Felfel halad volumen,Up Volume,Subir volume, ,Volumen arriba,,,Up Volume
Down Volume, ,Volume baiss,Weniger Volume,Lefel halad volumen,Down Volume,Descer volume, ,Volumen abajo,,,Down Volume
Use Volume,   ,Utiliser Volume,Ausnutzen Volume,Hasznostani volumen,Utilizzare Volume,Utilize volume, ,Utilizar Volumen,,,Use Volume
vol undr, ,vol undr,vol undr,vol undr,vol undr,vol abai,vol undr,Debajo vol.,,,vol undr
vol profile, ,profil du volume,vol Profil,vol profil,vol profile,Perfil do vol, ,Perfil vol.,,,vol profile
Bars Color, ,Couleur des barres,Farbige Balken,Svsznek,Colore delle barre,Cor das barras, ,Color de las barras,,,Bars Color
Composite,,Compos,Zusammensetzung,sszetett,Composito,Composto,,Mixto,,,Composite
Divergence,,Divergence,Abweichung,Divergencia,Divergenza,Divergncia,,Divergencia,,,Divergence
MA Period,MA ,Priode moyenne mobile,MA-Zeitraum,MA idszak,Periodo MA (media mobile),Perodo MA,  ,Periodo MA,MA,MA ,MA Period
Result,,Rsultat,Ergebnis,Eredmny,Risultato,Resultado,,Resultado,,,Result
Fill,,Fill,Fllung,Kitlts,Riempimento,Preencher,,Rellenar,,,Fill
Color,,Couleur,Farbe,Szn,Colore,Cor,,Color,,,Color
Axis Label, ,Libell de l'axe,Achsenbeschriftung,Tengelycmke,Nome dell'asse,Rtulo do eixo, ,Etiqueta de eje,,,Axis Label
Candle Borders, ,Encadrements de bougies,Kerzen-Rnder,Gyertyaszeglyek,Bordi grafico a candela,Rebordos em forma de velas, ,Bordes de vela,,,Candle Borders
Mountain Charts, ,Graphiques en relief,Berg-Diagramme,Hegydiagramok,Grafici a montagna,Grficos em forma de montanha,     ,Grficas de montaa,,,Mountain Charts
Gradient,,Pente,Steigung,Gradiens,Gradiente,Gradiente,,Gradiente,,,Gradient
Background Color, ,Couleur du fond,Hintergrundfarbe,Httrszn,Colore dello sfondo,Cor de fundo, ,Color de fondo,,,Background Color
Share This Chart,  ,Partager ce graphique,Dieses Diagramm teilen,Diagram megosztsa,Condividi questo grafico,Partilhar este grfico,  ,Compartir esta grfica,,,Share This Chart
Share,,Partager,Teilen,Megoszts,Condividi,Partilhar,,Compartir,,,Share
To set your timezone use the location button below or scroll through the following list,             ,Pour indiquer votre fuseau horaire veuillez utiliser le bouton Emplacement ci-dessous ou parcourir la liste suivante,Zur Einstellung Ihrer Zeitzone knnen Sie unten auf die die Standort-Schaltflche klicken oder durch die folgende Liste scrollen,Idznjnak belltshoz hasznlja az albbi helymegjell gombot vagy grdtse le az albbi listt,Per impostare il tuo fuso orario usa il pulsante ubicazione che segue o fai scorrere l'elenco che segue,Para definir o seu fuso horrio utilize o boto de localizao abaixo ou navegue pela lista seguinte,            ,Para fijar su zona horaria utilice el botn de ubicacin de abajo o desplcese por la siguiente lista,,,To set your timezone use the location button below or scroll through the following list
Use My Current Location,  ,Utiliser mon emplacement actuel,Meinen aktuellen Standort verwenden,Hasznlja a Sajt jelenlegi helymeghatrozst,Usa la mia ubicazione corrente,Utilizar a minha localizao atual,   ,Usar mi ubicacin actual,,,Use My Current Location
(Scroll for more options),(   ),(Faites dfiler pour plus d'options),(Fr weitere Optionen scrollen),(Tovbbi lehetsgeket a legrdl listban tall),(Scroll for more options),(Desloque para mais opes),(    ),(Desplazar para ms opciones),,,(Scroll for more options)
Bar,,Barre,Balken,Sv,Barra,Barras,,Barra,,,
Bars,,Barres,Balken,Barok,Barre,Barras,,Barras,,,Bars
Colored Bar, ,Barre en couleur,Farbiger Balken,Sznes sv,Barra colorata,Barra colorida, ,Barra de color,,,Colored Bar
Line,,Ligne,Linie,Vonal,Linea,Linha,,Lnea,,,
Colored Line, ,Ligne en couleur,Farbiger Linie,Sznes vonal,Linea colorata,Linha colorida, ,Lnea de color,,,Colored Line
Mountain,,Montagne,Berg,Hegyi,Montagna,Montanha,R,Montaa,,,Mountain
Baseline Delta,   ,Changement de ligne de base,Vernderung vom Ausgangswert,Vltozs a kiindulsi rtkhez kpest,Variazione al basale,Mudana da linha de base,    ,Cambio de lnea de base,,,Baseline Delta
Squarewave,Squarewave ( ),Squarewave,Rechteck,Ngyszgjel,Quadra,Squarewave,Squarewave,Ola Cuadrada,,,Squarewave
Hollow candle, ,Bougie creuse,Hohl Kerze,reges gyertya,Candela Vuote,Vela vazia, ,Vela hueca,,,
Volume candle, ,Volume en chandelle,Volumen Kerzenchart,Halad gyertya,Grafico a Candele Volumetrico,Vela de volume, ,Vela de volumen,K,,
Chart Scale,  ,chelle du graphique,Darstellungsskala,Diagram beoszts,Scala Grafico,Escala do grfico, ,Escala de la grfica,,,Chart Scale
Log Scale, ,Logarithmique,Log-Skala,Logaritmikus beoszts,Scala Log,Logartmica,. ,Logaritmo,,,Log Scale
Chart Type,  ,Type de graphique,Diagrammtyp,Diagram tpus,Tipo di grafico,Tipo de grfico, ,Tipo de grfico,,,Chart Type
Heikin-Ashi,Heikin-Ashi (   ),Heikin-Ashi,Heikin-Ashi,Heikin-Ashi,Heikin-Ashi,Heikin-Ashi,Heikin-Ashi,Heikin-Ashi,,,Heikin-Ashi
Point & figure, ,Point & Figure,Point & Figure,Point & bra,Point & Figure,Ponto & Figura, & ,Punto y Figura,,,P&F
Line break, ,Saut de ligne,Leitungsbruch,Sortrs,Interruzione di riga,Quebra de linha, ,Salto de lnea,,,
Renko,Renko ( ),Renko,Renko,Renko,Renko,Renko,Renko,Renko,,,Renko
Range Bars,,Barres d'amplitude,Balken-Bandbreite,Barok tartomnya,Barre di intervallo,Barras de intervalo, ,Barras de intervalo,,,Range Bars
Kagi,Kagi ( ),Kagi,Kagi,Kagi,Kagi,Kagi,Kagi,Kagi,,,Kagi
Clear Drawings, ,Effacer les dessins,Deutliche Zeichnungen,brk trlse,Cancella Disegni,Limpar desenhos, ,Eliminar los dibujos,,,Clear Drawings
Studies,,tudes,Studien,Elemzsek,Studi,Estudos,,Estudios,,,
Timezone, ,Plage horaire,Zeitzone,Idzna,Fuso orario,Fuso horrio, ,Zona horaria,,,Timezone
Change Timezone,  ,Modifier la plage horaire,Zeitzone ndern,Idzna mdostsa,Cambia fuso orario,Alterar fuso horrio,  ,Cambiar zona horaria,,,Change Timezone
Default Themes, ,Thmes par dfaut,Standardlayouts,Alaprtelmezett tmk,Temi di default,Temas padro, ,Temas predeterminados,,,Default Themes
White,,Blanc,Wei,Fehr,Bianco,Branco,,Blanco,,,White
Black,,Noir,Schwarz,Fekete,Nero,Preto,,Negro,,,Black
Custom Themes, ,Modles personnaliss,Individuelle Layouts,Egyedi tmk,Personalizza temi,Temas personalizados, ,Temas personalizados,,,Custom Themes
New Custom Theme,  ,Nouveau modle personnalis,Neue individuelle Layouts,j egyedi tma,Nuovo Tema Personalizzato,Novo tema personalizado,  ,Nuevo tema personalizado,,,New Custom Theme
Select Tool, ,Slectionner Outil,Werkzeug,Eszkz,Seleziona,Selecionar,,Seleccionar,,,
None, ,Aucune,Keines,Egyik sem,Nessuno,Nenhuma,,Ninguna,,,None
Crosshairs,,Croix,Fadenkreuze,Clkeresztek,Mirini,Mira,,Cruz visor,,,Crosshairs
Annotation, ,Annotation,Anmerkung,Magyarzat,Annotazione,Anotao,,Anotacin,,,
Horizontal,,Horizontal,Horizontal,Vzszintes,Orizzontale,Horizontal,.,Horizontal,,,
Segment,,Segment,Segment,Szegmens,Segmento,Segmento,,Segmento,,,Segment
Fill,,Remplir,Fllen,Kitlts,Riempimento,Preenchimento,,Relleno,,,Fill
Line,,Ligne,Linie,Vonal,Linea,Linha,,Lnea,,,
save,,Sauvegarder,speichern,ments,salva,guardado,,guardar,,,save
cancel,,Annuler,abbrechen,mgse,annulla,cancelamento,,cancelar,,,cancel
Close,,Fermer,Schlieen,Bezrs,Chiudi,Fecho,,Cierre,,,
Create,,Crer,Erstellen,Ltrehozs,Crea,Criao,,Crear,,,Create
Show Zones, ,Afficher des zones,Zonen anzeigen,Znk megjelentse,Mostra Zone,Mostrar zonas, ,Mostrar zonas,,,Show Zones
OverBought,  ,Surachet,berkauft,Tlvsrolt,Ipercomprato,Sobrecompra,OverBought (),Exceso compra,,,OverBought
OverSold,  ,Survendu,berverkauft,Tlrtkestett,Ipervenduto,Sobrevenda,OverSold (),Exceso venta,,,OverSold
Choose Timezone,  ,Choisir la plage horaire,Zeitzone whlen,Idzna kivlasztsa,Scegli Fuso orario,Escolher o fuso horrio, . ,Elegir zona horaria,,,Choose Timezone
Create a New Custom Theme,  ,Crer un nouveau modle personnalis,Neues individuelles Layout erstellen,j egyedi tma ltrehozsa,Crea Nuovo Tema Personalizzato,Criar novo tema personalizado,   ,Crear un nuevo tema personalizado,,,Create a New Custom Theme
Candles,,Bougies,Kerzen,Gyertyk,Candele,Velas,,Velas,,,Candles
Border,,Ligne frontire,Rand,Szegly,Margine,Limite,,Borde,,,Border
Background,,Contexte,Hintergrund,Httr,Sfondo,Fundo,,Fondo,,,Background
Grid Lines, ,Lignes de quadrillage,Gitterlinien,Rcsvonalak,Griglia,Linhas grelha, ,Lneas de cuadrcula,,,Grid Lines
Date Dividers, ,Caractres de sparation,Datentrenner,Dtumelvlasztk,Divisori Data,Divisores de data,.  ,Divisores de fecha,,,Date Dividers
Axis Text, ,Titres des axes,Achsentext,Tengely szvege,Testo Asse,Texto eixo, ,Texto del eje,,,Axis Text
New Theme Name,  ,Nom du nouveau modle,Neuer Layoutname,j tma neve,Nome Nuovo Tema,Novo nome do tema, ,Nombre del nuevo tema,,,New Theme Name
Save Theme, ,Sauvegarder,Speichern,Tma mentse,Salva Tema,Guardar,,Guardar,,,Save Theme
CURRENCIES,,DEVISES,DEVISEN,DEVIZK,VALUTE,MOEDAS,,DIVISAS,,,CURRENCIES
right-click to delete,    ,Faites un clic droit pour supprimer,Rechts klicken um zu lschen,kattintson jobb gombbal az egr hogy trlni,destro del mouse per cancellare,Boto direito do mouse para apagar,     ,botn derecho para borrar,,,right click to delete
right-click to manage,    ,Faites un clic droit pour grer,Rechts klicken um zu verwalten,kattintson jobb gombbal az egr hogy kezelni,destro del mouse per gestire,Boto direito do mouse para gerenciar,     ,botn derecho para manejar,,, / manage
Events,,vnement,Ereignisse,Esemnyek,Eventi,Eventos,,Eventos,,,Events
Neutral,,Neutre,Neutral,Semleges,Neutro,Neutro,,Neutro,,,Neutral
PMOSignal,   ,Signal PMO,PMOSignal,PMO-jelzs,Segnale PMO,PMOSignal,PMOSignal,Seal PMO,PMO,PMOSignal,PMOSignal
Double Smoothing Period,   %K,Priode double de lissage,Doppelter Glttungszeitraum,Dupla kiegyenlt idszak,Doppio periodi di lisciatura,Perodo de suavizao dupla,  ,Perodo de uniformidad doble,,2,Double Smoothing Period
Lightest Rate of Change Period,   ,Taux le plus lger de priode de transition,Niedrigster Kurs des nderungszeitraums,Az idszak amikor a legenyhbb a vltozs mrtke,Periodo con il tasso di variazione pi leggero,Perodo de menor taxa de troca,   ,Tasa ms baja de periodo de cambio,,,Lightest Rate of Change Period
Lightest SMA Period,    ,Priode de moyenne mobile simple la plus lgre,Niedrigster Kurs whrend des einfachen gleitenden Durchschnittszeitraums,Legenyhbb SMA-idszak,Periodo con la SMA pi leggera,Perodo SMA mais leve,    ,Periodo de SMA ms bajo,SMA,SMA,Lightest SMA Period
Light Rate of Change Period,   ,Taux lger de priode de transition,Niedriger Kurs whrend des nderungszeitraums,Idszak amikor enyhe a vltozs mrtke,Periodo con tasso di variazione leggero,Perodo de baixa taxa de troca,   ,Tasa baja de periodo de cambio,,,Light Rate of Change Period
Light SMA Period,    ,Priode de moyenne mobile simple lger,Niedriger Kurs whrend des einfachen gleitenden Durchschnittszeitraums,Enyhe SMA-idszak,Periodo con SMA leggera,Perodo SMA baixo,    ,Periodo de SMA bajo,SMA,SMA,Light SMA Period
Heaviest Rate of Change Period,   ,Taux le plus lourd de priode de transition,Hchster Kurs des nderungszeitraums,Az idszak amikor a legslyosabb a vltozs mrtke,Periodo con il tasso di variazione pi pesante,Perodo de maior taxa de troca,   ,Tasa ms elevada de periodo de cambio,,,Heaviest Rate of Change Period
Heaviest SMA Period,    ,Taux le plus lourd de priode de moyenne mobile simple,Hchster Kurs whrend des einfachen gleitenden Durchschnittszeitraums,Legslyosabb SMA-idszak,Periodo con SMA pi pesante,Perodo maior de SMA,    ,Periodo de SMA ms elevado,SMA,SMA,Heaviest SMA Period
Heavy Rate of Change Period,   ,Taux lourd de priode de transition,Hoher Kurs des nderungszeitraums,Az idszak amikor slyos a vltozs mrtke,Periodo con tasso di variazione pesante,Perodo de grande taxa de troca,   ,Tasa elevada de periodo de cambio,,,Heavy Rate of Change Period
Heavy SMA Period,    ,Priode de moyenne mobile simple lourd,Hoher Kurs whrend des einfachen gleitenden Durchschnittszeitraums,Slyos SMA-idszak,Periodo con SMA pesante,Perodo maior de SMA,    ,Periodo de SMA elevado,SMA,SMA,Heavy SMA Period
KSTSignal,KST ,Signal KST,KSTSignal,KST-jelzs,Segnale KST,KSTSignal,KSTSignal,Seal KST,KST,KSTSignal,KSTSignal
HHV/LLV Lookback,HHV/LLV ,HHV/LLV rtroviseur,HHV/LLV LookBack,HHV/LLV visszatekints,Loookback HHV/LLV,HHV/LLV Lookback,  HHV/LLV,HHV/LLV en retrospeccin,HHV/LLV,HHV/LLV ,HHV/LLV Lookback
Positive Bar, ,Barre positive,Positiver Balken,Pozitv bar,Barra positiva,Barra positiva, ,Barra positiva,,,Positive Bar
Negative Bar, ,Barre ngative,Negativer Balken,Negatv bar,Barra negativa,Barra negativa, ,Barra negativa,,,Negative Bar
Underlay, ,Sous-couche,Grundlage,Sppeds,Substrato,Subjacente, ,Subyacente,,,Underlay
Channel,,Canal,Kanal,Channel,Canale,Canal,,Canal,,,
Gartley,,Gartley,Gartley,Gartley,Gartley,Gartley,,Gartley,Gartley,, 
Pitchfork,,Gartley,Gartley,Gartley,Gartley,Gartley,,Gartley,Gartley,,
Quadrant,,Gartley,Gartley,Gartley,Gartley,Gartley,,Gartley,Gartley,,
Elder Impulse System,  ,Systme Impulse Elder,Elder Impulse System,Elder impulzus rendszer,Sistema impulsi di Elder,Sistema de impulso ancio,  ,Sistema de impulso de Elder,,,Elder Impulse System
Choppiness Index, ,Indice Choppiness,Choppiness-Index,Vltoz irnyokat mutat (Choppiness) index,Indice choppiness,ndice de ondas, ,ndice de fluctuacin de tendencias,,,Choppiness Index
Pring's Know Sure Thing,  ,Know Sure Thing de Pring,Pring's Know Sure Thing,Pring Know Sure Thing oszcilltora,Indicatore Know Sure Thing di Pring,Pring sabe algo garantido,   ,Oscilador Know Sure Thing de Pring,,KST,Pring's Know Sure Thing
Pring's Special K,  ,Spcial K de Pring,Pring's Special K,Pring Special K oszcilltora,Indicatore Special K di Pring,Special K da Pring,  Special K,Oscilador Special K de Pring,K,K,Pring's Special K
Psychological Line,Psychological Line,Psychological Line,Psychological Line,Psychological Line,Psychological Line,Psychological Line,Psychological Line,Psychological Line,Psychological Line,Psychological Line,
Rainbow Moving Average,   ,Moyenne mobile arc-en-ciel,Rainbow - gleitender Durchschnitt,Rainbow Moving tlag,Grafico media mobile ad arcobaleno,Mdia de movimento arco-ris,  ,Media mvil Rainbow,,,Rainbow Moving Average
Rainbow Oscillator,  ,Oscillateur arc-en-ciel,Rainbow-Oszillator,Rainbow oszcilltor,Oscillatore arcobaleno,Oscilador arco-ris, ,Oscilador Rainbow,,,Rainbow Oscillator
Price Momentum Oscillator, ,Oscillateur de dynamique de prix,Preis-Oszillator,r momentum oszcilltor,Oscillatore Price Momentum,Oscilador de momentum de preo, -,Oscilador de momento de precios,,,Price Momentum Oscillator
Disparity Index, ,Indice de disparit,Disparitts-Index,Diszparitsi index,Indice disparit,ndice de disparidade, ,ndice de disparidad,,,
Ulcer Index, ,Indice Ulcer,Ulcer-Index,Ulcer index,Indice dell'ulcera,ndice Ulcer, ,ndice Ulcer,,,Ulcer Index
Display,,Afficher,Anzeige,Megmutat,Visualizza,Visualizar,,Visualizar,,,Display
Units,,Units,Einheiten,Egysgek,Unit,Unidades,,Unidades,,,Units
Stop Loss, ,Stop Loss,Stop Loss,Stop loss,Stop Loss,Parar com perda,-,Lmite de prdidas,,,Stop Loss
Take Profit,  ,Faire des bnfices,Take Profit,Profitfelvtel,Take Profit,Recolher lucros,-,Lmite de ganancias,,,Take Profit
pips,,pips,Pips,pontok,pips,pips,,Pips,,pip,pips
Unrealized Gain/Loss,/ ,Gain/perte non ralis,Nicht realisierter Gewinn/Verlust,Nem realizlt nyeresg/vesztesg,Guadagni/perdite non realizzate,Ganhos/perdas no realizadas, /,Ganancias/prdidas no realizadas,/,/,Unrealized Gain/Loss
Add Stop Loss,  ,Ajouter Stop Loss,Stop Loss hinzufgen,Stop loss hozzadsa,Aggiungi Stop Loss,Adicionar parar perda, -,Aadir lmite de prdidas,,,Add Stop Loss
Add Take Profit,  ,Ajouter faire des bnfices,Take Profit hinzufgen,Profitfelvtel hozzadsa,Aggiungi Take Profit,Adicionar recolher lucros, -,Aadir lmite de ganancias,,,Add Take Profit
Risk/Reward,/,Risque/Rcompense,Risiko/Chance,Kockzat/Djazs,Rischio/Rendimento,Risco/recompensa,/,Riesgo/Recompensa,/,/,Risk/Reward
Name,,Nom,Name,Nv,Nome,Nome,,Nombre,,,Name
Darvas Box, ,Bote Darvas,Darvas-Box,Darvas doboz,Scatole di Darvas,Caixa Darvas, ,Caja de Darvas,,,Darvas Box
All-Time High Lookback Period,    ,Priode de rtrospection leve tout le temps,Allzeithoch Beobachtungszeitraum,Mindenkori magas szm visszatekintsi idszak,Periodo con lookback pi alto di tutti i tempi,Perodo de Lookback mais alto de sempre,    ,Periodo retrospectivo alto general,,,All-Time High Lookback Period
Exit Field, ,Sortir du champ,Ausstiegsfeld,Kilp mez,Campo di uscita,Sair do campo,  ,Campo de salida,,,Exit Field
Ghost Boxes, ,Botes  fantme,Ghost-Boxes,Szellemdobozok,Ghost Box,Caixas fantasma, ,Cajas fantasma,,,Ghost Boxes
Stop Levels, ,Nveaux d'arrt,Stopp-Niveaus,Szintek lelltsa,Livelli di stop,Nveis de paragem, ,Niveles de lmite,,,Stop Levels
Level Offset, ,Dcalage de niveau,Niveau-Ausgleich,Szintek kiegyenltse,Offset livello,Nivelar Offset, ,Desviacin de nivel,,,Level Offset
Volume Spike, ,Volume Spike,Volumen Hchstwert,Volumen kicscsosods,Spike dei volumi,Pico de volume, ,Punta de volumen,,,Volume Spike
Volume % of Avg,  %,% de moyenne volume,Volumen in % des Durchschnitts,tlag %-nak volumene,% di volume della media,Percentagem de volume na mdia, %  ,% de volumen de la media,%,%,Volume % of Avg
Price Minimum, ,Prix minimum,Preisuntergrenze,rminimum,Minimo del prezzo,Preo mnimo, ,Precio mnimo,,,Price Minimum
Darvas,,Darvas,Darvas,Darvas,Darvas,Darvas,,Darvas,,,Darvas
Ghost,,Fantme,Ghost,Szellem,Ghost,Fantasmas,,Fantasma,,,Ghost
Levels,,Niveaux,Niveaus,Szintek,Livelli,Nveis,,Niveles,,,Levels
Don't see your study below? Type in your search here.,        .,Vous e voyez pas votre tude ci-dessous ? Tapez votre recherche ici.,Knnen Sie die unten angefhrte Studie nicht sehen? Geben Sie hier Ihre Suche ein.,Nem ltja a felmrst lent? Ide rja a keresett elemet.,Non trovi qui sotto lo studio che ti interessa? Digita qui per cercare.,No encontra o seu estudo em baixo? Escreva a sua pesquisa aqui.,     ?     .,No ve sus estudio ms abajo? Introduzca aqu su trmino de bsqueda.,,,Don't see your study below? Type in your search here.
Show All, ,Afficher Tout,Alle anzeigen,Mindet megmutat,Mostra tutti,Mostrar tudo, ,Mostrar todo,,,Show All
Supertrend, ,Supertendance,Supertrend,Szupertrend,Supertrend,Supertendncia,,Supertendencia,,,Supertrend
Uptrend, ,Tendance  la hausse,Aufwrtstrend,Felfel halad trend,Uptrend,Tendncia de aumentar, ,Tendencia al alza,,,Uptrend
Downtrend, ,Tendance  la baisse,Abwrtstrend,Lefel halad trend,Downtrend,Tendncia de baixar, ,Tendencia a la baja,,,Downtrend
Chart Shared Successfully!,    !,Tableau partag avec succs !,Chart wurde erfolgreich geteilt!,A chartot sikeresen megosztotta!,Grafico condiviso con successo!,Grfico partilhado com sucesso!,  !,Grfica compartida correctamente!,,,Chart Shared Successfully!
Use the following link to share your chart:,     ,Utilisez le lien suivant pour partager votre tableau,Verwenden Sie den nachfolgenden Link\u002c um Ihren Chart zu teilen,A chart megosztshoz hasznlja az albbi hivatkozst,Usa il link seguente per condividere il tuo grafico,Utilize a seguinte ligao para partilhar o seu grfico,      ,Utilizar el siguiente enlace para compartir su grfica,,,Use the following link to share your chart:
Open shared chart in new window,        ,Ouvrir le tableau partag dans une nouvelle fentre,Geteilten Chart in neuem Fenster ffnen,Megosztott chart megnyitsa j ablakban,Apri il grafico condiviso in una nuova finestra,Abrir o grfico partilhado numa nova janela,     ,Abrir la grfica compartida en una nueva ventana,,,Open shared chart in new window
New Theme Name:,  :,Nouveau nom du thme :,Neuer Themenname:,Az j tma neve:,Nuovo nome del tema:,Novo nome do tema:,  :,Nuevo nombre de tema:,,,New Theme Name:
Symbol,,Symbole,Symbol,Szimblum,Simbolo,Smbolo,,Smbolo,,,Symbol
Demo data.,. ,Les donnes de dmonstration.,Demo-Daten.,Demo adatokat.,Dati demo.,Dados de demonstrao.,-.,Datos de demostracin.,,,Demo data.
Market Data, ,Donnes du march,Marktdaten,Market Data,Dati di mercato,Dados de mercado, ,Datos del mercado,,,Market Data
 by Xignite., Xignite , par Xignite., von Xignite., ltal Xignite., per Xignite., por Xignite., Xignite.,por Xignite.,Xignite,Xignite, by Xignite.
Formula courtesy ,  ,Formule grce  ,Formel dank ,Formula ksznheten ,Formula grazie a ,Frmula graas  ,  ,Frmula gracias a ,,,Formula courtesy
Data is randomized.,.  ,Les donnes sont randomises.,Daten randomisiert.,Az adatok vletlen.,I dati  randomizzato.,Dados  aleatrio., .,De datos es aleatorizado.,,,Data is randomized.
Data is real-time.,.   ,Les donnes sont en temps rel.,Die Daten werden in Echtzeit.,Az adatok vals idben.,I dati sono in tempo reale.,Os dados esto em tempo real.,    .,Los datos es en tiempo real.,,,Data is real-time.
Data delayed 15 min.,.   15 ,Donnes retardes 15 min.,Daten verzgert 15 min.,Adat ksleltetve 15 perc.,Dati ritardato 15 min.,Dados atrasado 15 min.,   15 .,Datos retras 15 minutos.,15,15,Data delayed 15 min.
BATS BZX real-time.,.   BATS BZX,BATS BZX en temps rel.,BATS BZX Echtzeit .,BATS BZX vals idben.,BATS BZX in tempo reale.,BATS BZX em tempo real.,BATS BZX    .,BATS BZX en tiempo real.,BATS BZX,BATSBZX,BATS BZX real-time.
End of day data.,.   ,Les donnes de la fin de la journe.,Daten von dem Ende des Tages.,Az adatok a nap vgn.,I dati della fine della giornata.,Os dados a partir do final do dia.,     .,Los datos de la final del da.,,,End of day data.
ALL,,TOUT,ALLE,SSZES,TUTTO,TODOS,,TODO,,,ALL
STOCKS,,ACTIONS,AKTIEN,RSZVNYEK,AZIONI,ACES,,STOCKS,,,STOCKS
FX,,DEVISES,FX,FX,VALUTE,FX,,FX,,FX,FX
INDEXES,,INDICES,INDIZES,INDEXEK,INDICI,NDICES,,NDICES,,,INDEXES
FUNDS,,FONDS,FONDS,ALAPOK,FONDI,FUNDOS,,FONDOS,,,FUNDS
FUTURES, ,FUTURE,FUTURES,FUTURES,FUTURE,FUTUROS,,FUTUROS,,,FUTURES
Views,,Vues,Vorlagen,Nzetek,Visualizzazioni,Visualizaes,,Vistas,,,Views
Saved Views, ,Vues sauvegardes ,Gespeicherte Vorlagen,Mentett nzetek,Visualizzazioni salvate,Visualizaes Guardadas, ,Guardar vistas,,,Saved Views
Save View, ,Sauvegardez la vue ,Gespeicherte Vorlage,Mentett nzet,Salva visualizzazione,Guardar Visualizao, ,Guardar vista,,,Save View
Baseline, ,Ligne de base,Baseline,Alapvonal,Linea di base,Linha de base, ,Referencia,,,Baseline
Heikin Ashi,Heikin Ashi,Heikin Ashi,Heikin Ashi,Heikin Ashi,Heikin Ashi,Heikin Ashi, ,Heikin Ashi,,,Heikin Ashi
Chart Preferences,  ,Prfrences des graphiques,Charteinstellungen,Grafikon-belltsok,Preferenze dei grafici,Grfico de Preferncias, ,Preferencias del grfico,,,Chart Preferences
Extended Hours, ,Heures prolonges,Erweiterte Zeiten,Bvtett rk,Orario prolungato,Horrio Alargado, ,Horas prolongadas,,,Extended Hours
Themes,,Thmes,Themen,Tmk,Temi,Temas,,Temas,,,Themes
Day,,Jour,Tag,Nappal,Giorno,Dia,,Claro,,,Day
Night,,Nuit,Nacht,jszaka,Notte,Noite,,Oscuro,,,Night
New Theme, ,Nouveau thme,Neues Thema,j tma,Nuovo tema,Novo Tema, ,Tema nuevo,,,New Theme
Current Studies, ,tudes en cours,Aktuelle Studien,Jelenlegi mutatk,Studi in corso,Estudos Actuais, ,Estudios actuales,,,Current Studies
Clear All, ,Suprimez tout,Alle lschen,sszes trlse,Cancella tutto,Limpar Todos, ,Eliminar todo,,,Clear All
ADX/DMS,ADX/DMS,ADX/DMS,ADX/DMS,ADX/DMS,ADX/DMS,ADX/DMS,ADX/DMS,ADX/DMS,/,ADX/DMS,ADX/DMS
ATR Trailing Stops, ATR,Trailing Stop ATR,ATR Trailing Stops,ATR cssz stopok,Trailing Stop ATR,ATR Registo de Stops, -,Trailing Stops ATR,,ATR,ATR Trailing Stops
Awesome Oscillator, ,Oscillateur gnial,Awesome Oscillator,Awesome oszcilltor,Oscillatore Awesome ,Oscilador Incrvel,Awesome Oscillator,Oscilador impresionante,,Awesome Oscillator,Awesome Oscillator
Bollinger %b, %b,%b de Bollinger,Bollinger %b,Bollinger %b,%b di Bollinger,Bollinger %b,Bollinger %b,Bollinger %b,%b, %b,Bollinger %b
Choppiness Index, Choppiness,L'indice de viscosit,Choppiness Index,Oldalirny mozgs index,Indice di vischiosit,ndice de Agitao, ,ndice de agitacin,,Choppiness Index,Choppiness Index
Disparity Index, ,Indice d'ingalit,Disparity Index,Diszparits index,Indice di disparit,ndice de Disparidade, ,ndice de disparidad,,Disparity Index,
Elder Impulse System, Elder Impulse,Systme d'impulsion Elder,Elder Impulssystem ,Elder Impulzus Rendszer,Sistema di impulso Elder ,Sistema de Impulso Mais Antigo,  ,Elder Impulse System,,Elder Impulse System,Elder Impulse System
Gator Oscillator, ,Oscillateur Gator,Gator Oszillator,Gator oszcilltor,Oscillatore Gator,Oscilador Gator, Gator,Oscilador "Gator",,Gator Oscillator,Gator Oscillator
Market Facilitation Index,  ,Indice de facilitation du march,Market Facilitation Index,Piaci Facilitcis Index,Indice di facilitazione del mercato,ndice de Facilitao do Mercado,  ,Market Facilitation Index,,Market Facilitation Index,Market Facilitation Index
Price Momentum Oscillator,  ,Oscillateur du momentum de prix,Preismomentum-Indikator,rmomentum oszcilltor,Oscillatore del momentum del prezzo,Oscilador da Determinao do Preo,  ,Oscilador "Price momentum",,Price Momentum Oscillator,Price Momentum Oscillator
Price Relative, ,Prix relatif,Price Relative,rviszonyts,Prezzo relativo,Preo Relativo, ,Precio relativo,,Price Relative,Price Relative
Pring's Know Sure Thing,  KST,Le certezze di Pring,Pring's Know Sure Thing,Pring's Know Sure Thing,Le certezze di Pring,Coisa Certa de Pring,Pring's Know Sure Thing,Pring's Know Sure Thing,,Pring's Know Sure Thing,Pring's Know Sure Thing
Pring's Special K, Special K,Lo Special K di Pring,Pring's Special K,Pring's Special K,La Special K di Pring,Special K Pring,Pring's Special K,Pring's Special K,K,Pring's Special K,Pring's Special K
Rainbow Moving Average,   ,Moyenne mobile arc-en-ciel,Rainbow Moving Average,Rainbow mozgtlag,Media mobile ad arcobaleno,Mdia de Mudana de Arco-irs,  Rainbow,Media variable 'Rainbow',,Rainbow Moving Average,Rainbow Moving Average
Rainbow Oscillator,  ,Oscillateur en arc-en-ciel,Rainbow Oszillator,Rainbow oszcilltor,Oscillatore ad arcobaleno,Oscilador Arco-ris, Rainbow,Oscilador 'Rainbow',,Rainbow Oscillator,Rainbow Oscillator
Relative Vigor Index,  ,Lindice de vigueur relative,Relativer-Vigor-Index,Relatv erssg index,Indice di vigore relativo,ndice de Vigor Relativo,  ,ndice de vigor relativo,,Relative Vigor Index,RVI
Relative Volatility, ,Volatilit relative,Relative Volatilitt,Relatv volatilits,Volatilit relativa,Volatilidade Relativa, ,Volatilidad relativa,,Relative Volatility,Relative Volatility
Ulcer Index, Ulcer,Indice d'Ulcer,Ulcer Index,Ulcer index,Indice Ulcer,ndice Ulcer, Ulcer,Ulcer Index,,Ulcer Index,Ulcer Index
Volume Profile, ,Profil du volume,Volumen Profil,Volumen Profil,Profilo del volume,Perfil do Volume,  ,Perfil de volumen,,,Volume Profile
Simple Square, ,Carr simple,Einfaches Rechteck,Egyszer ngyzet,Quadrato semplice,Praa Simples, ,Cuadrado simple,,,Simple Square
Simple Circle, ,Cercle simple,Einfacher Kreis,Egyszer kr,Cerchio semplice,Crculo Simples, ,Crculo simple,,,Simple Circle
Callouts, ,Callout,Beschriftungen,brafeliratok,Callout,Convocaes,,Llamadas,,,Callouts
Abstract,,Rsum,Abstrakt,Absztrakt,Riassunto,Abstrato,,Abstracto,,,Abstract
None, ,Aucun,Keine,Nincs,Nessuno,Nenhum,,Ninguno,,,None
More,,Plus,Mehr,Rszletek,Di pi,Mais,,Ninguno,,,More
Crosshair,,Crosshair,Fadenkreuz,Clkereszt,Mirino,Mira,,Punto de mira,,,Crosshair
Info,,Info,Info,Inf,Info,Info,,Informacin,,,Info
Draw,,Dessinez,Zeichnen,bra,Disegna,Desenhar,,Dibujar,,,Draw
Clear Drawings, ,Supprimez les dessins,Zeichnungen lschen,brk trlse,Cancella i disegni,Desenhos Claros, ,Eliminar los diagramas,,,Clear Drawings
Measure,,Mesure,Messung,Mutatszm,Misura,Medida,,Medida,,,Measure
Crossline, ,Crossline,Kreuzlinie,Keresztvonal,Crossline,Linha Cruzada, ,Lnea de cruce ,,,
Callout,,Callout,Beschriftung,brafelirat,Callout,Convocao,,Llamada,,,
Channel,,Canal,Kanal,Csatorna,Canale,Canal,,Canal,,,
Fib Arc, ,Arc Fib,Fib Arc,Fib v,Arco Fib,Fib Arc, ,Fib Arc,Fib ,,Fib Arc
Fib Fan, ,ventail Fib,Fib Fan,Fib legyez,Ventaglio Fib,Fib Fan, ,Fib Fan,Fib ,,Fib Fan
Fib Time Zone,  ,Intervalle de temps Fib,Fib Zeitzonen,Fib idzna,Zona temporale Fib,Fuso Horrio de Fib,  ,Fib de huso horario,Fib ,,Fib Time Zone
Gann Fan, ,ventail Gann,Gann Fan,Gann legyez,Ventaglio Gann,Gann Fan, ,Gann Fan,,,Gann Fan
Quadrant Lines, ,Lignes cadrans,Quadrant-Linien ,Kvadrns vonalak,Linee quadranti,Linhas Quadrantes, ,Lneas cuadrantes,,,Quadrant Lines
Regression Line, ,Lignes de rgression,Regressionslinie ,Regresszi vonal,Linea di regressione,Linha de Regresso, ,Lnea de regresin ,,,Regression Line
Pitchfork,,Fourche,Pitchfork,Villa,Forcone,Forquilha,,Horquilla,,,
Shape - Arrow,  ,Forme - Flche,Form - Pfeil,Alakzat - Nyl,Forma - Freccia,Forma - Seta, - ,Forma -Flecha,  , - ,Shape - Arrow
Shape - Check,  ,Forme - Tique,Form - Karo,Alakzat - Pipa,Forma - Spunta,Forma - Verificar, - ,Forma - Verificacin,  , - ,Shape - Check
Shape - Cross,  ,Forme - Croix,Form - Kreuz,Alakzat - Kereszt,Forma - Croce,Forma - Cruzar, - ,Forma - Cruce,  , - ,Shape - Cross
Shape - Focus,   ,Forme - Focus,Form - Fokus,Alakzat - Fkusz,Forma - Focus,Forma - Foco, - ,Forma - Centro,  , - ,Shape - Focus
Shape - Heart,  ,Forme - Cur,Form - Herz,Alakzat - Szv,Forma - Cuore,Forma - Corao, - ,Forma - Corazn,  , - ,Shape - Heart
Shape - Star,  ,Forme - toile,Form - Stern,Alakzat - Csillag,Forma - Stella,Forma - Estrela, - ,Forma - Estrella,  , - ,Shape - Star
Time Cycle, ,Temps de cycle,Zykluszeit,Idciklus,Ciclo temporale,Ciclo de Tempo, ,Ciclo de tiempo,,,Time Cycle
Tirone Levels, ,Niveaux  Tirone,Tirone Niveaus,Tirone szintek,Livelli di Tirone,Nveis de Tirone, ,Niveles de Tirone,,,Tirone Levels
Tirone, ,Niveaux  Tirone,Tirone Niveaus,Tirone szintek,Livelli di Tirone,Nveis de Tirone, ,Niveles de Tirone,,,
Speed Resistance Arc,  ,Arc de rsistance de la vitesse,Speed Widerstand Arc,Sebessg-ellenlls v,Arco di resistenza della velocit,Arco de Resistncia Velocidade, ,Arco de resistencia a la velocidad,,,Speed Resistance Arc
Speed Resistance Line,  ,Ligne de rsistance de la vitesse,Speed Widerstandslinie,Sebessg-ellenlls vonal,Linea di resistenza della velocit,Linha de Resistncia Velocidade, ,Lnea de resistencia a la velocidad,,,Speed Resistance Line
Axis Label:, :,tiquette de l'Axe:,Achsenbeschriftung,Tengelycmke:,Etichetta dell'asse:,Etiqueta Axis:, :,Etiqueta de eje:,,,Axis Label:
I,,I,K,D,I,I,,C,,,I
B,,B,F,F,B,B,,N,,,B
Price,,Prix,Preis,r,Prezzo,Preo,,Precio,,,Price
Open,,Ouverture,Erffnung,Nyitott,Apertura,Abrir,,Abrir,,,
Vol,,Vol,Vol,Vol,Vol,Vol,,Vol.,,,Vol
Helvetica,Helvetica,Helvetica,Helvetica,Helvetica,Helvetica,Helvetica,Helvetica,Helvtica,Helvetica ,Helvetica,Helvetica
Default,,Par dfaut,Standard ,Alaprtelmezett,Default,Pr-definido, ,Por defecto,,,
Courier,Courier,Courrier,Courier,Courier,Courier,Correio,Courier,Courier,Courier ,Courier,Courier
Garamond,Garamond,Garamond,Garamond,Garamond,Garamond,Garamond,Garamond,Garamond,Garamond ,Garamond,Garamond
Palatino,Palatino,Palatino,Palatino,Palatino,Palatino,Palatino,Palatino,Palatino,Palatino ,Palatino,Palatino
Times New Roman,Times New Roman,Time New Roman,Times New Roman,Times New Roman,Time New Roman,Times New Roman,Times New Roman,Times New Roman,,Times New Roman,Times New Roman
Undo,,Annulez,Rckgngig machen,Visszavons,Annulla,Retroceder,,Deshacer,,,Undo
Redo,,Refaire,Wiederherstellen,Ismt,Rifai,Refazer,,Volver a hacer,,,Redo
Compare,,Comparez,Vergleichen,sszehasonlts,Confronta,Comparar,,Comparar,,,Compare
ADD,,AJOUTEZ,ADD,HOZZADS,AGGIUNGI,ADICIONAR,ADD,ADD,,,ADD
Date/Time:,/:,Date/Heure,Datum/Uhrzeit:,Dtum/idpont:,Data/Ora,Data/Hora:,/:,Fecha/Hora:,/,,Date/Time:
High,,Maximum,Hoch,Maximum,Massimo,Alto,,Al alza,,High,
Low,,Minimum,Tief,Minimum,Minimo,Baixo,,A la baja,,Low,
1d,1,1 j,1 Tag,1 n,1 g,1d,1 ,1d,1 ,1,1d
5d,5,5 j,5 Tage,5 n,5 gg,5d,5 ,5d,5 ,5,5d
1m,1,1 mois,1 Monat,1 h,1 ms,1m,1 ,1m,1 ,1,1m
3m,3,3 mois,3 Monate,3 h,3 ms,3m,3 ,3m,3 ,3,3m
6m,6,6 mois,6 Monate,6 h,6 ms,6m,6 ,6m,6 ,6,6m
YTD, ,annes jusqu' aujourd'hui,YTD,VES SZINTEN,anni a oggi,YTD,  ,HLF,,,YTD
1y,1,1 ans,1 Jahr,1 ,1 anno,1ano,1 ,1a,1 ,1,1y
5y,5,5 ans,5 Jahre,5 ,5 anni,5dias,5 ,5a,5 ,5,5y
All,,Tout,Max,sszes,Tutto,Todos,,Todo,,,All
Share,,Partagez ,Teilen,Megoszts,Condividi,Partilhar,,Compartir,,,Share
Save View, ,Sauvegardez la vue,Vorlage speichern,Mentett nzet,Salva visualizzazione,Guardar Visualizao, ,Guardar vista+A101:A120,,,Save View
Enter name of view:,  :,Entrez le nom de la vue,Name der Vorlage eingeben:,Adja meg a nzet nevt:,Inserisci il nome della visualizzazione,Introduzir nome da visualizao:,  :,Introducir el nombre de la vista:,,,Enter name of view:
Save,,Sauvegardez,Speichern,Ments,Salva,Guardar,,Guardar,,,Save
Enter value and hit 'Enter',"    ''","Entrez la valeur et appuyez sur 'Entrer'",Wert eingeben und Eingabetaste drcken,"Adja meg az rtket, majd Enter","Immetti il valore e premi 'Inserisci'","Introduzir valor e pressionar 'Enter'",    Enter,"Introduzca el valor y pulse 'Entrar',,,Enter value and hit 'Enter'
Enter box size and hit Enter,"     ''",Entrez la taille du cadre et appuyez sur  Entrer ,Boxgre eingeben und Eingabetaste drcken,"Adja meg a ngyzet mrett, majd Enter","Immetti la dimensione del riquadro e premi 'Inserisci'","Introduzir tamanho da caixa e pressionar 'Enter'",     Enter,"Introduzca el tamao de la casilla y pulse 'Entrar'",,,Enter box size and hit Enter
Enter reversal and hit Enter,"    ''",Insrez l'inversion et appuyez sur  Entrer ,Stornierung eingeben und Eingabetaste drcken,"Adja meg a visszatrst, majd Enter","Immetti l'inversione e premi 'Inserisci'","Introduzir reverso e pressionar 'Enter'",     Enter,"Introduzca retroceso y pulse 'Entrar'",,,Enter reversal and hit Enter
or,,ou,oder,vagy,o,ou,,o,,,or
Auto Select, ,Slection automatique,Automatische Wahl,Automatikus kivlaszts,Selezione automatica,Auto Seleccionar, ,Seleccione automticamente,,,Auto Select
Edit Settings..., ...,Modifiez les paramtres ...,Einstellungen bearbeiten,Belltsok szerkesztse...,Modifica le impostazioni,Editar Configuraes..., ,Editar configuracin,,,Edit Settings...
Delete Study, ,Effacez l'tude,Studien lschen,Mutat trlse,Cancella lo studio,Eliminar Estudo, ,Eliminar estudio,,,Delete Study
Study,,tude,Studien,Mutat,Studio,Estudo,,Estudio ,,,Study
Done,,Termin,Fertig,Ksz,Fatto,Feito,,Hecho,,,Done
Create Custom Theme,  ,Crez un thme personnalis,Benutzerdefinierte Vorlage erstellen,j egyedi tma ksztse,Crea tema personalizzato,Criar Tema Personalizado, ,Crear tema personalizado,,,Create Custom Theme
Candle Color, ,Couleur de la bougie,Kerzenfarbe,Gyertya szne,Colore della candela,Cor da Vela, ,Color de la vela ,,,Candle Color
Candle Wick, ,Mche de la bougie,Kerzendocht,Gyertyakanc,Stoppino della candela,Castial, ,Mecha de la vela,,,Candle Wick
Candle Border, ,Marge de la bougie,Kerzenumrandung,Gyertyaszegly,Margine della candela,Borda da Vela, ,Borde la vela,,,Candle Border
Line/Bar Chart,  /,Graphique en ligne/ bandes,Linien- und Barchart,Vonal-/oszlopdiagram,Grafico a linee/barre,Grfico de Linha/Barra,   ,Grfico de lneas/barra,/,,Line/Bar Chart
Mountain Color, ,Couleur de la montagne,Farbschema Mountain,Hegy szne,Colore della montagna,Cor Montanha, Mountain,Color de la montaa,,,Mountain Color
Background,,Fond,Hintergrund,Httr,Sfondo,Enquadramento,,Fondo,,,Background
Grid Lines, ,Lignes de grille,Gitterlinien,Rcsvonalak,Linee della griglia,Linhas de Grade, ,Lneas de la cuadrcula,,,Grid Lines
Date Dividers, ,Sparateurs de date,Perdiodentrennung,Dtumelvlasztk,Divisori della data,Divisores de Data, ,Divisores de fechas,,,Date Dividers
Axis Text, ,texte de l'axe,Achsenbeschriftung,Tengely szvege,Testo dell'asse,Texto Axis, ,Texto del eje,,,Axis Text
"To set your timezone use the location button below, or scroll through the following list...",            ...,"Pour dfinir votre fuseau horaire, utilisez le bouton de l'emplacement ci-dessous ou faites dfiler la liste suivante ...","Um Ihre Zeitzone zu bestimmen, klicken Sie auf die Schaltflche Standort, oder blttern Sie durch die Liste","Az idzna belltshoz hasznlja a Tartzkodsi hely gombot, vagy grgesse le a kvetkez listt...","Per impostare il tuo fuso orario, utilizza il tasto della posizione qui sotto o scorri la lista seguente","Para definir o seu fuso horrio, use o boto localizao abaixo ou deslize ao longo da seguinte lista...","      ''      ","Para establecer su huso horario utilice el botn de ubicacin a continuacin, o desplcese a lo largo de la lista siguiente",,,"To set your timezone use the location button below, or scroll through the following list..."
Your timezone is your current location,    ,Votre fuseau horaire est votre position actuelle,Ihre Zeitzone ist Ihr aktueller Standort,Az n idznja a jelenlegi tartzkodsi helye,Il tuo fuso orario  la tua posizione attuale,O seu fuso horrio  a sua localizao actual,    ,Su huso horario es su ubicacin actual,,,Your timezone is your current location
Use My Current Location,  ,Utilisez mon emplacement actuel,Verwenden Sie meinen aktuellen Standort,Jelenlegi tartzkodsi hely hasznlata,Utilizza la mia posizione attuale,Use Minha Localizao Actual,  ,Utilizar mi ubicacin actual,,,Use My Current Location
"(UTC-11:00) American Samoa, Midway Island",(UTC-11: 00)    ,"(UTC-11: 00) Samoa amricaines, l'le de Midway","(UTC-11:00) Amerikanisch-Samoa, Midway Inseln","(UTC-11:00) Amerikai Szamoa, Midway-sziget","(UTC-11:00) Samoa americane, Isola di Midway","(UTC-11:00) Samoa Americana, Ilha Midway","(UTC-11:00)  ,  ","(UTC-11:00) Samoa americana, Islas Midway",-11:00,"(UTC-11:00) , "
(UTC-10:00) Hawaii,(UTC-10: 00) ,(UTC-10: 00) Hawaii,(UTC-10:00) Hawaii,(UTC-10:00) Hawaii,(UTC-10:00) Hawaii,(UTC-10:00) Hawaii,(UTC-10:00) ,(UTC-10:00) Hawi,-10:00,(UTC-10:00) ,(UTC-10:00) Hawaii
(UTC-09:00) Alaska,(UTC-09: 00) ,(UTC-09: 00) Alaska,(UTC-09:00) Alaska,(UTC-09:00) Alaszka,(UTC-09:00) Alaska,(UTC-09:00) Alaska,(UTC-09:00) ,(UTC-09:00) Alaska,-09:00,(UTC-09:00) ,(UTC-09:00) Alaska
(UTC-08:00) Pacific Time (US and Canada),(UTC-08: 00)    (  ),(UTC-08: 00) Heure normale du Pacifique (Etats-Unis et Canada),(UTC-08:00) Pazifik Zeit (USA und Kanada),(UTC-08:00) Csendes-ceni id (USA s Kanada),(UTC-08:00) ora del Pacifico (Stati Uniti e Canada),(UTC-08:00) Horrio do Pacfico (EUA e Canad),(UTC-08:00)   (  ),(UTC-08:00) Hora del pacfico (EE.UU. Y Canad),-08:00,(UTC-08:00) ,(UTC-08:00) Pacific Time (US and Canada)
(UTC-08:00) Tijuana,(UTC-08: 00) ,(UTC-08: 00) Tijuana,(UTC-08:00) Tijuana,(UTC-08:00) Tijuana,(UTC-08:00) Tijuana,(UTC-08:00) Tijuana,(UTC-08:00) ,(UTC-08:00) Tijuana,-08:00,(UTC-08:00) ,(UTC-08:00) Tijuana
(UTC-07:00) Arizona,(UTC-07: 00) ,(UTC-07: 00) Arizona,(UTC-07:00) Arizona,(UTC-07:00) Arizona,(UTC-07:00) Arizona,(UTC-07:00) Arizona,(UTC-07:00) ,(UTC-07:00) Arizona,-07:00,(UTC-07:00) ,(UTC-07:00) Arizona
"(UTC-07:00) Chihuahua, Mazatlan",(UTC-07: 00)  ,"(UTC-07: 00) Chihuahua, Mazatlan","(UTC-07:00) Chihuahua, Mazatlan","(UTC-07:00) Chihuahua, Mazatlan","(UTC-07:00) Chihuahua, Mazatlan","(UTC-07:00) Chihuahua, Mazatlan","(UTC-07:00) , ","(UTC-07:00) Chihuahua, Mazatln",-07:00,"(UTC-07:00) , ","(UTC-07:00) Chihuahua, Mazatlan"
(UTC-07:00) Mountain Time (US and Canada),(UTC-07: 00)   (  ),(UTC-07: 00) L'heure des Rocheuses (tats-Unis et Canada),(UTC-07:00) Mountain Time (USA und Kanada),(UTC-07:00) Helyvidki id (USA s Kanada),(UTC-07:00) ora delle Montage Rocciose (Stati Uniti e Canada),(UTC-07:00) Hora de Mountain (EUA e Canad),(UTC-07:00)   (  ),(UTC-07:00) Horario montas (EE.UU. Y Canad),-07:00,(UTC-07:00) ,(UTC-07:00) Mountain Time (US and Canada)
(UTC-06:00) Central America,(UTC-06: 00)  ,(UTC-06: 00) Amrique Centrale,(UTC-06:00) Zentralamerika,(UTC-06:00) Kzp-Amerika,(UTC-06:00) America centrale,(UTC-06:00) Amrica Central,(UTC-06:00)  ,(UTC-06:00) Amrica central,-06:00,(UTC-06:00) ,(UTC-06:00) Central America
(UTC-06:00) Central Time (US and Canada),(UTC-06: 00)   (  ),(UTC-06: 00) Central (tats-Unis et Canada),(UTC-06:00) Central Time (USA und Kanda),(UTC-06:00) Kzpid (USA s Kanada),(UTC-06:00) ora centrale (Stati Uniti e Canada),(UTC-06:00) Hora Central (EUA e Canad),(UTC-06:00)   (  ),(UTC-06:00) Horario central (EE.UU. Y Canad),-06:00,(UTC-06:00) ,(UTC-06:00) Central Time (US and Canada)
"(UTC-06:00) Guadalajara, Mexico City, Monterrey",(UTC-06: 00)    ,"(UTC-06: 00) Guadalajara, Mexico, Monterrey","(UTC-06:00) Guadalajara, Mexiko Stadt, Monterrey","(UTC-06:00) Guadalajara, Mexikvros, Monterrey","(UTC-06:00) Guadalajara, Citt del Messico, Monterrey","(UTC-06:00) Guadalajara, Cidade do Mxico, Monterrey","(UTC-06:00) , , ","(UTC-06:00) Guadalajara, Ciudad de Mxico, Monterrey",-06:00,(UTC-06:00) ,"(UTC-06:00) Guadalajara, Mexico City, Monterrey"
(UTC-06:00) Saskatchewan,(UTC-06: 00) ,(UTC-06: 00) Saskatchewan,(UTC-06:00) Saskatchewan,(UTC-06:00) Saskatchewan,(UTC-06:00) Saskatchewan,(UTC-06:00) Saskatchewan,(UTC-06:00) ,(UTC-06:00) Saskatchewan,-06:00,(UTC-06:00) ,(UTC-06:00) Saskatchewan
"(UTC-05:00) Bogota, Lima, Quito, Rio Branco",(UTC-05: 00)     ,"(UTC-05: 00) Bogota, Lima, Quito, Rio Branco","(UTC-05:00) Bogota, Lima, Quito, Rio Branco","(UTC-05:00) Bogota, Lima, Quito, Rio Branco","(UTC-05:00) Bogot, Lima, Quito, Rio Branco","(UTC-05:00) Bogot, Lima, Quito, Rio Branco","(UTC-05:00) , , , -","(UTC-05:00) Bogot, Lima, Quito, Rio Branco",-05:00,(UTC-05:00) ,"(UTC-05:00) Bogota, Lima, Quito, Rio Branco"
(UTC-05:00) Eastern Time (US and Canada),(UTC-05: 00)   (  ),(UTC-05:00) L'Heure de l'Est (Stati Uniti e Canada),(UTC-05:00) Eastern Time (USA und Kanada),(UTC-05:00) Keleti parti id (USA s Kanada),(UTC-05:00) ora della costa orientae (Stati Uniti e Canada),(UTC-05:00) Hora de Leste (EUA e Canad),(UTC-05:00)   (  ),(UTC-05:00) Horario del este (EE.UU. Y Canad)Eastern Time (US and Canada),-05:00,(UTC-05:00) ,(UTC-05:00) Eastern Time (US and Canada)
(UTC-05:00) Indiana (East),(UTC-05: 00)  (),(UTC-05: 00) Indiana (Est),(UTC-05:00) Indiana (East),(UTC-05:00) Indiana (Kelet),(UTC-05:00) Indiana (orientale),(UTC-05:00) Indiana (Leste),(UTC-05:00) ,(UTC-05:00) Indiana (Este),-05:00,(UTC-05:00) ,(UTC-05:00) Indiana (East)
(UTC-04:00) Asuncion,(UTC-04: 00) ,(UTC-04: 00) Asuncion,(UTC-04:00) Asuncion,(UTC-04:00) Asuncion,(UTC-04:00) Asuncion,(UTC-04:00) Assuno,(UTC-04:00) ,(UTC-04:00) Asuncin,-04:00,(UTC-04:00) ,(UTC-04:00) Asuncion
(UTC-04:00) Santiago,(UTC-04: 00) ,(UTC-04: 00) Santiago,(UTC-04:00) Santiago,(UTC-04:00) Santiago,(UTC-04:00) Santiago,(UTC-04:00) Santiago,(UTC-04:00) ,(UTC-04:00) Santiago,-04:00,(UTC-04:00) ,(UTC-04:00) Santiago
(UTC-04:00) Caracas,(UTC-04: 00) ,(UTC-04: 00) Caracas,(UTC-04:00) Caracas,(UTC-04:00) Caracas,(UTC-04:00) Caracas,(UTC-04:00) Caracas,(UTC-04:00) ,(UTC-04:00) Caracas,-04:00,(UTC-04:00) ,(UTC-04:00) Caracas
(UTC-04:00) Atlantic Time (Canada),(UTC-04: 00)   (),(UTC-04: 00) Heure de l'Atlantique (Canada),(UTC-04:00) Atlantic Time (Kanada),(UTC-04:00) Atlanti id (Kanada),(UTC-04:00) ora dell'Atlantico (Canada),(UTC-04:00) Hora do Atlntico (Canad),(UTC-04:00)   (),(UTC-04:00) Horario atlntico (Canad),-04:00,(UTC-04:00) ,(UTC-04:00) Atlantic Time (Canada)
"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",(UTC-04: 00)      ,"(UTC-04: 00) Georgetown, La Paz, Manaus, San Juan","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","(UTC-04:00) , -, , -","(UTC-04:00) Georgetown, La Paz, Manaos, San Juan",-04:00,(UTC-04:00) ,"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan"
(UTC-03:30) Newfoundland and Labrador,(UTC-03: 30)  ,(UTC-03: 30) Terre-Neuve-et-Labrador,(UTC-03:30) Neufundland und Labrador,(UTC-03:30) j-Foundland s Labrador,(UTC-03:30) Terranova e Labrador,(UTC-03:30) Newfoundland e Labrador,(UTC-03:30)   ,(UTC-03:30) Pennsula de Terranova y Labrador,-03:30,(UTC-03:30) ,(UTC-03:30) Newfoundland and Labrador
(UTC-03:00) Buenos Aires,(UTC-03: 00)  ,(UTC-03: 00) Buenos Aires,(UTC-03:00) Buenos Aires,(UTC-03:00) Buenos Aires,(UTC-03:00) Buenos Aires,(UTC-03:00) Buenos Aires,(UTC-03:00) -,(UTC-03:00) Buenos Aires,-03:00,(UTC-03:00) ,(UTC-03:00) Buenos Aires
(UTC-03:00) Punta Arenas,(UTC-03: 00)  ,(UTC-03: 00) Punta Arenas,(UTC-03:00) Punta Arenas,(UTC-03:00) Punta Arenas,(UTC-03:00) Punta Arenas,(UTC-03:00) Punta Arenas,(UTC-03:00) -,(UTC-03:00) Punta Arenas,-03:00,(UTC-03:00) ,(UTC-03:00) Punta Arenas
(UTC-03:00) Montevideo,(UTC-03: 00) ,(UTC-03: 00) Montevideo,(UTC-03:00) Montevideo,(UTC-03:00) Montevideo,(UTC-03:00) Montevideo,(UTC-03:00) Montevidu,(UTC-03:00) ,(UTC-03:00) Montevideo,-03:00,(UTC-03:00) ,(UTC-03:00) Montevideo
(UTC-03:00) Sao Paulo,(UTC-03: 00)  ,(UTC-03: 00) San Paolo,(UTC-03:00) Sao Paulo,(UTC-03:00) Sao Paulo,(UTC-03:00) San Paolo,(UTC-03:00) So Paulo,(UTC-03:00) -,(UTC-03:00) Sao Paulo,-03:00,(UTC-03:00) ,(UTC-03:00) Sao Paulo
(UTC-02:00) Mid-Atlantic,(UTC-02: 00)  ,(UTC-02: 00) Heure du  Mid Atlantique,(UTC-02:00) Mid-Atlantic,(UTC-02:00) Kzp-atlanti,(UTC-02:00) ora del medio Atlantico,(UTC-02:00) Mdio-Atlntico,(UTC-02:00)  ,(UTC-02:00) Atlntico medio,-02:00,(UTC-02:00) ,(UTC-02:00) Mid-Atlantic
(UTC-01:00) Azores,(UTC-01: 00) ,(UTC-01: 00) Aores,(UTC-01:00) Azores,(UTC-01:00) Azori-szigetek,(UTC-01:00) Azzorre,(UTC-01:00) Aores,(UTC-01:00)  ,(UTC-01:00) Azores,-01:00,(UTC-01:00) ,(UTC-01:00) Azores
(UTC-01:00) Cape Verde Islands,(UTC-01: 00)   ,(UTC-01: 00) Le Cap-Vert,(UTC-01:00) Kap Verde Islands,(UTC-01:00) Zld-foki szigetek,(UTC-01:00) Isole di Capo Verde,(UTC-01:00) Ilhas de Cabo Verde,(UTC-01:00) -,(UTC-01:00) Islas de Cabo Verde,-01:00,(UTC-01:00) ,(UTC-01:00) Cape Verde Islands
"(UTC) Greenwich Mean Time, Reykjavik",(UTC)   ,"(UTC) GMT, Reykjavik","(UTC) Greenwich Mean Time, Reykjavik","(UTC) Greenwich-i kzpid, Reykjavk","(UTC) ora di Greenwich, Reykjavik","(UTC) Hora mdia de Greenwich, Reykjavik","(UTC) , ","(UTC) Huso horario principal de Greenwich, Reikiavik",,(UTC) ,"(UTC) Greenwich Mean Time, Reykjavik"
(UTC) Casablanca,(UTC)  ,(UTC) Casablanca,(UTC) Casablanca,(UTC) Casablanca,(UTC) Casablanca,(UTC) Casablanca,(UTC) ,(UTC) Casablanca,,(UTC) ,(UTC) Casablanca
"(UTC) Dublin, Lisbon, London",(UTC)   ,"(UTC) Dublin, Lisbonne, Londres","(UTC) Dublin, Lissabon, London","(UTC) Dublin, Lisszabon, London","(UTC) Dublino, Lisbona, Londra","(UTC) Dublin, Lisboa, Londres","(UTC) , , ","(UTC) Dubln, Lisboa, Londres",,(UTC) ,"(UTC) Dublin, Lisbon, London"
"(UTC+01:00) Algiers, Tunis",(UTC + 01: 00)  ,"(GMT + 01: 00) Alger, Tunis","(UTC+01:00) Algerien, Tunesien","(UTC+01:00) Algr, Tunisz","(UTC+01:00) Algeri, Tunisi","(UTC + 01:00) Argel, Tunis","(UTC+01:00) , ","(UTC+01:00) Argel, Tnez",+01:00,(UTC+01:00) ,"(UTC+01:00) Algiers, Tunis"
"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",(UTC + 01: 00)      ,"(GMT + 01: 00) Amsterdam, Berlin, Berne, Rome, Stockholm, Vienne","(UTC+01:00) Amsterdam, Berlin, Bern, Rom, Stockholm, Wien","(UTC+01:00) Amszterdam, Berlin, Bern, Rma, Stockholm, Bcs","(UTC+01:00) Amsterdam, Berlino, Berna, Roma, Stoccolma, Vienna","(UTC + 01:00) Amsterdo, Berlim, Berna, Roma, Estocolmo, Viena","(UTC+01:00) , , , , , ","(UTC+01:00) msterdam, Berln, Berna, Roma, Estocolmo, Viena",+01:00,(UTC+01:00) ,"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna"
"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",(UTC + 01: 00)     ,"(GMT + 01: 00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","(UTC+01:00) Belgrad, Bratislava, Budapest, Ljubljana, Prag","(UTC+01:00) Belgrd, Pozsony, Budapest, Ljubljana, Prga","(UTC+01:00) Belgrado, Bratislava, Budapest, Lubiana, Praga","(UTC + 01:00) Belgrado, Bratislava, Budapeste, Ljubljana, Praga","(UTC+01:00) , , , , ","(UTC+01:00) Belgrado, Bratislava, Budapest, e, Bratislava, Budapest, Liubliana, Praga",+01:00,(UTC+01:00) ,"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague"
"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",(UTC + 01: 00)    ,"(GMT + 01: 00) Bruxelles, Copenhague, Madrid, Paris","(UTC+01:00) Brssel, Kopenhagen, Madrid, Paris","(UTC+01:00) Brsszel, Koppenhga, Madrid, Prizs","(UTC+01:00) Bruxelles, Copenhagen, Madrid, Parigi","(UTC + 01:00) Bruxelas, Copenhaga, Madrid, Paris","(UTC+01:00) , , , ","(UTC+01:00) Bruselas, Copenhague, Madrid, Pars",+01:00,(UTC+01:00) ,"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris"
"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",(UTC + 01: 00)    ,"(GMT + 01: 00) Sarajevo Skopje Varsovie, Zagreb","(UTC+01:00) Sarajevo, Skopje, Warschau, Zagreb","(UTC+01:00) Szarajev, Skopje, Vars, Zgrb","(UTC+01:00) Sarajevo, Skopje, Varsavia, Zagabria","(UTC + 01:00) Sarajevo, Skopje, Varsvia, Zagreb","(UTC+01:00) , , , ","(UTC+01:00) Sarajevo, Skopie, Varsovia, Zagreb",+01:00,(UTC+01:00) ,"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb"
(UTC+02:00) Kaliningrad,(UTC + 02: 00) ,(GMT + 02: 00) Kaliningrad,(UTC+02:00) Kaliningrad,(UTC+02:00) Kalinyingrd,(UTC+02:00) Kaliningrad,(UTC + 02:00) Kaliningrado,(UTC+02:00) ,(UTC+02:00) Kaliningrado,+02:00,(UTC+02:00) ,(UTC+02:00) Kaliningrad
"(UTC+02:00) Athens, Bucharest",(UTC + 02: 00)  ,"(GMT + 02: 00) Athnes, Bucarest","(UTC+02:00) Athen, Bukarest","(UTC+02:00) Athn, Bukarest","(UTC+02:00) Atene, Bucharest","(UTC + 02:00) Atenas, Bucareste","(UTC+02:00) , ","(UTC+02:00) Atenas, Bucarest",+02:00,(UTC+02:00) ,"(UTC+02:00) Athens, Bucharest"
(UTC+02:00) Cairo,(UTC + 02: 00) ,(GMT + 02: 00) Le Caire,(UTC+02:00) Kairo,(UTC+02:00) Kair,(UTC+02:00) Il Cairo,(UTC + 02:00) Kaliningrado,(UTC+02:00) ,(UTC+02:00 ) El Cairo,+02:00,(UTC+02:00) ,(UTC+02:00) Cairo
"(UTC+02:00) Harare, Johannesburg",(UTC + 02: 00)  ,"(GMT + 02: 00) Harare, Johannesburg","(UTC+02:00) Harare, Johannesburg","(UTC+02:00) Harare, Johannesburg","(UTC+02:00) Harare, Johannesburg","(UTC + 02:00) Harare, Joanesburgo","(UTC+02:00) , ","(UTC+02:00) Harare, Johannesburgo",+02:00,(UTC+02:00) ,"(UTC+02:00) Harare, Johannesburg"
"(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius",(UTC + 02: 00)      ,"(GMT + 02: 00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius","(UTC+02:00) Helsinki, Kijev, Riga, Szfia, Tallinn, Vilnius","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius","(UTC + 02:00) Helsnquia, Kiev, Riga, Sofia, Tallinn, Vilnius","(UTC+02:00) , , , , , ","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallin, Vilnius",+02:00,(UTC+02:00) ,"(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius"
(UTC+02:00) Cyprus,(UTC + 02: 00) ,(GMT + 02: 00) Chypre,(UTC+02:00) Zypern,(UTC+02:00) Ciprus,(UTC+02:00) Cipro,(UTC + 02:00) Chipre,(UTC+02:00) ,(UTC+02:00) Chipre,+02:00,(UTC+02:00) ,(UTC+02:00) Cyprus
(UTC+02:00) Jerusalem,(UTC + 02: 00) ,(GMT + 02: 00) Jrusalem,(UTC+02:00) Jerusalem,(UTC+02:00) Jeruzslem,(UTC+02:00) Gerusalemme,(UTC+02:00) Jerusalm,(UTC+02:00) ,(UTC+02:00) Jerusaln,+02:00,(UTC+02:00) ,(UTC+02:00) Jerusalem
(UTC+03:00) Istanbul,(UTC + 03: 00) ,(GMT + 03: 00) Istanbul,(UTC+03:00) Istanbul,(UTC+03:00) Isztambul,(UTC+03:00) Istanbul,(UTC + 03:00) Istambul,(UTC+03:00) ,(UTC+03:00) Estambul,+03:00,(UTC+03:00) ,(UTC+03:00) Istanbul
"(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh",(UTC + 03: 00)    ,"(GMT + 03: 00) Bagdad, Kowet, Qatar, Riyadh","(UTC+03:00) Bagdad, Kuwait, Katar, Riyadh","(UTC+03:00) Bagdad, Kuvait, Katar, Rijd","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyad","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh","(UTC+03:00) , , , -","(UTC+03:00) Bagdad, Kuwait, Qatar, Riyadh",+03:00,(UTC+03:00) ,"(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh"
"(UTC+03:00) Minsk, Moscow, Kirov, Volgograd",(UTC + 03: 00)    ,"(GMT + 03: 00) Minsk Moscou, Kirov, Volgograd","(UTC+03:00) Minsk, Moskau, Kirov, Volgograd","(UTC+03:00) Minszk, Moszkva, Kirov, Volgogrd","(UTC+03:00) Minsk, Mosca, Kirov, Volgograd","(UTC + 03:00) Minsk, Moscovo, Kirov, Volgogrado","(UTC+03:00) , , , ","(UTC+03:00) Minsk, Mosc, Krov, Volgogrado",+03:00,(UTC+03:00) ,"(UTC+03:00) Minsk, Moscow, Kirov, Volgograd"
(UTC+03:00) Simferopol,(UTC + 03: 00) ,(GMT + 03: 00) Simferopol,(UTC+03:00) Simferopol,(UTC+03:00) Szimferopol,(UTC+03:00) Sinferopoli,(UTC+03:00) Simferopol,(UTC+03:00) ,(UTC+03:00) Simferpol,+03:00,(UTC+03:00) ,(UTC+03:00) Simferopol
(UTC+03:00) Nairobi,(UTC + 03: 00) ,(GMT + 03: 00) Nairobi,(UTC+03:00) Nairobi,(UTC+03:00) Nairobi,(UTC+03:00) Nairobi,(UTC+03:00) Nairobi,(UTC+03:00) ,(UTC+03:00) Nairobi,+03:00,(UTC+03:00) ,(UTC+03:00) Nairobi
(UTC+03:30) Tehran,(UTC + 03: 30) ,(GMT + 03: 30) Thran,(UTC+03:30) Tehran,(UTC+03:30) Tehern,(UTC+03:30) Teheran,(UTC + 03:30) Teero,(UTC+03:30) ,(UTC+03:30) Tehern,+03:00,(UTC+03:30) ,(UTC+03:30) Tehran
(UTC+04:00) Baku,(UTC + 04: 00) ,(GMT + 04: 00) Baku,(UTC+04:00) Baku,(UTC+04:00) Baku,(UTC+04:00) Baku,(UTC + 04:00) Baku,(UTC+04:00) ,(UTC+04:00) Bak,+04:00,(UTC+04:00) ,(UTC+04:00) Baku
"(UTC+04:00) Dubai, Muscat",(UTC + 04: 00)  ,"(GMT + 04: 00) Duba, Mascate","(UTC+04:00) Dubai, Muskat","(UTC+04:00) Dubaj, Maszkat","(UTC+04:00) Dubai, Mascate","(UTC + 04:00) Dubai, Muscat","(UTC+04:00) , ","(UTC+04:00) Dubi, Muscat",+04:00,(UTC+04:00) ,"(UTC+04:00) Dubai, Muscat"
"(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk",(UTC + 04: 00)    ,"(GMT + 04: 00) Astrakhan, Samara, Saratov, Oulianovsk","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk","(UTC+04:00) Asztrahn, Szamara, Szaratov, Uljanovszk","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk","(UTC+04:00) , , , ","(UTC+04:00) Astracn, Samara, Sartov, Ulinovsk",+04:00,(UTC+04:00) ,"(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk"
(UTC+04:30) Kabul,(UTC + 04: 30) ,(GMT + 04: 30) Kaboul,(UTC+04:30) Kabul,(UTC+04:30) Kabul,(UTC+04:30) Kabul,(UTC+04:30) Kabul,(UTC+04:30) ,(UTC+04:30) Kabul,+04:30,(UTC+04:30) ,(UTC+04:30) Kabul
"(UTC+05:00) Karachi, Tashkent",(UTC + 05: 00)  ,"(GMT + 05: 00) Karachi, Tachkent","(UTC+05:00) Karachi, Tashkent","(UTC+05:00) Karacsi, Taskent","(UTC+05:00) Karachi, Tashkent","(UTC+05:00) Karachi, Tashkent","(UTC+05:00) , ","(UTC+05:00) Karachi, Taskent",+05:00,(UTC+05:00) ,"(UTC+05:00) Karachi, Tashkent"
(UTC+05:00) Yekaterinburg,(UTC + 05: 00) ,(GMT + 05: 00) Ekaterinburg,(UTC+05:00) Yekaterinburg,(UTC+05:00) Jekatyerinburg,(UTC+05:00) Yekaterinburg,(UTC+05:00) Yekaterinburg,(UTC+05:00) ,(UTC+05:00) Ekaterimburgo,+05:00,(UTC+05:00) ,(UTC+05:00) Yekaterinburg
"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",(UTC + 05: 30)    ,"(GMT + 05: 30) Chennai, Kolkata, Mumbai, New Delhi","(UTC+05:30) Chennai, Kolkata, Mumbai, Neu-Dehli","(UTC+05:30) Csennai, Kalkutta, Mumbai, j-Delhi","(UTC+05:30) Chennai, Calcutta, Bombay, Nuova Delhi","(UTC + 05:30) Chennai, Calcut, Mumbai, Nova Deli","(UTC+05:30) , , , -","(UTC+05:30) Chennai, Kolkata, Bombay, Nueva Deli",+05:30,(UTC+05:30) ,"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi"
(UTC+05:45) Kathmandu,(UTC + 05: 45) ,(GMT + 05: 45) Katmandou,(UTC+05:45) Kathmandu,(UTC+05:45) Katmandu,(UTC+05:45) Kathmandu,(UTC+05:45) Kathmandu,(UTC+05:45) ,(UTC+05:45) Katmand,+05:45,(UTC+05:45) ,(UTC+05:45) Kathmandu
(UTC+06:00) Almaty,(UTC + 06: 00) ,(GMT + 06: 00) Almaty,(UTC+06:00) Almaty,(UTC+06:00) Almati,(UTC+06:00) Almaty,(UTC+06:00) Almaty,(UTC+06:00) -,(UTC+06:00) Almaty,+06:00,(UTC+06:00) ,(UTC+06:00) Almaty
(UTC+06:00) Omsk,(UTC + 06: 00) ,(GMT + 06: 00) Omsk,(UTC+06:00) Omsk,(UTC+06:00) Omszk,(UTC+06:00) Omsk,(UTC+06:00) Omsk,(UTC+06:00) ,(UTC+06:00) Omsk,+06:00,(UTC+06:00) ,(UTC+06:00) Omsk
"(UTC+06:00) Astana, Dhaka",(UTC + 06: 00)  ,"(UTC+06:00) Astana, Dacca","(UTC+06:00) Astana, Dhaka","(UTC+06:00) Asztana, Dakka","(UTC+06:00) Astana, Dacca","(UTC+06:00) Astana, Dhaka","(UTC+06:00) , ","(UTC+06:00) Astana, Daca",+06:00,(UTC+06:00) ,"(UTC+06:00) Astana, Dhaka"
(UTC+06:30) Yangon,(UTC + 06: 30) ,(UTC+06:30) Yangon,(UTC+06:30) Yangon,(UTC+06:30) Jangon,(UTC+06:30) Yangon,(UTC+06:30) Yangon,(UTC+06:30)  (),(UTC+06:30) Yangn,+06:30,(UTC+06:30) ,(UTC+06:30) Yangon
"(UTC+07:00) Bangkok, Jakarta, Vietnam",(UTC + 07: 00)   ,"(UTC+07:00) Bangkok, Jakarta, Vietnam","(UTC+07:00) Bangkok, Jakarta, Vietnam","(UTC+07:00) Bangkok, Dzsakarta, Vietnam","(UTC+07:00) Bangkok, Jakarta, Vietnam","(UTC+07:00) Bangkok, Jacarta, Vietname","(UTC+07:00) , , ","(UTC+07:00) Bangkok, Yakarta, Vietnam",+07:00,(UTC+07:00) ,"(UTC+07:00) Bangkok, Jakarta, Vietnam"
(UTC+07:00) Hovd,(UTC + 07: 00) ,(UTC+07:00)Khovd,(UTC+07:00) Hovd,(UTC+07:00) Hovd,(UTC+07:00) Hovd,(UTC+07:00) Hovd,(UTC+07:00) ,(UTC+07:00) Hovd,+07:00,(UTC+07:00) ,(UTC+07:00) Hovd
(UTC+07:00) Krasnoyarsk,(UTC + 07: 00) ,(UTC+07:00) Krasnoarsk,(UTC+07:00) Krasnoyarsk,(UTC+07:00) Krasznojarszk,(UTC+07:00) Krasnoyarsk,(UTC+07:00) Krasnoyarsk,(UTC+07:00) ,(UTC+07:00) Krasnoiarsk,+07:00,(UTC+07:00) ,(UTC+07:00) Krasnoyarsk
(UTC+07:00) Novokuznetsk,(UTC + 07: 00) ,(UTC+07:00) Novokouznetsk,(UTC+07:00) Novokuznetsk,(UTC+07:00) Novokuznyetszk,(UTC+07:00) Novokuznetsk,(UTC+07:00) Novokuznetsk,(UTC+07:00) ,(UTC+07:00) Novokuznetsk,+07:00,(UTC+07:00) ,(UTC+07:00) Novokuznetsk
"(UTC+07:00) Barnaul, Novosibirsk, Tomsk",(UTC + 07: 00)   ,"(UTC+07:00) Barnaoul, Novossibirsk, Tomsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk","(UTC+07:00) Barnaul, Novoszibirszk, Tomszk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk","(UTC+07:00) , , ","(UTC+07:00) Barnaul, Novosibirsk, Tomsk",+07:00,(UTC+07:00) ,"(UTC+07:00) Barnaul, Novosibirsk, Tomsk"
"(UTC+08:00) Beijing, Chongqing, Hong Kong SAR",(UTC + 08: 00)     ,"(UTC+08:00) Pkin, Chongqing, Rgion administrative spciale de Hong Kong","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR","(UTC+08:00) Peking, Csungking, Hongkong SAR","(UTC+08:00) Pechino, Chongqing, Regione Amministrativa Speciale di Hong Kong ","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR","(UTC+08:00) , , ","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR",+08:00,(UTC+08:00) ,"(UTC+08:00) Beijing, Chongqing, Hong Kong SAR"
"(UTC+08:00) Brunei, Kuala Lumpur, Singapore",(UTC + 08: 00)   ,"(UTC+08:00) Brunei, Kuala Lumpur, Singapour","(UTC+08:00) Brunei, Kuala Lumpur, Singapur","(UTC+08:00) Brunei, Kuala Lumpur, Szingapr","(UTC+08:00) Brunei, Kuala Lumpur, Singapore","(UTC+08:00) Brunei, Kuala Lumpur, Singapura","(UTC+08:00) , -, ","(UTC+08:00) Brunei, Kuala Lumpur, Singapur",+08:00,(UTC+08:00) ,"(UTC+08:00) Brunei, Kuala Lumpur, Singapore"
(UTC+08:00) Irkutsk,(UTC + 08: 00) ,(UTC+08:00) Irkoutsk,(UTC+08:00) Irkutsk,(UTC+08:00) Irkutszk,(UTC+08:00) Irkutsk,(UTC+08:00) Irkutsk,(UTC+08:00) ,(UTC+08:00) Irkutsk,+08:00,(UTC+08:00) ,(UTC+08:00) Irkutsk
"(UTC+08:00) Choibalsan, Ulaanbaatar",(UTC + 08: 00)  ,"(UTC+08:00) Choybalsan, Oulan Bator","(UTC+08:00) Choibalsan, Ulaanbaatar","(UTC+08:00) Csojbalszan, Ulnbtor","(UTC+08:00) Choibalsan, Ulan Bator","(UTC+08:00) Choibalsan, Ulaanbaatar","(UTC+08:00) , -","(UTC+08:00) Choibalsan, Ulan-Bator",+08:00,(UTC+08:00) ,"(UTC+08:00) Choibalsan, Ulaanbaatar"
"(UTC+08:00) Manila, Taipei",(UTC + 08: 00)  ,"(UTC+08:00) Manille, Taipei","(UTC+08:00) Manilla, Taipei","(UTC+08:00) Manila, Taipei","(UTC+08:00) Manila, Taipei","(UTC+08:00) Manila, Taipei","(UTC+08:00) , ","(UTC+08:00) Manila, Taipi",+08:00,(UTC+08:00) ,"(UTC+08:00) Manila, Taipei"
(UTC+08:00) Perth,(UTC + 08: 00) ,(UTC+08:00) Perth,(UTC+08:00) Perth,(UTC+08:00) Perth,(UTC+08:00) Perth,(UTC+08:00) Perth,(UTC+08:00) ,(UTC+08:00) Perth,+08:00,(UTC+08:00) ,(UTC+08:00) Perth
(UTC+08:30) Pyongyang,(UTC + 08: 30)  ,(UTC+08:30) Pyongyang,(UTC+08:30) Pyongyang,(UTC+08:30) Phenjan,(UTC+08:30) Pyongyang,(UTC+08:30) Pyongyang,(UTC+08:30) ,(UTC+08:30) Pyongyang,+08:30,(UTC+08:30) ,(UTC+08:30) Pyongyang
(UTC+08:45) Eucla,(UTC + 08: 45) ,(UTC+08:45) Eucla,(UTC+08:45) Eucla,(UTC+08:45) Eucla,(UTC+08:45) Eucla,(UTC+08:45) Eucla,(UTC+08:45) ,(UTC+08:45) Eucla,+08:45,(UTC+08:45) ,(UTC+08:45) Eucla
"(UTC+09:00) Osaka, Sapporo, Tokyo",(UTC + 09: 00)   ,"(UTC+09:00) Osaka, Sapporo, Tokyo","(UTC+09:00) Osaka, Sapporo, Tokio","(UTC+09:00) Oszaka, Szapporo, Toki","(UTC+09:00) Osaka, Sapporo, Tokyo","(UTC + 09:00) Osaka, Sapporo, Tquio","(UTC+09:00) , , ","(UTC+09:00) Osaka, Sapporo, Tokio",+09:00,(UTC+09:00) ,"(UTC+09:00) Osaka, Sapporo, Tokyo"
(UTC+09:00) Seoul,(UTC + 09: 00) ,(UTC+09:00) Soul,(UTC+09:00) Seoul,(UTC+09:00) Szul,(UTC+09:00) Seul,(UTC + 09:00) Seul,(UTC+09:00) ,(UTC+09:00) Sel,+09:00,(UTC+09:00) ,(UTC+09:00) Seoul
"(UTC+09:00) Chita, Khandyga, Yakutsk",(UTC + 09: 00)   ,"(UTC+09:00) Tchita, Khandyga, Iakoutsk","(UTC+09:00) Chita, Khandyga, Yakutsk","(UTC+09:00) Csita, Khandyga, Jakutszk","(UTC+09:00) ita, Khandyga, Yakutsk","(UTC + 09:00) Chita, Khandyga, Yakutsk","(UTC+09:00) , , ","(UTC+09:00) Chita, Chandia, Yakutsk",+09:00,(UTC+09:00) ,"(UTC+09:00) Chita, Khandyga, Yakutsk"
(UTC+09:30) Adelaide,(UTC + 09: 30) ,(UTC+09:30) Adlade,(UTC+09:30) Adelaide,(UTC+09:30) Adelaide,(UTC+09:30) Adelaide,(UTC + 09:30) Adelaide,(UTC+09:30) ,(UTC+09:30) Adelaida,+09:30,(UTC+09:30) ,(UTC+09:30) Adelaide
(UTC+09:30) Darwin,(UTC + 09: 30) ,(UTC+09:30) Darwin,(UTC+09:30) Darwin,(UTC+09:30) Darwin,(UTC+09:30) Darwin,(UTC + 09:30) Darwin,(UTC+09:30) ,(UTC+09:30) Darwin,+09:30,(UTC+09:30) ,(UTC+09:30) Darwin
(UTC+10:00) Brisbane,(UTC + 10: 00) ,(UTC+10:00) Brisbane,(UTC+10:00) Brisbane,(UTC+10:00) Brisbane,(UTC+10:00) Brisbane,(UTC + 10:00) Brisbane,(UTC+10:00) ,(UTC+10:00) Brisbane,+10:00,(UTC+10:00) ,(UTC+10:00) Brisbane
"(UTC+10:00) Canberra, Melbourne, Sydney",(UTC + 10: 00)   ,"(UTC+10:00) Canberra, Melbourne, Sydney","(UTC+10:00) Canberra, Melbourne, Sydney","(UTC+10:00) Canberra, Melbourne, Sydney","(UTC+10:00) Canberra, Melbourne, Sydney","(UTC + 10:00) Canberra, Melbourne, Sydney","(UTC+10:00) , , ","(UTC+10:00) Canberra, Melbourne, Sdney",+10:00,(UTC+10:00) ,"(UTC+10:00) Canberra, Melbourne, Sydney"
"(UTC+10:00) Guam, Port Moresby",(UTC + 10: 00)   ,"(UTC+10:00) Guam, Port Moresby","(UTC+10:00) Guam, Port Moresby","(UTC+10:00) Guam, Port Moresby","(UTC+10:00) Guam, Port Moresby","(UTC + 10:00) Guam, Port Moresby","(UTC+10:00) , -","(UTC+10:00) Guam, Puerto Moresby",+10:00,(UTC+10:00) ,"(UTC+10:00) Guam, Port Moresby"
"(UTC+10:00) Ust-Nera, Vladivostok",(UTC + 10: 00) - ,"(UTC+10:00) Oust-Nera, Vladivostok","(UTC+10:00) Ust-Nera, Vladivostok","(UTC+10:00) Ust-Nera, Vlagyivosztok","(UTC+10:00) Ust-Nera, Vladivostok","(UTC + 10:00) Ust-Nera, Vladivostok","(UTC+10:00) -, ","(UTC+10:00) Ust-Nera, Vladivostok",+10:00,(UTC+10:00) ,"(UTC+10:00) Ust-Nera, Vladivostok"
"(UTC+11:00) Noumea, Solomon Islands",(UTC + 11: 00)   ,"(UTC+11:00) Nouma, les Salomon","(UTC+11:00) Noumea, Solomon Islands","(UTC+11:00) Noumea, Salamon-szigetek","(UTC+11:00) Noumea, Isole Salomone","(UTC + 11:00) NOUMEA, Ilhas Salomo","(UTC+11:00) ,  ","(UTC+11:00) Numea, Islas Salomn",+11:00,(UTC+11:00) ,"(UTC+11:00) Noumea, Solomon Islands"
(UTC+11:00) Magadan,(UTC + 11: 00) ,(UTC+11:00) Magadan,(UTC+11:00) Magadan,(UTC+11:00) Magadan,(UTC+11:00) Magadan,(UTC + 11:00) Magadan,(UTC+11:00) ,(UTC+11:00) Magadan,+11:00,(UTC+11:00) ,(UTC+11:00) Magadan
"(UTC+11:00) Sakhalin, Srednekolymsk",(UTC + 11: 00)  ,"(UTC+11:00) Sakhaline, Srednekolymsk","(UTC+11:00) Sakhalin, Srednekolymsk","(UTC+11:00) Szahalin, Szrednyekolimszk","(UTC+11:00) Sakhalin, Srednekolymsk","(UTC + 11:00) Sakhalin, Srednekolymsk","(UTC+11:00) , ","(UTC+11:00) Sakhalin, Srednekolymsk",+11:00,(UTC+11:00) ,"(UTC+11:00) Sakhalin, Srednekolymsk"
"(UTC+12:00) Anadyr, Kamchatka",(UTC + 12: 00)  ,"(UTC+12:00) Anadyr, Kamtchatka","(UTC+12:00) Anadyr, Kamchatka","(UTC+12:00) Anadir, Kamcsatka","(UTC+12:00) Anadyr, Kamatka","(UTC + 12:00) Anadyr, Kamchatka","(UTC+12:00) , ","(UTC+12:00) Anadir, Kamchatka",+12:00,(UTC+12:00) ,"(UTC+12:00) Anadyr, Kamchatka"
"(UTC+12:00) Auckland, Wellington",(UTC + 12: 00)  ,"(UTC+12:00) Auckland, Wellington","(UTC+12:00) Auckland, Wellington","(UTC+12:00) Auckland, Wellington","(UTC+12:00) Auckland, Wellington","(UTC + 12:00) Auckland, Wellington","(UTC+12:00) , ","(UTC+12:00) Auckland, Wellington",+12:00,(UTC+12:00) ,"(UTC+12:00) Auckland, Wellington"
(UTC+12:45) Chatham,(UTC + 12: 45) ,(UTC+12:45) Chatham,(UTC+12:45) Chatham,(UTC+12:45) Chatham,(UTC+12:45) Chatham,(UTC + 12:45) Chatham,(UTC+12:45) ,(UTC+12:45) Chatham,+12:45,(UTC+12:45) ,(UTC+12:45) Chatham
(UTC+13:00) Tonga,(UTC + 13: 00) ,(UTC+13:00) Tonga,(UTC+13:00) Tonga,(UTC+13:00) Tonga,(UTC+13:00) Tonga,(UTC + 13:00) Tonga,(UTC+13:00) ,(UTC+13:00) Tonga,+13:00,(UTC+13:00) ,(UTC+13:00) Tonga
(UTC+13:00) Samoa,(UTC + 13: 00) ,(UTC+13:00) Samoa,(UTC+13:00) Samoa,(UTC+13:00) Szamoa,(UTC+13:00) Samoa,(UTC + 13:00) Samoa,(UTC+13:00) ,(UTC+13:00) Samoa,+13:00,(UTC+13:00) ,(UTC+13:00) Samoa
(UTC+14:00) Kiritimati,(UTC + 14: 00) ,(UTC+14:00) le Christmas (Kiribati),(UTC+14:00) Kiritimati,(UTC+14:00) Kiritimati,(UTC+14:00) Kiritimati,(UTC + 14:00) Kiritimati,(UTC+14:00) ,(UTC+14:00) Kiritimati,+14:00,(UTC+14:00) ,(UTC+14:00) Kiritimati
(Scroll for more options),(    ),(Faites dfiler la liste pour plus d'options),(Weitere Mglichkeiten anzeigen),(A tovbbi opcikhoz grgessen),(Scorri per altre opzioni),(Deslizar para mais opes),(      ),(Desplcese hacia abajo para obtener ms opciones),,,(Scroll for more options)
Share Your Chart,  ,Partagez votre graphique,Chart teilen,Ossza meg grafikonjt,Condividi il tuo grafico,Partilhar o Seu Grfico, ,Compartir su grfico,,,Share Your Chart
Press this button to generate a shareable image:,       :,"Pour crer une image partageable, cliquez sur ce bouton:","Drcken Sie diese Taste, um ein teilbares Bild zu erzeugen:",Nyomja meg ezt a gombot megoszthat kp ksztshez:,"Per generare un'immagine condivisibile, clicca questo tasto:",Presione este boto para criar uma imagem partilhvel:,"  ,   ,    :",Pulse este botn para generar una imagen compartible:,,,Press this button to generate a shareable image:
Enter Symbol, ,Insrez un symbole,Symbol eingeben,Szimblum megadsa,Inserisci simbolo,Introduzir Smbolo, ,Introduzca un smbolo,,,Enter Symbol
Name,,Nom,Name,Nv,Nome,Nome,,Nombre,,,Name
Create Image, ,Crez une image,Bild erstellen,Kp ksztse,Crea immagine,Criar Imagem, ,Crear imagen,,,Create Image
RSI,RSI,RSI,RSI,RSI,RSI,RSI,RSI,RSI,,RSI,RSI
MA,MA,Moyenne mobile,MA,MA,Media mobile,MA,MA,MA,,MA,MA
MACD,MACD,MACD,MACD,MACD,MACD,MACD,MACD,MACD,,MACD,MACD
%K,%K,%K,%K,%K,%K,%K,%K,%K,%K,%K,%K
%D,%D,%D,%D,%D,%D,%D,%D,%D,%D,%D,%D
ATR,ATR,ATR,ATR,ATR,ATR,ATR,ATR,ATR (Media de rango verdadero),,ATR,ATR
EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF
Underlay,,Sous-jacent,Unterlagern,Als rsz,Sottostante,Subcamada,,Subyacente,,,Underlay
Series,,Srie,Reihen,Sorozat,Serie,Sries,,Series,,,Series
Histogram,,Histogramme,Histogramm ,Hisztogram,Istogramma,Histograma,,Histograma (Diagrama de barras),,,Histogram
Positive Bar, ,Barre positive,Positiver Balken,Pozitv sv,Barra positiva,Barra Positivo, ,Barra positiva,,,Positive Bar
+DI,+DI,#NAME?,+DI,+DI,#NAME?,+DI,+DI,+DI,,+DI,+DI
-DI,-DI,#NAME?,-DI,-DI,#NAME?,-DI,-DI,-DI,,-DI,-DI
ADX,ADX,ADX,ADX,ADX,ADX,ADX,ADX,ADX,,ADX,ADX
Overlay,,Sus-jacent,berlagern,Fels rsz,Soprastante,Sobreposio,,Superposicin,,,Overlay
Negative Bar, ,Barre ngative,Negativer Balken,Negatv sv,Barra negativa,Barra Negativa, ,Barra negativa,,,Negative Bar
PMO,PMO,PMO,PMO,PMO,PMO,PMO,PMO,PMO,,PMO,PMO
PMOSignal,PMOSignal,Signal PMO,PMOSignal,PMO-jel,Segnale PMO,PMOSinal,PMOSignal,Seal PMO,,PMOSignal,PMOSignal
%b,%b,%b,%b,%b,%b,%b,%b,%b,%b,%b,%b
Scale Factor, ,Facteur d'chelle,Skalierungsfaktor ,Skla tnyez,Fattore di scala,Factor Escala, ,Factor de escala,,,Scale Factor
Bullish,, la hausse,Bullisch,Bika,Al rialzo,Bullish,,Alcista,,,Bullish
Bearish,, la baisse,Brisch,Medve,Al ribasso,Bearish,,Bajista,,,Bearish
Neutral,,Neutre,Neutral,Semleges,Neutrale,Neutro,,Neutral,,,Neutral
VWAP,VWAP,VWAP,VWAP,VWAP,VWAP,VWAP,VWAP,VWAP (Precio promedio ponderado por volumen),,VWAP,VWAP
Gain,,Profit ,Gewinn,Nvekmny,Guadagno,Ganho,,Ganancia,,,Gain
Loss,,Perte,Verlust,Vesztesg,Perdita,Perda,,Prdida,,,Loss
Result,,Rsultat,Ergebnis,Eredmny,Risultato,Resultado,,Resultado,,,Result
TII,TII,TII,TII,TII,TII,TII,TII,TII,TII,TII,TII
SMA1,SMA1,SMA1,SMA1,SMA1,SMA1,SMA1,SMA1,SMA1 (Media mvil simple 1),1,SMA1,SMA1
SMA2,SMA2,SMA2,SMA2,SMA2,SMA2,SMA2,SMA2,SMA2,2,SMA2,SMA2
SMA3,SMA3,SMA3,SMA3,SMA3,SMA3,SMA3,SMA3,SMA3,3,SMA3,SMA3
SMA4,SMA4,SMA4,SMA4,SMA4,SMA4,SMA4,SMA4,SMA4,4,SMA4,SMA4
SMA5,SMA5,SMA5,SMA5,SMA5,SMA5,SMA5,SMA5,SMA5,5,SMA5,SMA5
SMA6,SMA6,SMA6,SMA6,SMA6,SMA6,SMA6,SMA6,SMA6,6,SMA6,SMA6
SMA7,SMA7,SMA7,SMA7,SMA7,SMA7,SMA7,SMA7,SMA7,7,SMA7,SMA7
SMA8,SMA8,SMA8,SMA8,SMA8,SMA8,SMA8,SMA8,SMA8,8,SMA8,SMA8
SMA9,SMA9,SMA9,SMA9,SMA9,SMA9,SMA9,SMA9,SMA9,9,SMA9,SMA9
SMA10,SMA10,SMA10,SMA10,SMA10,SMA10,SMA10,SMA10,SMA10,10,SMA10,SMA10
HHV/LLV Lookback,HHV/LLV ,Lookback HHV/LLV,HHV/LLV Lookback,HHV/LLV visszatekints,Lookback HHV/LLV,HHV/LLV Olhar para Trs, HHV/LLV,HHV/LLV Lookback,/,HHV/LLV ,HHV/LLV Lookback
Lightest Rate of Change Period,   ,Taux le plus bas de la periode de variation,Leichteste Rate-of-Change Periode,Legknnyebb vltozs-rta idszak,Tasso pi basso del periodo di variazione,Taxa Mais Clara do Perodo de Alterao,  ,Tasa ms ligera del periodo de cambio,,,Lightest Rate of Change Period
Lightest SMA Period, SMA,Priode SMA plus faible,Leichteste SMA Periode,Legknnyebb SMA idszak,Periodo SMA pi basso,Perodo Mais Claro SMA,  SMA,Perido SMA ms ligero,SMA ,SMA,Lightest SMA Period
Light Rate of Change Period,   ,Faible taux de la priode de variation,Leichte Rate-of-Change Periode,Knny vltozs-rta idszak,Tasso basso del periodo di variazione,Taxa Clara do Perodo de Alterao,  ,Tasa ligera del periodo de cambio,,,Light Rate of Change Period
Light SMA Period,SMA,Priode SMA faible,Leichte SMA Periode,Knny SMA idszak,Periodo SMA basso,Perodo Claro SMA,  SMA,Perido SMA ligero,SMA ,SMA,Light SMA Period
Heavy Rate of Change Period,   ,Taux lev de la priode de variation,Hohe Rate-of-Change Periode,Nehz vltozs-rta idszak,Tasso elevato del periodo di variazione,Taxa Pesada do Perodo de Alterao,  ,Tasa pesada del periodo de cambio,,,Heavy Rate of Change Period
Heavy SMA Period,SMA,Priode SMA leve,Hohe SMA Periode,Nehz SMA idszak,Periodo SMA elevato,Perodo Pesado SMA,  SMA,Periodo SMA pesado, SMA ,SMA,Heavy SMA Period
Heaviest Rate of Change Period,   ,Taux le plus haut de la priode de variation,Hchste Rate-of-Change Periode,Legnehezebb vltozs-rta idszak,Tasso pi elevato del periodo di variazione,Taxa Mais Pesada do Perodo de Alterao,  ,Tasa ms pesada del periodo de cambio,,,Heaviest Rate of Change Period
Heaviest SMA Period, SMA,Priode de SMA la plus leve,Hchste SMA Periode,Legnehezebb SMA idszak,Periodo SMA pi elevato,Perodo Mais Pesado SMA,  SMA,Periodo SMA ms pesado, SMA ,SMA,Heaviest SMA Period
KST,KST,KST,KST,KST,KST,KST,KST,KST,,KST,KST
KSTSignal,KSTSignal,Signal KST,KSTSignal,KST-jel,Segnale KST,KSTSinal,KSTSignal,Seal KST,,KSTSignal,KSTSignal
Interval, ,Intervalle,Intervall,Intervallum,Intervallo,Intervalo,,Intervalo,,,Interval
ATH Lookback Period,ATH,Priode lookback ATH,ATH Lookback Periode,ATH visszatekintsi idszak,Periodo di lookback ATH,Perodo de Lookback ATH, ATH,Perido retrospectivo ATH,ATH ,ATH,ATH Lookback Period
+VI,+VI,#NAME?,+VI,+VI,+VI,+VI,+VI,+VI,,+VI,+VI
-VI,-VI,#NAME?,-VI,-VI,-VI,-VI,-VI,-VI,,-VI,-VI
Distance(%),(%),Distance (%),Distanz(%),Tvolsg (%),Distanza (%),Distncia(%), (%),Distancia(%),%,(%),Distance(%)
Set Reversal Percentage,  ,Dfinissez le pourcentage d'inversion,Prozentuale Umkehr festlegen,Visszatrsi szzalk belltsa,Imposta la percentuale di inversione,Definir Percentagem de Reverso,  ,Establecer porcentaje de retroceso,,,Set Reversal Percentage
Set Point & Figure Parameters,   ,Dfinissez les paramtres des points et des figures,Point & Figure Parameter festlegen,Pont s bra paramterek belltsa,Imposta i parametri dei punti e delle figure,Definir Parmetros de Ponto & Figura,    ,Establecer puntos y parmetros de cifras,,&,Set Point & Figure Parameters
Strong Ratio, ,Rapport fort,Hohe Quote,Ers arny,Rapporto forte,Ratio Forte, ,Ratio slido,,,Strong Ratio
Weak Ratio, ,Faible rapport,Schwache Quote,Gyenge arny,Rapporto debole,Ratio Fraca, ,Ratio dbil,,,Weak Ratio
Set Range, ,Dfinissez la gamme,Range festlegen,Tartomny belltsa,Imposta la gamma,Definir Variao, ,Establecer rango,,,Set Range
Set Price Lines,  ,Dfinissez les lignes de prix,Preislinien festlegen,rvonalak belltsa,Imposta le linee del prezzo,Definir Linhas de Preo,  ,Establecer lneas de precios,,,Set Price Lines
Current TimeZone is,  ,Le fuseau horaire actuel est,Ihre aktuelle Zeitzone ist,A jelenlegi idzna,Il fuso orario attuale ,Fuso Horrio Actual ,  :,El huso horario actual es,,,Current TimeZone is
Your timezone is your current location,    ,Votre fuseau horaire correspond  votre position actuelle,Ihre Zeitzone ist Ihr aktueller Standort,Az n idznja a jelenlegi tartzkodsi helye,Il tuo fuso orario corrisponde alla tua posizone attuale,O seu fuso horrio  a sua localizao actual,   ,Su huso horario es su ubicacin actual,,,Your timezone is your current location
M,,M,MN,H,m,MINUTO,,M,,,M
W,,S,W,H,s,Semanal,,S,,,W
D,,J,T,N,g,Dia,,D,,,D
H,,H,Std,,h,Hora,,H,,,H
T,,T,Tick,T,T,Marcar,,T,,,T
m,,Min,Min,p,min,minuto,,m,,,m
ms,,ms,Ms,ms,ms,Milsima de segundo,,ms,,,ms
s,,s,Sec,mp,sec,segundo,,s,,,s
1 Day,1,1 J,1T,1 N,1 g,1 Dia,1 ,1 D,1 ,1,1
1 Wk,1,1 sem,1 W,1 H,1 s,1 Semana,1 ,1 S,1 ,1,1
1 Mon,1,1 Mois,1 MN,1 H,1 m,1 Ms,1 ,1 Mes,1 ,1,1
1 Min,1,1 Min,1 Min,1 perc,1 min,1 Min,1 ,1 Min,1 ,1,1
3 Min,3,3 Min,3 Min,3 perc,3 min,3 Min,3 ,3 Min,3 ,3,3
5 Min,5,5 Min,5 Min,5 perc,5 min,5 Min,5 ,5 Min,5 ,5,5
10 Min,10,10 Min,10 Min,10 perc,10 min,10 Min,10 ,10 Min,10 ,10,10
15 Min,15,15 Min,15 Min,15 perc,15 min,15 Min,15 ,15 Min,15 ,15,15
30 Min,30,30 Min,30 Min,30 perc,30 min,30 Min,30 ,30 Min,30 ,30,30
1 Hour,1 ,1 Heures,1 Stunde,1 ra,1 h,1 Hora,1 ,1 Hora,1 ,1,1
4 Hour,4 ,4 Heures,4 Stunden,4 ra,4 h,4 Horas,4 ,4 Horas,4 ,4,4
*/
console.warn("test")}),e.I18N.wordLists={en:{"1D":"","1 D":"","3 D":"","1 W":"","2 Wk":"","1 Mo":"","5 Min":"","10 Min":"","15 Min":"","30 Min":"","1 hour":"","4 hour":"",Chart:"","Chart Style":"",Candle:"",Bar:"","Colored Bar":"",Monotone:"",Line:"","Colored Line":"","Hollow Candle":"","Volume Candle":"",VOLUME:"",Mountain:"","Baseline Delta":"",Squarewave:"","Chart Type":"","Heikin-Ashi":"",Kagi:"","Line Break":"","Point & Figure":"",Renko:"","Range Bars":"","Chart Scale":"","Log Scale":"",Events:"",Studies:"",Edit:"",Delete:"","Accumulative Swing Index":"",Aroon:"","Aroon Oscillator":"","Average True Range":"","Bollinger Bands":"","Bollinger Bandwidth":"","Center Of Gravity":"","Chaikin Money Flow":"","Chaikin Volatility":"","Chande Forecast Oscillator":"","Chande Momentum Oscillator":"","Commodity Channel Index":"","Coppock Curve":"","Correlation Coefficient":"","Detrended Price Oscillator":"","Directional Movement System":"","Donchian Channel":"","Donchian Width":"","Ease of Movement":"","Ehler Fisher Transform":"","Elder Force Index":"","Elder Ray Index":"","Fractal Chaos Bands":"","Fractal Chaos Oscillator":"","Gopalakrishnan Range Index":"","High Low Bands":"","High Minus Low":"","Highest High Value":"","Historical Volatility":"","Intraday Momentum Index":"","Keltner Channel":"","Klinger Volume Oscillator":"","Linear Reg Forecast":"","Linear Reg Intercept":"","Linear Reg R2":"","Linear Reg Slope":"","Lowest Low Value":"",MACD:"","Mass Index":"","Median Price":"","Momentum Indicator":"","Money Flow Index":"","Moving Average":"","Moving Average Deviation":"","Moving Average Envelope":"","Negative Volume Index":"","On Balance Volume":"","Parabolic SAR":"","Performance Index":"","Positive Volume Index":"","Pretty Good Oscillator":"","Price Oscillator":"","Price Rate of Change":"","Price Volume Trend":"","Prime Number Bands":"","Prime Number Oscillator":"","Psychological Line":"",QStick:"","Random Walk Index":"",RAVI:"",RSI:"","Schaff Trend Cycle":"","Shinohara Intensity Ratio":"","Standard Deviation":"",Stochastics:"","Stochastic Momentum Index":"","Stochastic Oscillator":"","Swing Index":"","Time Series Forecast":"","Trade Volume Index":"",TRIX:"","True Range":"","Twiggs Money Flow":"","Typical Price":"","Ultimate Oscillator":"","Vertical Horizontal Filter":"",Volume:"","Volume Chart":"","Volume Underlay":"","Volume Oscillator":"","Volume Rate of Change":"","Vortex Indicator":"","Weighted Close":"","Williams %R":"",ZigZag:"","Accumulation/Distribution":"",Timezone:"","Change Timezone":"","Default Themes":"",Light:"",Dark:"","Custom Themes":"","New Custom Theme":"","Select Tool":"",None:"",Crosshairs:"",Callout:"",Annotation:"",Fibonacci:"",Horizontal:"","Horizontal Line":"",Ray:"",Segment:"",Rectangle:"",Ellipse:"","Bell Curve":"",Doodle:"",Vertical:"","Vertical Line":"",Continuous:"","Continuous Line":"",Gartley:"","Ellipse Center":"","Ellipse Left":"","Measure:":"","Projection:":"","Fill:":"","Line:":"",Crossline:"","Speed Line":"","Speed Arc":"","Gann Fan":"","Regression Line":"","Quadrant Lines":"","Tirone Levels":"","Time Cycle":"","O: ":"","H: ":"","V: ":"","C: ":"","L: ":"",save:"",cancel:"",Create:"","Show Zones":"",OverBought:"",OverSold:"","Choose Timezone":"",Close:"","Shared Chart URL":"","Share This Chart!":""," Share":"","Create a New Custom Theme":"",Candles:""," Border":"","Line/Bar/Wick":"",Background:"","Grid Lines":"","Date Dividers":"","Axis Text":"",Gradient:"","New Theme Name:":"","Save Theme":"","right-click to delete":"","right-click to manage":"",rsi:"",Period:"",ma:"",Field:"",Type:"",Offset:"",MA:"",macd:"","Fast MA Period":"","Slow MA Period":"","Signal Period":"",Signal:"",stochastics:"",Smooth:"",Fast:"",Slow:"","Aroon Up":"","Aroon Down":"","Lin R2":"",RSquared:"","Lin Fcst":"",Forecast:"","Lin Incpt":"",Intercept:"","Time Fcst":"",VIDYA:"","R2 Scale":"","STD Dev":"","Standard Deviations":"","Moving Average Type":"","Trade Vol":"","Min Tick Value":"",Swing:"","Limit Move Value":"","Acc Swing":"","Price Vol":"","Pos Vol":"","Neg Vol":"","On Bal Vol":"","Perf Idx":"","Stch Mtm":"","%K Periods":"","%K Smoothing Periods":"","%K Double Smoothing Periods":"","%D Periods":"","%D Moving Average Type":"","%K":"","%D":"","Hist Vol":"","Bar History":"",Ultimate:"","Cycle 1":"","Cycle 2":"","Cycle 3":"","W Acc Dist":"","Vol Osc":"","Short Term Periods":"","Long Term Periods":"","Points Or Percent":"","Chaikin Vol":"","Rate Of Change":"","Price Osc":"","Long Cycle":"","Short Cycle":"",EOM:"",CCI:"",Detrended:"","Aroon Osc":"","Elder Force":"","Ehler Fisher":"",EF:"","EF Trigger":"",Schaff:"",Coppock:"","Chande Fcst":"","Intraday Mtm":"","Random Walk":"","Random Walk High":"","Random Walk Low":"",Directional:"",ADX:"","+DI":"","-DI":"","High Low":"","High Low Bands Top":"","High Low Bands Median":"","High Low Bands Bottom":"","MA Env":"",Shift:"","Shift Percentage":"","Shift Type":"","Envelope Top":"","Envelope Median":"","Envelope Bottom":"","Fractal High":"","Fractal Low":"","Prime Bands Top":"","Prime Bands Bottom":"","Bollinger Bands Top":"","Bollinger Bands Median":"","Bollinger Bands Bottom":"","%b":"",Keltner:"","Keltner Top":"","Keltner Median":"","Keltner Bottom":"","Donchian High":"","Donchian Median":"","Donchian Low":"","Channel Fill":"","High Period":"","Low Period":"",PSAR:"","Minimum AF":"","Maximum AF":"",Klinger:"","Signal Periods":"",KlingerSignal:"","Elder Bull Power":"","Elder Bear Power":"","LR Slope":"",Slope:"",Correlate:"",ATR:"","ATR Bands":"","ATR Bands Bottom":"","ATR Bands Channel":"","ATR Bands Top":"","STARC Bands":"","STARC Bands Bottom":"","STARC Bands Median":"","STARC Bands Top":"","ATR Trailing Stop":"",Alligator:"",Awesome:"",Bandwidth:"","Bars Color":"","Base Line":"","Base Line Period":"","Boll %b":"","Boll BW":"","Bulge Threshold":"","Buy Stops":"",COG:"","Chaikin MF":"","Chande Mtm":"","Comparison Symbol":"","Conversion Line":"","Conversion Line Period":"","Days Per Year":"","Decreasing Bar":"",Divergence:"","Down Volume":"",Fade:"",Fake:"","Fractal Channel":"","Fractal Chaos":"",GAPO:"",Gator:"",Gopala:"",Green:"",HHV:"","High Low Bottom":"","High Low Median":"","High Low Top":"","High-Low":"",HighLow:"","Ichimoku Clouds":"","Increasing Bar":"",Index:"",Jaw:"","Jaw Offset":"","Jaw Period":"",LLV:"","Lagging Span":"","Lagging Span Period":"","Leading Span A":"","Leading Span B":"","Leading Span B Period":"",Lips:"","Lips Offset":"","Lips Period":"","Long RoC":"","M Flow":"","MA Dev":"","MA Env Bottom":"","MA Env Median":"","MA Env Top":"","Mass Idx":"","Med Price":"",Momentum:"",Multiplier:"",Overlay:"","P Rel":"",Pivot:"","Pivot Points":"","Plot Type":"","Pretty Good":"","Price ROC":"","Prime Bands Channel":"","Prime Number":"",PSY:"","Resistance 1":"","Resistance 2":"","Resistance 3":"","Sell Stops":"",Shading:"",Shinohara:"","Short RoC":"","Show Fractals":"",Squat:"","Strong Ratio":"","Support 1":"","Support 2":"","Support 3":"",Teeth:"","Teeth Offset":"","Teeth Period":"","Tolerance Percentage":"",Twiggs:"","Up Volume":"","Use Volume":"","VT HZ Filter":"","Vol ROC":"",Vortex:"","+VI":"","-VI":"","W MFI":"","Weak Ratio":"","Rel Vig":"",RelVigSignal:"","Rel Vol":"","Smoothing Period":"","Double Smoothing Period":"","STD Period":"","MA Period":"",composite:"",correl:"",vchart:"","vol profile":"","vol undr":"","Darvas Box":"","All-Time High Lookback Period":"","Exit Field":"","Ghost Boxes":"","Stop Levels":"","Level Offset":"","Volume Spike":"","Volume % of Avg":"","Price Minimum":"",Darvas:"",Ghost:"",Levels:"",Supertrend:"",Uptrend:"",Downtrend:"",Gain:"",Loss:"","Balance of Power":"","Trend Intensity Index":"",Beta:"",Simple:"",Exponential:"","Double Exponential":"","Triple Exponential":"",Hull:"",Triangular:"",Weighted:"",Variable:"","Time Series":"","Welles Wilder":"",VWAP:"","Don't see your study below? Type in your search here.":"","Show All":"","Demo data.":"","Market Data":""," by Xignite.":"","Formula courtesy ":"","Data is randomized.":"","Data is real-time.":"","Data delayed 15 min.":"","BATS BZX real-time.":"","End of day data.":"","Simulated data.":""},kr:{"1D":"","1 D":"","3 D":"","1 W":"","2 Wk":"","1 Mo":"","5 Min":"","10 Min":"","15 Min":"","30 Min":"","1 hour":"","4 hour":"",Chart:"","Chart Style":"",Candle:"",Bar:"","Colored Bar":"",Monotone:"",Line:"","Colored Line":"","Hollow Candle":"","Volume Candle":"",VOLUME:"",Mountain:"","Baseline Delta":"",Squarewave:"","Chart Type":"","Heikin-Ashi":"",Kagi:"","Line Break":"","Point & Figure":"",Renko:"","Range Bars":"","Chart Scale":"","Log Scale":"",Events:"",Studies:"",Edit:"",Delete:"","Accumulative Swing Index":"",Aroon:"","Aroon Oscillator":"","Average True Range":"","Bollinger Bands":"","Bollinger Bandwidth":"","Center Of Gravity":"","Chaikin Money Flow":"","Chaikin Volatility":"","Chande Forecast Oscillator":"","Chande Momentum Oscillator":"","Commodity Channel Index":"","Coppock Curve":"","Correlation Coefficient":"","Detrended Price Oscillator":"","Directional Movement System":"","Donchian Channel":"","Donchian Width":"","Ease of Movement":"","Ehler Fisher Transform":"","Elder Force Index":"","Elder Ray Index":"","Fractal Chaos Bands":"","Fractal Chaos Oscillator":"","Gopalakrishnan Range Index":"","High Low Bands":"",Callout:"","High Minus Low":"","Highest High Value":"","Historical Volatility":"","Intraday Momentum Index":"","Keltner Channel":"","Klinger Volume Oscillator":"","Linear Reg Forecast":"","Linear Reg Intercept":"","Linear Reg R2":"","Linear Reg Slope":"","Lowest Low Value":"",MACD:"","Mass Index":"","Median Price":"","Momentum Indicator":"","Money Flow Index":"","Moving Average":"","Moving Average Deviation":"","Moving Average Envelope":"","Negative Volume Index":"","On Balance Volume":"","Parabolic SAR":"","Performance Index":"","Positive Volume Index":"","Pretty Good Oscillator":"","Price Oscillator":"","Price Rate of Change":"","Price Volume Trend":"","Prime Number Bands":"","Prime Number Oscillator":"","Psychological Line":"",QStick:"","Random Walk Index":"",RAVI:"",RSI:"","Schaff Trend Cycle":"","Shinohara Intensity Ratio":"","Standard Deviation":"",Stochastics:"","Stochastic Momentum Index":"","Stochastic Oscillator":"","Swing Index":"","Time Series Forecast":"","Trade Volume Index":"",TRIX:"","True Range":"","Twiggs Money Flow":"","Typical Price":"","Ultimate Oscillator":"","Vertical Horizontal Filter":"",Volume:"","Volume Chart":"","Volume Underlay":"","Volume Oscillator":"","Volume Rate of Change":"","Vortex Indicator":"","Weighted Close":"","Williams %R":"",ZigZag:"","Accumulation/Distribution":"",Timezone:"","Change Timezone":"","Default Themes":"",Light:"",Dark:"","Custom Themes":"","New Custom Theme":"","Select Tool":"",None:"",Crosshairs:"",Annotation:"",Fibonacci:"",Horizontal:"","Horizontal Line":"",Ray:"",Segment:"",Rectangle:"",Ellipse:"","Bell Curve":"",Doodle:"",Vertical:"","Vertical Line":"",Continuous:"","Continuous Line":"",Gartley:"","Ellipse Center":"","Ellipse Left":"","Measure:":"","Projection:":"","Fill:":"","Line:":"",Crossline:"","Speed Line":"","Speed Arc":"","Gann Fan":"","Regression Line":"","Quadrant Lines":"","Tirone Levels":"","Time Cycle":"","O: ":"","H: ":"","V: ":"","C: ":"","L: ":"",save:"",cancel:"",Create:"","Show Zones":"",OverBought:"",OverSold:"","Choose Timezone":"",Close:"","Shared Chart URL":"","Share This Chart!":""," Share":"","Create a New Custom Theme":"",Candles:""," Border":"","Line/Bar/Wick":"",Background:"","Grid Lines":"","Date Dividers":"","Axis Text":"",Gradient:"","New Theme Name:":"","Save Theme":"","right-click to delete":"","right-click to manage":"",rsi:"",Period:"",ma:"",Field:"",Type:"",Offset:"",MA:"",macd:"","Fast MA Period":"","Slow MA Period":"","Signal Period":"",Signal:"",stochastics:"",Smooth:"",Fast:"",Slow:"","Aroon Up":"","Aroon Down":"","Lin R2":"",RSquared:"","Lin Fcst":"",Forecast:"","Lin Incpt":"",Intercept:"","Time Fcst":"",VIDYA:"","R2 Scale":"","STD Dev":"","Standard Deviations":"","Moving Average Type":"","Trade Vol":"","Min Tick Value":"",Swing:"","Limit Move Value":"","Acc Swing":"","Price Vol":"","Pos Vol":"","Neg Vol":"","On Bal Vol":"","Perf Idx":"","Stch Mtm":"","%K Periods":"","%K Smoothing Periods":"","%K Double Smoothing Periods":"","%D Periods":"","%D Moving Average Type":"","%K":"","%D":"","Hist Vol":"","Bar History":"",Ultimate:"","Cycle 1":"","Cycle 2":"","Cycle 3":"","W Acc Dist":"","Vol Osc":"","Short Term Periods":"","Long Term Periods":"","Points Or Percent":"","Chaikin Vol":"","Rate Of Change":"","Price Osc":"","Long Cycle":"","Short Cycle":"",EOM:"",CCI:"",Detrended:"","Aroon Osc":"","Elder Force":"","Ehler Fisher":"",EF:"","EF Trigger":"",Schaff:"",Coppock:"","Chande Fcst":"","Intraday Mtm":"","Random Walk":"","Random Walk High":"","Random Walk Low":"",Directional:"",ADX:"","+DI":"","-DI":"","High Low":"","High Low Bands Top":"","High Low Bands Median":"","High Low Bands Bottom":"","MA Env":"",Shift:"","Shift Percentage":"","Shift Type":"","Envelope Top":"","Envelope Median":"","Envelope Bottom":"","Fractal High":"","Fractal Low":"","Prime Bands Top":"","Prime Bands Bottom":"","Bollinger Bands Top":"","Bollinger Bands Median":"","Bollinger Bands Bottom":"","%b":"",Keltner:"","Keltner Top":"","Keltner Median":"","Keltner Bottom":"","Donchian High":"","Donchian Median":"","Donchian Low":"","Channel Fill":"","High Period":"","Low Period":"",PSAR:"","Minimum AF":"","Maximum AF":"",Klinger:"","Signal Periods":"",KlingerSignal:"","Elder Bull Power":"","Elder Bear Power":"","LR Slope":"",Slope:"",Correlate:"",ATR:"","ATR Bands":"","ATR Bands Bottom":"","ATR Bands Channel":"","ATR Bands Top":"","STARC Bands":"","STARC Bands Bottom":"","STARC Bands Median":"","STARC Bands Top":"","ATR Trailing Stop":"",Alligator:"",Awesome:"",Bandwidth:"","Bars Color":"","Base Line":"","Base Line Period":"","Boll %b":"","Boll BW":"","Bulge Threshold":"","Buy Stops":"",COG:"","Chaikin MF":"","Chande Mtm":"","Comparison Symbol":"","Conversion Line":"","Conversion Line Period":"","Days Per Year":"","Decreasing Bar":"",Divergence:"","Down Volume":"",Fade:"",Fake:"","Fractal Channel":"","Fractal Chaos":"",GAPO:"",Gator:"",Gopala:"",Green:"",HHV:"","High Low Bottom":"","High Low Median":"","High Low Top":"","High-Low":"",HighLow:"","Ichimoku Clouds":"","Increasing Bar":"",Index:"",Jaw:"","Jaw Offset":"","Jaw Period":"",LLV:"","Lagging Span":"","Lagging Span Period":"","Leading Span A":"","Leading Span B":"","Leading Span B Period":"",Lips:"","Lips Offset":"","Lips Period":"","Long RoC":"","M Flow":"","MA Dev":"","MA Env Bottom":"","MA Env Median":"","MA Env Top":"","Mass Idx":"","Med Price":"",Momentum:"",Multiplier:"",Overlay:"","P Rel":"",Pivot:"","Pivot Points":"","Plot Type":"","Pretty Good":"","Price ROC":"","Prime Bands Channel":"","Prime Number":"",PSY:"","Resistance 1":"","Resistance 2":"","Resistance 3":"","Sell Stops":"",Shading:"",Shinohara:"","Short RoC":"","Show Fractals":"",Squat:"","Strong Ratio":"","Support 1":"","Support 2":"","Support 3":"",Teeth:"","Teeth Offset":"","Teeth Period":"","Tolerance Percentage":"",Twiggs:"","Up Volume":"","Use Volume":"","VT HZ Filter":"","Vol ROC":"",Vortex:"","+VI":"","-VI":"","W MFI":"","Weak Ratio":"","Rel Vig":"",RelVigSignal:"","Rel Vol":"","Smoothing Period":"","Double Smoothing Period":"","STD Period":"","MA Period":"",composite:"",correl:"",vchart:"","vol profile":"","vol undr":"","Darvas Box":"","All-Time High Lookback Period":"","Exit Field":"","Ghost Boxes":"","Stop Levels":"","Level Offset":"","Volume Spike":"","Volume % of Avg":"","Price Minimum":"",Darvas:"",Ghost:"",Levels:"",Supertrend:"",Uptrend:"",Downtrend:"",Gain:"",Loss:"","Balance of Power":"","Trend Intensity Index":"",Beta:"",Simple:"",Exponential:"","Double Exponential":"","Triple Exponential":"",Hull:"",Triangular:"",Weighted:"",Variable:"","Time Series":"","Welles Wilder":"",VWAP:"","Don't see your study below? Type in your search here.":"","Show All":"","Demo data.":"","Market Data":""," by Xignite.":"","Formula courtesy ":"","Data is randomized.":"","Data is real-time.":"","Data delayed 15 min.":"","BATS BZX real-time.":"","End of day data.":"","Simulated data.":""}},t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for addOns.js.");var e="undefined"!=typeof window?window:self;t(e,e)}}(function(t){var e=t.CIQ;return e.ExtendedHours=function(t){var i=t.stx,n=t.filter;i||(i=t,n=!1);var r={},a=!1;this.stx=i,this.stx.extendedHours=this,this.set=function(t,e,o){a=!0,i.layout.extended=t;for(var s in i.layout.marketSessions)r.session={},i.chart.market.disableSession(s);if(i.layout.marketSessions={},t)if(e||(e=["pre","post"]),e.length)for(var l=0;l<e.length;l++)i.layout.marketSessions[e[l]]=!0;else i.layout.marketSessions=e;i.changeOccurred("layout");for(s in i.layout.marketSessions)r.session||(r.session={}),r.session[s]=i.canvasStyle("stx_market_session "+s),i.chart.market.disableSession(s,!0);n?(i.createDataSet(),i.draw(),o&&o()):i.newChart(i.chart.symbol,null,null,o)},this.stx.append("initializeDisplay",function(){if(this.layout.extended&&!e.ChartEngine.isDailyInterval(this.layout.interval)&&(a||this.extendedHours.set(this.layout.extended,i.layout.marketSessions),r.divider=this.canvasStyle("stx_market_session divider"),r.session)){for(var t,n,o=this.chart.market,s=[],l={},h=0;h<this.chart.dataSegment.length;h++){var c=this.chart.dataSegment[h];if(c&&c.DT){var u=null;if(o.market_def&&(!t||t<=c.DT)){n=o.getSession(c.DT,this.dataZone);t=o[!(""===n||this.layout.marketSessions&&this.layout.marketSessions[n])?"getNextOpen":"getNextClose"](c.DT,this.dataZone,this.dataZone)}var d=r.session[n];if(d&&(u=d.backgroundColor),l.color&&l.color!=u&&(s.push({start:l.start,end:l.end,color:l.color}),l={}),u){var p=this.layout.candleWidth;c.candleWidth&&(p=c.candleWidth),l.end=this.pixelFromBar(h,this.chart)+p/2,l.start||0===l.start||(l.start=l.end-p+1),l.color=u}else l={}}}(l.start||0===l.start)&&s.push({start:l.start,end:l.end,color:l.color});var f=e.isTransparent(r.divider.backgroundColor),m=r.divider.width.replace(/px/g,"");for(var g in this.panels)if(!1!==this.panels[g].shareChartXAxis&&!this.panels[g].hidden){for(this.startClip(g),h=0;h<s.length;h++)this.chart.context.fillStyle=s[h].color,!f&&s[h].start>this.chart.left&&this.plotLine(s[h].start,s[h].start,this.panels[g].bottom,this.panels[g].top,r.divider.backgroundColor,"line",this.chart.context,this.panels[g],{pattern:"dashed",lineWidth:m}),this.chart.context.fillRect(s[h].start,this.panels[g].top,s[h].end-s[h].start,this.panels[g].bottom-this.panels[g].top),!f&&s[h].end<this.chart.right&&this.plotLine(s[h].end,s[h].end,this.panels[g].bottom,this.panels[g].top,r.divider.backgroundColor,"line",this.chart.context,this.panels[g],{pattern:"dashed",lineWidth:m});this.endClip()}}})},e.Tooltip=function(t){function i(){if(this.huTooltip&&!(n.controls.crossX&&"none"==n.controls.crossX.style.display||n.controls.crossY&&"none"==n.controls.crossY.style.display)){var t=this.barFromPixel(this.cx);if(!this.chart.dataSegment[t])return void this.positionMarkers();if(!e.Marker.Tooltip.sameBar(this.chart.dataSegment[t],this.huTooltip.lastBar)||t==this.chart.dataSegment.length-1){var i=$(this.huTooltip.node);i.find("[auto]").remove(),i.find("stx-hu-tooltip-field-value").html();var l=["DT"];if(r&&(l=l.concat(["Open","High","Low"])),l.push("Close"),a&&l.push("Volume"),o)for(var h in this.chart.series)l.push(this.chart.series[h].display);if(s)for(var c in this.layout.studies)for(var u in this.layout.studies[c].outputMap)l=l.concat([u,c+"_hist",c+"_hist1",c+"_hist2"]);var d={};l.forEach(function(n){if(!this.chart.dataSegment[t][n]&&0!==this.chart.dataSegment[t][n]||"object"==typeof this.chart.dataSegment[t][n]&&"DT"!=n||d[n]){var r=i.find('stx-hu-tooltip-field[field="'+n+'"]');if(r.length){""!==r.find("stx-hu-tooltip-field-name").html()&&r.find("stx-hu-tooltip-field-value").html("n/a")}}else{var a=n.replace(/^(Result )(.*)/,"$2"),o="";if(d[n]=!0,this.chart.dataSegment[t][n].constructor==Number)if("Volume"==n)o=(new Intl.NumberFormat).format(this.chart.dataSegment[t][n]);else{var s=this.chart.symbol.replace(/(.*)([.])([^.]*$)/,"$3").split("-")[0],l=8;switch(s){case"KRW":l=this.chart.dataSegment[t][n]>=100?0:2;break;case"USDT":l=3;break;default:l=8}o=0!==l&&3!==l?this.chart.dataSegment[t][n].toFixed(l):(new Intl.NumberFormat).format(this.chart.dataSegment[t][n].toFixed(l))}else if(this.chart.dataSegment[t][n].constructor==Date)if("DT"==n&&this.controls.floatDate&&this.controls.floatDate.innerHTML){const h=JSON.parse(localStorage.getItem("locale")),c=h&&h.language,u="ko"===c?this.controls.floatDate.innerHTML.slice(0,11):this.controls.floatDate.innerHTML.replace(/ \(.*/g,""),p=localStorage.getItem("selectedTimeZone"),f="undefined"!==p&&"null"!==p?p:this.displayZone;if(e.ChartEngine.hideDates())o="N/A";else if(f){var m="";for(var g in e.timeZoneMap)if(e.timeZoneMap[g]===f){const v=g.replace(/\).*/g,")");m="(UTC)"===v?"(UTC+00:00)":v}o=u+" "+m}else o=u+" (UTC"+(new Date).toString().slice(28,31)+":"+(new Date).toString().slice(31,33)+")"}else o=e.yyyymmdd(this.chart.dataSegment[t][n]),e.ChartEngine.isDailyInterval(this.layout.interval)||(o+=" "+this.chart.dataSegment[t][n].toTimeString().substr(0,8));else o=this.chart.dataSegment[t][n];var y=i.find('stx-hu-tooltip-field[field="'+a+'"]');if(y.length){y.find("stx-hu-tooltip-field-value").html(o);var x=y.find("stx-hu-tooltip-field-name");""===x.html()&&x.html(a+":")}else $("<stx-hu-tooltip-field auto></stx-hu-tooltip-field>").append($("<stx-hu-tooltip-field-name>"+this.translateIf(a)+":</stx-hu-tooltip-field-name>")).append($("<stx-hu-tooltip-field-value>"+o+"</stx-hu-tooltip-field-value>")).appendTo(i)}},this),this.huTooltip.render()}}}var n=t.stx,r=t.ohl,a=t.volume,o=t.series,s=t.studies,l=$(n.chart.container).find("stx-hu-tooltip")[0];l||(l=$("<stx-hu-tooltip></stx-hu-tooltip>").appendTo($(n.chart.container))[0]),e.Marker.Tooltip=function(t){this.className||(this.className="CIQ.Marker.Tooltip"),t.label="tooltip",e.Marker.call(this,t)},e.Marker.Tooltip.ciqInheritsFrom(e.Marker,!1),e.Marker.Tooltip.sameBar=function(t,e){return!(!t||!e)&&(+t.DT==+e.DT&&(t.Close==e.Close&&(t.Open==e.Open&&t.Volume==e.Volume)))},e.Marker.Tooltip.placementFunction=function(t){for(var i=30,n=t.stx,r=0;r<t.arr.length;r++){var a=t.arr[r],o=n.barFromPixel(n.cx);if(n.controls.crossX&&"none"==n.controls.crossX.style.display||n.controls.crossY&&"none"==n.controls.crossY.style.display||!(e.ChartEngine.insideChart&&n.layout.crosshair&&n.displayCrosshairs)||n.overXAxis||n.overYAxis||n.openDialog||n.activeDrawing||n.grabbingScreen||"undefined"==n.chart.dataSegment[o]||!n.chart.dataSegment[o]||!n.chart.dataSegment[o].DT)return a.node.style.left="-1000px",a.node.style.right="auto",void(a.lastBar={});if(e.Marker.Tooltip.sameBar(n.chart.dataSegment[o],a.lastBar)&&o!=n.chart.dataSegment.length-1)return;a.lastBar=n.chart.dataSegment[o],parseInt(getComputedStyle(a.node).width,10)+i<e.ChartEngine.crosshairX?(a.node.style.left="auto",a.node.style.right=Math.round(n.container.clientWidth-n.pixelFromBar(o)+i)+"px"):(a.node.style.left=Math.round(n.pixelFromBar(o)+i)+"px",a.node.style.right="auto"),a.node.style.top=Math.round(e.ChartEngine.crosshairY-n.top-parseInt(getComputedStyle(a.node).height,10)/2)+"px"}n.doDisplayCrosshairs()},e.Marker.Tooltip.prototype.reset=function(){l&&(l.innerHTML="")},e.ChartEngine.prototype.append("undisplayCrosshairs",function(){var t=this.huTooltip;if(t&&t.node){var e=$(t.node);e&&e[0]&&(e[0].style.left="-1000px",e[0].style.right="auto",t.lastBar={})}}),e.ChartEngine.prototype.append("headsUpHR",i),e.ChartEngine.prototype.append("createDataSegment",i),n.huTooltip=new e.Marker.Tooltip({stx:n,xPositioner:"bar",chartContainer:!0,node:l})},e.InactivityTimer=function(t){t.minutes&&((!t.interval||t.interval<0)&&(t.interval=60),this.stx=t.stx,this.timeout=t.minutes,this.interval=t.interval,this.wakeCB=t.wakeCB,this.sleepCB=t.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=(new Date).getTime(),this.wakeChart=function(){window.clearTimeout(this.sleepTimer),this.last=(new Date).getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,e.unappendClassName(document.body,"ciq-sleeping")),this.sleepTimer=window.setTimeout(this.sleepChart.bind(this),6e4*this.timeout),this.wakeCB&&wakeCB()},this.sleepChart=function(){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,e.appendClassName(document.body,"ciq-sleeping")),this.sleepCB&&sleepCB()},$(document).on("mousemove mousedown touchstart touchmove pointerdown pointermove keydown wheel",$("body"),function(t){return function(){t.wakeChart()}}(this)),this.wakeChart())},e.Animation=function(t,i,n){var r={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};i=e.extend(r,i),r.tension&&(t.chart.tension=i.tension),t.tickAnimator=n||new e.EaseMachine(Math.easeOutCubic,1e3);var a=new e.EaseMachine(Math.easeInOutCubic,200),o=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],s=0,l=0;t.prepend("appendMasterData",function(t,n,r){function a(){n.animatingHorizontalScroll&&(n.animatingHorizontalScroll=!1,s.micropixels=s.nextMicroPixels=s.previousMicroPixels,n.lastTickOffset=0),n.closePendingAnimation&&(n.masterData[n.masterData.length-1].Close=n.closePendingAnimation,n.closePendingAnimation=0)}function o(t,r,o){return function(p){var f=p.Close;if(!n.dataSet.length||c!=n.symbol||u!=s.layout.interval||d!=s.layout.timeUnit)return a(),void l.stop();var m=e.clone(t);m.Close=Math.round(f*i.granularity)/i.granularity,t.Close>r.High&&(m.High=m.Close),t.Close<r.Low&&(m.Low=m.Close),o&&(m.Open=m.High=m.Low=m.Close),n.animatingHorizontalScroll&&(s.micropixels=p.micropixels,n.lastTickOffset=p.lineOffset),h.updateDataSegmentInPlace=!l.hasCompleted,s.appendMasterData([m],n,h),h.firstLoop=!1,l.hasCompleted&&a()}}var s=this;if(n||(n=s.chart),!s.tickAnimator)return void alert("Animation plug-in can not run because the tickAnimator has not be declared. See instructions in animation.js");var l=s.tickAnimator;if(null!==n&&n!==undefined&&!(r!==undefined&&r.animationEntry||(this.prevSymbol!=n.symbol&&(this.prevQuote=0,n.closePendingAnimation=0,this.prevSymbol=n.symbol),a(),l.stop(),t.length>2))){var h=e.clone(r);h||(h={}),h.animationEntry=!0,h.bypassGovernor=!0,h.noCreateDataSet=!1,h.allowReplaceOHL=!0,h.firstLoop=!0;var c=this.chart.symbol,u=this.layout.interval,d=this.layout.timeUnit,p=t[t.length-1];this.prevQuote||(this.prevQuote=this.currentQuote());var f=!1;2==t.length&&(this.prevQuote=t[0],t.splice(1,1)),p.DT.getTime()!==this.prevQuote.DT.getTime()&&(f=!0);var m="mountain"==this.layout.chartType||"line"==this.layout.chartType||"baseline_delta"==this.layout.chartType,g=0;return n.scroll<n.maxTicks&&f&&(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+this.layout.candleWidth,g=-1*this.layout.candleWidth,n.dataSegment.length<n.maxTicks-i.ticksFromEdgeOfScreen&&!i.stayPut&&(this.nextMicroPixels=this.micropixels,n.scroll++),n.animatingHorizontalScroll=m,n.previousDataSetLength=n.dataSet.length),n.closePendingAnimation=p.Close,l.run(o(p,e.clone(this.prevQuote),f),{Close:this.prevQuote.Close,micropixels:this.nextMicroPixels,lineOffset:g},{Close:p.Close,micropixels:this.micropixels,lineOffset:0}),this.prevQuote=p,!0}}),t.prepend("renderYAxis",function(t){function e(e){return function(i){t.animatedLow=i.low,t.animatedHigh=i.high,e.draw()}}if(!this.grabbingScreen){var i,n=t.panel,r=n.yaxisRHS.concat(n.yaxisLHS);for(i=0;i<r.length;i++){var o=r[i],s=null,l=null;if(n.yAxis===o){if(t.prevLowValue||(t.prevLowValue=t.animatedLow=t.lowValue),t.prevHighValue||(t.prevHighValue=t.animatedHigh=t.highValue),t.prevLowValue!=t.lowValue||t.prevHighValue!=t.highValue){a.stop();var h=t.prevLowValue,c=t.prevHighValue;return t.prevLowValue=t.lowValue,t.prevHighValue=t.highValue,a.run(e(this),{low:h,high:c},{low:t.lowValue,high:t.highValue}),!0}s=t.animatedLow,l=t.animatedHigh}this.calculateYAxisRange(n,o,s,l)}var u={};for(i=0;i<r.length;i++)u.yAxis=r[i],this.createYAxis(n,u),this.drawYAxis(n,u);return!0}}),t.append("draw",function(){if(this.chart.dataSet&&this.chart.dataSet.length){l%20==0&&(s++,l=0),l++;var t=this.chart.context,e=this.chart.panel,i=this.currentQuote().Close,n=this.pixelFromDate(this.currentQuote().DT,this.chart);this.chart.lastTickOffset&&(n+=this.chart.lastTickOffset);var r=this.pixelFromPrice(i,e);this.chart.yAxis.left>n&&(s>=o.length&&(s=0),t.beginPath(),t.moveTo(n,r),t.arc(n,r,2+1.07*s,0,2*Math.PI,!1),t.fillStyle=o[s],t.fill())}})},t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"),require("./thirdparty/object-observe"),require("./thirdparty/webcomponents-lite.min"));else if("function"==typeof define&&define.amd)define(["chartiq","thirdparty/object-observe","thirdparty/webcomponents-lite.min"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for componentUI.js.");var e="undefined"!=typeof window?window:self;t(e,e,e)}}(function(t){function e(t,e,i,n){return Math.round(i-t.pixelFromPriceTransform(n,e))}var i=t.CIQ;jQuery.fn.extend({stxtap:function(t,e){return this.each(function(){i.installTapEvent(this),"string"==typeof t?$(this).on("stxtap",t,function(t){e.call(this,t)}):$(this).on("stxtap",function(e){t.call(this,e)})})}}),jQuery.fn.extend($.expr[":"],{trulyvisible:function(t){var e=$(t).parents();e=e.add(t);for(var i=0;i<e.length;i++){var n=$(e[i]);if("0"===n.css("opacity"))return!1;if("hidden"===n.css("visibility"))return!1;if("0px"===n.css("height"))return!1;if(!n.is(":visible"))return!1}return!0}}),jQuery.fn.extend({cqvirtual:function(){var t=this.clone();return t.empty(),t.original=this,t},cqrender:function(){if(this[0].innerHTML==this.original[0].innerHTML)return this.original;this.original.empty();var t=this.children();if(t.length){var e=t.detach();this.original.append(e)}return this.original},emptyExceptTemplate:function(){return this.children().not("template").remove(),this}}),jQuery.queryString=function(t){for(var e=window.location.search.substring(1),i=e.split("&"),n=0;n<i.length;n++){var r=i[n].split("=");if(r[0]==t)return r[1]}return null},function(){function t(t){var e=t.target||t.srcElement;e.__resizeRAF__&&o(e.__resizeRAF__),e.__resizeRAF__=a(function(){var i=e.__resizeTrigger__;i.__resizeListeners__.forEach(function(e){e.call(i,t)})})}function e(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",t)}var n=document.attachEvent,r=navigator.userAgent.match(/Trident/),a=function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)};return function(e){return t(e)}}(),o=function(){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(e){return t(e)}}();i.addResizeListener=function(i,a){var o=$("cq-ui-manager");if(o.length>0&&(o=o[0],o.registerForResize(i)),!i.__resizeListeners__)if(i.__resizeListeners__=[],n)i.__resizeTrigger__=i,i.attachEvent("onresize",t);else{var s=i.__resizeTrigger__=document.createElement("object");s.setAttribute("style","visibility:hidden; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; border:0px;"),s.__resizeElement__=i,s.onload=e,s.type="text/html",r&&i.appendChild(s),s.data="about:blank",r||i.appendChild(s)}i.__resizeListeners__.push(a)},i.removeResizeListener=function(e,i){var r=$("cq-ui-manager");r.length>0&&(r=r[0],r.unregisterForResize(e)),e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(i),1),e.__resizeListeners__.length||(n?e.detachEvent("onresize",t):(e.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",t),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)))}}(),i.UI={},i.UI.KEYSTROKE=1,i.UI.BODYTAP=2,i.UI.Selectors=function(){},i.UI.Selectors.noClose="[cq-no-close]",i.UI.makeFromTemplate=function(t,e){for(var i=$(t)[0].content,n=document.importNode(i,!0),r=null,a=0;a<n.childNodes.length;a++){var o=n.childNodes[a];if(1==o.nodeType){r=$(o),!0===e?$(t).parent().append(n):e&&$(e).append(n);break}}return r},i.UI.Context=function(t,e,i){this.params=i||{},this.stx=t,this.topNode=$(e)[0],this.topNode.CIQ||(this.topNode.CIQ={}),this.topNode.CIQ.UI||(this.topNode.CIQ.UI={}),
this.topNode.CIQ.UI.Components||(this.topNode.CIQ.UI.Components=[]),this.topNode.CIQ.UI.EventClaims||(this.topNode.CIQ.UI.EventClaims=[]),this.components=this.topNode.CIQ.UI.Components,this.topNode.CIQ.UI.context=this;for(var n=0;n<this.components.length;n++)this.components[n].setContextPrivate(this)},i.UI.Context.prototype.changeSymbol=function(){console.log("Please implement CIQ.UI.Context.prototype.changeSymbol")},i.UI.Context.prototype.setLookupDriver=function(t){this.lookupDriver=t},i.UI.Context.prototype.advertiseAs=function(t,e){var i=$(this.topNode)[0];i.CIQ.UI[e]||(i.CIQ.UI[e]=[]),i.CIQ.UI[e].push(t)},i.UI.Context.prototype.findNearest=function(t,e){return this.topNode.CIQ.UI[e]},i.UI.Context.splitMethod=function(t){if(!t)return null;var e=t.indexOf("("),i=t.lastIndexOf(")");if(-1==e||-1==i)return console.log("malformed stxtap attribute: "+t),null;var n,r=null,a=t.substring(0,e),o=a.indexOf(".");-1==o?n=a:(r=a.substring(0,o),n=t.substring(o+1,e));var s=t.substring(e+1,i),l=s.match(/('[^']+'|[^,]+)/g),h=new RegExp("^[0-9]+([,.][0-9]+)?$","g"),c=new RegExp("^\\d+$"),u=[];if(l)for(var d=0;d<l.length;d++){for(var p=l[d];" "==p.charAt(0);)p=p.substring(1);if(-1!=p.indexOf('"')||-1!=p.indexOf("'"))u.push(p.substring(1,p.length-1));else if("true"==p)u.push(!0);else if("false"==p)u.push(!1);else if("null"==p)u.push(null);else if(c.test(p))u.push(parseInt(p,10));else if(h.test(p))u.push(parseFloat(p));else{for(var f=p.split("."),m=window,g=0;g<f.length;g++)m=m[f[g]];u.push(m)}}return{helperName:r,functionName:n,args:u}},i.UI.Context.prototype.getHelpers=function(t,e,n){if(t=t?$(t)[0]:this.topNode,!e&&!(e=t.getAttribute(n)))return null;var r,a=e.indexOf("("),o=e.substring(0,a),s=e.indexOf(".");if(-1==a||-1!=o.indexOf(".")){var l=e;if(-1!=s&&(l=e.substring(0,s)),!(r=this.findNearest(t,l))){if(!i.UI[l])return console.log("Helper "+l+" not found"),null;r=[new i.UI[l](this.topNode,this)]}}else for(var h=e.substring(0,a),c=$(t).parents(),u=0;u<c.length;u++){var d=c[u];if("function"==typeof d[h])return[d]}return r},i.UI.Context.prototype.activate=function(t,e,n,r){var a=r?"stxsetget":"stxtap",o=i.UI.Context.splitMethod(t.getAttribute(a));if(o){var s=o.helperName,l=o.functionName;r&&(l="set"+l);var h=[{node:t,e:e,params:n}].concat(o.args);if(s)for(var c=this.getHelpers(t,null,a),u=0;u<c.length;u++)c[u][l]?c[u][l].apply(c[u],h):console.log("Method '"+l+"' not found in helper",c[u]);else for(var d=$(t).parents(),p=0;p<d.length;p++){var f=d[p];"function"==typeof f[l]&&f[l].apply(f,h)}}},i.UI.Context.prototype.makeTap=function(t,e){t.selectFC=e,$(t).stxtap(e)},i.UI.Context.prototype.inputEntry=function(t,e){$(t).on("keypress",function(t){switch(t.which){case 13:case 9:e()}})},i.UI.Context.prototype.makeBindTap=function(t){function e(t){var e={},i=t.split("==");return 2==i.length?(e.objectString=i[0],e.condition=i[1],e.verb="evaluate",e):(i=t.split("~="),2==i.length?(e.objectString=i[0],e.condition=i[1],e.verb="checkbox",e):(i=t.split("="),2==i.length?(e.objectString=i[0],e.condition=i[1],e.verb="radio",e):(e.objectString=t,e.condition=null,void(e.verb="boolean"))))}function i(t){return function(e){u.e=e,"evaluate"===t.verb||("radio"===t.verb?t.obj[t.member]=t.condition:"checkbox"==t.verb?t.obj[t.member]===t.condition?t.obj[t.member]=null:t.obj[t.member]=t.condition:"boolean"==t.verb&&(t.obj[t.member]=!t.obj[t.member]))}}var n=t.getAttribute("stxbindtap"),r={selector:t},a=n.indexOf(","),o=n.substring(0,a),s=n.substring(a+1);$.extend(r,e(o));var l=s.indexOf("=");r.action=-1==l?s:s.substring(0,l),r.value=-1==l?null:s.substring(l+1);var h=r.objectString.split(".");r.obj=this;for(var c=0;c<h.length-1;c++)r.obj=r.obj[h[c]];r.member=h[c],this.observe(r);var u=this;this.makeTap(t,i(r))},i.UI.Context.prototype.bind=function(t,e){function n(e){var i,n=s.indexOf("(");i=-1==n?s.substring(s.indexOf(".")+1):s.substring(0,n),e[i](t)}function r(t){return function(i){u.e=i,u.activate(t,i,e,!1)}}function a(n){function r(){return function(i){u.e=i,u.activate(t,i,e,!0)}}var a=i.UI.Context.splitMethod(c);if(!a)return void console.log("Syntax error "+c);var o=[t].concat(a.args).concat(e);n["get"+a.functionName].apply(n,o),"text"===t.type||"number"===t.type?u.inputEntry(t,r()):u.makeTap(t,r())}t=$(t)[0];var o,s=t.getAttribute("stxbind"),l=t.getAttribute("stxtap"),h=t.getAttribute("stxbindtap"),c=t.getAttribute("stxsetget");s&&""!==s&&(o=this.getHelpers(t,s,"stxbind"),o.forEach(n));var u=this;l&&""!==l&&this.makeTap(t,r(t)),h&&this.makeBindTap(t),c&&(o=this.getHelpers(t,c,"stxsetget"),o.forEach(a))},i.UI.Context.prototype.buildReverseBindings=function(t){t||(t=this.topNode);var e,n=function(t){if(t.hasAttribute("stxbind")||t.hasAttribute("stxtap")||t.hasAttribute("stxbindtap")||t.hasAttribute("stxsetget"))return NodeFilter.FILTER_ACCEPT},r=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,i.isIE?n:{acceptNode:n},!1);for(e=r.nextNode();e;)this.bind(e),e=r.nextNode()},i.UI.Context.prototype.setLoader=function(t){this.loader=t},i.UI.Context.prototype.isModal=function(){return""!==this.stx.openDialog},i.UI.Context.prototype.addClaim=function(t,e){this.topNode.CIQ.UI.EventClaims.push({helper:t,eventType:e})},i.UI.Context.prototype.removeClaim=function(t,e){for(var i=this.topNode.CIQ.UI.EventClaims,n=0;n<i.length;n++)if(i[n].helper===t&&i[n].eventType===e)return void i.splice(n,1)},i.UI.Context.prototype.processKeyStrokeClaims=function(t,e,n,r){for(var a=this.topNode.CIQ.UI.EventClaims,o=a.length-1;o>-1;o--)if(a[o].eventType===i.UI.KEYSTROKE){var s=a[o].helper,l=s.keyStroke(t,e,n,r);if(l)return l.allowDefault||n.preventDefault(),!0}return!1},i.UI.Context.prototype.observe=function(t){function e(e){var n=!1;if(t.member){if(e.name===t.member)n=!0;else if(t.member.constructor==Array)for(var r=0;r<t.member.length;r++)e.name===t.member[r]&&(n=!0)}else n=!0;if(n){var a=$(t.selector);if(!a.length&&"callback"===t.action)return void t.value.call(i,t);"class"===t.action&&a.removeClass(t.value),a.each(function(){var e=!1;t.member&&(t.condition?t.obj[t.member]===t.condition&&(e=!0):e=t.obj[t.member]),"class"===t.action&&e&&a.addClass(t.value),"callback"===t.action&&t.value.call(i,t,this),"value"===t.action&&(t.value?this.value=t.value:t.obj[t.member]?this.value=t.obj[t.member]:this.value="")})}}var i=this;Object.observe(t.obj,function(t){t.forEach(e)},["update","add","delete"]),e({name:t.member})},i.UI.animatePrice=function(t,e,i){t.removeClass("cq-stable"),e>i?t.addClass("cq-up"):e<i&&t.addClass("cq-down"),setTimeout(function(){t.addClass("cq-stable").removeClass("cq-up").removeClass("cq-down")},0)},i.UI.ContextTag=Object.create(HTMLElement.prototype),i.UI.ContextTag.setContextHolder=function(){var t=this.node.parents("cq-context,*[cq-context]")[0];t.CIQ||(t.CIQ={}),t.CIQ.UI||(t.CIQ.UI={}),t.CIQ.UI.Components||(t.CIQ.UI.Components=[]),t.CIQ.UI.EventClaims||(t.CIQ.UI.EventClaims=[]),t.CIQ.UI.Components.push(this),t.CIQ.UI.context&&this.setContextPrivate(t.CIQ.UI.context)},i.UI.ContextTag.setContext=function(){},i.UI.ContextTag.setContextPrivate=function(t){this.context=t,this.uiManager=$("cq-ui-manager"),this.uiManager.length>0&&(this.uiManager=this.uiManager[0]);var e=$(this);void 0!==e.attr("cq-marker")&&(e.detach(),this.marker=new i.Marker({stx:t.stx,node:e[0],xPositioner:"none",yPositioner:"none",permanent:!0})),setTimeout(function(t,e){return function(){t.setContext(e)}}(this,t))},i.UI.containerExecute=function(t,e,i){var n=i;i&&n.constructor!==Array&&(n=Array.prototype.slice.call(arguments,2));for(var r=t.node.parents(),a=0;a<r.length;a++){var o=r[a];if(o[e]&&o[e].constructor==Function)return o[e].apply(o,n)}return null},i.UI.ContextTag.createdCallback=function(){this.injections=[],this.node=$(this)},i.UI.ContextTag.addInjection=function(t,e,i){this.injections.push(this.context.stx[t](e,i))},i.UI.ContextTag.detachedCallback=function(){if(this.context&&this.injections){for(var t=0;t<this.injections.length;t++)this.context.stx.removeInjection(this.injections[t]);this.injections=[]}},i.UI.ContextTag.attachedCallback=function(){this.attached||(this.node=$(this),this.setContextHolder(),this.attached=!0)},i.UI.ModalTag=Object.create(i.UI.ContextTag),i.UI.ModalTag.modalBegin=function(){this.context&&this.context.stx.modalBegin()},i.UI.ModalTag.modalEnd=function(){this.context&&this.context.stx.modalEnd()},i.UI.ModalTag.attachedCallback=function(){if(!this.attached){var t=$(this),e=this;t.mouseover(function(){e.modalBegin()}),t.mouseout(function(){e.modalEnd()}),i.UI.ContextTag.attachedCallback.apply(this),this.attached=!0}},i.UI.Helper=function(t,e){this.node=t,this.context=e,this.injections=[]},i.UI.Helper.prototype.addInjection=function(t,e,i){this.injections.push(this.context.stx[t](e,i))},i.UI.Helper.prototype.destroy=function(){for(var t=0;t<this.injections.length;t++)this.context.stx.removeInjection(this.injections[t]);this.injections=[]},i.UI.Lookup=function(){},i.UI.Lookup.Driver=function(){},i.UI.Lookup.Driver.prototype.acceptText=function(){this.cb},i.UI.Lookup.Driver.ChartIQ=function(t){this.exchanges=t,this.exchanges||(this.exchanges=["XNYS","XASE","XNAS","XASX","INDCBSX","INDXASE","INDXNAS","IND_DJI","ARCX","INDARCX","forex"]),this.url="https://symbols.chartiq.com/chiq.symbolserver.SymbolLookup.service",this.requestCounter=0},i.UI.Lookup.Driver.ChartIQ.ciqInheritsFrom(i.UI.Lookup.Driver),i.UI.Lookup.Driver.ChartIQ.prototype.acceptText=function(t,e,n,r){function a(t,e){if(!(s<l.requestCounter)&&200==t)try{e=JSON.parse(e);for(var i=e.payload.symbols,n=[],a=0;a<i.length;a++){var o=i[a].split("|"),h={symbol:o[0],name:o[1],exchDisp:o[2]};n.push({display:[h.symbol,h.name,h.exchDisp],data:h})}r(n)}catch(t){}}"FX"==e&&(e="FOREX"),isNaN(parseInt(n,10))&&(n=100);var o=this.url+"?t="+encodeURIComponent(t)+"&m="+n+"&x=[";this.exchanges&&(o+=this.exchanges.join(",")),o+="]",e&&"ALL"!=e.toUpperCase()&&(o+="&e="+e);var s=++this.requestCounter,l=this;i.postAjax({url:o,cb:a})},i.UI.StudyMenu=function(t,e,i){this.node=$(t),this.context=e,this.params=i||{},this.params.template||(this.params.template=".stxTemplate"),this.params.template=this.node.find(this.params.template),this.params.template.detach(),this.alwaysDisplayDialog=!!this.params.alwaysDisplayDialog&&this.params.alwaysDisplayDialog,this.excludedStudies=this.params.excludedStudies,this.excludedStudies||(this.excludedStudies=[]),e.advertiseAs(this,"StudyMenu")},i.UI.StudyMenu.ciqInheritsFrom(i.UI.Helper),i.UI.StudyMenu.prototype.renderMenu=function(){var t,e=[];for(var n in i.Studies.studyLibrary)t=i.Studies.studyLibrary[n],t.name||(t.name=n),this.excludedStudies[n]||this.excludedStudies[t.name]||e.push(n);e.sort(function(t,e){var n=i.Studies.studyLibrary[t],r=i.Studies.studyLibrary[e];return n.name<r.name?-1:n.name>r.name?1:0});for(var r=$(this.node),a=this,o=function(t){return function(e){a.pickStudy(e.target,t),r.resize()}},s=0;s<e.length;s++){var l=this.params.template.clone();t=i.Studies.studyLibrary[e[s]],l.append(t.name),r.append(l),l[0].selectFC=o(e[s],this.context),l.stxtap(l[0].selectFC)}},i.UI.StudyMenu.prototype.studyDialog=function(t){$("cq-study-dialog").each(function(){this.configure(t)})},i.UI.StudyMenu.prototype.pickStudy=function(t,e){function n(t,i){if(!0===t)return a.studyDialog(i),!0;if("object"==typeof t)for(var n in t)if(n==e&&t[n])return a.studyDialog(i),!0}var r=this.context.stx,a=this;if(!n(this.params.dialogBeforeAddingStudy,{stx:r,name:e})){var o=i.Studies.addStudy(r,e);n(this.alwaysDisplayDialog,{sd:o,stx:r})}},i.UI.ViewsMenu=function(t,e,n){this.node=$(t),this.params=n||{},this.params.viewObj||(this.params.viewObj={views:[]}),this.params.nameValueStore||(this.params.nameValueStore=new i.NameValueStore),this.params.template||(this.params.template="template[cq-view]"),this.params.template=this.node.find(this.params.template),this.params.template.detach(),this.context=e,this.uiManager=$("cq-ui-manager"),this.uiManager.length>0&&(this.uiManager=this.uiManager[0]);var r=this;this.params.nameValueStore.get("stx-views",function(t,e){!t&&e&&(r.params.viewObj.views=e),r.params.cb&&r.params.cb.call(r)}),e.advertiseAs(this,"ViewsMenu")},i.UI.ViewsMenu.ciqInheritsFrom(i.UI.Helper),i.UI.ViewsMenu.prototype.renderMenu=function(){function t(t){return function(e){e.stopPropagation(),r.params.viewObj.views.splice(t,1),r.params.nameValueStore.set("stx-views",r.params.viewObj.views),r.renderMenu()}}function e(t){return function(e){function n(){a.importLayout(r.params.viewObj.views[t][o],!0,!0),a.changeCallback&&a.changeCallback(a,"layout"),a.dispatch("layout",{stx:a}),r.context.loader&&r.context.loader.hide()}e.stopPropagation(),r.uiManager.closeMenu(),r.context.loader&&r.context.loader.show();var o=i.first(r.params.viewObj.views[t]);setTimeout(n,10)}}var n=$(this.node),r=this,a=r.context.stx;$("cq-views-content cq-item").remove();for(var o=0;o<this.params.viewObj.views.length;o++){var s=i.first(r.params.viewObj.views[o]);if("recent"!=s){var l=i.UI.makeFromTemplate(this.params.template),h=l.find("cq-label"),c=l.find("div");h.length&&(h.addClass("view-name-"+s),h.text(s)),c.length&&c.stxtap(t(o)),l.stxtap(e(o)),$("cq-views-content").append(l)}}var u=$("cq-view-save");u&&u.stxtap(function(){var t=r.context.getHelpers(null,"ViewDialog");if(!t.length)return void console.log("CIQ.UI.ViewsMenu.prototype.renderMenu: no ViewDialog available");t=$(t[0]),t.find("input").val(""),t.parents("cq-dialog")[0].open()}),this.params.renderCB&&this.params.renderCB(n)},i.Marker.HeadsUp=function(t,e){this.className||(this.className="CIQ.Marker.HeadsUp"),i.Marker.call(this,t),this.prevTick=null,this.showClass=e},i.Marker.HeadsUp.ciqInheritsFrom(i.Marker,!1),i.Marker.HeadsUp.placementFunction=function(t){var n=t.panel,r=n.chart,a=t.stx,o=i.ChartEngine.chartShowsHighs(a.layout.chartType);t.showClass||(t.showClass="stx-show");for(var s=0;s<t.arr.length;++s){var l=t.arr[s],h=$(l.node);if(n.hidden)return void h.removeClass(t.showClass);if(l.params.x<0||l.params.x>=r.dataSet.length)return void h.removeClass(t.showClass);if(a.layout.crosshair||a.currentVectorParameters.vectorType)return void h.removeClass(t.showClass);var c=r.dataSet[l.params.x],u=a.pixelFromTick(l.params.x);if(!c||u<r.left||u>r.right)return void h.removeClass(t.showClass);h.addClass(t.showClass),l.clientWidth||(l.clientWidth=h.width()),l.clientHeight||(l.clientHeight=h.height()),l.clientWidth>u?(h.removeClass("stx-left"),h.addClass("stx-right"),h.css({left:u+"px",right:"auto"})):(h.addClass("stx-left"),h.removeClass("stx-right"),h.css({right:a.chart.canvasWidth-u+"px",left:"auto"}));var d,p=l.params.chartContainer?a.chart.canvasHeight:n.bottom;d=o?e(a,n,p,a.getBarBounds(c).high):e(a,n,p,c[a.chart.defaultPlotField]);p-d-l.clientHeight+a.top<0?(h.addClass("stx-below"),d=(o?e(a,n,p,a.getBarBounds(c).low):d)-l.clientHeight):h.removeClass("stx-below");var f=d+"px";l.node.style.bottom!=f&&(l.node.style.bottom=f)}},i.UI.HeadsUp=function(t,e,i){this.params=i||{},"undefined"==typeof this.params.autoStart&&(this.params.autoStart=!0),this.node=$(t),this.node.detach(),this.context=e,this.maxVolume={lastCheckDate:null,value:0},e.advertiseAs(this,"HeadsUp"),this.params.autoStart&&this.begin()},i.UI.HeadsUp.ciqInheritsFrom(i.UI.Helper),i.UI.HeadsUp.prototype.begin=function(){var t;this.params.followMouse?(this.node.css({top:"auto"}),t={stx:this.context.stx,label:"headsup",xPositioner:"bar",chartContainer:!0,x:0,node:this.node[0]},this.marker=new i.Marker.HeadsUp(t,this.params.showClass),this.addInjection("append","handleMouseOut",function(t){return function(){t.followMouse(-1)}}(this)),i.touchDevice&&(this.context.stx.touchNoPan=!0)):this.params.staticNode||(this.node.css({top:"",left:""}),t={stx:this.context.stx,label:"headsup",xPositioner:"none",chartContainer:!1,node:this.node[0]},$.extend(t,this.params),this.marker=new i.Marker(t)),this.calculateMaxVolume(),this.addInjection("prepend","headsUpHR",function(t){return function(){t.position()}}(this)),this.addInjection("append","createXAxis",function(t){return function(){t.position()}}(this)),this.addInjection("append","createDataSet",function(t){return function(e,i,n){t.calculateMaxVolume(n.appending)}}(this))},i.UI.HeadsUp.prototype.end=function(){i.touchDevice&&this.params.followMouse&&(this.context.stx.touchNoPan=!1),this.marker&&this.marker.remove(),this.destroy(),this.marker=null},i.UI.HeadsUp.prototype.calculateMaxVolume=function(t){t||(this.maxVolume={lastCheckDate:null,value:0});var e=this.context.stx.chart.dataSet;if(e&&e.length){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.DT<this.maxVolume.lastCheckDate)break;n.Volume>this.maxVolume.value&&(this.maxVolume.value=n.Volume)}this.maxVolume.lastCheckDate=e[e.length-1].DT}},i.UI.HeadsUp.prototype.position=function(){function t(){if(l.timeout=null,s.find("cq-hu-price").text(""),s.find("cq-hu-open").text(""),s.find("cq-hu-close").text(""),s.find("cq-hu-high").text(""),s.find("cq-hu-low").text(""),s.find("cq-hu-date").text(""),s.find("cq-hu-volume").text(""),s.find("cq-volume-rollup").text(""),r){if(r.data){s.find("cq-hu-open").text(e.formatPrice(r.data.Open)),s.find("cq-hu-price").text(e.formatPrice(r.data[o])),s.find("cq-hu-close").text(e.formatPrice(r.data.Close)),s.find("cq-hu-high").text(e.formatPrice(r.data.High)),s.find("cq-hu-low").text(e.formatPrice(r.data.Low));var t=i.condenseInt(r.data.Volume),n=t.charAt(t.length-1);n>"0"&&(t=t.substring(0,t.length-1),s.find("cq-volume-rollup").text(n.toUpperCase())),s.find("cq-hu-volume").text(t);var h=r.data.displayDate;h||(h=r.data.DT),i.ChartEngine.isDailyInterval(e.layout.interval)?s.find("cq-hu-date").text(i.mmddyyyy(i.yyyymmddhhmm(h))):s.find("cq-hu-date").text(i.mmddhhmm(i.yyyymmddhhmm(h)));var c=s.find("cq-volume-visual");if(c.length){var u=l.maxVolume.value?r.data.Volume/l.maxVolume.value:0;c.css({width:Math.round(100*u)+"%"})}}a&&a[o]&&l.tick==e.chart.dataSet.length-1&&s.find("cq-hu-price").text(e.formatPrice(a[o]))}}var e=this.context.stx,n=e.barFromPixel(e.cx);this.tick=e.tickFromPixel(e.cx);var r=e.chart.xaxis[n],a=e.chart.currentQuote,o=e.chart.defaultPlotField;o&&!i.ChartEngine.chartShowsHighs(e.layout.chartType)||(o="Close");var s=this.node,l=this;if(this.tick!=this.prevTick||e.chart.dataSegment&&n==e.chart.dataSegment.length-1){this.timeout&&clearTimeout(this.timeout);var h=(this.params.followMouse,0);this.timeout=setTimeout(t,h)}this.prevTick=this.tick,this.params.followMouse&&(e.openDialog&&(this.tick=-1),this.followMouse(this.tick))},i.UI.HeadsUp.prototype.followMouse=function(t){this.marker.params.x=t,this.marker.render()},i.UI.StudyEdit=function(t,e,i){this.context=e,this.node=t||e.topNode,i&&(this.contextDialog=$(i)[0]),e.advertiseAs(this,"StudyEdit"),this.initialize()},i.UI.StudyEdit.ciqInheritsFrom(i.UI.Helper),i.UI.StudyEdit.prototype.remove=function(){i.Studies.removeStudy(this.params.stx,this.params.sd),this.contextDialog.close()},i.UI.StudyEdit.prototype.edit=function(){this.contextDialog.close(),this.editPanel(this.params)},i.UI.StudyEdit.prototype.editPanel=function(t){$("cq-study-dialog").each(function(){this.configure(t)})},i.UI.StudyEdit.prototype.editOverlay=function(t){this.params=t,t.forceEdit?this.editPanel(t):this.contextDialog.open({x:i.ChartEngine.crosshairX,y:i.ChartEngine.crosshairY})},i.UI.StudyEdit.prototype.initialize=function(){function t(t){return function(){t.apply(i,arguments)}}var e=this.context.stx,i=this;e.callbacks.studyOverlayEdit=t(i.editOverlay),e.callbacks.studyPanelEdit=t(i.editPanel)},i.UI.Layout=function(t,e,i){this.params=i||{},this.params.activeClassName||(this.params.activeClassName="ciq-active"),this.node=t,this.context=e,e.advertiseAs(this,"Layout")},i.UI.Layout.ciqInheritsFrom(i.UI.Helper),i.UI.Layout.prototype.getChartType=function(t,e){function i(t,i){var r=t.obj;r.aggregationType&&"ohlc"!=r.aggregationType?e!==r.aggregationType?$(i).removeClass(n):$(i).addClass(n):e!==r.chartType?$(i).removeClass(n):$(i).addClass(n)}var n=this.params.activeClassName;this.context.observe({selector:t,obj:this.context.stx.layout,member:["chartType","aggregationType"],action:"callback",value:i})},i.UI.Layout.prototype.setChartType=function(t,e){!{heikinashi:!0,kagi:!0,linebreak:!0,pandf:!0,rangebars:!0,renko:!0}[e]?(this.context.stx.setChartType(e),this.context.stx.setAggregationType(null)):(this.context.stx.setChartType("candle"),this.context.stx.setAggregationType(e))},i.UI.Layout.prototype.getChartScale=function(t,e){this.context.observe({selector:t,obj:this.context.stx.layout,member:"chartScale",condition:e,action:"class",value:this.params.activeClassName})},i.UI.Layout.prototype.setChartScale=function(t,e){this.context.stx.layout.chartScale==e?this.context.stx.setChartScale(null):this.context.stx.setChartScale(e)},i.UI.Layout.prototype.getExtendedHours=function(t){this.context.observe({selector:t,obj:this.context.stx.layout,member:"extended",condition:!0,action:"class",value:this.params.activeClassName})},i.UI.Layout.prototype.setExtendedHours=function(){var t=this.context.stx;if(t.layout.extended=!t.layout.extended,t.changeOccurred("layout"),t.extendedHours){var e=this.context.loader;e&&e.show(),t.extendedHours.set(t.layout.extended,null,function(){e.hide()})}},i.UI.Layout.prototype.getAggregationType=function(t,e){this.context.observe({selector:t,obj:this.context.stx.layout,member:"aggregationType",condition:e,action:"class",value:this.params.activeClassName})},i.UI.Layout.prototype.setAggregationType=function(t,e){this.context.stx.layout.aggregationType==e?this.context.stx.setAggregationType(null):this.context.stx.setAggregationType(e)},i.UI.Layout.prototype.getAggregationEdit=function(t,e){function n(t){var e=t.selector.name,i=t.obj[t.member];!i&&r.chart.defaultChartStyleConfig[e]?$(t.selector).val(r.chart.defaultChartStyleConfig[e]):$(t.selector).val(i)}var r=this.context.stx,a=i.deriveFromObjectChain(r.layout,e);this.context.observe({selector:t,obj:a.obj,member:a.member,action:"callback",value:n})},i.UI.Layout.prototype.setAggregationEdit=function(t,e){var n=this.context.stx;if("auto"===e)"kagi"===n.layout.aggregationType?n.layout.kagi=null:"renko"===n.layout.aggregationType?n.layout.renko=null:"linebreak"===n.layout.aggregationType?n.layout.priceLines=null:"rangebars"===n.layout.aggregationType?n.layout.range=null:"pandf"===n.layout.aggregationType&&(n.layout.pandf||(n.layout.pandf={box:null,reversal:null}),n.layout.pandf.box=null,n.layout.pandf.reversal=null);else{var r=i.deriveFromObjectChain(n.layout,e);r.obj[r.member]=$(t.node).val()}n.changeOccurred("layout"),n.createDataSet(),n.draw()},i.UI.Layout.prototype.showAggregationEdit=function(t,e){var n=this.context.stx,r={kagi:{title:"Set Reversal Percentage"},renko:{title:"Set Range"},linebreak:{title:"Set Price Lines"},rangebars:{title:"Set Range"},pandf:{title:"Set Point & Figure Parameters"}};if(n.layout.aggregationType!=e&&n.setAggregationType(e),!this.aggregationDialog)return void console.log("Error:  Layout.aggregationDialog must reference your dialog for editing aggregation parameters");var a=$(this.aggregationDialog),o=r[e];a.find(".title").text(n.translateIf(o.title));for(var s in r)a.find(".ciq"+s).css(e===s?{display:""}:{display:"none"});a.find(".ciq"+e+" input").each(function(){var t=this.name;"box"!=t&&"reversal"!=t||(t="pandf."+t);var e=i.deriveFromObjectChain(n.layout,t);e&&!e.obj[e.member]&&n.chart.defaultChartStyleConfig[this.name]&&$(this).val(n.chart.defaultChartStyleConfig[this.name])}),a[0].open()},i.UI.Layout.prototype.clearStudies=function(){var t=this.context.stx;for(var e in t.layout.studies){var n=t.layout.studies[e];n.customLegend||i.Studies.removeStudy(t,n)}t.draw()},i.UI.Layout.prototype.setPeriodicity=function(t,e,i,n){var r=this;r.context.loader&&r.context.loader.show(),isNaN(i)&&(n||(n=i),i=1),r.context.stx.setPeriodicity({period:e,interval:i,timeUnit:n},function(){r.context.loader&&r.context.loader.hide()})},i.UI.Layout.prototype.showPeriodicity=function(t,e){var n="";n="day"==t.layout.interval?t.layout.periodicity+"D":"week"==t.layout.interval?t.layout.periodicity+"W":"month"==t.layout.interval?t.layout.periodicity+"M":"tick"==t.layout.interval?t.layout.periodicity+"T":"second"==t.layout.timeUnit?t.layout.periodicity+"s":"millisecond"==t.layout.timeUnit?t.layout.periodicity+"ms":t.layout.interval*t.layout.periodicity>=60&&t.layout.interval*t.layout.periodicity%15==0?t.layout.interval*t.layout.periodicity/60+"H":t.layout.interval*t.layout.periodicity+"m",$(e.selector).empty().append(i.translatableTextNode(t,n))},i.UI.Layout.prototype.periodicity=function(t){function e(t){i.showPeriodicity(this.stx,t)}var i=this;this.context.observe({selector:t,obj:this.context.stx.layout,member:["interval","periodicity","timeUnit"],action:"callback",value:e})},i.UI.Layout.prototype.displayTimezone=function(){function t(t){return function(){$(e).closest("cq-dialog,cq-menu").each(function(){this.close()});var n=i.timeZoneMap[t];i.ChartEngine.defaultDisplayTimeZone=n;for(var r=0;r<i.ChartEngine.registeredContainers.length;r++){var a=i.ChartEngine.registeredContainers[r].stx;a.setTimeZone(a.dataZone,n),a.chart.symbol&&a.draw()}}}var e=$("cq-timezone-dialog"),n=e[0].querySelector("ul"),r=n.querySelector("li#timezoneTemplate").cloneNode(!0),a=e[0].querySelector(".ciq-btn");$(n).empty(),n.appendChild(r);for(var o in i.timeZoneMap){var s=o,l=s,h=r.cloneNode(!0);h.style.display="block",h.innerHTML=l,i.safeClickTouch(h,t(s)),n.appendChild(h)}var c=this.context.stx,u=e[0].querySelector("#currentUserTimeZone");if(c.displayZone){var d=c.displayZone;for(var p in i.timeZoneMap)i.timeZoneMap[p]===c.displayZone&&(d=p);u.innerHTML="Current TimeZone is "+d,$(a).show()}else u.innerHTML="Your timezone is your current location",$(a).hide();$(e).closest("cq-dialog,cq-menu").each(function(){this.open()})},i.UI.Layout.prototype.removeTimezone=function(){i.ChartEngine.defaultDisplayTimeZone=null;for(var t=0;t<i.ChartEngine.registeredContainers.length;t++){var e=i.ChartEngine.registeredContainers[t].stx;e.displayZone=null,e.setTimeZone(),e.displayInitialized&&e.draw()}$("cq-timezone-dialog").closest("cq-dialog,cq-menu").each(function(){this.close()})},i.UI.Keystroke=function(t,e){this.node=$(t),this.cb=e,this.initialize(),this.shift=!1,this.ctrl=!1,this.cmd=!1,this.capsLock=!1,this.downValue=""},i.UI.Keystroke.noKeyCapture=!1,i.UI.Keystroke.prototype.androidWorkaroundKeyup=function(t){var e,i=t.target.value;e=i.length>this.downValue.length?i.charCodeAt(i.length-1):"delete",this.cb({key:e,e:t,keystroke:this})},i.UI.Keystroke.prototype.keyup=function(t){var e=t.which;if(this.implementAndroidWorkaround)return this.androidWorkaroundKeyup(t),void(this.implementAndroidWorkaround=!1);switch(e){case 16:return this.shift=!1,void this.cb({key:e,e:t,keystroke:this});case 17:case 18:return this.ctrl=!1,void this.cb({key:e,e:t,keystroke:this});case 91:return this.cmd=!1,void this.cb({key:e,e:t,keystroke:this})}this.key&&this.cb({key:this.key,e:t,keystroke:this})},i.UI.Keystroke.prototype.keydown=function(t){if(!this.noKeyCapture){var e=t.which;if(229==e&&i.isAndroid)return void(this.implementAndroidWorkaround=!0);if(this.ctrl||!(91!=e&&e>=48&&e<=222||32==e)){switch(e){case 91:return void(this.cmd=!0);case 16:return void(this.shift=!0);case 17:case 18:return void(this.ctrl=!0);case 20:return void(this.capsLock=!this.capsLock)}return 8==e&&(e="backspace"),9==e&&(e="tab"),13==e&&(e="enter"),27==e&&(e="escape"),33==e&&(e="page up"),34==e&&(e="page down"),35==e&&(e="end"),36==e&&(e="home"),45==e&&(e="insert"),46==e&&(e="delete"),this.key=e,37==e||38==e||39==e||40==e?(37==e&&(e="left"),38==e&&(e="up"),39==e&&(e="right"),40==e&&(e="down"),this.key=null,void this.cb({key:e,e:t,keystroke:this})):void 0}}},i.UI.Keystroke.prototype.keypress=function(t){if(!this.noKeyCapture){var e=t.which;e<32||e>222||(this.key=e)}},i.UI.Keystroke.prototype.initialize=function(){var t=this;$(document).on("keyup",this.node,function(e){t.keyup(e)}),$(document).on("keydown",this.node,function(e){t.downValue=e.target.value,t.keydown(e)}),$(document).on("keypress",this.node,function(e){t.keypress(e)}),$(window).on("blur",function(e){t.ctrl=!1,t.cb({key:17,e:e,keystroke:t})})},i.UI.KeystrokeHub=function(t,e,n){function r(){return function(){a.handler.apply(a,arguments)}}this.node=$(t),this.context=e,this.params=n||{},this.uiManager=$("cq-ui-manager"),this.uiManager.length>0&&(this.uiManager=this.uiManager[0]);var a=this;this.keystroke=new i.UI.Keystroke(t,r())},i.UI.KeystrokeHub.ciqInheritsFrom(i.UI.Helper),i.UI.KeystrokeHub.defaultHotKeys=function(t,e){var n=e.context.stx,r=1;switch(t){case"up":n.zoomIn();break;case"down":n.zoomOut();break;case"home":n.home(),n.headsUpHR();break;case"end":n.chart.scroll=n.chart.dataSet.length,n.draw(),n.headsUpHR();break;case"left":n.ctrl?n.zoomOut():(r=1,(n.shift||e.capsLock)&&(r=Math.max(5,5*(8-Math.round(n.layout.candleWidth)))),n.chart.scroll+r>=n.chart.dataSet.length&&(r=n.chart.dataSet.length-n.chart.scroll),n.chart.scroll+=r,n.draw(),n.headsUpHR());break;case"right":n.ctrl?n.zoomIn():(r=1,(n.shift||e.capsLock)&&(r=Math.max(5,5*(8-Math.round(n.layout.candleWidth)))),n.chart.scroll-=r,n.draw(),n.headsUpHR());break;case"delete":case"backspace":if(i.ChartEngine.drawingLine)n.undo();else{if(!n.anyHighlighted)return!1;n.deleteHighlighted()}break;case"escape":i.ChartEngine.drawingLine?n.undo():e.uiManager&&e.uiManager.closeMenu();break;default:return!1}return!0},i.UI.KeystrokeHub.prototype.handler=function(t){var e=this.context.stx;if(!e.editingAnnotation){var n=t.e,r=t.key,a=t.keystroke,o=t.e.target.tagName;switch(r){case 16:e.shift=a.shift;break;case 17:case 18:e.ctrl=a.ctrl;break;case 91:e.cmd=a.cmd;break;case 20:this.capsLock=!this.capsLock}!i.ChartEngine.drawingLine&&this.context.processKeyStrokeClaims(this,r,n,a)||"escape"!=r&&this.context.isModal()||"INPUT"!=o&&"TEXTAREA"!=o&&this.params.cb&&this.params.cb(r,this)&&n.preventDefault()}};var n={prototype:Object.create(HTMLElement.prototype)};return n.prototype.createdCallback=function(){function t(){e.closeTopMenu()}i.installTapEvent($("body")[0],{preventUnderlayClick:!1}),this.activeMenuStack=[],this.registeredForResize=[];var e=this;$("body").on("stxtap",t)},n.prototype.attachedCallback=function(){var t=this;this.resize=function(){for(var e=t.registeredForResize,i=0;i<e.length;i++)"function"==typeof e[i].resize&&e[i].resize()},window.addEventListener("resize",this.resize)},n.prototype.detachedCallback=function(){window.removeEventListener("resize",this.resize)},n.prototype.openMenu=function(t,e){setTimeout(function(){$(t).find("input[cq-focus]:first-child").focus()},0),this.activeMenuStack.push(t),t.show(e),$("*[cq-context]").each(function(){this.CIQ.UI.context.stx.modalBegin()})},n.prototype.topMenu=function(){var t=this.activeMenuStack;return t.length?t[t.length-1]:null},n.prototype.closeMenu=function(t){var e=this.activeMenuStack,i=$(t).parents("cq-menu"),n=[];if(t){n.push(t);for(var r=0;r<i.length;r++){var a=i[r];a.active&&n.push(a)}}else n=e;for(var o=0;o<n.length;o++)n[o].hide();this.activeMenuStack=e.filter(function(t){return t.active}),this.ifAllClosed()},n.prototype.registerForResize=function(t){this.registeredForResize.push(t)},n.prototype.unregisterForResize=function(t){for(var e=this.registeredForResize,i=0;i<e.length;i++)if(e[i]===t)return void e.splice(i,1)},n.prototype.ifAllClosed=function(){this.activeMenuStack.length||$("*[cq-context]").each(function(){this.CIQ.UI.context.stx.modalEnd()})},n.prototype.closeTopMenu=function(){var t=this.activeMenuStack;if(t.length){var e=t[t.length-1];e.isDialog&&!e.active||(t.pop(),e.hide(),this.ifAllClosed())}},n.prototype.findLifts=function(t){return $(t).find("*[cq-lift]").filter(function(){var e=$(this).closest("cq-menu,cq-dialog");return e.length&&e[0]==t})},n.prototype.restoreLift=function(t){var e=$(t);if(e.length){var i=e[0].remember;e.detach(),e.css(i.css),$(i.parentNode).append(e)}},n.prototype.lift=function(t){var e=$(t);if(e.length){var i=$(e)[0];i.remember={parentNode:i.parentNode,css:{position:i.style.position,display:i.style.display,left:i.style.left,top:i.style.top,height:i.style.height,width:i.style.width,opacity:i.style.opacity}};var n=e.offset(),r=e.height();e.detach(),e.css({position:"absolute",display:"block",left:n.left+"px",top:n.top+"px",height:r+"px",opacity:1}),$("body").append(e),"undefined"!=typeof i.resize&&i.resize(),e.find("cq-scroll").each(function(){this.resize()})}},i.UI.UIManager=document.registerElement("cq-ui-manager",n),t}),function(t,e){"function"==typeof define&&define.amd?define(["componentUI"],e):"object"==typeof exports?module.exports=e(require("./componentUI")):e(t)}(this,function(t){var e=t.CIQ,i={prototype:Object.create(e.UI.ContextTag)};i.prototype.attachedCallback=function(){function t(t){i.tap(t)}if(!this.attached){this.isDialog=!0,e.UI.ContextTag.attachedCallback.apply(this);var i=this
;this.node.stxtap(t),this.attached=!0}},i.prototype.detachedCallback=function(){var t=this;$("cq-ui-manager").each(function(){this.unregisterForResize(t)})},i.prototype.tap=function(t){if(this.uiManager.topMenu()===this)return void t.stopPropagation();t.currentTarget.active||t.stopPropagation()},i.prototype.setContext=function(){var t=this;$("cq-ui-manager").each(function(){this.registerForResize(t)})},i.prototype.resize=function(){this.params&&this.params.x?this.stxContextMenu():this.center(),$(this.node).find("cq-scroll").each(function(){this.resize()})},i.prototype.stxContextMenu=function(){var t=this.node.parent();"BODY"==t[0].tagName&&(t=$(window));var e=t.width(),i=t.height(),n=this.node.outerWidth(),r=this.node.outerHeight(),a=this.params.x,o=this.params.y;a+n>e&&(a=e-n),o+r>i&&(o-=r),o<0&&(o=0),this.node.css({top:o+"px",left:a+"px"})},i.prototype.center=function(){var t=this.node.parent();"BODY"==t[0].tagName&&(t=$(window));var e=t.width(),i=t.height(),n=this.node.outerWidth(),r=this.node.outerHeight(),a=e/2-n/2,o=i/2-r/2;a<0&&(a=0),i>2*r&&o+r/2>i/3&&(o=i/3-r/2),o<0&&(o=0),this.node.css({top:o+"px",left:a+"px"})},i.prototype.open=function(t){this.uiManager.openMenu(this,t)},i.prototype.close=function(){this.uiManager.closeMenu(this)},i.prototype.hide=function(){$(this).find(":invalid").length||(this.node.children().each(function(){"function"==typeof this.hide&&this.hide()}),this.active=!1,this.uiManager.overlay&&this.uiManager.overlay.remove(),this.uiManager.overlay=null,this.node.removeClass("stx-active"),$(this).find("input").each(function(){this==document.activeElement&&this.blur()}))},i.prototype.show=function(t){this.params=t,t||(t=this.params={});var e=this;this.uiManager.overlay||t.bypassOverlay||(this.uiManager.overlay=$("<DIV></DIV>"),this.uiManager.overlay.addClass("ciq-dialog-overlay"),$("BODY").append(this.uiManager.overlay)),setTimeout(function(){e.uiManager.overlay&&!t.bypassOverlay&&e.uiManager.overlay.addClass("stx-active"),e.node.addClass("stx-active"),e.resize(),e.active=!0})},e.UI.Dialog=document.registerElement("cq-dialog",i);var n={prototype:Object.create(e.UI.ContextTag)};n.prototype.setContext=function(t){t.advertiseAs(this,"ViewDialog")},n.prototype.close=function(){e.UI.containerExecute(this,"close")},n.prototype.save=function(){var t=this.node.find("input").val();if(t){for(var i,n=this.context.getHelpers(null,"ViewsMenu")[0],r=n.params.viewObj,a=n.params.nameValueStore,o=0;o<r.views.length&&(i=r.views[o],t!=e.first(i));o++);o==r.views.length&&(i={},i[t]={},r.views.push(i)),i[t]=this.context.stx.exportLayout(),delete i[t].candleWidth;var s=this;a.set("stx-views",r.views,function(){n.renderMenu(),s.context.stx.updateListeners("layout"),s.close()})}},e.UI.ViewDialog=document.registerElement("cq-view-dialog",n);var r={prototype:Object.create(e.UI.ContextTag)};r.prototype.setContext=function(){this.context.addClaim(this,e.UI.KEYSTROKE)},r.prototype.top=function(){this.scrollTop=0,this.node.perfectScrollbar&&this.node.perfectScrollbar("update")},r.prototype.scrollToElement=function(t){var e=this.clientHeight,i=this.scrollTop,n=t.offsetTop+t.clientHeight;t.offsetTop>i&&n<e+i||(this.scrollTop=Math.max(n-e,0),this.node.perfectScrollbar&&this.node.perfectScrollbar("update"))},r.prototype.resize=function(){var t=this.node;if(void 0===t.attr("cq-no-resize")){void 0!==t.attr("cq-no-maximize")&&(this.noMaximize=!0);var e=t.offset(),i=$(window).height();if(i){var n=i-e.top-45,r=t.parents(".stx-holder,.stx-subholder");r.length&&r.each(function(){var t=$(this),i=t.offset().top+t.height();n=Math.min(n,i-e.top-5)});for(var a=t.nextAll(),o=0;o<a.length;o++){var s=$(a[o]);s.is(":visible")&&(n-=s.height())}this.noMaximize||t.css({height:n+"px"}),t.css({"max-height":n+"px"}),this.node.perfectScrollbar&&this.node.perfectScrollbar("update")}}},r.prototype.createdCallback=function(){e.UI.ContextTag.createdCallback.apply(this);var t=this.node=$(this);t.perfectScrollbar&&t.perfectScrollbar({suppressScrollX:!0}),t.css({"overflow-y":"auto"})},r.prototype.attachedCallback=function(){if(!this.attached){e.UI.ContextTag.attachedCallback.apply(this),this.uiManager=$("cq-ui-manager"),this.uiManager.length>0&&(this.uiManager=this.uiManager[0]),this.addEventListener(e.wheelEvent,function(t){t.stopPropagation()});var t=this;e.addResizeListener(this,function(){t.resize()}),this.resize(),this.attached=!0}},r.prototype.keyStroke=function(t,e,i){var n=this.node;if(!n.is(":trulyvisible"))return!1;if("up"!=e&&"down"!=e&&"enter"!=e&&32!=e)return!1;var r=n.find("cq-item"),a=n.find("cq-item[cq-focused]");if(32==e||"enter"==e)return!(!a.length||!a[0].selectFC)&&(a[0].selectFC.call(a,i),!0);if(!a.length)return $(r[0]).attr("cq-focused","true"),this.scrollToElement(r[0]),!0;r.removeAttr("cq-focused");for(var o=0;o<r.length&&r[o]!==a[0];o++);return"up"==e&&--o<0&&(o=0),"down"==e&&++o>=r.length&&(o=r.length-1),$(r[o]).attr("cq-focused","true"),this.scrollToElement(r[o]),!0},r.prototype.focused=function(){var t=this.node.find("cq-item[cq-focused]");return t.length?t[0]:null},e.UI.Scroll=document.registerElement("cq-scroll",r);var a={prototype:Object.create(e.UI.ModalTag)};a.prototype.attachedCallback=function(){this.attached||(e.UI.ModalTag.attachedCallback.apply(this),this.nameValueStore=new e.NameValueStore,this.attached=!0)},a.prototype.setSleepAmount=function(t,e){this.sleepAmount={units:t,unitType:e}},a.prototype.setNameValueStore=function(t){this.nameValueStore=t},a.prototype.makeMarker=function(){this.markerExists||(new e.Marker({stx:this.context.stx,xPositioner:"none",label:"advertisement",permanent:!0,node:this.node[0]}),this.markerExists=!0)},a.prototype.show=function(t,e){function i(){r.makeMarker(),r.node.css({display:"block"}),r.node.find(r.selector).addClass("ciq-show"),r.node.css({height:"0px"}),setTimeout(function(){r.node.css({height:r.node[0].scrollHeight+"px"})},0)}if(this.selector){this.node.find(this.selector).removeClass("ciq-show")}if(this.selector=t,!this.selector){var n=this.node.find("div:first-of-type");this.selector="."+n.attr("class")}this.ignoreSleep=e;var r=this;e?i():this.nameValueStore.get("cq-advertisement",function(t,e){if(!t){e&&"object"==typeof e||(e={});var n=e[r.selector];n&&n>Date.now()||i()}})},a.prototype.close=function(){this.node.css({display:"none"});var t=this;this.nameValueStore.get("cq-advertisement",function(e,i){if(!e){var n=new Date;t.sleepAmount||(t.sleepAmount={units:1,unitType:"day"});var r=t.sleepAmount.units,a=t.sleepAmount.unitType;"minute"==a?n.setMinutes(n.getMinutes()+r):"hour"==a?n.setHours(n.getHours()+r):"day"==a?n.setDate(n.getDate()+r):"week"==a?n.setDate(n.getDate()+7*r):"month"==a&&n.setMonth(n.getMonth()+r);var o=n.getTime();i&&"object"==typeof i||(i={}),i[t.selector]=o,t.nameValueStore.set("cq-advertisement",i)}})},a.prototype.watchForRemoteClose=function(t){t||(t=1e3);var e=this;setInterval(function(){"none"!=e.node.css("display")&&e.nameValueStore.get("cq-advertisement",function(t,i){if(!t){i&&"object"==typeof i||(i={});var n=i[e.selector];n&&n>Date.now()&&e.close()}})},t)},e.UI.Advertisement=document.registerElement("cq-advertisement",a);var o={prototype:Object.create(e.UI.ModalTag)};o.prototype.insert=function(t,i){var n=e.UI.makeFromTemplate(this.template);return new e.Marker({stx:t,node:n[0],xPositioner:"none",yPositioner:"none",label:"attribution",panelName:i}),n},o.prototype.attachedCallback=function(){this.attached||(e.UI.ModalTag.attachedCallback.apply(this),this.attached=!0)},o.prototype.setContext=function(t){t.advertiseAs(this,"Attribution"),this.template=this.node.find("template");var i=this.insert(t.stx,"chart"),n=this;this.addInjection("append","createDataSet",function(){var t,r;this.chart.attribution&&(t=n.messages.sources[this.chart.attribution.source],r=n.messages.exchanges[this.chart.attribution.exchange],t||(t=""),r||(r=""),t+r!=i.attr("lastAttrib")&&(i.find("cq-attrib-source").html(t),i.find("cq-attrib-quote-type").html(r),e.I18N.translateUI(null,i[0]),i.attr("lastAttrib",t+r)));t:for(var a in this.layout.studies){var o=this.layout.studies[a].type;if(n.messages.sources[o]){for(var s=0;s<this.markers.attribution.length;s++)if(this.markers.attribution[s].params.panelName==this.layout.studies[a].panel)continue t;if(!this.panels[a])continue;t=n.messages.sources[o],r=n.messages.exchanges[o],t||(t=""),r||(r="");var l=n.insert(this,a);l.find("cq-attrib-source").html(t),l.find("cq-attrib-quote-type").html(r),e.I18N.translateUI(null,l[0])}}})},o.prototype.messages={sources:{simulator:"Simulated data.",demo:"Demo data.",xignite:'<a target="_blank" href="https://www.xignite.com">Market Data</a> by Xignite.',Twiggs:'Formula courtesy <a target="_blank" href="https://www.incrediblecharts.com/indicators/twiggs_money_flow.php">IncredibleCharts</a>.'},exchanges:{RANDOM:"Data is randomized.","REAL-TIME":"Data is real-time.",DELAYED:"Data delayed 15 min.",BATS:"BATS BZX real-time.",EOD:"End of day data."}},e.UI.Attribution=document.registerElement("cq-attribution",o);var s={prototype:Object.create(e.UI.ContextTag)};s.prototype.createdCallback=function(){e.UI.ContextTag.createdCallback.apply(this)},s.prototype.attachedCallback=function(){if(!this.attached){e.UI.ContextTag.attachedCallback.apply(this),this.attached=!0;var t=this;$(this).stxtap(function(){t.runMethod()})}},s.prototype.setContext=function(t){t.advertiseAs(this,"Clickable")},s.prototype.runMethod=function(){var t=this.node.attr("cq-selector"),e=this.node.attr("cq-method");$(t).each(function(){this[e]&&this[e].call(this)})},e.UI.Clickable=document.registerElement("cq-clickable",s);var l={prototype:Object.create(e.UI.ModalTag)};l.prototype.attachedCallback=function(){this.attached||(e.UI.ModalTag.attachedCallback.apply(this),this.attached=!0)},l.prototype.setContext=function(t){t.advertiseAs(this,"Title");var e=this;this.context.observe({obj:this.context.stx.chart.symbolObject,action:"callback",value:function(){e.context.stx.currentQuote()&&(e.previousClose=e.context.stx.currentQuote().iqPrevClose)}}),this.initialize()},l.prototype.begin=function(){var t=this;this.addInjection("append","createDataSet",function(){t.update()}),this.update()},l.prototype.initialize=function(t){this.params=t||{},"undefined"==typeof this.params.autoStart&&(this.params.autoStart=!0),this.marker=null,this.title=null,this.params.autoStart&&this.begin()},l.prototype.previousClose=null,l.prototype.update=function(){var t=this.context.stx,i=$(this);t.chart.dataSet&&t.chart.dataSet.length?i.addClass("stx-show"):i.removeClass("stx-show");var n=i.find("cq-symbol"),r=i.find("cq-symbol-description"),a=i.find("cq-current-price"),o=i.find("cq-todays-change"),s=i.find("cq-todays-change-pct"),l=i.find("cq-chart-price"),h=i.find("cq-change");n.length&&n.text(t.chart.symbol);var c="",u=0,d="",p="",f=t.currentQuote();if((p=f?f.Close:"")&&a.length){var m=parseFloat(a.text());a.text(t.formatYAxisPrice(p,t.chart.panel)),void 0!==a.attr("cq-animate")&&e.UI.animatePrice(a,p,m)}r.length&&r.text(t.chart.symbolDisplay?t.chart.symbolDisplay:t.chart.symbol),this.previousClose=f?f.iqPrevClose:null,f&&this.previousClose?(c=e.fixPrice(f.Close-this.previousClose),u=c/this.previousClose*100,d=t.internationalizer?t.internationalizer.percent2.format(u/100):u.toFixed(2)+"%",h.css({display:"block"})):h.css({display:"none"});var g=Math.abs(c);g&&o.length&&o.text(t.formatYAxisPrice(g,t.chart.panel)),s.length&&s.text(d),l.length&&(l.removeClass("stx-up"),l.removeClass("stx-down"),""!==d&&u>0?l.addClass("stx-up"):""!==d&&u<0&&l.addClass("stx-down")),t.chart.symbol&&(this.title=t.chart.symbol+" \u200b \u200b "+p+" \u200b \u200b \u200b ",u>0?this.title+="\u25b2 "+g:u<0&&(this.title+="\u25bc "+g))},e.UI.ChartTitle=document.registerElement("cq-chart-title",l);var h={prototype:Object.create(e.UI.ContextTag)};h.prototype.attachedCallback=function(){function t(){i.tap()}if(!this.attached){var i=this;$(this).stxtap(t),e.UI.ContextTag.attachedCallback.apply(this),this.attached=!0}},h.prototype.tap=function(){e.UI.containerExecute(this,"close")},e.UI.Close=document.registerElement("cq-close",h);var c={prototype:Object.create(e.UI.ModalTag)};c.prototype.attachedCallback=function(){this.attached||(e.UI.ModalTag.attachedCallback.apply(this),this.attached=!0,this.swatchColors=["#8ec648","#00afed","#ee652e","#912a8e","#fff126","#e9088c","#ea1d2c","#00a553","#00a99c","#0056a4","#f4932f","#0073ba","#66308f","#323390"],this.loading=[])},c.prototype.removeSeries=function(t){this.context.stx.removeSeries(t)},c.prototype.pickSwatchColor=function(){var t=$(this),e=this.context.stx,i=t.find("cq-swatch");if(i.length){var n=i[0].style.backgroundColor,r={};for(var a in e.chart.series){var o=e.chart.series[a];o.parameters.isComparison&&(r[o.parameters.color]=!0)}if(""===n||r[n])for(var s=0;s<this.swatchColors.length;s++)if(!r[this.swatchColors[s]])return void(i[0].style.backgroundColor=this.swatchColors[s])}},c.prototype.renderLegend=function(){var t=$(this),i=t.find("cq-comparison-key").cqvirtual(),n=this.context.stx,r=n.currentQuote();for(var a in n.chart.series){var o=n.chart.series[a];if(o.parameters.isComparison){var s=e.UI.makeFromTemplate(this.template),l=s.find("cq-comparison-swatch"),h=s.find("cq-comparison-label"),c=s.find("cq-comparison-description"),u=s.find("cq-comparison-price"),d=s.find("cq-comparison-loader"),p=s.find(".ciq-close");l.css({"background-color":o.parameters.color}),h.text(n.translateIf(o.display)),c.text(n.translateIf(o.description)),s.attr("cq-symbol",a),u.length&&r&&u.text(n.padOutPrice(r[a])),this.loading[o.parameters.symbolObject.symbol]?d.addClass("stx-show"):d.removeClass("stx-show"),o.parameters.error&&s.attr("cq-error",!0),o.parameters.permanent?p.hide():p.stxtap(function(t,e,i){return function(){t.nomore=!0,t.removeSeries(e,i),t.modalEnd()}}(this,a,o)),i.append(s)}}i.cqrender(),this.pickSwatchColor()},c.prototype.updatePrices=function(){var t=this.node.find("cq-comparison-key"),i=this.context.stx,n=i.currentQuote();if(n)for(var r in i.chart.series){var a=t.find('cq-comparison-item[cq-symbol="'+r+'"] cq-comparison-price');if(a.length){var o=parseFloat(a.text()),s=n[r];a.text(i.padOutPrice(s)),void 0!==a.attr("cq-animate")&&e.UI.animatePrice(a,s,o)}}},c.prototype.startPriceTracker=function(t){var e=this;this.addInjection("append","createDataSet",function(){t&&e.updatePrices(),this.chart.dataSet&&this.chart.dataSet.length?e.node.attr("cq-show","true"):e.node.removeAttr("cq-show")})},c.prototype.position=function(){function t(){a.timeout=null;for(var t in e.chart.series){var i=r.find('cq-comparison-item[cq-symbol="'+t+'"] cq-comparison-tick-price');i.text(""),i.length&&i.text(e.padOutPrice(n.data[t]))}}var e=this.context.stx,i=e.barFromPixel(e.cx);this.tick=e.tickFromPixel(e.cx);var n=e.chart.xaxis[i],r=this.node.find("cq-comparison-key"),a=this;if(this.tick!=this.prevTick){this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(t,0)}this.prevTick=this.tick},c.prototype.startTickPriceTracker=function(){this.prevTick=null,this.addInjection("prepend","headsUpHR",function(t){return function(){t.position()}}(this))},c.prototype.setContext=function(t){var i=this.context.stx.chart;this.node.attr("cq-show","true"),t.advertiseAs(this,"Comparison"),this.configureUI();var n=this;this.context.observe({obj:i.series,action:"callback",value:function(){n.renderLegend()}});var r=e.UI.makeFromTemplate(this.template);this.startPriceTracker(r.find("cq-comparison-price").length),r.find("cq-comparison-tick-price")&&this.startTickPriceTracker()},c.prototype.selectItem=function(t,e){function i(t,e){t&&(e.parameters.error=!0),n.loading[e.parameters.symbolObject.symbol]=!1,n.renderLegend()}var n=this,r=this.node.find("cq-swatch"),a="auto";r[0]&&(a=r[0].style.backgroundColor);var o=t.stx;this.loading[e.symbol]=!0;var s={symbolObject:e,isComparison:!0,color:a,data:{useDefaultQuoteFeed:!0},forceData:!0};t.stx.chart.symbol.toLowerCase()!==e.symbol.toLowerCase()&&!t.stx.chart.series[e.symbol.toLowerCase()]&&e.symbol.trim().length>0&&o.addSeries(e.symbol,s,i)},c.prototype.configureUI=function(){var t=this.node,i=t.find("cq-accept-btn");this.template=t.find("*[cq-comparison-item]");var n=t.find("cq-swatch").attr("cq-colors");n&&(this.swatchColors=n.split(","));for(var r=0;r<this.swatchColors.length;r++)this.swatchColors[r]=e.convertToNativeColor(this.swatchColors[r]);var a=t.find("cq-lookup");a.length&&a[0].setCallback(function(t){return function(){t.selectItem.apply(t,arguments)}}(this)),i.stxtap(function(t){a[0].forceInput(),t.stopPropagation()}),t.find("input").stxtap(function(){this.focus()})},e.UI.Comparison=document.registerElement("cq-comparison",c);var u={prototype:Object.create(e.UI.ContextTag)};u.prototype.attachedCallback=function(){this.attached||(e.UI.ContextTag.attachedCallback.apply(this),this.attached=!0)},u.prototype.setContext=function(t){t.advertiseAs(this,"FibonacciSettingsDialog"),this.fibTemplate=this.node.find("template"),this.vectorParameters=t.stx.currentVectorParameters},u.prototype.open=function(){this.node.closest("cq-dialog,cq-menu").each(function(){this.open()})},u.prototype.setChangeEvent=function(t,e,i){function n(){return function(){var t=r.vectorParameters,e=t.vectorType;if(t.fibonacci&&"fibtimezone"!=e){var n=t.fibonacci.fibs;if("checkbox"==this.type)for(var a in n){var o=n[a];o.level===i&&(o.display=!!this.checked)}}}}var r=this;t.change(n())},u.prototype.configure=function(){var t,i=this.vectorParameters.vectorType,n=$(this);if(this.vectorParameters.fibonacci&&"fibtimezone"!=i){n.find(".title").text("Fibonacci Settings");var r=this.vectorParameters.fibonacci.fibs||{};t=n.find("cq-fibonacci-settings"),t.emptyExceptTemplate();for(var a in r){var o=r[a];if(!("fibarc"===i&&o.level<0)){var s=e.UI.makeFromTemplate(this.fibTemplate,t),l=100*o.level;s.find(".ciq-heading").text(l.toFixed(1)+"%");var h=s.find("input");o.display&&h.prop("checked",!0),this.setChangeEvent(h,"fib",o.level),s.find(".stx-data").append(h)}}}else n.find(".title").text("Settings"),t=n.find("cq-fibonacci-settings"),t.emptyExceptTemplate();this.open()},e.UI.FibSettingsDialog=document.registerElement("cq-fib-settings-dialog",u);var d={prototype:Object.create(e.UI.ContextTag)};d.prototype.setContext=function(t){this.context.setLoader(this),t.advertiseAs(this,"Loader")},d.prototype.show=function(){$(this).addClass("stx-show")},d.prototype.hide=function(){$(this).removeClass("stx-show")},e.UI.Loader=document.registerElement("cq-loader",d);var p={prototype:Object.create(e.UI.ModalTag)};p.prototype.attachedCallback=function(){this.attached||(this.usingEmptyDriver=!1,e.UI.ModalTag.attachedCallback.apply(this),this.attached=!0,this.currentFilter=null,this.params={})},p.prototype.setContext=function(t){t.advertiseAs(this,"Lookup"),this.initialize()},p.prototype.attachDriver=function(t){this.driver=t},p.prototype.setCallback=function(t){this.params.cb=t},p.prototype.setDriver=function(t){this.params.driver=t},p.prototype.initialize=function(){var t=$(this);this.resultList=t.find("cq-scroll"),this.input=t.find("input"),this.input.length||(this.input=t.append($("<input type='hidden'>")),this.input[0].value="");var i=this;this.input.on("paste",function(t){var e=t.target;setTimeout(function(){i.acceptText(e.value,i.currentFilter)},0)});var n=t.find("cq-lookup-filters");n&&n.find("cq-filter").stxtap(function(){n.find("cq-filter").removeClass("true");var t=$(this);t.addClass("true");var e=t.find("translate");e.length?i.currentFilter=e.attr("original"):i.currentFilter=this.innerHTML,i.acceptText(i.input[0].value,i.currentFilter)}),void 0!==t.attr("cq-keystroke-claim")&&this.context.addClaim(this,e.UI.KEYSTROKE)},p.prototype.selectItem=function(t,e){this.params.cb&&this.params.cb(this.context,t,e)},p.prototype.open=function(){this.node.closest("cq-dialog,cq-menu").each(function(){this.open()})},p.prototype.close=function(){this.node.closest("cq-dialog,cq-menu").each(function(){this.close()})},p.prototype.isActive=function(){return""!==this.input[0].value},p.prototype.acceptText=function(t,i){function n(t){r.results(t)}var r=this;this.params.driver||(this.context.lookupDriver?this.setDriver(this.context.lookupDriver):(this.setDriver(new e.UI.Lookup.Driver),this.usingEmptyDriver=!0)),this.params.driver.acceptText(t,i,null,n)},p.prototype.forceInput=function(){var t=this.input[0];this.selectItem({symbol:t.value}),e.blur(this.input),this.close(),t.value=""},p.prototype.keyStroke=function(t,i,n,r){if(r.ctrl||91==i)return!1;var a=$(this).parents().addBack(),o=this.input[0],s=!1,l=document.activeElement===o;if(!l&&document.activeElement&&("INPUT"==document.activeElement.tagName||"TEXTAREA"==document.activeElement.tagName))return!1;var h=!1,c=!1;if(a.hasClass("stxMenuActive")&&(c=!0),(l||c)&&(h=!0),!h){if(void 0===this.node.attr("cq-keystroke-default"))return;if(!c&&this.uiManager.topMenu())return}if(32===i&&""===o.value)return!1;var u=this;if(i>=32&&i<=222&&(l||(o.value=o.value+String.fromCharCode(i)),u.acceptText(o.value,u.currentFilter),s=!0),"delete"==i||"backspace"==i){if(this.context.stx.anyHighlighted)return!1;o.value.length&&(window.getSelection().toString()?o.value="":(l||(o.value=o.value.substring(0,o.value.length-1)),o.value.length&&u.acceptText(o.value,u.currentFilter)),s=!0),"backspace"==i&&(s=!0)}if("escape"===i&&c&&(o.value="",this.close(),e.blur(o),s=!0),"enter"===i&&""!==o.value&&this.isActive()){var d=this.node.find("cq-scroll");l=d.length&&d[0].focused(),l&&l.selectFC?l.selectFC.apply(l,{}):this.selectItem({symbol:o.value}),e.blur(this.input),this.close(),o.value="",s=!0}return s?(!this.usingEmptyDriver&&(o.value.length||"escape"!=i&&"enter"!=i&&l)?this.open():this.close(),!l||{allowDefault:!0}):void 0},p.prototype.results=function(t){function i(t,i){return function(){e.blur(t.input),t.selectItem(i),t.input[0].value=""}}this.resultList.empty();for(var n=0;n<t.length;n++){for(var r=t[n],a="<cq-item>",o=0;o<r.display.length;o++)a+="<SPAN>"+r.display[o]+"</SPAN>";a+="</cq-item>";var s=$(a);this.resultList.append(s),s[0].selectFC=i(this,r.data),s.stxtap(s[0].selectFC)}var l=this.node.find("cq-scroll");l.length&&l[0].top()},e.UI.SymbolLookup=document.registerElement("cq-lookup",p);var f={prototype:Object.create(e.UI.ContextTag)};f.prototype.createdCallback=function(){e.UI.ContextTag.createdCallback.apply(this),this.redoButton=null,this.undostack=[],this.redostack=[],this.contexts=[]},f.prototype.attachedCallback=function(){if(!this.attached){e.UI.ContextTag.attachedCallback.apply(this),this.attached=!0;var t=this;$(this).stxtap(function(){t.undo()})}},f.prototype.setContext=function(){this.manageContext(this.context);var t=this;this.addInjection("append","initializeChart",function(){t.undostack=[],t.redostack=[],t.clear()})},f.prototype.handleEvent=function(t,e,i){this.undostack.push({context:t,drawings:i.before}),this.redostack=[],this.setButtonStyle()},f.prototype.manageContext=function(t){t.addClaim(this,e.UI.KEYSTROKE);var i=this;t.stx.addEventListener("undoStamp",function(e){i.handleEvent(t,"undoStamp",e)}),this.contexts.push(t)},f.prototype.keyStroke=function(t,e,i,n){return 90==e&&(n.ctrl||n.cmd)?(n.shift?this.redo():this.undo(),!0):89==e&&(n.ctrl||n.cmd)?(this.redo(),!0):void 0},f.prototype.undo=function(){for(var t=!1,i=0;i<this.contexts.length;i++)this.contexts[i].stx.activeDrawing&&(this.contexts[i].stx.undo(),t=!0);if(!t){var n=this.undostack.pop();if(n){var r=n.context;this.redostack.push({context:r,drawings:e.shallowClone(r.stx.drawingObjects)});var a=n.drawings;r.stx.drawingObjects=e.shallowClone(a),r.stx.changeOccurred("vector"),r.stx.draw()}this.setButtonStyle()}},f.prototype.redo=function(){var t=this.redostack.pop();if(t){var i=t.context;this.undostack.push({context:i,drawings:e.shallowClone(i.stx.drawingObjects)});var n=t.drawings;i.stx.drawingObjects=e.shallowClone(n),i.stx.changeOccurred("vector"),i.stx.draw()}this.setButtonStyle()},f.prototype.clear=function(){this.setButtonStyle()},f.prototype.setButtonStyle=function(){this.undostack.length?$(this).attr("cq-active","true"):$(this).removeAttr("cq-active"),this.redoButton&&(this.redostack.length?$(this.redoButton).attr("cq-active","true"):$(this.redoButton).removeAttr("cq-active"))},e.UI.Undo=document.registerElement("cq-undo",f);var m={prototype:Object.create(e.UI.ContextTag)};m.prototype.attachedCallback=function(){this.attached||(e.UI.ContextTag.attachedCallback.apply(this),this.attached=!0)},m.prototype.pairUp=function(t){this.undo=$(t)[0],this.undo.redoButton=this;var e=this;$(this).stxtap(function(){e.undo.redo()})},e.UI.Redo=document.registerElement("cq-redo",m);var g={prototype:Object.create(e.UI.ContextTag)};g.prototype.set=function(t,e,i,n,r){var a=this;a.context.loader&&a.context.loader.show();var o={multiplier:e,base:i};n&&(o.periodicity={interval:n,period:r||1}),a.context.stx.setSpan(o,function(){a.context.loader&&a.context.loader.hide()})},e.UI.ShowRange=document.registerElement("cq-show-range",g);var v={prototype:Object.create(e.UI.ContextTag)};v.prototype.createdCallback=function(){e.UI.ContextTag.createdCallback.apply(this,arguments),this.callbacks=[]},v.prototype.registerCallback=function(t){this.callbacks.push(t)},v.prototype.open=function(t){this.close();var e=this.node.find(t.selector);t.className?(e.addClass(t.className),e.each(function(){this.sidePanelActiveClass=t.className})):(e.attr(t.attribute,"true"),e.each(function(){this.sidePanelActiveAttribute=t.attribute})),this.node.attr("cq-active","true");var i=this;setTimeout(function(){i.resizeMyself()},0)},v.prototype.close=function(){this.node.removeAttr("cq-active"),this.node.children().each(function(){this.sidePanelActiveClass?$(this).removeClass(this.sidePanelActiveClass):$(this).removeAttr(this.sidePanelActiveAttribute)});var t=this;setTimeout(function(){t.resizeMyself()},0)},v.prototype.nonAnimatedWidth=function(){var t=0;return this.node.children().width(function(e,i){t+=i}),t},v.prototype.resizeMyself=function(){var t=0;this.node.children().width(function(e,i){t+=i}),this.node.css({width:t+"px"});for(var e=0;e<this.callbacks.length;e++)this.callbacks[e].call(this,t)},e.UI.SidePanel=document.registerElement("cq-side-panel",v);var y={prototype:Object.create(HTMLElement.prototype)};y.prototype.attachedCallback=function(){this.attached||(this.node=$(this),this.node.stxtap(function(t){return function(e){t.launchColorPicker(),e.stopPropagation()}}(this)),this.attached=!0)},y.prototype.setColor=function(t,i,n){var r=$(this),a=e.getBackgroundColor(this.parentNode),o=e.hsl(a);t||(t="transparent");var s=t;"auto"==t&&n&&(s=n);var l=e.hsl(s);if(Math.abs(o[2]-l[2])<.2||e.isTransparent(t)){var h=e.chooseForegroundColor(a);r.css({border:"solid "+h+" 1px"})}else r.css({border:""});r.css({"background-color":s}),!1!==i&&e.UI.containerExecute(this,"setColor",t)},y.prototype.launchColorPicker=function(){var t=$(this),e=$("cq-color-picker"),i=e[0];i.callback=function(t){return function(e,i){t.setColor(e,null,i)}}(this);var n=this.node.attr("cq-overrides");n&&(n=n.split(",")),i.display({node:t,overrides:n}),this.colorPicker=i},e.UI.Swatch=document.registerElement("cq-swatch",y);var x={prototype:Object.create(e.UI.ContextTag)};x.prototype.attachedCallback=function(){this.attached||(e.UI.ContextTag.attachedCallback.apply(this),this.attached=!0)},x.prototype.setContext=function(t){t.advertiseAs(this,"TFC"),this.initialize()},x.prototype.start=function(){$(".stx-trade-panel").appendTo($("cq-side-panel"));var t=this.context.stx;t.account=new e.Account.Demo;var i={stx:t,account:t.account};t.tfc=new e.TFC(i);var n=this;$(".stx-trade-nav .stx-trade-ticket-toggle").stxtap(function(){$(".stx-trade-nav").removeClass("active"),$(".stx-trade-info").addClass("active"),$("cq-side-panel")[0].resizeMyself()}),$(".stx-trade-info .stx-trade-ticket-toggle").stxtap(function(){$(".stx-trade-nav").addClass("active"),$(".stx-trade-info").removeClass("active"),$("cq-side-panel")[0].resizeMyself()}),t.tfc.selectSymbol=function(t){t=t.toUpperCase(),n.context.changeSymbol({symbol:t})}},x.prototype.initialize=function(){function t(t){t&&(console.log(t),n=!0),--i||n||r.start()}var i=3,n=!1,r=this;e.loadStylesheet("plugins/tfc/stx-tfc.css",t),e.loadScript("plugins/tfc/stx-tfc.js",t),e.loadUI("plugins/tfc/stx-tfc.html",t)},e.UI.TFC=document.registerElement("cq-tfc",x);var b={prototype:Object.create(e.UI.ContextTag)};b.prototype.setContext=function(t){t.advertiseAs(this,"ThemeDialog")},b.prototype.setValue=function(t,e,i){t[e]=i,this.helper.update()},b.prototype.close=function(){this.helper.settings=this.revert,this.helper.update(),e.UI.containerExecute(this,"close"),this.node.find("cq-swatch").each(function(){this.colorPicker&&this.colorPicker.close()})},b.prototype.save=function(){var t=this.node.find("cq-action input").val(),i={settings:e.clone(this.helper.settings),name:t,builtIn:null},n=this.themeMenu;n&&(i.builtIn=n.currentLoadedBuiltIn,n.addCustom(i)),this.context.stx.updateListeners("theme"),this.node.parents("cq-dialog")[0].close(),this.node.find("cq-swatch").each(function(){this.colorPicker&&this.colorPicker.close()})},b.prototype.configure=function(t,i){function n(t,e,i,n){var a=r.node.find('cq-theme-piece[cq-piece="'+t+'"]');a[0].piece={obj:e,field:i},"color"==n&&a.find("cq-swatch")[0].setColor(e[i],!1)}this.themeMenu=i,this.helper=new e.ThemeHelper({stx:this.context.stx}),this.revert=e.clone(this.helper.settings);var r=this;n("cu",this.helper.settings.chartTypes["Candle/Bar"].up,"color","color"),n("cd",this.helper.settings.chartTypes["Candle/Bar"].down,"color","color"),n("wu",this.helper.settings.chartTypes["Candle/Bar"].up,"wick","color"),n("wd",this.helper.settings.chartTypes["Candle/Bar"].down,"wick","color"),n("bu",this.helper.settings.chartTypes["Candle/Bar"].up,"border","color"),n("bd",this.helper.settings.chartTypes["Candle/Bar"].down,"border","color"),n("lc",this.helper.settings.chartTypes.Line,"color","color"),n("mc",this.helper.settings.chartTypes.Mountain,"color","color"),n("bg",this.helper.settings.chart.Background,"color","color"),n("gl",this.helper.settings.chart["Grid Lines"],"color","color"),n("dd",this.helper.settings.chart["Grid Dividers"],"color","color"),n("at",this.helper.settings.chart["Axis Text"],"color","color"),t||(t="My Theme"),this.node.find("cq-action input").val(t)},e.UI.ThemeDialog=document.registerElement("cq-theme-dialog",b);var C={prototype:Object.create(e.UI.ContextTag)};C.prototype.setColor=function(t){"Hollow"!=t&&"No Border"!=t||(t="transparent",this.node.find("cq-swatch")[0].setColor("transparent",!1)),e.UI.containerExecute(this,"setValue",this.piece.obj,this.piece.field,t)},C.prototype.setBoolean=function(t){e.UI.containerExecute(this,"setValue",this.piece.obj,this.piece.field,t)},e.UI.ThemePiece=document.registerElement("cq-theme-piece",C);var w={prototype:Object.create(e.UI.ContextTag)};w.prototype.attachedCallback=function(){this.attached||(e.UI.ContextTag.attachedCallback.apply(this),this.attached=!0,this.builtInMenu=$(this).find("cq-themes-builtin"),this.builtInTemplate=this.builtInMenu.find("template"),this.customMenu=$(this).find("cq-themes-custom"),this.customTemplate=this.customMenu.find("template"))},w.prototype.setContext=function(t){t.advertiseAs(this,"Themes")},w.prototype.initialize=function(t){this.params={},t&&(this.params=t),this.params.customThemes||(this.params.customThemes={}),this.params.builtInThemes||(this.params.builtInThemes={}),this.params.nameValueStore||(this.params.nameValueStore=new e.NameValueStore);var i=this;this.params.nameValueStore?this.params.nameValueStore.get("CIQ.Themes.prototype.custom",function(t,e){!t&&e&&(i.params.customThemes=e),i.params.nameValueStore.get("CIQ.Themes.prototype.current",function(t,e){!t&&e&&e.theme?i.loadTheme(e.theme):i.loadTheme(i.params.defaultTheme),i.configureMenu()})}):this.loadTheme(i.params.defaultTheme)},w.prototype.configureMenu=function(){function t(t,e){return function(){t.loadBuiltIn(e),t.params.callback&&t.params.callback({theme:t.currentTheme}),t.persist("current")}}function i(t,e){return function(){t.loadCustom(e),t.params.callback&&t.params.callback({theme:t.currentTheme}),t.persist("current")}}this.builtInMenu.emptyExceptTemplate(),this.customMenu.emptyExceptTemplate();var n,r,a=this.params.builtInThemes;for(var o in a)n=a[o],r=e.UI.makeFromTemplate(this.builtInTemplate),r.text(n),r[0].selectFC=t(this,o),r.stxtap(r[0].selectFC),this.builtInMenu.append(r);var s=this.params.customThemes;for(var l in s)n=l,r=e.UI.makeFromTemplate(this.customTemplate),r.find("cq-label").text(n),r[0].selectFC=i(this,l),r.stxtap(r[0].selectFC),r[0].close=function(t,e){return function(){t.removeTheme(e)}}(this,l),this.customMenu.append(r)},w.prototype.removeTheme=function(t){delete this.params.customThemes[t],this.configureMenu(),this.persist()},w.prototype.persist=function(t){
this.params.nameValueStore&&(t&&"current"!=t||this.params.nameValueStore.set("CIQ.Themes.prototype.current",{theme:this.currentTheme}),t&&"custom"!=t||this.params.nameValueStore.set("CIQ.Themes.prototype.custom",this.params.customThemes))},w.prototype.addCustom=function(t){this.params.customThemes[t.name]=t,this.currentTheme=t.name,this.configureMenu(),this.persist()},w.prototype.reinitializeChart=function(t){var i=this.context.stx;if(i.styles={},i.chart.container.style.backgroundColor="",t){var n=new e.ThemeHelper({stx:i});n.settings=t.settings,n.update()}i.updateListeners("theme"),i.displayInitialized&&(i.headsUpHR(),i.clearPixelCache(),i.updateListeners("theme"),i.draw())},w.prototype.loadTheme=function(t){this.params.customThemes[t]?this.loadCustom(t):this.params.builtInThemes[t]?this.loadBuiltIn(t):this.loadBuiltIn(this.params.defaultTheme)},w.prototype.loadBuiltIn=function(t){this.currentLoadedBuiltIn&&$(this.context.topNode).removeClass(this.currentLoadedBuiltIn),$(this.context.topNode).addClass(t),this.currentLoadedBuiltIn=this.currentTheme=t,this.reinitializeChart()},w.prototype.loadCustom=function(t){this.currentLoadedBuiltIn&&$(this.context.topNode).removeClass(this.currentLoadedBuiltIn);var e=this.params.customThemes[t];e.builtIn&&$(this.context.topNode).addClass(e.builtIn),this.currentLoadedBuiltIn=e.builtIn,this.currentTheme=e.name,this.reinitializeChart(e)},w.prototype.newTheme=function(){var t=this.context.getHelpers(null,"ThemeDialog");if(!t.length)return void console.log("Themes.prototype.newTheme: no ThemeDialog available");t=t[0],t.configure(null,this),$(t).parents("cq-dialog")[0].open()},e.UI.Themes=document.registerElement("cq-themes",w);var S={prototype:Object.create(e.UI.ContextTag)};S.prototype.setContext=function(){this.currentValue=!1,this.params.obj=this.context.stx.layout;var t=this.node.attr("cq-member");t&&(this.params.member=t);var e=this.node.attr("cq-action");e&&(this.params.action=e);var i=this.node.attr("cq-value");i&&(this.params.value=i);var n=this.node.attr("cq-toggles");n&&(this.params.toggles=n.split(","));for(var r=0;r<this.params.toggles.length;r++)"null"==this.params.toggles[r]&&(this.params.toggles[r]=null);this.begin()},S.prototype.attachedCallback=function(){this.attached||(this.params={member:null,obj:null,action:"class",value:"active",toggles:[],callbacks:[]},e.UI.ContextTag.attachedCallback.apply(this),this.attached=!0)},S.prototype.registerCallback=function(t,e){!1!==e&&(e=!0),this.params.callbacks.push(t),e&&t.call(this,this.currentValue)},S.prototype.updateFromBinding=function(t){if(this.currentValue=t.obj[t.member],this.params.callbacks.length)for(var e=0;e<this.params.callbacks.length;e++)this.params.callbacks[e].call(this,this.currentValue);else"class"==this.params.action&&(this.currentValue?this.node.addClass(this.params.value):this.node.removeClass(this.params.value));"crosshair"==t.member&&!1===this.currentValue&&this.context.stx.doDisplayCrosshairs()},S.prototype.set=function(t){if(this.params.member)this.params.obj[this.params.member]=t;else{this.currentValue=t;for(var e=0;e<this.params.callbacks.length;e++)this.params.callbacks[e].call(this,this.currentValue)}},S.prototype.begin=function(){var t=this,e=this.context.stx;this.params.member&&this.context.observe({selector:this.node,obj:this.params.obj,member:this.params.member,action:"callback",value:function(e){t.updateFromBinding(e)}}),this.node.stxtap(function(){var i=t.params.toggles,n=t.params.obj;if(i.length>1){for(var r=0;r<i.length;r++){var a=i[r];if(t.currentValue==a){r<i.length-1?t.set(i[r+1]):t.set(i[0]);break}}r==i.length&&t.set(i[0])}else t.currentValue?t.set(!1):t.set(!0);e.draw(),n===e.layout&&e.changeOccurred("layout")})},e.UI.Toggle=document.registerElement("cq-toggle",S);var T={prototype:Object.create(e.UI.ContextTag)};T.prototype.attachedCallback=function(){this.attached||(e.UI.ContextTag.attachedCallback.apply(this),this.node=$(this),this.params={toolSelection:this.node.find("*[cq-current-tool]"),lineSelection:this.node.find("*[cq-line-style]"),fontSizeSelection:this.node.find("*[cq-font-size]"),fontFamilySelection:this.node.find("*[cq-font-family]")},this.noToolSelectedText="",this.attached=!0)},T.prototype.defaultElements=function(t){var e=[];for(var i in t)"color"==i?e.push("cq-line-color"):"fillColor"==i?e.push("cq-fill-color"):"pattern"==i||"lineWidth"==i?e.push("cq-line-style"):"axisLabel"==i?e.push("cq-axis-label"):"font"==i?e.push("cq-annotation"):"parameters"==i&&e.push("cq-clickable");return e},T.prototype.setContext=function(){this.noToolSelectedText=$(this.params.toolSelection).text(),this.sync()},T.prototype.sync=function(t){var e=this.context.stx;t?e.currentVectorParameters=t:t=e.currentVectorParameters,this.setLine(null,t.lineWidth,t.pattern);var i=e.canvasStyle("stx_annotation"),n=t.annotation.font.size;n||(n=i.fontSize),this.setFontSize(null,n);var r=t.annotation.font.family;r||(r=i.fontFamily),this.setFontFamily(null,r),this.getFillColor({}),this.getLineColor({})},T.prototype.emit=function(){var t=document.createEvent("Event");t.initEvent("change",!0,!0),this.dispatchEvent(t)},T.prototype.noTool=function(){var t=this.context.stx;t.changeVectorType(null),t.layout.crosshair&&(t.layout.crosshair=!1,t.changeOccurred("layout"),t.doDisplayCrosshairs()),t.preferences.magnet&&this.toggleMagnet(this),$(this.params.toolSelection).text(this.noToolSelectedText),this.node.find("*[cq-section]").removeClass("ciq-active"),this.emit()},T.prototype.crosshairs=function(t){var e=this.context.stx;$(this.params.toolSelection).text(e.translateIf($(t.node).text())),e.changeVectorType(null),e.layout.crosshair=!0,e.doDisplayCrosshairs(),e.findHighlights(!1,!0),e.changeOccurred("layout"),e.draw(),e.updateChartAccessories(),this.node.find("*[cq-section]").removeClass("ciq-active"),this.emit()},T.prototype.toggleMagnet=function(t){var i=$(t.node).find("cq-toggle"),n=this.context.stx;n.preferences.magnet?(i.removeClass("active"),n.preferences.magnet=!1):(i.addClass("active"),n.preferences.magnet=!0),e.clearCanvas(n.chart.tempCanvas,n)},T.prototype.clearDrawings=function(){this.context.stx.clearDrawings()},T.prototype.tool=function(t,i){var n=this.context.stx;n.clearMeasure(),n.changeVectorType(i),$(this.params.toolSelection).text(n.translateIf($(t.node).text())),this.node.find("*[cq-section]").removeClass("ciq-active");var r=e.Drawing.getDrawingParameters(n,i);if(r){"fibtimezone"===i&&delete r.parameters;for(var a=this.defaultElements(r),o=0;o<a.length;o++)$(this.node).find(a[o]).addClass("ciq-active")}this.emit()},T.prototype.setLine=function(t,e,i){var n=this.context.stx;n.currentVectorParameters.lineWidth=e,n.currentVectorParameters.pattern=i,this.currentLineSelectedClass&&$(this.params.lineSelection).removeClass(this.currentLineSelectedClass),this.currentLineSelectedClass="ciq-"+i+"-"+parseInt(e,10),"none"==i?this.currentLineSelectedClass=null:$(this.params.lineSelection).addClass(this.currentLineSelectedClass),this.emit()},T.prototype.setFontSize=function(t,e){this.context.stx.currentVectorParameters.annotation.font.size=e,$(this.params.fontSizeSelection).text(e),this.emit()},T.prototype.setFontFamily=function(t,e){var i=this.context.stx;i.currentVectorParameters.annotation.font.family="Default"==e?null:e,$(this.params.fontFamilySelection).text(e),this.emit()},T.prototype.toggleFontStyle=function(t,e){var i=this.context.stx;"italic"==e?"italic"==i.currentVectorParameters.annotation.font.style?(i.currentVectorParameters.annotation.font.style=null,$(t.node).removeClass("ciq-active")):(i.currentVectorParameters.annotation.font.style="italic",$(t.node).addClass("ciq-active")):"bold"==e&&("bold"==i.currentVectorParameters.annotation.font.weight?(i.currentVectorParameters.annotation.font.weight=null,$(t.node).removeClass("ciq-active")):(i.currentVectorParameters.annotation.font.weight="bold",$(t.node).addClass("ciq-active"))),this.emit()},T.prototype.toggleAxisLabel=function(t){var e=this.context.stx;!0===e.currentVectorParameters.axisLabel?(e.currentVectorParameters.axisLabel=!1,$(t.node).removeClass("ciq-active")):(e.currentVectorParameters.axisLabel=!0,$(t.node).addClass("ciq-active")),this.emit()},T.prototype.getFillColor=function(t){var e=t.node;e||(e=$(this).find("cq-fill-color"));var i=this.context.stx.currentVectorParameters.fillColor;$(e).css({"background-color":i})},T.prototype.pickFillColor=function(t){var e=t.node,i=this.context.getHelpers(e,"ColorPicker");if(!i.length)return void console.log("DrawingToolbar.prototype.getFillColor: no ColorPicker available");var n=i[0],r=this;n.callback=function(t){r.context.stx.currentVectorParameters.fillColor=t,r.getFillColor({node:e}),r.emit()},n.display({node:e})},T.prototype.getLineColor=function(t){var e=t.node;e||(e=$(this).find("cq-line-color"));var i=this.context.stx.currentVectorParameters.currentColor;"transparent"!=i&&"auto"!=i||(i=""),$(e).css({"background-color":i})},T.prototype.pickLineColor=function(t){var e=t.node,i=this.context.getHelpers(e,"ColorPicker");if(!i.length)return void console.log("DrawingToolbar.prototype.getFillColor: no ColorPicker available");var n=i[0],r=this;n.callback=function(t){r.context.stx.currentVectorParameters.currentColor=t,r.getLineColor({node:e}),r.emit()};var a=$(e).attr("cq-overrides");a&&(a=a.split(",")),n.display({node:e,overrides:a})},e.UI.DrawingToolbar=document.registerElement("cq-toolbar",T);var D={prototype:Object.create(HTMLElement.prototype)};D.prototype.createdCallback=function(){this.node=$(this),this.activeClassName="stxMenuActive",this.active=!1},D.prototype.attachedCallback=function(){function t(t){i.tap(t)}function e(t){i.captureTap(t)}if(!this.attached){this.uiManager=$("cq-ui-manager"),this.uiManager.length>0&&(this.uiManager=this.uiManager[0]),this.attached=!0;var i=this,n=this.node[0];this.node.stxtap(t),n.addEventListener("stxtap",e,!0)}},D.prototype.open=function(t){this.uiManager.openMenu(this,t)},D.prototype.close=function(){this.uiManager.closeMenu(this)},D.prototype.lift=function(){for(var t=this.lifts=this.uiManager.findLifts(this),e=0;e<t.length;e++)this.uiManager.lift(t[e])},D.prototype.unlift=function(){var t=this.lifts;if(t){for(var e=0;e<t.length;e++)this.uiManager.restoreLift(t[e]);this.lifts=null}},D.prototype.show=function(){if(!this.active){this.active=!0,this.node.addClass(this.activeClassName),this.lift();this.node.find("cq-scroll").each(function(){this.resize()})}},D.prototype.hide=function(){this.active&&(this.unlift(),this.node.removeClass(this.activeClassName),this.active=!1,$(this).find("input").each(function(){this==document.activeElement&&this.blur()}))},D.prototype.captureTap=function(t){var e=$(t.target),i=e.parents().addBack();this.noClose=i.filter(function(){var t=$(this).attr("cq-no-close");return typeof t!=typeof undefined&&!1!==t}).length,this.noClose||(this.noClose=i.filter(function(){return $(this).is("cq-separator,cq-heading")}).length)},D.prototype.tap=function(t){var e=this.uiManager;if(this.active)t.stopPropagation(),this.noClose||e.closeMenu(this);else if(!this.active){for(var i=!1,n=this.node.parents("cq-menu,cq-dialog"),r=0;r<n.length;r++)n[r].active&&(i=!0);i||e.closeMenu(),t.stopPropagation(),this.open()}},e.UI.Menu=document.registerElement("cq-menu",D);var M={prototype:Object.create(e.UI.Scroll.prototype)};M.prototype.createdCallback=function(){if(this.ownerDocument===document){void 0===$(this).attr("cq-no-scroll")&&e.UI.Scroll.prototype.createdCallback.call(this)}},M.prototype.attachedCallback=function(){if(!this.attached){void 0===$(this).attr("cq-no-scroll")&&(this.noMaximize=!0,e.UI.Scroll.prototype.attachedCallback.call(this),this.attached=!0)}},e.UI.MenuDropDown=document.registerElement("cq-menu-dropdown",M);var k={prototype:Object.create(e.UI.ContextTag)};k.prototype.tap=function(){$("cq-share-dialog").each(function(){this.open()})},e.UI.ShareButton=document.registerElement("cq-share-button",k);var _={prototype:Object.create(e.UI.ContextTag)};_.prototype.open=function(){this.node.closest("cq-dialog,cq-menu").each(function(){this.open()})},_.prototype.share=function(){e.Share.createImage(stxx,{},function(t){var i=e.uniqueID(),n="https://share.chartiq.com",r=stxx.getStartDateOffset(),a={layout:stxx.exportLayout(),drawings:stxx.exportDrawings(),xOffset:r,startDate:stxx.chart.dataSegment[r].Date,endDate:stxx.chart.dataSegment[stxx.chart.dataSegment.length-1].Date,id:i,symbol:stxx.chart.symbol},o=n+"/upload/"+i,s={id:i,image:t,config:a};e.localStorage.setItem("chartImg",t),e.Share.uploadImage(t,o,s,function(t,i){null!==t?e.alert("error: "+t):$$$("cq-share-dialog .share-link-div").innerHTML=n+i})})},_.prototype.close=function(){$$$("cq-share-dialog .share-link-div").innerHTML=""},e.UI.ShareDialog=document.registerElement("cq-share-dialog",_);var E={prototype:Object.create(e.UI.Dialog.prototype)};E.prototype.createdCallback=function(){e.UI.Dialog.prototype.createdCallback.apply(this),this.params={colorMap:[["#ffffff","#e1e1e1","#cccccc","#b7b7b7","#a0a0a5","#898989","#707070","#626262","#555555","#464646","#363636","#262626","#1d1d1d","#000000"],["#f4977c","#f7ac84","#fbc58d","#fff69e","#c4de9e","#85c99e","#7fcdc7","#75d0f4","#81a8d7","#8594c8","#8983bc","#a187bd","#bb8dbe","#f29bc1"],["#ef6c53","#f38d5b","#f8ae63","#fff371","#acd277","#43b77a","#2ebbb3","#00bff0","#4a8dc8","#5875b7","#625da6","#8561a7","#a665a7","#ee6fa9"],["#ea1d2c","#ee652e","#f4932f","#fff126","#8ec648","#00a553","#00a99c","#00afed","#0073ba","#0056a4","#323390","#66308f","#912a8e","#e9088c"],["#9b0b16","#9e4117","#a16118","#c6b920","#5a852d","#007238","#00746a","#0077a1","#004c7f","#003570","#1d1762","#441261","#62095f","#9c005d"],["#770001","#792e03","#7b4906","#817a0b","#41661e","#005827","#005951","#003b5c","#001d40","#000e35","#04002c","#19002b","#2c002a","#580028"]]}},E.prototype.attachedCallback=function(){if(!this.attached){e.UI.Dialog.prototype.attachedCallback.apply(this);var t=$(this),i=t.attr("cq-colors");if(i){i=i.split(",");var n=Math.ceil(Math.sqrt(i.length));this.params.colorMap=[],console.log("this.params.colorMap=[]"),console.log(typeof this.params.colorMap);for(var r=0,a=[],o=0;o<i.length;o++)r>=n&&(r=0,this.params.colorMap.push(a),a=[]),a.push(i[o]),r++;this.params.colorMap.push(a)}this.cqOverrides=t.find("cq-overrides"),this.template=this.cqOverrides.find("template"),this.attached=!0}},E.prototype.setContext=function(t){t.advertiseAs(this,"ColorPicker"),this.initialize()},E.prototype.setColors=function(t){this.params.colorMap=t,this.initialize()},E.prototype.initialize=function(){function t(t,e){return function(){t.pickColor(e)}}var e=this;this.picker=$(this),this.colors=this.picker.find("cq-colors"),this.colors.length||(this.colors=this.picker),this.colors.empty();for(var i=0;i<this.params.colorMap.length;i++)for(var n=this.params.colorMap[i],r=$("<UL></UL>").appendTo(this.colors),a=0;a<n.length;a++){var o=$("<LI></LI>").appendTo(r),s=$("<SPAN></SPAN>").appendTo(o);s.css({"background-color":n[a]}),s.stxtap(t(e,n[a]))}},E.prototype.pickColor=function(t){this.callback&&this.callback(t,this.context.stx.defaultColor),this.close()},E.prototype.resize=function(){},E.prototype.display=function(t){var i=$(t.node),n=i.offset();this.picker.css({top:"0px",left:"0px"});var r=this.picker.offset(),a=n.left-r.left+i.width()+10,o=n.top-r.top+5,s=$(document).width(),l=this.picker.width();a+l>s&&(a=s-l-20);var h=$(document).height(),c=this.picker.height();if(o+c>h&&(o=h-c-20),this.picker.css({left:a+"px",top:o+"px"}),this.cqOverrides.emptyExceptTemplate(),t.overrides&&this.template.length)for(var u=0;u<t.overrides.length;u++){var d=t.overrides[u],p=e.UI.makeFromTemplate(this.template,!0);p.text(d),p.stxtap(function(t,e){return function(){t.pickColor(e)}}(this,d))}this.picker.hasClass("stxMenuActive")?this.context.e&&this.context.e.stopPropagation():this.picker[0].open()},e.UI.ColorPicker=document.registerElement("cq-color-picker",E);var A={prototype:Object.create(e.UI.ContextTag)};A.prototype.attachedCallback=function(){if(!this.attached){e.UI.ContextTag.attachedCallback.apply(this);var t=$(this);this.inputTemplate=t.find("template[cq-study-input]"),this.outputTemplate=t.find("template[cq-study-output]"),this.parameterTemplate=t.find("template[cq-study-parameters]"),this.attached=!0,this.queuedUpdates={}}},A.prototype.setContext=function(t){t.advertiseAs(this,"StudyDialog")},A.prototype.open=function(){this.node.closest("cq-dialog,cq-menu").each(function(){this.open()})},A.prototype.hide=function(){e.isEmpty(this.queuedUpdates)||(this.helper.updateStudy(this.queuedUpdates),this.queuedUpdates={}),this.node.find("cq-menu").each(function(){this.unlift&&this.unlift()}),this.node.find("cq-swatch").each(function(){this.colorPicker&&this.colorPicker.close()})},A.prototype.setChangeEvent=function(t,e,i){function n(){return function(){var t={};t[e]={},t[e][i]=this.value,"checkbox"!=this.type&&"radio"!=this.type||(t[e][i]=this.checked),r.updateStudy(t)}}var r=this;t.change(n())},A.prototype.updateStudy=function(t){$(this).find(":invalid").length||(this.helper.libraryEntry.deferUpdate?e.extend(this.queuedUpdates,t):this.helper.updateStudy(t))},A.prototype.setSelectOption=function(t){var e=t.params,i=$($(t.node)[0].cqMenuWrapper);i.find("cq-selected").text(e.value),i[0].fieldValue=e.value;var n={inputs:{}};n.inputs[e.name]=e.value,this.updateStudy(n)},A.prototype.configure=function(t){function i(t,i,n){var r=e.UI.makeFromTemplate(a.menuTemplate),o=r.find("cq-menu-dropdown");for(var s in n){var l=$("<cq-item></cq-item>");l.text(n[s]),l.attr("stxtap","StudyDialog.setSelectOption()"),o.append(l),l[0].cqMenuWrapper=o.parents("cq-menu")[0],a.context.bind(l,{name:t,value:s})}return r.find("cq-selected").text(i),r}this.helper=new e.Studies.DialogHelper(t);var n=$(this);n.find(".title").text(this.helper.title);var r,a=this,o=n.find("cq-study-inputs");o.empty();for(var s in this.helper.inputs){var l=this.helper.inputs[s],h=e.UI.makeFromTemplate(this.inputTemplate,o);this.menuTemplate=h.find("template[cq-menu]"),h.find(".ciq-heading").text(l.heading),h[0].fieldName=l.name;var c,u=null;if(r=this.helper.attributes[l.name],"number"==l.type){u=$("<input>"),u.attr("type","number"),u.val(l.value),this.setChangeEvent(u,"inputs",l.name);for(c in r)u.attr(c,r[c])}else if("text"==l.type){u=$("<input>"),u.attr("type","text"),u.val(l.value),this.setChangeEvent(u,"inputs",l.name);for(c in r)u.attr(c,r[c])}else if("select"==l.type)u=i(l.name,l.value,l.options);else if("checkbox"==l.type){u=$("<input>"),u.attr("type","checkbox"),l.value&&u.prop("checked",!0),this.setChangeEvent(u,"inputs",l.name);for(c in r)u.attr(c,r[c])}u&&h.find(".stx-data").append(u)}var d,p=n.find("cq-study-outputs");p.empty();for(s in this.helper.outputs){var f=this.helper.outputs[s],m=e.UI.makeFromTemplate(this.outputTemplate,p);m[0].initialize({studyDialog:this,output:f.name,params:t}),m.find(".ciq-heading").text(f.heading),m.find(".ciq-heading")[0].fieldName=f.name,d=m.find("cq-swatch"),d[0].setColor(f.color,!1)}var g=n.find("cq-study-parameters");g.empty();for(s in this.helper.parameters){var v=this.helper.parameters[s],y=e.UI.makeFromTemplate(this.parameterTemplate,g);y.find(".ciq-heading").text(v.heading),d=y.find("cq-swatch");var x=$("<input>");if(v.defaultValue.constructor==Boolean)x.attr("type","checkbox"),v.value&&x.prop("checked",!0),this.setChangeEvent(x,"parameters",v.name+"Enabled"),d.remove();else{if(v.defaultValue.constructor!=Number)continue;x.attr("type","number"),x.val(v.value),this.setChangeEvent(x,"parameters",v.name+"Value"),y[0].initialize({studyDialog:this,parameter:v.name+"Color",params:t}),d[0].setColor(v.color,!1),r=this.helper.attributes[v.name+"Value"];for(var b in r)x.attr(b,r[b])}y.find(".stx-data").append(x)}this.open()},e.UI.StudyDialog=document.registerElement("cq-study-dialog",A);var I={prototype:Object.create(e.UI.ContextTag)};e.UI.StudyInput=document.registerElement("cq-study-input",I);var P={prototype:Object.create(e.UI.ModalTag)};P.prototype.setContext=function(){this.template=this.node.find("template"),this.previousStudies={},this.begin()},P.prototype.begin=function(){function t(){e.showHide(),e.renderLegend()}var e=this;this.addInjection("append","createDataSet",t),t()},P.prototype.showHide=function(){for(var t in this.context.stx.layout.studies)if(!this.context.stx.layout.studies[t].customLegend)return void $("cq-study-legend").css({display:""});$("cq-study-legend").css({display:"none"})},P.prototype.renderLegend=function(){function t(t,i){return function(){e.Studies.removeStudy(t.context.stx,i),t.node[0].hasAttribute("cq-marker")&&t.context.stx.modalEnd(),t.renderLegend()}}function i(t,e){return function(i){var r=n.layout.studies[e];if(r.editFunction){i.stopPropagation(),t.uiManager.closeMenu();var a=t.context.getHelpers(t.node,"StudyEdit")[0],o={stx:n,sd:r,inputs:r.inputs,outputs:r.outputs,parameters:r.parameters};a.editPanel(o)}}}var n=this.context.stx;if(n.layout.studies){var r,a=!1;if(e.objLength(this.previousStudies)==e.objLength(n.layout.studies)){for(r in n.layout.studies)if(!this.previousStudies[r]){a=!0;break}if(!a)return}this.previousStudies=e.shallowClone(n.layout.studies),$(this.template).parent().emptyExceptTemplate();var o=void 0!==this.node.attr("cq-overlays-only"),s=void 0!==this.node.attr("cq-panel-only"),l=void 0!==this.node.attr("cq-custom-removal-only"),h=this.node.parents(".stx-holder"),c=null,u=this.node.attr("cq-marker-label");h.length&&(c=h.attr("cq-panel-name"));for(r in n.layout.studies){var d=n.layout.studies[r];if(!d.customLegend&&((!l||d.study.customRemoval)&&(!s||d.panel==c)&&(!o||d.overlay||d.underlay))){var p=e.UI.makeFromTemplate(this.template,!0);p.find("cq-label").html(d.inputs.display);var f=p.find(".ciq-close");d.permanent?f.hide():f.stxtap(t(this,d));var m=p.find(".ciq-edit");m.length||(m=p.find("cq-label")),m.stxtap(i(this,r))}}void 0!==u&&this.node[0].childElementCount>1&&this.node.prepend("<cq-marker-label>"+u+"</cq-marker-label>"),this.showHide()}},e.UI.StudyLegend=document.registerElement("cq-study-legend",P);var F={prototype:Object.create(e.UI.ContextTag)};F.prototype.initialize=function(t){this.params=t},F.prototype.setColor=function(t){if(this.params){var e={outputs:{}};e.outputs[this.params.output]=t,this.params.studyDialog.updateStudy(e)}},e.UI.StudyOutput=document.registerElement("cq-study-output",F);var L={prototype:Object.create(e.UI.ContextTag)};return L.prototype.initialize=function(t){this.params=t},L.prototype.setColor=function(t){if(this.params){var e={parameters:{}};e.parameters[this.params.parameter]=t,this.params.studyDialog.updateStudy(e)}},e.UI.StudyParameter=document.registerElement("cq-study-parameter",L),t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./utility"));else if("function"==typeof define&&define.amd)define(["core/utility"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for requestLimiter.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){var e=t.CIQ;return e.Extras||(e.Extras={}),e.Extras.RequestLimiter=function(){},e.Extras.RequestLimiter.outboundAjaxLimit=25,e.Extras.RequestLimiter.logToConsole=!0,e.Extras.RequestLimiter.logToServer=null,e.Extras.RequestLimiter.hitRequestLimit=function(t){if(!e.Extras.RequestLimiter.outboundAjaxLimit)return!1;var i=t.split("/");if(i.length<2)return!1;var n=i[2];e.Extras.RequestLimiter.ajaxRequestLog||(e.Extras.RequestLimiter.ajaxRequestLog={});var r=e.Extras.RequestLimiter.ajaxRequestLog;r[n]||(r[n]=[]),r=r[n];for(var a={url:t,time:(new Date).getTime()};r.length&&r[0].time+1e3<=a.time;)r.shift();if(r.push(a),r.length<e.Extras.RequestLimiter.outboundAjaxLimit)return!1;for(var o="Ajax Request Limit Exceeded: "+n+"\n",s=0;s<r.length;s++)o+=(s+1).toString()+". "+r[s].time+"   "+r[s].url+"\n";return e.Extras.RequestLimiter.logToConsole&&console.log(o),e.Extras.RequestLimiter.logToServer&&e.postAjax({url:e.Extras.RequestLimiter.logToServer,payload:o,ungovernable:!0}),!0},t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for comparison.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){var e=t.CIQ,i=t.$$$;return e.Comparison.colorOrder=["#b387d7","#ff9250","#e36460","#dcdf67","#b3d987","#ffcd2b","#66cac4","#97b8f7"],e.Comparison.colorPointer=0,e.Comparison.type="compare",e.Comparison.attachColorPicker=function(){var t=i("#menuWrapperCompare .stx-color"),n=getComputedStyle(t);n&&(e.Comparison.colorSelection=n.backgroundColor),e.MenuManager.attachColorPicker(t,i("#menuWrapperCompare #menuCompare"),function(t){e.Comparison.colorSelection="#"+t},!0)},e.Comparison.processComparison=function(t,i,n){e.addMemberToMasterdata(t,i,n)},e.Comparison.add=function(t,n,r,a,o){function s(n){return function(a){if(a)return delete t.chart.series[n],void(r&&r());if(i("#compareSymbol").value="",i("#compareNone").style.display="none",e.Comparison.correlate(t,n),t.draw(),!t.comparisons[n]){var o=i(".symComparisonTemplate"),s=o.cloneNode(!0);i(".stxItem",s).innerHTML=n,t.chart.series[n].parameters.permanent?i(".stx-ico-close",s).style.display="none":i(".stx-ico-close",s).onclick=function(t,i){return function(){t.getSeriesRenderer("_generic_series").removeSeries(i).ready(),e.Comparison.removeSeries(t,i)}}(t,n),s.style.display="",o.parentNode.appendChild(s),t.comparisons[n]={div:s}}e.Comparison.colorPointer++,e.Comparison.colorPointer>=e.Comparison.colorOrder.length&&(e.Comparison.colorPointer=0),e.Comparison.colorSelection=i("#menuWrapperCompare .stx-color").style.backgroundColor=e.Comparison.colorOrder[e.Comparison.colorPointer],r&&r()}}if(n||(n=i("#compareSymbol").value.toUpperCase()),!n)return void(r&&r());if(o||(o={}),"object"==typeof n&&(o.symbolObject=n,n=n.symbol),n==t.chart.symbol&&!o.force)return void(r&&r());a||(a=n),i("#compareSymbol").blur(),t.chart.legend||(t.chart.legend={x:260,y:10});var l="compare"==e.Comparison.type,h=l||"absolute"==e.Comparison.type,c={isComparison:l,shareYAxis:h};e.extend(o,c),o.gaps||(o.gaps=!0),o.color||(o.color=e.Comparison.colorSelection),o.display||(o.display=a),o.chartType||(o.chartType="line"),e.Comparison.fetch(t,n,o,s(n))},e.Comparison.fetch=function(t,e,i,n){i.data||(i.data={useDefaultQuoteFeed:!0}),t.addSeries(e,i,n)},e.Comparison.quoteFeedFetch=function(t,e,i){var n=t.quoteDriver,r=n.makeParams(e,t.chart);r.startDate=t.chart.masterData[0].DT,r.endDate=t.chart.masterData[t.chart.masterData.length-1].DT,n.quoteFeed.fetch(r,function(t){i(t.error,t.quotes)})},e.Comparison.reset=function(t){for(var n in t.comparisons){var r=t.comparisons[n],a=r.div;a.parentNode.removeChild(a);var o=t.getSeriesRenderer("_generic_series");o&&o.removeSeries(n)}t.comparisons={},e.Comparison.colorPointer=0,e.Comparison.colorSelection=i("#menuWrapperCompare .stx-color").style.backgroundColor=e.Comparison.colorOrder[e.Comparison.colorPointer],t.setComparison(!1);for(var s in t.panels)0===t.panels[s].name.indexOf(e.Comparison.correlationPanel)&&t.panelClose(t.panels[s]);i("#compareNone").style.display=""},e.Comparison.initialize=function(t,n){e.Comparison.attachColorPicker(),t.comparisons={},!1!==n&&e.inputKeyEvents(i("#compareSymbol"),function(){i("#compareSymbol").value.toUpperCase()!=t.chart.symbol&&(e.MenuManager.closeThisMenu(i("#compareSymbol")),e.Comparison.add(t))})},e.Comparison.removeSeries=function(t,i){if(t.comparisons){var n=t.comparisons[i];if(n){var r=n.div;r.parentNode&&r.parentNode.removeChild(r),delete t.comparisons[i],e.isEmpty(t.comparisons)&&e.Comparison.reset(t)}}},e.Comparison.quoteFeedCallback=function(t){function i(i){for(var n=t.stx.masterData.length-1;n>=0;n--)if(t.stx.masterData[n]&&"undefined"!=typeof t.stx.masterData[n][i])return e.strToDateTime(t.stx.masterData[n].Date);return t.startDate}if(!t.comparisonRequested){var n,r={};for(n in t.stx.chart.series)(t.stx.chart.series[n].parameters.isComparison||t.stx.chart.series[n].parameters.quoteFeedCallbackRefresh)&&(r[n]=!0);if(e.Studies)for(var a in e.Studies.studySymbols.symbols)r[a]=!0;var o=[];for(n in r){var s=e.shallowClone(t.originalState);s.symbol=n,s.update?s.startDate=i(n):(s.startDate||(s.startDate=t.stx.masterData[0].DT),s.endDate||(s.endDate=t.stx.masterData[t.stx.masterData.length-1].DT)),o.push(s)}if(o.length){t.comparisonRequested=!0;t.stx.quoteDriver.quoteFeed.multiFetch(o,function(i){for(var n=0;n<i.length;n++){var r=i[n];r.dataCallback.error||e.addMemberToMasterdata(t.stx,r.params.symbol,r.dataCallback.quotes,null,null,t.stx.chart.series[r.params.symbol].parameters.field)}t.stx.createDataSet(),t.stx.draw()})}}},e.Comparison.correlationPanel="correl",e.Comparison.requestCorrelation=!1,e.Comparison.correlate=function(t,n){if(e.Comparison.requestCorrelation&&!(r<=0)){var r=parseInt(i(".stxCorrelate .stx-input-field").value,10),a=t.panels[e.Comparison.correlationPanel+" ("+r+")"],o={id:e.Comparison.correlationPanel+" ("+r+")",Period:r,"Compare To":[]},s={},l=null;if(a){for(var h=0;h<t.layout.studies[a.name].inputs["Compare To"].length;h++)o["Compare To"].push(t.layout.studies[a.name].inputs["Compare To"][h]);for(var c in t.layout.studies[a.name].outputs)s[c]=t.layout.studies[a.name].outputs[c];l=a.name}o["Compare To"].push(n),s["Result "+n]=e.Comparison.colorSelection,e.Studies.addStudy(t,"correl",o,s,null,l);for(var u in t.panels)if(0===t.panels[u].name.indexOf(e.Comparison.correlationPanel))for(var d=t.layout.studies[t.panels[u].name].inputs["Compare To"],p=0;p<d.length;p++)d[p]==n&&(t.layout.studies[t.panels[u].name].outputs["Result "+n]=e.Comparison.colorSelection)}},e.Comparison.toggleCorrelate=function(){e.Comparison.requestCorrelation=!e.Comparison.requestCorrelation;var t=i(".stxCorrelate .stx-checkbox");t&&(e.unappendClassName(t,(!e.Comparison.requestCorrelation).toString()),e.appendClassName(t,e.Comparison.requestCorrelation.toString()))},t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for lookupXignite.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){var e=t.CIQ;return e.SymbolLookupModule={subscribedExchanges:[],fastLookupMap:[],fastLookupShareMap:[],source:"Xignite",currentRequest:0,maxResults:50,searchExchanges:[],internalSubscribedExchanges:{XNYS:!0,XASE:!0,ARCX:!0,XNAS:!0,OOTC:!0,XOTC:!0,PINX:!0,metals:!0,forex:!0,futures:!0,mutualfund:!0},cache:[],cacheIt:function(t,e){for(this.cache.push({body:t,data:e});this.cache.length>100;)this.cache.shift()},ready:!1,loadSymbolLookupTables:function(t){if(!this.ready){t||(this.internalSubscribedExchanges={});for(var e=0;e<this.subscribedExchanges.length;e++)this.internalSubscribedExchanges[this.subscribedExchanges[e]]=!0;this.searchExchanges=[];for(var i in this.internalSubscribedExchanges)this.internalSubscribedExchanges[i]&&this.searchExchanges.push(i);this.ready=!0}},doSymbolLookup:function(t,i,n,r){var a=this;if(!i)return void(r&&r({}));n||(n=this.maxResults);var o="https://services.chartiq.com/symbol_lookup_service/",s="t="+encodeURIComponent(i)+"&m="+parseInt(n,10);t&&"ALL"!=t&&(s+="&e="+encodeURIComponent(t)),s+="&x="+encodeURIComponent(JSON.stringify(this.searchExchanges));for(var l=0;l<a.cache.length;l++)if(a.cache[l].body==s)return void r(a.cache[l].data);s.length<1800&&(o+="?"+s),e.SymbolLookupModule.currentRequest++;var h=e.SymbolLookupModule.currentRequest;setTimeout(function(){h==e.SymbolLookupModule.currentRequest&&e.postAjax(o,s.length<1800?null:s,function(t,i){if(h==e.SymbolLookupModule.currentRequest){if(200!=t)return void(r&&r({}));for(var n,o,l=i.split("\r\n"),c=[],u=1;u<l.length;u++){if(1==u){n=l[0].split("|"),o={};for(var d=0;d<n.length;d++)o[n[d]]=d}var p=l[u].split("|");a.internalSubscribedExchanges[p[o.source]]&&(a.fastLookupShareMap[p[o.symbol]]=p[o.name],c.push({symbol:p[o.symbol],name:p[o.name],exchDisp:p[o.exchDisp]}))}c.length>10&&a.cacheIt(s,c),r&&r(c)}})},100)}},t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for quotes.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){var e=t.CIQ;return e.Quotes=function(){},
e.Quotes.nextDataSource=function(){return null},e.Quotes.multiFetch=function(t,i){function n(t,e,i){return function(n,r){if(e.results.push({err:n,params:t,data:r}),++e.counter>=e.finished){var a=e.results;e.results=[],i(a)}}}for(var r={counter:0,finished:t.length,results:[]},a=0;a<t.length;a++){var o=t[a];e.Quotes.fetch(o,n(o,r,i))}},e.Quotes.fetch=function(t,i){function n(t,e){i(t,e)}t.source||(t.source="Demo"),e.Quotes[t.source].fetch(t,n)},e.Quotes.barsToFetch=function(t){if(t.isSeries)return t.stx.masterData.length;var e=t.stx.layout.periodicity;return"month"==t.stx.layout.interval&&(e*=30),"week"==t.stx.layout.interval&&(e*=7),t.stx.chart.maxTicks*e},e.Quotes.Demo=function(){},e.Quotes.Demo.fetch=function(t,i){function n(t){var e=t.substr(0,t.indexOf("=")),i=t.substring(t.indexOf(e+"=")+(e+"=").length,t.length-1);try{return JSON.parse(i.replace(/,0+/g,",0").replace(/,[.]/g,",0.").replace(/;/g,""))}catch(t){return[]}}var r="https://demoquotes.chartiq.com/"+t.symbol.toUpperCase();e.postAjax(r,null,function(t,e){if(200!=t)return void i(t);for(var r=n(e),a=[],o=0;o<r.length;o++)a[o]={},a[o].Date=r[o][0],a[o].Open=r[o][1],a[o].High=r[o][2],a[o].Low=r[o][3],a[o].Close=r[o][4],a[o].Volume=r[o][5],a[o].Adj_Close=r[o][6];i(null,a)})},t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../core/master"));else if("function"==typeof define&&define.amd)define(["core/master"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for share.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){function e(t,e,i){e||(e={});for(var n=[],r=document.querySelectorAll("[cq-no-html2canvas]"),a=0;a<r.length;a++){var s=r[a];"none"!==s.style.display&&(n.push({element:s,prevDisplay:s.style.display}),s.style.display="none")}o(t.chart.container,{allowTaint:!1,logging:!1,width:e.width?e.width:null,height:e.height?e.height:null,background:e.background?e.background:null,useCORS:!0}).then(function(t){if(i)return n.map(function(t){t.element.style.display=t.prevDisplay}),e.data?i(null,t.toDataURL("image/png")):i(null,t)})}function i(t){var e=n();if("undefined"!=typeof html2canvas)return o=html2canvas,t();s.loadScript(e+"thirdparty/html2canvas.js",function(){return"undefined"!=typeof require?require(["html2canvas"],function(e){return o=e,t()}):(o=html2canvas,t())})}function n(){for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++){var i=t[e];if(i.src&&i.src.indexOf("share.js")>-1)return i.src.replace(/advanced\/share\.js/,"")}return null}function r(t,e,i){if(!e.imageType||"full"===e.imageType)return s.Share.FullChart2PNG(t,e,i);a(t,e,i)}function a(t,e,i){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");return t.adjustBackingStore(n,r),s.fillTransparentCanvas(r,"#FFFFFF",n.width,n.height),r.drawImage(e.image,0,0,t.chart.canvas.width,t.chart.canvas.height,0,e.y,e.width,e.height),i(null,n)}var o,s=t.CIQ;return s.Share=function(){},t.STXSocial=s.Share,s.Share.FullChart2PNG=function(t,n,r){if(t&&t.chart){if("undefined"==typeof html2canvas)return i(function(){return e(t,n,r)});o=html2canvas,e(t,n,r)}},s.Share.Decoration=function(){this.initialize=function(){},this.headerPX=0,this.footerPX=0,this.decorate=function(){}},s.Share.createImage=function(t,e,i){var n=[].slice.call(arguments);i=n.pop(),null!==e&&"object"==typeof e||(e={widthPX:n[1],heightPX:n[2],decorationObj:n[3],imageType:n[4]});var a=e.widthPX,o=e.heightPX,l=e.decorationObj,h=e.imageType;l||(l=s.Share.defaultDecorator),l.initialize||(l=null),l&&l.initialize(t,t.chart.canvas,a,o),s.fillTransparentCanvas(t.chart.context,t.containerColor,t.chart.canvas.width,t.chart.canvas.height),s.Share.watermarkPanels(t);var c=t.chart.canvas.height,u=t.chart.canvas.width;t.chart.canvas.style.height&&(c=s.stripPX(t.chart.canvas.style.height),u=s.stripPX(t.chart.canvas.style.width)),a&&o?(c=o,u=a,l&&(c=c-l.headerPX-l.footerPX)):o?(l&&(c=o-l.headerPX-l.footerPX),u=t.chart.canvas.width*(c/t.chart.canvas.height)):a&&(u=a,c=t.chart.canvas.height*(a/t.chart.canvas.width),l&&(c=c+l.headerPX+l.footerPX));var d=0;l&&(d=l.headerPX);var p=document.createElement("img");p.onload=function(){r(t,{image:this,imageType:h,width:u,height:c,y:d},function(e,n){if(l){var r=n.getContext("2d");l.decorate(t,r,!(!h||"full"===h)||null)}t.draw(),i(n.toDataURL("image/png"))})},p.src=t.chart.canvas.toDataURL("image/png")},s.Share.defaultDecorator=new s.Share.Decoration,s.Share.defaultDecorator.initialize=function(){this.headerPX=50,this.footerPX=0},s.Share.defaultDecorator.decorate=function(t,e,i){if(i){var n=10,r=24;e.textBaseline="middle",t.canvasColor("stx_share",e),t.canvasFont("stx_share_symbol",e);var a=e.measureText(t.chart.symbol).width;e.fillText(t.chart.symbol,n,r),n+=a+5,t.plotLine(n,n,r-8,r+8,t.canvasStyle("stx_share"),"segment",e),n+=5,t.canvasFont("stx_share",e);var o=s.mmddyyyy(t.chart.dataSegment[t.getStartDateOffset()].Date)+"-"+s.mmddyyyy(t.chart.dataSegment[t.chart.dataSegment.length-1].Date);a=e.measureText(o).width,e.fillText(o,n,r),n+=a+5,t.plotLine(n,n,r-8,r+8,t.canvasStyle("stx_share"),"segment",e),n+=5,o=s.readablePeriodicity(t),e.fillText(o,n,r),e.textBaseline="alphabetic"}},s.Share.uploadImage=function(t,e,i,n){i||(i={}),i.image=t,s.postAjax(e,JSON.stringify(i),function(t,e){if(200!=t)return void n(t,null);n(null,e)})||n(0,null)},s.Share.watermarkPanels=function(t){t.canvasFont("stx_panels"),t.chart.context.globalAlpha=1,t.chart.context.textBaseline="alphabetic",t.chart.context.textAlign="left";for(var e in t.panels){var i=t.panels[e];if(!i.hidden&&"chart"!=i.name){t.canvasColor("stx_panel_background"),t.chart.context.font=getComputedStyle(i.title).font;var n=i.top+i.icons.offsetTop,r=t.chart.context.measureText(i.title.innerHTML.toUpperCase()).width;s.semiRoundRect({ctx:t.chart.context,x:0,top:n+4,width:r+6,height:20,radius:5,fill:!0}),t.canvasColor("stx_panels"),t.chart.context.fillText(i.title.innerHTML.toUpperCase(),i.icons.offsetLeft+4,n+18)}}},s.Share.displayImageExample=function(t){var e=document.createElement("div");e.style.margin="0 auto",e.style.width="1000px",e.style.border="solid black 3px",e.style.zIndex=100,e.style.position="relative",e.style.top="-500px";var i=document.createElement("img");i.onload=function(){e.appendChild(i),document.body.appendChild(e)},i.src=t},s.Share.brandMyChart=function(t,e,i,n){function r(t,e,i,n){return function(){var r=e.width,a=e.height;n&&(r=n[0],a=n[1]);var o=t.chart.canvasWidth/2-r/2,s=t.panels.chart.height/2-a/2;i&&(o=i[0]>0?i[0]:t.chart.width-r+i[0],s=i[1]>0?i[1]:t.panels.chart.height-a+i[1]),t.chart.context.drawImage(e,o,t.panels.chart.top+s,r,a)}}var a=document.createElement("img");a.onload=function(t,e,i){return function(){s.ChartEngine.prototype.prepend("displayChart",e(t,this,i,n)),t.draw()}}(t,r,i),a.src=e},s.Share.shareChart=function(t,e,i,n){s.Share.createImage(t,null,null,null,function(r){var a=s.uniqueID(),o="https://share.chartiq.com",l=o+"/upload/"+a;e&&(e.host&&(o=e.host),e.path&&(l=o+e.path+"/"+a));var h=t.getStartDateOffset(),c={layout:t.exportLayout(),drawings:t.serializeDrawings(),xOffset:h,startDate:t.chart.dataSegment[h].Date,endDate:t.chart.dataSegment[t.chart.dataSegment.length-1].Date,id:a,symbol:t.chart.symbol},u={id:a,image:r,config:c};s.Share.uploadImage(r,l,u,function(t,e){null!==t?n(t):i(o+e)})})},t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../thirdparty/iscroll"),require("../chartiq"));else if("function"==typeof define&&define.amd)define(["thirdparty/iscroll","chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for ui.js.");var e="undefined"!=typeof window?window:self;t(e,e,e)}}(function(_iscroll,_exports){var $$=_exports.$$,$$$=_exports.$$$,CIQ=_exports.CIQ,timezoneJS=_exports.timezoneJS,IScroll5=_iscroll.IScroll5,CIQTouchAction="onmouseup";CIQ.touchDevice&&(CIQ.ipad||CIQ.iphone)&&(CIQTouchAction="ontouchend"),CIQ.androidDoubleTouch=null,CIQ.clickTouch=function(t,e){function i(t,e){return function(t){if(CIQ.androidDoubleTouch){if((new Date).getTime()-CIQ.androidDoubleTouch<500)return;CIQ.androidDoubleTouch=(new Date).getTime()}else CIQ.androidDoubleTouch=(new Date).getTime();e(t)}}CIQ.ipad||CIQ.iphone?t.ontouchend=e:CIQ.isAndroid?t.onclick=i(t,e):t.onclick=e},CIQ.getPos=function(t){for(var e=0,i=0;t;e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent);return{x:e,y:i}},CIQ.withinElement=function(t,e,i){var n=CIQ.getPos(t);return!(e<=n.x)&&(!(i<=n.y)&&(!(e>=n.x+t.offsetWidth)&&!(i>=n.y+t.offsetHeight)))},CIQ.textLabel=function(t,e,i,n,r){n.canvasFont(r);var a,o=n.getCanvasFontSize(r),s=n.canvasStyle(r),l=n.chart.context,h=i.split("\n"),c=0;for(a=0;a<h.length;a++){var u=n.chart.context.measureText(h[a]);u.width>c&&(c=u.width)}var d=h.length*o;l.textBaseline="alphabetic",l.strokeStyle=s["border-left-color"],l.fillStyle=s["background-color"],l.beginPath(),l.moveTo(t,e),l.lineTo(t+c+10,e),l.lineTo(t+c+10,e+d+2),l.lineTo(t,e+d+2),l.lineTo(t,e),l.stroke(),l.fill(),l.closePath(),l.strokeStyle=s.color,l.fillStyle=s.color,l.textBaseline="top";var p=0;for(a in h)l.fillText(h[a],t+5,e+p+1),p+=o};var blocks=[];return CIQ.createDIVBlock=function(t,e,i,n){var r=document.createElement("div");return r.style.position="fixed",r.style.left=t+"px",r.style.width=e+"px",r.style.top=i+"px",r.style.height=n+"px",document.body.appendChild(r),blocks[blocks.length]=r,r},CIQ.horizontalIntersect=function(t,e){return e<Math.max(t.x0,t.x1)&&e>Math.min(t.x0,t.x1)},CIQ.twoPointIntersect=function(t,e,i,n){return CIQ.boxIntersects(e-n,i-n,e+n,i+n,t.x0,t.y0,t.x1,t.y1,"segment")},CIQ.boxedIntersect=function(t,e,i){return!(e>Math.max(t.x0,t.x1)||e<Math.min(t.x0,t.x1))&&!(i>Math.max(t.y0,t.y1)||i<Math.min(t.y0,t.y1))},CIQ.isInElement=function(t,e,i){return!(e<t.offsetLeft)&&(!(e>t.offsetLeft+t.clientWidth)&&(!(i<t.offsetTop)&&!(i>t.offsetTop+t.clientHeight)))},CIQ.StorageManager=function(){},CIQ.StorageManager.get=function(t,e){if(!CIQ.localStorage)return null;var i=CIQ.localStorage.getItem(t);return e&&e(null,i),i},CIQ.StorageManager.store=function(t,e){CIQ.localStorage.setItem(t,e)},CIQ.StorageManager.remove=function(t){CIQ.localStorage.removeItem(t)},CIQ.StorageManager.callbacker=function(t){return function(e){null===e?CIQ.StorageManager.remove(t):CIQ.StorageManager.store(t,e)}},CIQ.DropDownManager=function(){},CIQ.DropDownManager.dropDowns=[],CIQ.DropDownManager.callback=null,CIQ.DropDownManager.listeners={},CIQ.DropDownManager.newDropDown=function(t){function e(t){return function(e){if("block"==$$$("ul",t).style.display)return void($$$("ul",t).style.display="none");$$$("ul",t).style.display="block",CIQ.DropDownManager.callback=function(t){return function(e){var i=!1;if(!(e.which&&e.which>=2||e.button&&e.button>=2)){var n=$$$("ul",t);CIQ.withinElement(t,e.pageX,e.pageY)||CIQ.withinElement(n,e.pageX,e.pageY)||(n.style.display="none",e.stopPropagation(),e.preventDefault(),i=!0);for(var r in CIQ.DropDownManager.listeners)document.removeEventListener(r,CIQ.DropDownManager.listeners[r],!0);return!i&&void 0}}}(t),setTimeout(function(){"click"==e.type&&(document.addEventListener("click",CIQ.DropDownManager.callback,!0),CIQ.DropDownManager.listeners.click=CIQ.DropDownManager.callback),"pointerup"==e.type&&(document.addEventListener("pointerdown",CIQ.DropDownManager.callback,!0),CIQ.DropDownManager.listeners.pointerdown=CIQ.DropDownManager.callback),"touchend"==e.type&&(document.addEventListener("touchstart",CIQ.DropDownManager.callback,!0),CIQ.DropDownManager.listeners.touchstart=CIQ.DropDownManager.callback)},0)}}$$$("ul",t).style.display="none",CIQ.safeClickTouch(t,e(t))},CIQ.DropDownManager.initialize=function(){for(var t=document.querySelectorAll(".stx-dropdown"),e=0;e<t.length;e++){var i=t[e];CIQ.DropDownManager.newDropDown(i)}},CIQ.iscroll=function(){},CIQ.iscroll.scrollers=[],CIQ.iscroll.newScroller=function(t,e){e||(e={tap:!0,scrollbars:!0,interactiveScrollbars:!0,mouseWheel:!0});var i=new IScroll5(t,e);return i.utils=IScroll5.utils,CIQ.iscroll.scrollers.push(i),i},CIQ.iscroll.refresh=function(){for(var t=0;t<CIQ.iscroll.scrollers.length;t++){CIQ.iscroll.scrollers[t].refresh()}},CIQ.DialogManager=function(){},CIQ.DialogManager.useOverlay=!1,CIQ.DialogManager.stack=[],CIQ.DialogManager.modalBegin=function(){CIQ.MenuManager&&(CIQ.MenuManager.menusDisabledDialog=!0);for(var t=0;t<CIQ.ChartEngine.registeredContainers.length;t++){CIQ.ChartEngine.registeredContainers[t].stx.modalBegin()}},CIQ.DialogManager.modalEnd=function(){CIQ.MenuManager&&(CIQ.MenuManager.menusDisabledDialog=!1);for(var t=0;t<CIQ.ChartEngine.registeredContainers.length;t++){CIQ.ChartEngine.registeredContainers[t].stx.modalEnd()}},CIQ.DialogManager.displayDialog=function(t){CIQ.hideKeyboard(),CIQ.DialogManager.modalBegin(),CIQ.DialogManager.useOverlay&&!CIQ.DialogManager.bodyOverlay&&(CIQ.DialogManager.bodyOverlay=CIQ.newChild(document.body,"DIV","stxDialogOverlay")),CIQ.DialogManager.useOverlay&&(CIQ.DialogManager.bodyOverlay.style.display="block");var e=t;"string"==typeof t&&(e=$$(t)),e.style.display="block",CIQ.DialogManager.stack.push(e)},CIQ.DialogManager.dismissDialog=function(){document.activeElement.blur();var t=CIQ.DialogManager.stack.pop();t&&(t.style.display="none",t.colorPickerDiv&&(t.colorPickerDiv.style.display="none"),CIQ.DialogManager.stack.length||(CIQ.DialogManager.bodyOverlay&&"block"==CIQ.DialogManager.bodyOverlay.style.display&&(CIQ.DialogManager.bodyOverlay.style.display="none"),CIQ.DialogManager.modalEnd()),CIQ.fixScreen())},CIQ.MenuManager=function(){},CIQ.MenuManager.registeredCharts=[],CIQ.MenuManager.openMenu=null,CIQ.MenuManager.useOverlay=!0,CIQ.MenuManager.menusDisabled=!1,CIQ.MenuManager.menusDisabledDialog=!1,CIQ.MenuManager.onClass=null,CIQ.MenuManager.offClass=null,CIQ.MenuManager.menus=[],CIQ.MenuManager.stack=[],CIQ.MenuManager.destroy=function(){this.registeredCharts=[],CIQ.MenuManager.bodyOverlay&&CIQ.MenuManager.bodyOverlay.parentNode.removeChild(CIQ.MenuManager.bodyOverlay)},CIQ.MenuManager.registerChart=function(t){CIQ.MenuManager.registeredCharts.push(t),CIQ.MenuManager.bodyOverlay||(CIQ.MenuManager.bodyOverlay=CIQ.newChild(document.body,"DIV","stxBodyOverlay"))},CIQ.MenuManager.useOverlays=function(t){CIQ.MenuManager.useOverlay=t},CIQ.MenuManager.cancelSingleClick=function(){for(var t=0;t<CIQ.MenuManager.registeredCharts.length;t++)CIQ.MenuManager.registeredCharts[t].cancelTouchSingleClick=!0},CIQ.MenuManager.menuOn=function(t,e,i){function n(){return function(){CIQ.MenuManager.menuOff()}}if(CIQ.MenuManager.registeredCharts.length){if(CIQ.MenuManager.openMenu){if(t==CIQ.MenuManager.openMenu)return;i||CIQ.MenuManager.menuOff(!0)}CIQ.MenuManager.openMenu=t,!i&&CIQ.MenuManager.useOverlay&&(CIQ.MenuManager.bodyOverlay.style.display="block",CIQ.MenuManager.bodyOverlay[CIQTouchAction]=n(t)),CIQ.MenuManager.stack.push({closeCurrentMenu:e,cascading:i});for(var r=0;r<CIQ.MenuManager.registeredCharts.length;r++)CIQ.MenuManager.registeredCharts[r].openDialog=t}},CIQ.MenuManager.menuOff=function(t,e){if(CIQ.MenuManager.stack.length&&CIQ.MenuManager.registeredCharts.length){for(!e&&document.activeElement&&"BODY"!=document.activeElement.tagName&&document.activeElement.blur&&document.activeElement.blur();CIQ.MenuManager.stack.length;){if(CIQ.MenuManager.stack.pop().closeCurrentMenu(),!t)break}if(CIQ.MenuManager.stack.length||(CIQ.MenuManager.openMenu=null,CIQ.MenuManager.useOverlay&&(CIQ.MenuManager.bodyOverlay.style.display="none",CIQ.MenuManager.bodyOverlay[CIQTouchAction]=null)),this.cancelSingleClick(),!CIQ.DialogManager.stack.length)for(var i=0;i<CIQ.MenuManager.registeredCharts.length;i++)CIQ.MenuManager.registeredCharts[i].openDialog=""}},CIQ.MenuManager.makeMenus=function(){function toggle(t,e){return function(i){function n(t){return function(){t.style.display="none",t.colorPickerDiv&&(t.colorPickerDiv.style.display="none")}}var r=CIQ.getEventDOM(i);do{if(r.className&&-1!=r.className.indexOf("menuOutline"))return;if(r.className&&-1!=r.className.indexOf("stxMenu"))break;r=r.parentNode}while(r);if("none"==t.style.display){var a=CIQ.uniqueID();if(CIQ.MenuManager.menusDisabled&&!e.alwaysOn||CIQ.MenuManager.menusDisabledDialog)return;CIQ.MenuManager.menuOn(a,n(t)),t.style.display="block",-1!=t.className.indexOf("menuScroll")&&(this.iscroll?this.iscroll.refresh():this.iscroll=CIQ.iscroll.newScroller(t,{tap:!0,scrollbars:!1,interactiveScrollbars:!1,mouseWheel:!0}))}else CIQ.MenuManager.menuOff(),t.style.display="none"}}function activate(menuOutline){CIQ.MenuManager.menuOff(),menuOutline.style.display="none";var action=this.getAttribute("stxToggle");try{var f=JSON.parse(action),props=f.fn.split(".");f.fn=window;for(var p=0;p<props.length;p++)f.fn=f.fn[props[p]];f.fn.apply(this,f.args)}catch(e){eval(action)}}function menuSafeClick(t,e){return function(i){activate.call(e,t),i.stopPropagation()}}CIQ.MenuManager.menus=document.querySelectorAll(".stxMenu");for(var i=0;i<CIQ.MenuManager.menus.length;i++){var menu=CIQ.MenuManager.menus[i],menuOutline=menu.querySelectorAll(".menuOutline")[0];menu.alwaysOn=-1!=menu.className.indexOf("stxAlwaysOn"),menu[CIQTouchAction]=toggle(menuOutline,menu);for(var clickables=menuOutline.querySelectorAll("*[stxToggle]"),j=0;j<clickables.length;j++)CIQ.safeClickTouch(clickables[j],menuSafeClick(menuOutline,clickables[j]))}},CIQ.MenuManager.disableMenus=function(){CIQ.MenuManager.menusDisabled=!0;for(var t=0;t<CIQ.MenuManager.menus.length;t++){var e=CIQ.MenuManager.menus[t];CIQ.MenuManager.onClass&&CIQ.unappendClassName(e,CIQ.MenuManager.onClass),CIQ.MenuManager.offClass&&CIQ.appendClassName(e,CIQ.MenuManager.offClass)}},CIQ.MenuManager.enableMenus=function(){CIQ.MenuManager.menusDisabled=!1;for(var t=0;t<CIQ.MenuManager.menus.length;t++){var e=CIQ.MenuManager.menus[t];CIQ.MenuManager.offClass&&CIQ.unappendClassName(e,CIQ.MenuManager.offClass),CIQ.MenuManager.onClass&&CIQ.appendClassName(e,CIQ.MenuManager.onClass)}},CIQ.MenuManager.closeThisMenu=function(t){for(;t&&"undefined"!=typeof t.className&&-1==t.className.indexOf("menuOutline");)t=t.parentNode;t&&t.style&&(t.style.display="none"),CIQ.MenuManager.menuOff()},CIQ.MenuManager.attachColorPicker=function(t,e,i,n){function r(t){return function(){t.colorPickerDiv&&(t.colorPickerDiv.style.display="none")}}var a=function(t,e,i){return function(r){e.colorPickerDiv&&(e.colorPickerDiv.style.display="none"),t.style.backgroundColor="#"+r,i&&i(r),n||CIQ.MenuManager.menuOff()}};t[CIQTouchAction]=function(t,e){return function(){n||CIQ.MenuManager.menuOn("colorPicker",r(e)),e.colorPickerDiv||(e.colorPickerDiv=document.createElement("DIV"),e.colorPickerDiv.className="ciqColorPicker",document.body.appendChild(e.colorPickerDiv)),CIQ.createColorPicker(e.colorPickerDiv,t),e.colorPickerDiv.style.display="block";var i=CIQ.getPos(this),a=i.x+this.clientWidth;a+e.colorPickerDiv.offsetWidth>CIQ.pageWidth()&&(a=CIQ.pageWidth()-e.colorPickerDiv.offsetWidth-20),e.colorPickerDiv.style.left=a+"px";var o=i.y;o+e.colorPickerDiv.clientHeight>CIQ.pageHeight()&&(o=CIQ.pageHeight()-e.colorPickerDiv.offsetHeight-20),e.colorPickerDiv.style.top=o+"px"}}(a(t,e,i),e)},CIQ.ThemeManager=function(){},CIQ.ThemeManager.initialize=function(t,e){CIQ.ThemeManager.stx=t,CIQ.ThemeManager.storageCB=e},CIQ.ThemeManager.builtInThemes={},CIQ.ThemeManager.themes={enabledTheme:null,customThemes:{}},CIQ.ThemeManager.destroy=function(){this.builtInThemes={},this.themes.customThemes={},this.themes.enabledTheme=null},CIQ.ThemeManager.classMapping={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_shadow:{stx_candle_shadow:!0,stx_bar_even:!0,stx_bar_chart:!0,stx_line_chart:!0,stx_hollow_candle_even:!0},stx_candle_shadow_up:{stx_candle_shadow_up:!0},stx_candle_shadow_down:{stx_candle_shadow_down:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis_dark:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0},stx_mountain:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0},backgroundColor:null},CIQ.ThemeManager.populateDialog=function(t,e){function i(i){$$$("#candleBordersOn",$$(t)).checked?(e.styles.stx_candle_up["border-left-color"]=$$(t).querySelectorAll(".stx-border-color.stx_candle_up")[0].style.backgroundColor,e.styles.stx_candle_down["border-left-color"]=$$(t).querySelectorAll(".stx-border-color.stx_candle_down")[0].style.backgroundColor):(e.styles.stx_candle_up["border-left-color"]="transparent",e.styles.stx_candle_down["border-left-color"]="transparent"),!i&&e.displayInitialized&&e.draw()}function n(){a&&a.checked?(e.styles.stx_mountain_chart.color=CIQ.hexToRgba($$(t).querySelectorAll(".stx-border-color.stx_mountain")[0].style.backgroundColor,1),e.styles.stx_mountain_chart.backgroundColor=CIQ.hexToRgba($$(t).querySelectorAll(".stx-border-color.stx_mountain")[0].style.backgroundColor,50)):(e.styles.stx_mountain_chart.color=$$(t).querySelectorAll(".stx-border-color.stx_mountain")[0].style.backgroundColor,e.styles.stx_mountain_chart.backgroundColor=$$(t).querySelectorAll(".stx-border-color.stx_mountain")[0].style.backgroundColor),e.displayInitialized&&e.draw()}function r(i,n){return function(r){var o=CIQ.ThemeManager.classMapping[n];if(o)for(var s in o)e.canvasStyle(s),e.styles[s][i]="#"+r,"stx_mountain"==n&&(a&&a.checked?(e.styles[s].color=CIQ.hexToRgba("#"+r,1),e.styles[s].backgroundColor=CIQ.hexToRgba("#"+r,50)):(e.styles[s].color="#"+r,e.styles[s].backgroundColor="#"+r),e.styles[s].borderTopColor="#"+r);else e.chart.container.style[n]="#"+r;e.displayInitialized&&e.draw(),"border-left-color"==i&&r&&"transparent"!=r&&($$$("#candleBordersOn",$$(t)).checked=!0)}}var a=$$$("#mountainGradientOn",$$(t));$$$("#candleBordersOn",$$(t)).checked=!1,$$$("#candleBordersOn",$$(t)).onclick=i,a&&(a.checked=!1,a.onclick=n);var o="#FFFFFF";e.chart.container&&(o=getComputedStyle(e.chart.container));for(var s in CIQ.ThemeManager.classMapping){var l=CIQ.ThemeManager.classMapping[s],h=null,c=null;if(l){var u=CIQ.first(l),d=e.canvasStyle(u);h=d.color,c=d["border-left-color"],c&&"transparent"!=c||(c=d.borderLeftColor)}else h=o[s],CIQ.isTransparent(h)&&"backgroundColor"==s&&(h=e.containerColor);var p=$$(t).querySelectorAll(".stx-color."+s)[0];p&&(p.style.backgroundColor=h,p[CIQTouchAction]||CIQ.MenuManager.attachColorPicker(p,CIQ.DialogManager,r("color",s))),p=$$(t).querySelectorAll(".stx-border-color."+s)[0],p&&(p.style.backgroundColor=c,p[CIQTouchAction]||CIQ.MenuManager.attachColorPicker(p,CIQ.DialogManager,r("border-left-color",s)),c&&"transparent"!=c&&($$$("#candleBordersOn",$$(t)).checked=!0),a&&h&&h.indexOf(!1)&&(a.checked=!0))}i(!0)},CIQ.ThemeManager.createTheme=function(t){var e={};CIQ.ThemeManager.baseTheme&&(e.baseTheme=CIQ.ThemeManager.baseTheme);for(var i in CIQ.ThemeManager.classMapping){var n=CIQ.ThemeManager.classMapping[i];if(n){var r=CIQ.first(n),a=t.canvasStyle(r);e[i]={color:a.color},a.borderTopColor&&(e[i].borderTopColor=a.borderTopColor),a.backgroundColor&&(e[i].backgroundColor=a.backgroundColor),a["border-left-color"]&&"transparent"!=a["border-left-color"]?e[i]["border-left-color"]=a["border-left-color"]:e[i]["border-left-color"]="transparent"}else t.chart.container&&(e[i]=t.chart.container.style[i])}return e},CIQ.ThemeManager.saveTheme=function(t,e){var i=CIQ.ThemeManager.createTheme(e);CIQ.ThemeManager.themes.customThemes[t]=i,CIQ.ThemeManager.themes.enabledTheme=t,CIQ.ThemeManager.storageCB&&CIQ.ThemeManager.storageCB(JSON.stringify(CIQ.ThemeManager.themes),e),CIQ.ThemeManager.themesToMenu(CIQ.ThemeManager.el,CIQ.ThemeManager.el2,CIQ.ThemeManager.stx,CIQ.ThemeManager.storageCB)},CIQ.ThemeManager.deleteTheme=function(t,e){CIQ.ThemeManager.themes.customThemes[e]&&(e==CIQ.ThemeManager.themes.enabledTheme&&CIQ.ThemeManager.enableBuiltInTheme(t,CIQ.ThemeManager.baseTheme),delete CIQ.ThemeManager.themes.customThemes[e],CIQ.ThemeManager.storageCB&&CIQ.ThemeManager.storageCB(JSON.stringify(CIQ.ThemeManager.themes),t))},CIQ.ThemeManager.setThemes=function(t,e){t&&(t.customThemes&&(CIQ.ThemeManager.themes.customThemes=t.customThemes),CIQ.ThemeManager.themes.enabledTheme=t.enabledTheme,CIQ.ThemeManager.themes.enabledTheme&&CIQ.ThemeManager.enableTheme(e,CIQ.ThemeManager.themes.enabledTheme))},CIQ.ThemeManager.enableTheme=function(t,e){function i(){var i=CIQ.ThemeManager.themes.customThemes[e];for(var n in i)if("baseTheme"!=n){var r=CIQ.ThemeManager.classMapping[n];if(r)for(var a in r)t.canvasStyle(a),t.styles[a].color=i[n].color,i[n]["border-left-color"]&&(t.styles[a]["border-left-color"]=i[n]["border-left-color"]),"stx_mountain"==n&&(t.styles[a].backgroundColor=i[n].backgroundColor,t.styles[a].borderTopColor=i[n].borderTopColor,t.styles[a].backgroundColor||(t.styles[a].backgroundColor=i[n].color),t.styles[a].borderTopColor||(t.styles[a].borderTopColor=i[n].color));else t.chart.container&&(t.chart.container.style[n]=i[n])}t.chart.container&&(t.clearPixelCache(),t.draw())}var n=CIQ.ThemeManager.themes.customThemes[e];if(n){var r=n.baseTheme;CIQ.ThemeManager.loadBuiltInTheme(t,r,i),CIQ.ThemeManager.themes.enabledTheme=e,CIQ.ThemeManager.storageCB&&CIQ.ThemeManager.storageCB(JSON.stringify(CIQ.ThemeManager.themes),t)}else CIQ.ThemeManager.loadBuiltInTheme(t,e)},CIQ.ThemeManager.enableBuiltInTheme=function(t,e){CIQ.ThemeManager.loadBuiltInTheme(t,e),CIQ.ThemeManager.themes.enabledTheme=e,CIQ.ThemeManager.storageCB&&CIQ.ThemeManager.storageCB(JSON.stringify(CIQ.ThemeManager.themes),t)},CIQ.ThemeManager.loadBuiltInTheme=function(t,e,i){if(!e)return void(i&&i());var n;for(var r in CIQ.ThemeManager.builtInThemes)n=CIQ.ThemeManager.builtInThemes[r],"string"!=typeof n&&(n=r),t.wrapper?CIQ.unappendClassName($$$(t.wrapper),n):CIQ.unappendClassName($$$("body"),n);n=CIQ.ThemeManager.builtInThemes[e],"string"!=typeof n&&(n=e),t.wrapper?CIQ.appendClassName($$$(t.wrapper),n):CIQ.appendClassName($$$("body"),n),t.styles={},t.chart.container.style.backgroundColor="",CIQ.ThemeManager.baseTheme=e,t.getDefaultColor(),t.displayInitialized&&(t.headsUpHR(),t.clearPixelCache(),t.draw()),i&&i(),t.updateListeners("theme")},CIQ.ThemeManager.themesToMenu=function(t,e,i,n){function r(t){return function(){CIQ.ThemeManager.enableBuiltInTheme(i,t)}}function a(t){return function(){CIQ.ThemeManager.enableTheme(i,t)}}function o(r){return function(){CIQ.ThemeManager.deleteTheme(i,r),CIQ.ThemeManager.themesToMenu(t,e,i,n)}}if(CIQ.ThemeManager.el=t,CIQ.ThemeManager.el2=e,CIQ.ThemeManager.stx=i,CIQ.ThemeManager.storageCB=n,t){for(var s=t.querySelectorAll("li"),l=0;l<s.length;l++)"block"==s[l].style.display&&t.removeChild(s[l]);var h,c,u=t.querySelectorAll(".themeSelectorTemplate")[0];for(h in CIQ.ThemeManager.themes.customThemes){c=u.cloneNode(!0),c.style.display="block";var d=$$$(".stxItem",c);d.innerHTML=h,d[CIQTouchAction]=a(h),t.appendChild(c),$$$(".stxClose",c)[CIQTouchAction]=o(h)}CIQ.clearNode(e);for(h in CIQ.ThemeManager.builtInThemes)c=CIQ.newChild(e,"li"),c[CIQTouchAction]=r(h),c.appendChild(CIQ.translatableTextNode(i,h))}},CIQ.DrawingToolbar=function(t,e,i){this.stx=e,this.callback=i,this.initialize(t),this.setVectorType(null)},CIQ.DrawingToolbar.prototype.initialize=function(t){function e(t){return function(e){t.stx.currentVectorParameters.currentColor="000000"==e||"ffffff"==e?"auto":"#"+e,t.callback&&t.callback()}}function i(t){return function(e){t.stx.currentVectorParameters.fillColor="#"+e,t.callback&&t.callback()}}this.htmlElement=t,t.DrawingToolbar=this;var n=this.htmlElement,r=$$$(".stxLineColorPicker",n);"auto"==this.stx.currentVectorParameters.currentColor?this.stx.currentVectorParameters.currentColor=r.style.backgroundColor:r.style.backgroundColor=this.stx.currentVectorParameters.currentColor,CIQ.MenuManager.attachColorPicker(r,n,e(this));var a=$$$(".stxFillColorPicker",n);"auto"==this.stx.currentVectorParameters.fillColor?this.stx.currentVectorParameters.fillColor=a.style.backgroundColor:a.style.backgroundColor=this.stx.currentVectorParameters.fillColor,CIQ.MenuManager.attachColorPicker(a,n,i(this));var o=$$$(".stxAxisLabel",n);o&&(CIQ.unappendClassName(o,!this.stx.currentVectorParameters.axisLabel),CIQ.appendClassName(o,this.stx.currentVectorParameters.axisLabel)),"italic"==this.stx.currentVectorParameters.annotation.font.style&&CIQ.appendClassName($$$(".stx-toolbar .stx-annotation-italic",t),"active"),"bold"==this.stx.currentVectorParameters.annotation.font.weight&&CIQ.appendClassName($$$(".stx-toolbar .stx-annotation-bold",t),"active"),this.stx.currentVectorParameters.annotation.font.size&&CIQ.DrawingToolbar.setFont(t,this.stx.currentVectorParameters.annotation.font.size),this.stx.currentVectorParameters.annotation.font.family&&CIQ.DrawingToolbar.setFont(t,this.stx.currentVectorParameters.annotation.font.family),this.setLine(this.stx.currentVectorParameters.lineWidth,this.stx.currentVectorParameters.pattern)},CIQ.DrawingToolbar.initialize=function(){},CIQ.DrawingToolbar.prototype.setLineColor=function(t){var e=$$$(".stxLineColorPicker",this.htmlElement);"transparent"==this.stx.currentVectorParameters.currentColor?e.style.backgroundColor=t.defaultColor:e.style.backgroundColor=this.stx.currentVectorParameters.currentColor},CIQ.DrawingToolbar.configurator={".stxToolbarFill":{measure:!1,line:!1,ray:!1,segment:!1,annotation:!1,horizontal:!1,vertical:!1,continuous:!1},".stxToolbarLine":{},".stxToolbarLinePicker":{annotation:!1,fibonacci:!1},".stxToolbarNone":{measure:!1,line:!1,ray:!1,segment:!1,annotation:!1,horizontal:!1,vertical:!1,continuous:!1,fibonacci:!1},".stxToolbarDotted":{},".stxToolbarDashed":{},".stxToolbarAxisLabel":{measure:!1,line:!1,ray:!1,segment:!1,annotation:!1,rectangle:!1,ellipse:!1,continuous:!1,fibonacci:!1},".stxToolbarAnnotation":{measure:!1,line:!1,ray:!1,segment:!1,horizontal:!1,vertical:!1,rectangle:!1,ellipse:!1,continuous:!1,fibonacci:!1},".stxToolbarStylePicker":{measure:!1,line:!1,ray:!1,segment:!1,annotation:!1,horizontal:!1,vertical:!1,rectangle:!1,ellipse:!1,continuous:!1},"#stx-toolbar-settings":{measure:!1,line:!1,ray:!1,segment:!1,annotation:!1,horizontal:!1,vertical:!1,rectangle:!1,ellipse:!1,continuous:!1}},CIQ.extend(CIQ.DrawingToolbar.configurator,{".stxToolbarFill":{freeform:!1,pitchfork:!1,crossline:!1,regression:!1},".stxToolbarLine":{},".stxToolbarLinePicker":{},".stxToolbarNone":{channel:!1,gartley:!1,freeform:!1,pitchfork:!1,callout:!1,crossline:!1,speedline:!1,speedarc:!1,gannfan:!1,timecycle:!1,regression:!1,quadrant:!1,tirone:!1},".stxToolbarDotted":{},".stxToolbarDashed":{},".stxToolbarAxisLabel":{channel:!1,gartley:!1,freeform:!1,pitchfork:!1,callout:!1,shape:!1,speedline:!1,speedarc:!1,gannfan:!1,timecycle:!1,regression:!1,quadrant:!1,tirone:!1},".stxToolbarAnnotation":{channel:!1,gartley:!1,freeform:!1,pitchfork:!1,shape:!1,crossline:!1,speedline:!1,speedarc:!1,gannfan:!1,timecycle:!1,regression:!1,quadrant:!1,tirone:!1},".stxToolbarStylePicker":{channel:!1,gartley:!1,freeform:!1,pitchfork:!1,callout:!1,crossline:!1,speedline:!1,speedarc:!1,gannfan:!1,timecycle:!1,regression:!1,quadrant:!1,tirone:!1},"#stx-toolbar-settings":{channel:!1,gartley:!1,freeform:!1,pitchfork:!1,callout:!1,shape:!1,crossline:!1,speedline:!1,speedarc:!1,gannfan:!1,timecycle:!1,regression:!1,quadrant:!1,tirone:!1}}),CIQ.DrawingToolbar.prototype.setLine=function(t,e){var i="stx-line stxLineDisplay weight"+Math.floor(t);this.stx.currentVectorParameters.lineWidth=t,this.stx.currentVectorParameters.lineWidth==Math.floor(this.stx.currentVectorParameters.lineWidth)&&(this.stx.currentVectorParameters.lineWidth+=.1),"solid"==e?(this.stx.currentVectorParameters.pattern="solid",i+=" style1"):"dotted"==e?(this.stx.currentVectorParameters.pattern="dotted",i+=" style2"):"dashed"==e?(this.stx.currentVectorParameters.pattern="dashed",i+=" style3"):"none"==e&&(this.stx.currentVectorParameters.pattern="none");var n=$$$(".stx-toolbar .stxLineDisplay",this.htmlElement);n&&(n.className=i),this.callback&&this.callback()},CIQ.DrawingToolbar.setLine=function(t,e,i){CIQ.DrawingToolbar.findInstance(i).setLine(t,e)},CIQ.DrawingToolbar.prototype.settingsDialog=function(){this.stx.currentVectorParameters.fibonacci&&CIQ.FibDialog.display(this)},CIQ.DrawingToolbar.settingsDialog=function(t){CIQ.DrawingToolbar.findInstance(t).settingsDialog()},CIQ.DrawingToolbar.prototype.toggleAxisLabel=function(){this.stx.currentVectorParameters.axisLabel=!this.stx.currentVectorParameters.axisLabel;var t=$$$(".stx-toolbar .stxAxisLabel",this.htmlElement);t&&(CIQ.unappendClassName(t,(!this.stx.currentVectorParameters.axisLabel).toString()),
CIQ.appendClassName(t,this.stx.currentVectorParameters.axisLabel.toString())),this.callback&&this.callback()},CIQ.DrawingToolbar.toggleAxisLabel=function(t){CIQ.DrawingToolbar.findInstance(t).toggleAxisLabel()},CIQ.DrawingToolbar.setFont=function(t,e){var i,n=new RegExp("[0-9]+px"),r=CIQ.DrawingToolbar.findInstance(t);"italic"==e?(i=$$$(".stx-toolbar .stx-annotation-italic",r.htmlElement),"italic"==r.stx.currentVectorParameters.annotation.font.style?(r.stx.currentVectorParameters.annotation.font.style=null,CIQ.unappendClassName(i,"active")):(r.stx.currentVectorParameters.annotation.font.style="italic",CIQ.appendClassName(i,"active"))):"bold"==e?(i=$$$(".stx-toolbar .stx-annotation-bold",r.htmlElement),"bold"==r.stx.currentVectorParameters.annotation.font.weight?(r.stx.currentVectorParameters.annotation.font.weight=null,CIQ.unappendClassName(i,"active")):(r.stx.currentVectorParameters.annotation.font.weight="bold",CIQ.appendClassName(i,"active"))):n.test(e)?(r.stx.currentVectorParameters.annotation.font.size=e,$$$(".stx-toolbar .stx-annotation-size > span",r.htmlElement).innerHTML=CIQ.stripPX(e)):"Default"==e?(r.stx.currentVectorParameters.annotation.font.family=null,$$$(".stx-toolbar .stx-annotation-family > span",r.htmlElement).innerHTML=e):(r.stx.currentVectorParameters.annotation.font.family=e,$$$(".stx-toolbar .stx-annotation-family > span",r.htmlElement).innerHTML=e),r.callback&&r.callback()},CIQ.DrawingToolbar.prototype.setVectorType=function(t){var e=this.stx;e.clearMeasure();var i,n,r;if(!t){e.changeVectorType("");for(n in CIQ.DrawingToolbar.configurator)for(i=this.htmlElement.querySelectorAll(n),r=0;r<i.length;r++)i[r].style.display="none";return $$$("#toolSelection",this.htmlElement).innerHTML="",void $$$("#toolSelection",this.htmlElement).appendChild(CIQ.translatableTextNode(e,"Select Tool"))}for(n in CIQ.DrawingToolbar.configurator){i=this.htmlElement.querySelectorAll(n);var a;try{a=(new CIQ.Drawing[t]).configurator}catch(t){}for(a||(a=t),r=0;r<i.length;r++)!1===CIQ.DrawingToolbar.configurator[n][a]?i[r].style.display="none":i[r].style.display=""}"none"!=e.currentVectorParameters.pattern||CIQ.DrawingToolbar.configurator[".stxToolbarNone"][t]||this.setLine(e.currentVectorParameters.lineWidth,"solid"),e.changeVectorType(t),$$$("#toolSelection",this.htmlElement).innerHTML="",$$$("#toolSelection",this.htmlElement).appendChild(CIQ.translatableTextNode(e,t.capitalize())),this.setLineColor(e)},CIQ.DrawingToolbar.setVectorType=function(t,e,i){var n=CIQ.DrawingToolbar.findInstance(i);n||(n=CIQ.DrawingToolbar._default=new CIQ.DrawingToolbar($$$(".stx-toolbar"),t)),n.stx=t,n.setVectorType(e)},CIQ.DrawingToolbar.setDrawingType=function(t,e){CIQ.DrawingToolbar.findInstance(e).setVectorType(t)},CIQ.DrawingToolbar.findInstance=function(t){if(!t)return CIQ.DrawingToolbar._default;for(var e=0;e<40&&!CIQ.hasClassName(t,"stx-toolbar");e++)if(!(t=t.parentNode))return CIQ.DrawingToolbar._default;return t.DrawingToolbar?t.DrawingToolbar:CIQ.DrawingToolbar._default},CIQ.DrawingToolbar.prototype.crosshairs=function(t){var e=this.stx;this.setVectorType(null),e.layout.crosshair=t,$$$("#toolSelection",this.htmlElement).innerHTML="",t?$$$("#toolSelection",this.htmlElement).appendChild(CIQ.translatableTextNode(e,"Crosshairs")):$$$("#toolSelection",this.htmlElement).appendChild(CIQ.translatableTextNode(e,"Select Tool")),e.doDisplayCrosshairs(),e.findHighlights(!1,!0),e.changeOccurred("layout"),e.draw(),e.updateChartAccessories()},CIQ.DrawingToolbar.crosshairs=function(t,e,i){var n=CIQ.DrawingToolbar.findInstance(i);n.stx=t,n.crosshairs(e)},CIQ.DrawingToolbar.setCrosshairs=function(t,e){CIQ.DrawingToolbar.findInstance(e).crosshairs(t)},CIQ.FibDialog=function(){},CIQ.FibDialog.initialize=function(t){for(var e=$$$(".fib-template",t),i=[-.786,-.618,-.5,-.382,-.236,0,.236,.382,.5,.618,.786,1,1.382,1.618,2.618,4.236],n=0;n<i.length;n++){var r=i[n],a=e.cloneNode(!0);a.style.display="block",$$$(".stx-fib-level",a).innerHTML=r,a.fib=r,a.id="stx-fib-"+r.toString().replace(".",""),e.parentNode.appendChild(a)}},CIQ.FibDialog.restore=function(t){CIQ.FibDialog.fibonacci=t;var e,i=document.querySelectorAll(".fib-template");for(e=0;e<i.length;e++)$$$(".check input",i[e]).checked=!1;for(e=0;e<t.fibs.length;e++){var n=t.fibs[e],r=$$$("#stx-fib-"+n.level.toString().replace(".",""));r&&($$$(".check input",r).checked=!0)}},CIQ.FibDialog.save=function(){var t=CIQ.FibDialog.fibonacci;t.fibs=[];for(var e=document.querySelectorAll(".fib-template"),i=0;i<e.length;i++){var n=e[i];$$$(".check input",n).checked&&t.fibs.push({level:n.fib,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}})}return CIQ.FibDialog.drawingToolbar&&(CIQ.FibDialog.drawingToolbar.stx.currentVectorParameters.fibonacci=t,CIQ.FibDialog.drawingToolbar.callback&&CIQ.FibDialog.drawingToolbar.callback()),t},CIQ.FibDialog.setLine=function(t,e){alert(e)},CIQ.FibDialog.display=function(t){var e=$$$("#fibDialog");CIQ.FibDialog.drawingToolbar=t,CIQ.FibDialog.restore(t.stx.currentVectorParameters.fibonacci),CIQ.DialogManager.displayDialog(e)},CIQ.LookupWidget=function(t){this.config=t,this.div=null,this.currentFilter=null,this.filterButtons=[],this.height=480},CIQ.LookupWidget.prototype.displayResults=function(t){function e(t,e){return function(){t.config.input.value="object"==typeof e?e.symbol:e,t.config.selectCallback(t,e,t.currentFilter),t.close(),t.config.input.blur()}}if(this.ul&&CIQ.clearNode(this.ul),!(t.length>0))return void(!this.config.filters&&this.div&&(this.div.style.display="none"));this.display();for(var i=0;i<t.length;i++){var n=t[i],r=CIQ.newChild(this.ul,"LI");CIQ.newChild(r,"span").innerHTML=n.symbol;var a=CIQ.newChild(r,"span");null!==n.description&&"undefined"!=typeof n.description||(n.description=n.name),a.innerHTML=n.description;var o=CIQ.newChild(r,"span");null!==n.exchange&&"undefined"!=typeof n.exchange||(n.exchange=n.exchDisp),n.exchange&&o.appendChild(this.config.stx?CIQ.translatableTextNode(this.config.stx,n.exchange):n.exchange),this.config.allowSymbolObject?CIQ.ScrollManager.attach(r,e(this,n)):CIQ.ScrollManager.attach(r,e(this,n.symbol))}this.iscroll?(this.iscroll.refresh(),this.iscroll.scrollTo(0,0)):this.iscroll=CIQ.iscroll.newScroller(this.ul.parentNode)},CIQ.LookupWidget.prototype.init=function(){function t(t){return function(e){var i=CIQ.getEventDOM(e);switch(window.event?event.keyCode:e.keyCode){case 13:if(t.config.mustSelect)break;var n=i.value;t.close(),t.config.selectCallback(t,n,t.currentFilter),i.blur();break;case 27:t.close(),i.blur();break;default:t.config.textCallback(t,i.value,t.currentFilter,!1)}e=e||event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}}function e(t){return function(e){var i=CIQ.getEventDOM(e);t.config.textCallback(t,i.value,t.currentFilter,!0)}}this.config.input.onkeyup=t(this),this.config.input.onclick=e(this)},CIQ.LookupWidget.prototype.display=function(){function t(t,e,i){return function(){for(var n=0;n<t.filterButtons.length;n++)CIQ.unappendClassName(t.filterButtons[n],"on");CIQ.appendClassName(e,"on"),t.currentFilter=i,t.config.textCallback(t,t.config.input.value,t.currentFilter)}}function e(t){return function(){t.div&&(t.div.style.display="none")}}if(this.div)"none"==this.div.style.display&&(this.config.cascade||CIQ.MenuManager.menuOff(!0,!0)),this.div.style.display="inline-block";else{this.div=CIQ.newChild(this.config.input.parentNode,"DIV","menuOutline stxLookupResults");var i,n=CIQ.newChild(this.div,"UL","stxResults");if(this.config.filters){i=CIQ.newChild(n,"LI","stxLookupFilter");for(var r=0;r<this.config.filters.length;r++){var a=this.config.filters[r],o=CIQ.newChild(i,"div","stx-btn");o.appendChild(this.config.stx?CIQ.translatableTextNode(this.config.stx,a):a),o[CIQTouchAction]=t(this,o,a),this.filterButtons.push(o)}CIQ.newChild(n,"LI","divider")}i=CIQ.newChild(n,"LI"),this.ul=CIQ.newChild(i,"UL","menuSelect");var s=this.config.className;s||(s="stxLookupSymbols"),CIQ.appendClassName(this.ul,s),i.style.maxHeight=this.height+"px",this.config.cascade||CIQ.MenuManager.menuOff(!0,!0)}CIQ.MenuManager.menuOn("lookup",e(this),this.config.cascade)},CIQ.LookupWidget.prototype.close=function(){this.div&&(this.div.style.display="none"),CIQ.MenuManager.menuOff(!0)},CIQ.TimeZoneWidget=function(){},CIQ.TimeZoneWidget.init=function(){if(void 0!==timezoneJS){CIQ.TimeZoneWidget.timezoneMenu={};for(var t in timezoneJS.timezone.zones){var e=t.split("/"),i=e[0];if(CIQ.TimeZoneWidget.timezoneMenu[i]||(CIQ.TimeZoneWidget.timezoneMenu[i]=[]),e.length>1){var n=e[1];e.length>2&&(n+="/"+e[2]),CIQ.TimeZoneWidget.timezoneMenu[i].push(n)}}}},CIQ.TimeZoneWidget.setTimeZone=function(t){CIQ.ChartEngine.defaultDisplayTimeZone=t;for(var e=0;e<CIQ.ChartEngine.registeredContainers.length;e++){var i=CIQ.ChartEngine.registeredContainers[e].stx;i.setTimeZone(i.dataZone,t),i.chart.symbol&&i.draw()}},CIQ.TimeZoneWidget.removeTimeZone=function(){CIQ.ChartEngine.defaultDisplayTimeZone=null;for(var t=0;t<CIQ.ChartEngine.registeredContainers.length;t++){var e=CIQ.ChartEngine.registeredContainers[t].stx;e.displayZone=null,e.setTimeZone(),CIQ.TimeZoneWidget.storageCB&&CIQ.TimeZoneWidget.storageCB(null),e.displayInitialized&&e.draw()}},CIQ.TimeZoneWidget.populateDialog=function(t){function e(t){return function(){CIQ.DialogManager.dismissDialog();var e=CIQ.timeZoneMap[t];CIQ.TimeZoneWidget.setTimeZone(e),CIQ.TimeZoneWidget.storageCB&&CIQ.TimeZoneWidget.storageCB(e)}}if(CIQ.TimeZoneWidget.timezoneMenu||CIQ.TimeZoneWidget.init(),void 0!==timezoneJS){var i=$$(t);if(i){var n=i.querySelector("ul"),r=n.querySelector("li#timezoneTemplate").cloneNode(!0);CIQ.clearNode(n),n.appendChild(r);var a,o=[];for(a in CIQ.timeZoneMap)o.push(a);for(var s=0;s<o.length;s++){a=o[s];var l=a,h=r.cloneNode(!0);h.style.display="block",h.innerHTML=l,CIQ.ScrollManager.attach(h,e(a)),n.appendChild(h)}CIQ.TimeZoneWidget.iscroll?CIQ.TimeZoneWidget.iscroll.refresh():CIQ.TimeZoneWidget.iscroll=CIQ.iscroll.newScroller("#timezoneDialogWrapper",{tap:!0,scrollbars:!1,interactiveScrollbars:!1,mouseWheel:!0})}}},CIQ.TimeZoneWidget.initialize=function(t,e){t&&CIQ.TimeZoneWidget.setTimeZone(t),CIQ.TimeZoneWidget.storageCB=e},CIQ.ScrollManager=function(){},CIQ.ScrollManager.x=0,CIQ.ScrollManager.y=0,CIQ.ScrollManager.downTime=0,CIQ.ScrollManager.attach=function(t,e){navigator.pointerEnabled?t.addEventListener("pointerdown",CIQ.ScrollManager.start):navigator.msMaxTouchPoints>1?t.addEventListener("MSPointerDown",CIQ.ScrollManager.start):(t.addEventListener("mousedown",CIQ.ScrollManager.start),t.addEventListener("touchstart",CIQ.ScrollManager.start)),t.addEventListener("tap",function(e){return function(i){(!t.tapped||Date.now()-t.tapped>750)&&e(i),t.tapped=Date.now()}}(e)),t.addEventListener("click",function(e){return function(i){CIQ.ScrollManager.isClick(i)&&((!t.tapped||Date.now()-t.tapped>750)&&e(i),t.tapped=Date.now())}}(e))},CIQ.ScrollManager.start=function(t){CIQ.ScrollManager.x=t.pageX,CIQ.ScrollManager.y=t.pageY,t.touches&&t.touches.length>=1&&(CIQ.ScrollManager.x=t.touches[0].pageX,CIQ.ScrollManager.y=t.touches[0].pageY),CIQ.ScrollManager.downTime=(new Date).getTime()},CIQ.ScrollManager.isClick=function(t){return!((new Date).getTime()-CIQ.ScrollManager.downTime>2e3||Math.abs(t.pageX-CIQ.ScrollManager.x)>10||Math.abs(t.pageY-CIQ.ScrollManager.y)>10)},CIQ.ScrollManager.attachRightClick=function(t,e){function i(t){return function(e){(e.which&&e.which>=2||e.button&&e.button>=2)&&t(e)}}navigator.pointerEnabled?t.addEventListener("pointerup",i(e)):navigator.msMaxTouchPointers>1?t.addEventListener("MSPointerUp",i(e)):t.addEventListener("mouseup",i(e)),t.rightClickable=!0},CIQ.ScrollManager.onContextMenu=function(t){if(t.target.rightClickable)return t.preventDefault(),!1},document.addEventListener("contextmenu",CIQ.ScrollManager.onContextMenu,!1),CIQ.Watch=function(){},CIQ.Watch.lists=[],CIQ.Watch.currentList=null,CIQ.Watch.currentSymbol=0,CIQ.Watch.openNewListDialog=function(){$$$("#stxWatchEditName").value="",$$$("#stxWatchEditTA").value="",CIQ.DialogManager.displayDialog("stxWatchEditDialog")},CIQ.Watch.openEditListDialog=function(){var t=CIQ.Watch.lists[CIQ.Watch.currentList],e=CIQ.first(t);$$$("#stxWatchEditName").value=e;for(var i="",n=!0,r=0;r<t[e].length;r++)n?n=!1:i+=" ",i+=t[e][r];$$$("#stxWatchEditTA").value=i,CIQ.DialogManager.displayDialog("stxWatchEditDialog")},CIQ.Watch.saveEditList=function(){var t=$$$("#stxWatchEditTA"),e=$$$("#stxWatchEditName").value;if(e){var i,n={},r=!1;for(i=0;i<CIQ.Watch.lists.length;i++)CIQ.first(CIQ.Watch.lists[i])==e&&(r=!0,n=CIQ.Watch.lists[i]);r||(CIQ.Watch.lists.push(n),CIQ.Watch.currentList=CIQ.Watch.lists.length-1,CIQ.Watch.currentSymbol=-1,CIQ.unappendClassName($$$("#stxWatchDown"),"false")),CIQ.DialogManager.dismissDialog();var a=t.value.split(/\s/),o=[];for(i in a)a[i]&&o.push(a[i].toUpperCase());n[e]=o,CIQ.Watch.refreshDisplay(),CIQ.Watch.stxStorageManager.store("stx-watchLists",JSON.stringify(CIQ.Watch.lists))}},CIQ.Watch.deleteCurrentList=function(){CIQ.Watch.lists.splice(CIQ.Watch.currentList,1),CIQ.Watch.currentList>=CIQ.Watch.lists.length&&(CIQ.Watch.currentList=CIQ.Watch.lists.length-1),CIQ.Watch.currentList<0&&(CIQ.Watch.currentList=0),CIQ.Watch.enableList(CIQ.Watch.currentList),CIQ.Watch.lists.length?CIQ.Watch.stxStorageManager.store("stx-watchLists",JSON.stringify(CIQ.Watch.lists)):CIQ.Watch.stxStorageManager.remove("stx-watchLists")},CIQ.Watch.enableList=function(t){CIQ.Watch.currentList=t,CIQ.Watch.currentSymbol=-1,CIQ.Watch.refreshDisplay(),CIQ.Watch.lists.length>0&&CIQ.Watch.enableSymbol(-1)},CIQ.Watch.enableSymbol=function(t){for(var e,i=CIQ.Watch.lists[CIQ.Watch.currentList],n=i[CIQ.first(i)],r=document.querySelectorAll("#stxWatch-inner li"),a=0;a<r.length;a++){var o=r[a];o.className=null,a==t&&(CIQ.Watch.currentSymbol=t,e=n[t],o.className="current")}CIQ.Watch.currentSymbol<=0?(CIQ.appendClassName($$$("#stxWatchPrev"),"false"),CIQ.appendClassName($$$("#stxWatchUp"),"false")):(CIQ.unappendClassName($$$("#stxWatchPrev"),"false"),CIQ.unappendClassName($$$("#stxWatchUp"),"false")),CIQ.Watch.currentSymbol==n.length-1?(CIQ.appendClassName($$$("#stxWatchNext"),"false"),CIQ.appendClassName($$$("#stxWatchDown"),"false")):(CIQ.unappendClassName($$$("#stxWatchNext"),"false"),CIQ.unappendClassName($$$("#stxWatchDown"),"false")),e?($$$("#stxWatchSymbol").innerHTML=e,CIQ.Watch.stxLookupWidget.config.selectCallback(null,e)):$$$("#stxWatchSymbol").innerHTML="&nbsp;"},CIQ.Watch.rightClickSymbol=function(t,e){return CIQ.Watch.enableSymbol(t,e)},CIQ.Watch.move=function(t){if(!(CIQ.Watch.lists.length<=0)){CIQ.Watch.currentSymbol+=t,CIQ.Watch.currentSymbol<0&&(CIQ.Watch.currentSymbol=0);var e=CIQ.Watch.lists[CIQ.Watch.currentList],i=e[CIQ.first(e)];CIQ.Watch.currentSymbol>=i.length&&(CIQ.Watch.currentSymbol=i.length-1),CIQ.Watch.enableSymbol(CIQ.Watch.currentSymbol),CIQ.Watch.symbolScroll.scrollToElement("#stxWatch-inner li:nth-child("+CIQ.Watch.currentSymbol+")",250),CIQ.Watch.symbolScroll.refresh()}},CIQ.Watch.createSymbolEntry=function(t,e){t.innerHTML=e},CIQ.Watch.refreshDisplay=function(){function t(t){return function(){CIQ.Watch.enableSymbol(t)}}function e(t){return function(){CIQ.Watch.rightClickSymbol(t)}}function i(t){return function(){CIQ.Watch.enableList(t)}}var n=$$$("#stxWLWrapper");CIQ.clearNode(n);var r=$$$("#stxWatch-inner");CIQ.clearNode(r);for(var a=0;a<CIQ.Watch.lists.length;a++){var o=CIQ.Watch.lists[a],s=CIQ.newChild(n,"li");CIQ.newChild(s,"div","save");var l=CIQ.newChild(s,"div","edit");CIQ.safeClickTouch(l,CIQ.Watch.openEditListDialog);var h=CIQ.newChild(s,"div","delete");CIQ.safeClickTouch(h,CIQ.Watch.deleteCurrentList);var c=CIQ.newChild(s,"div","list"),u=CIQ.first(o);if(c.innerHTML=u,CIQ.Watch.currentList==a){s.className="current";for(var d=o[u],p=0;p<d.length;p++){var f=CIQ.newChild(r,"li");CIQ.Watch.createSymbolEntry(f,d[p]),CIQ.Watch.currentSymbol==p&&(f.className="current"),CIQ.ScrollManager.attach(f,t(p)),CIQ.ScrollManager.attachRightClick(f,e(p))}}CIQ.ScrollManager.attach(s,i(a))}n.childNodes.length||CIQ.newChild(n,"li"),r.childNodes.length||CIQ.newChild(r,"li"),CIQ.Watch.lists.length>0?CIQ.swapClassName($$$("#stxWatch"),"true","false"):(CIQ.swapClassName($$$("#stxWatch"),"false","true"),CIQ.appendClassName($$$("#stxWatchUp"),"false"),CIQ.appendClassName($$$("#stxWatchDown"),"false"));var m=$$$("#stxWatch-symbols").parentNode,g=$$$(".stx-panel-side").clientHeight;m.style.height=g-m.offsetTop+"px",CIQ.Watch.symbolScroll.refresh(),CIQ.Watch.listScroll.refresh()},CIQ.Watch.initialize=function(t,e){CIQ.Watch.stxLookupWidget=e,CIQ.Watch.stxStorageManager=t;var i=t.get("stx-watchLists");i&&(CIQ.Watch.lists=JSON.parse(i)),$$$("#stxNewWatchList").onclick=CIQ.Watch.openNewListDialog,$$$("#stxWatchCancelEdit").onclick=CIQ.DialogManager.dismissDialog,$$$("#stxWatchSaveEdit").onclick=CIQ.Watch.saveEditList,$$$("#stxWatchUp").onclick=function(t){return function(){CIQ.Watch.move(t)}}(-1),$$$("#stxWatchDown").onclick=function(t){return function(){CIQ.Watch.move(t)}}(1),$$$("#stxWatchPrev").onclick=function(t){return function(){CIQ.Watch.move(t)}}(-1),$$$("#stxWatchNext").onclick=function(t){return function(){CIQ.Watch.move(t)}}(1),CIQ.Watch.lists.length>0&&(CIQ.Watch.currentList=0),CIQ.Watch.symbolScroll=CIQ.iscroll.newScroller($$$("#stxWatch-symbols").parentNode,{tap:!0,scrollbars:!1,interactiveScrollbars:!1,mouseWheel:!0}),CIQ.Watch.listScroll=CIQ.iscroll.newScroller($$$("#stxWatchLists").parentNode,{tap:!0,scrollbars:!1,interactiveScrollbars:!1,mouseWheel:!0}),CIQ.Watch.enableList(0),window.addEventListener("resize",CIQ.Watch.refreshDisplay)},CIQ.Views=function(){},CIQ.Views.views=[],CIQ.Views.currentView=-1,CIQ.Views.saveView=function(){for(var t,e=$$$("#stxViewEditName").value,i=0;i<CIQ.Views.views.length;i++)if(t=CIQ.Views.views[i],e==CIQ.first(t)){CIQ.Views.currentView=i,CIQ.Views.refreshDisplay();break}i==CIQ.Views.views.length&&(t={},t[e]={},CIQ.Views.views.push(t),CIQ.Views.currentView=CIQ.Views.views.length-1,CIQ.Views.refreshDisplay()),CIQ.DialogManager.dismissDialog(),t[e]=CIQ.Views.stx.exportLayout(),delete t[e].candleWidth,CIQ.Views.stxStorageManager.store("stx-views",JSON.stringify(CIQ.Views.views))},CIQ.Views.openNewViewDialog=function(){$$$("#stxViewEditName").value="",CIQ.DialogManager.displayDialog("stxViewSaveDialog")},CIQ.Views.updateGUI=null,CIQ.Views.indexOf=function(t){for(var e=0;e<CIQ.Views.views.length;e++)if(CIQ.Views.views[e][t])return e;return-1},CIQ.Views.enableView=function(t){var e=CIQ.Views.views[t],i=e[CIQ.first(e)];CIQ.Views.stx.importLayout(i,CIQ.Views.managePeriodicity,!0),CIQ.Views.currentView=t,CIQ.Views.refreshDisplay(),CIQ.Views.updateGUI&&CIQ.Views.updateGUI(t),CIQ.Views.stx.changeCallback&&CIQ.Views.stx.changeCallback(CIQ.Views.stx,"layout")},CIQ.Views.deleteView=function(t){var e=CIQ.first(CIQ.Views.views[t]);CIQ.Views.views.splice(t,1),CIQ.Views.currentView=-1;for(var i=0;i<CIQ.Views.length;i++)e==CIQ.first(CIQ.Views.views[i])&&(CIQ.Views.currentView=i);CIQ.Views.refreshDisplay(),CIQ.Views.views.length?CIQ.Views.stxStorageManager.store("stx-views",JSON.stringify(CIQ.Views.views)):CIQ.Views.stxStorageManager.remove("stx-views")},CIQ.Views.refreshDisplay=function(){function t(t){return function(){CIQ.Views.enableView(t)}}function e(t){return function(){CIQ.Views.deleteView(t)}}var i=$$$("#stxViewWrapper");if(i){CIQ.clearNode(i);for(var n=0;n<CIQ.Views.views.length;n++){var r=CIQ.Views.views[n],a=CIQ.newChild(i,"li");a.innerHTML=CIQ.first(r),CIQ.Views.currentView==n&&(a.className="current"),CIQ.ScrollManager.attach(a,t(n)),CIQ.ScrollManager.attachRightClick(a,e(n))}var o=$$$("#stxViews"),s=$$$("#stxSavedViews").parentNode;s.rightClickable=!0;var l=o.clientWidth-$$$("#stxNewView").offsetLeft;s.style.width=o.clientWidth-s.offsetLeft-l+"px",CIQ.Views.scroll.refresh()}},CIQ.Views.initialize=function(t,e,i){CIQ.Views.managePeriodicity=i,CIQ.Views.stx=t,CIQ.Views.stxStorageManager=e;var n=e.get("stx-views");n&&(CIQ.Views.views=JSON.parse(n)),$$$("#stxNewView")&&($$$("#stxNewView").onclick=CIQ.Views.openNewViewDialog,$$$("#stxViewCancelEdit").onclick=CIQ.DialogManager.dismissDialog,$$$("#stxViewSaveEdit").onclick=CIQ.Views.saveView,CIQ.Views.scroll=CIQ.iscroll.newScroller($$$("#stxSavedViews").parentNode,{tap:!0,scrollbars:!1,interactiveScrollbars:!1,mouseWheel:!0,scrollY:!1,scrollX:!0}),CIQ.Views.refreshDisplay(),window.addEventListener("resize",CIQ.Views.refreshDisplay))},CIQ.SearchableWordList=function(t,e,i){if(t){e||(e=50),i||(i=!1);for(var n={records:[],words:[]},r=0;r<t.length;r++){var a=t[r];a.name||(a.name=a.id),a.index=n.records.push(a)-1;var o=a.name.split(" ");a.keywords&&(o=o.concat(a.keywords.split(" ")));for(var s=0;s<o.length;s++){var l=o[s].toUpperCase(),h="_",c="_";l.charCodeAt(0)>=33&&l.charCodeAt(0)<=126&&(h=l.charAt(0)),n.words[h]||(n.words[h]=[]),l.length>1?l.charCodeAt(1)>=33&&l.charCodeAt(1)<=126&&(c=l.charAt(1)):c=" ",n.words[h][c]||(n.words[h][c]=[]),n.words[h][c].push({index:a.index,word:l})}}this.lookup=function(t,r,a){function o(t,e){return t.id>e.id?1:t.id<e.id?-1:t.weight>e.weight?1:-1}function s(t,e){return t.weight>e.weight?1:t.weight<e.weight?-1:t.name>e.name?1:-1}function l(t,e){t.weight=0,e.weight=0;for(var i=0;i<x.length;i++){var n=x[i].toUpperCase(),r=t.name.toUpperCase().indexOf(n),a=e.name.toUpperCase().indexOf(n);if(-1==r)return 1;if(-1==a)return-1;t.weight+=r,e.weight+=a}return t.weight>e.weight?1:t.weight<e.weight?-1:t.name>e.name?1:-1}function h(t){for(var e=[],i="",n=0;n<t.length;n++)i!=t[n].id&&(e.push(t[n]),i=t[n].id);return e}var c=[];if(t&&n){var u,d,p=[],f=t.toUpperCase(),m=[];for(u=0;u<n.records.length;u++)if(d=n.records[u],!(p[d.index]||r&&d.category!=r)){var g=d.name.toUpperCase();if("*"==f)m.push(CIQ.extend(n.records[d.index],{weight:0})),p[d.index]=!0;else{var v=g.indexOf(f);if(v>-1){var y=g.length-f.length;if(!i&&v>0)continue;(y?c:m).push(CIQ.extend(n.records[d.index],{weight:y})),p[d.index]=!0}}}var x=f.split(" "),b="_",C="_",w=x[0].toUpperCase(),S=[];if(w.charCodeAt(0)>=33&&w.charCodeAt(0)<=126&&(b=w.charAt(0)),w.length>1?w.charCodeAt(1)>=33&&w.charCodeAt(1)<=126&&(C=w.charAt(1)):C=" ",n.words[b])for(var T in n.words[b])if(!(T.length>1)){for(" "!=C&&(T=C),u=0;n.words[b][T]&&u<n.words[b][T].length;u++)d=n.words[b][T][u],0===d.word.toUpperCase().indexOf(w)&&(p[d.index]||r&&n.records[d.index].category!=r||(S.push(CIQ.clone(n.records[d.index])),p[d.index]=!0));if(" "!=C)break}for(var D=1;D<x.length;D++){w=x[D].toUpperCase();for(var M=S.length-1;M>=0;M--){var k=S[M].name.split(" ");S[M].keywords&&(k=k.concat(S[M].keywords.split(" ")));for(var _=!1,E=0;E<k.length;E++)if(0===k[E].toUpperCase().indexOf(w)){_=!0;break}_||S.splice(M,1)}}m.sort(o),m=h(m),c.sort(o),c=h(c),c.length=Math.min(c.length,e),S.sort(o),S=h(S),c=m.sort(s).concat(c.sort(s),S.sort(l)),c.length=Math.min(c.length,e)}if(!a)return c;a(c)}}},CIQ.Studies.studyDialog=function(t,e,i,n){i.study=e,i.stx=t,n&&n.inputs&&n.inputs.id?i.replaceID=n.inputs.id:i.replaceID&&delete i.replaceID;var r,a=t.chart,o=i.querySelectorAll("#inputs")[0],s=o.querySelectorAll(".inputTemplate");for(r=0;r<s.length;r++)"none"!=s[r].style.display&&o.removeChild(s[r]);var l=i.querySelectorAll("#outputs")[0],h=l.querySelectorAll(".outputTemplate");for(r=0;r<h.length;r++)"none"!=h[r].style.display&&l.removeChild(h[r]);var c=CIQ.Studies.studyLibrary[e];c||(c={}),"undefined"==typeof c.inputs&&(c.inputs={Period:14}),"undefined"==typeof c.outputs&&(c.outputs={Result:"auto"});var u=function(e,i,n){var r=document.createElement("OPTION");r.value=e,r.text=t.translateIf(i),n.add(r,null)};for(r in c.inputs){var d=s[0].cloneNode(!0);o.appendChild(d),d.style.display="block",d.querySelectorAll(".stx-heading")[0].appendChild(CIQ.translatableTextNode(t,r)),d.querySelectorAll(".stx-heading")[0].fieldName=r;var p=null,f=c.inputs[r],m=n&&n.inputs&&null!==n.inputs[r]&&"undefined"!=typeof n.inputs[r]?n.inputs[r]:f;if(f.constructor==Number)p=document.createElement("input"),p.setAttribute("type","number"),p.value=m;else if(f.constructor==String)if("ma"==f||"ema"==f||"tma"==f||"vma"==f||"wma"==f||"tsma"==f||"smma"==f||"vdma"==f)p=document.createElement("select"),u("simple","Simple",p),u("exponential","Exponential",p),u("time series","Time Series",p),u("triangular","Triangular",p),u("variable","Variable",p),u("vidya","VIDYA",p),u("weighted","Weighted",p),u("welles wilder","Welles Wilder",p),p.value=m,"ma"==m&&(p.selectedIndex=0),"ema"==m&&(p.selectedIndex=1),"tsma"==m&&(p.selectedIndex=2),"tma"==m&&(p.selectedIndex=3),"vma"==m&&(p.selectedIndex=4),"vdma"==m&&(p.selectedIndex=5),"wma"==m&&(p.selectedIndex=6),"smma"==m&&(p.selectedIndex=7);else if("field"==f){p=document.createElement("select");var g=0;for(var v in a.dataSet[a.dataSet.length-1]){if(-1==["Open","High","Low","Close","Adj_Close","hl/2","hlc/3","hlcc/4","ohlc/4"].indexOf(v)){if(-1==CIQ.Studies.actualOutputs.indexOf(v))continue;var y=!1;if(n)for(var x in n.sd.outputMap)-1!=v.indexOf(x)&&-1==v.indexOf(x+"-")&&(y=!0);if(y)continue}u(v,v,p),"Close"==v&&(p.selectedIndex=g),g++}"field"!=m&&(p.value=m)}else p=document.createElement("input"),p.type="text",p.value=m;else if(f.constructor==Boolean)p=document.createElement("input"),p.setAttribute("type","checkbox"),!0!==m&&"true"!=m||(p.checked=!0),"Overlay"==r&&n&&n.parameters.editMode&&(p.checked?p.disabled=!0:d.style.display="none");else if(f.constructor==Array){p=document.createElement("select");for(var b=0;b<f.length;b++)u(f[b],f[b],p);m.constructor!=Array&&(p.value=m)}p&&d.querySelectorAll(".stx-data")[0].appendChild(p)}for(r in c.outputs){var C=h[0].cloneNode(!0);l.appendChild(C),C.style.display="block",C.querySelectorAll(".stx-heading")[0].appendChild(CIQ.translatableTextNode(t,r)),C.querySelectorAll(".stx-heading")[0].fieldName=r;var w=C.querySelectorAll(".stx-color")[0],S=c.outputs[r];n&&n.outputs&&n.outputs[r]&&(S=n.outputs[r]),"auto"!=S?(w.style.backgroundColor=S,CIQ.unappendClassName(w,"stxColorDarkChart")):"#FFFFFF"==t.defaultColor&&CIQ.appendClassName(w,"stxColorDarkChart"),CIQ.attachColorPicker(w,i)}var T=i.querySelectorAll("#parameters")[0];if(T&&(CIQ.clearNode(T),c.parameters&&c.parameters.template&&c.parameters.init)){if(c.parameters.condition&&!c.parameters.condition(t))return;var D=document.querySelectorAll("#"+c.parameters.template)[0];if(D){D=D.cloneNode(!0),D.style.display="block",T.appendChild(D);for(var M in c.parameters.init){var k=c.parameters.init[M];n&&n.parameters&&"undefined"!=typeof n.parameters[M]&&null!==n.parameters[M]&&(k=n.parameters[M]);var _=D.querySelectorAll("#"+M)[0];_&&("INPUT"==_.tagName?"checkbox"==_.type?_.checked=!0===k||"true"==k:_.value=k:("auto"==k?(k="","#FFFFFF"==t.defaultColor&&CIQ.appendClassName(_,"stxColorDarkChart")):CIQ.unappendClassName(_,"stxColorDarkChart"),_.style.backgroundColor=k,CIQ.attachColorPicker(_,i)))}}}},CIQ.createColorPicker=function(t,e){function i(t){return function(){return e(t),!1}}var n=CIQ.colorPickerColors;CIQ.clearNode(t);var r=document.createElement("ul");t.appendChild(r);for(var a=0;a<n.length;a++){var o=n[a],s=document.createElement("li"),l=document.createElement("a");s.appendChild(l),l.href="#",l.title=o,l.style.background="#"+o,l.innerHTML=o,r.appendChild(s),l.onclick=i(o)}},CIQ.attachColorPicker=function(t,e,i){var n=function(t,e,i){return function(n){e.colorPickerDiv&&(e.colorPickerDiv.style.display="none"),t.style.backgroundColor="#"+n,i&&i(n)}};t.onclick=function(t,e){return function(){e.colorPickerDiv||(e.colorPickerDiv=document.createElement("DIV"),e.colorPickerDiv.className="ciqColorPicker",document.body.appendChild(e.colorPickerDiv)),CIQ.createColorPicker(e.colorPickerDiv,t),e.colorPickerDiv.style.display="block";var i=CIQ.getPos(this),n=i.x+this.offsetWidth;n+e.colorPickerDiv.offsetWidth>CIQ.pageWidth()&&(n=CIQ.pageWidth()-e.colorPickerDiv.offsetWidth-20),e.colorPickerDiv.style.left=n+"px";var r=i.y;r+e.colorPickerDiv.clientHeight>CIQ.pageHeight()&&(r=CIQ.pageHeight()-e.colorPickerDiv.offsetHeight-20),e.colorPickerDiv.style.top=r+"px"}}(n(t,e,i),e)},CIQ.colorPickerColors=["ffffff","ffd0cf","ffd9bb","fff56c","eaeba3","d3e8ae","adf3ec","ccdcfa","d9c3eb","efefef","eb8b87","ffb679","ffe252","e2e485","c5e093","9de3df","b1c9f8","c5a6e1","cccccc","e36460","ff9250","ffcd2b","dcdf67","b3d987","66cac4","97b8f7","b387d7","9b9b9b","dd3e39","ff6a23","faaf3a","c9d641","8bc176","33b9b0","7da6f5","9f6ace","656565","b82c0b","be501b","e99b54","97a030","699158","00a99d","5f7cb8","784f9a","343434","892008","803512","ab611f","646c20","46603a","007e76","3e527a","503567","000000","5c1506","401a08","714114","333610","222f1d","00544f","1f2a3c","281a33"],CIQ.Studies.parseDialog=function(t){var e,i,n={},r={},a=t.querySelectorAll(".inputTemplate");for(e=0;e<a.length;e++)if("none"!=a[e].style.display){i=a[e].querySelectorAll(".stx-heading")[0].fieldName;var o=a[e].querySelectorAll(".stx-data")[0].childNodes[0],s=o.value;"checkbox"==o.getAttribute("type")?n[i]=o.checked:n[i]=s}var l=t.querySelectorAll(".outputTemplate");for(e=0;e<l.length;e++)if("none"!=l[e].style.display&&void 0!==(i=l[e].querySelectorAll(".stx-heading")[0].fieldName)){var h=l[e].querySelectorAll(".stx-color")[0].style.backgroundColor;h||(h="auto"),r[i]=h}var c={};return CIQ.Studies.getCustomParameters(t,c),c.replaceID=t.replaceID,{inputs:n,outputs:r,parameters:c}},CIQ.Studies.go=function(t,e){var i=CIQ.Studies.parseDialog(t,e);return i=CIQ.Studies.addStudy(t.stx,t.study,i.inputs,i.outputs,i.parameters)},CIQ.Studies.getCustomParameters=function(t,e){var i=CIQ.Studies.studyLibrary[t.study];if(i&&i.parameters&&i.parameters.template&&i.parameters.init){var n=t.querySelectorAll("#"+i.parameters.template)[0];if(n)for(var r in i.parameters.init){var a=n.querySelectorAll("#"+r)[0];a&&("INPUT"==a.tagName?"checkbox"==a.type?e[r]=a.checked:e[r]=a.value:e[r]=a.style.backgroundColor)}}},CIQ.Studies.displayKlinger=CIQ.Studies.displayHistogramWithSeries,CIQ.Studies.displayMACD=CIQ.Studies.displayHistogramWithSeries,CIQ.Marker.AboveCandle=function(t){this.className||(this.className="CIQ.Marker.AboveCandle"),CIQ.Marker.call(this,t)},CIQ.Marker.AboveCandle.ciqInheritsFrom(CIQ.Marker,!1),CIQ.Marker.AboveCandle.placementFunction=function(t){for(var e=t.panel,i=t.yAxis?t.yAxis:t.panel.yAxis,n=e.chart,r=t.stx,a=CIQ.ChartEngine.chartShowsHighs(r.layout.chartType),o={},s=0;s<t.arr.length;s++){var l=t.arr[s],h=l.node;l.clientWidth||(l.clientWidth=h.clientWidth),l.clientHeight||(l.clientHeight=h.clientHeight);var c=null;if("bar"==l.params.xPositioner){if(l.params.x<n.xaxis.length){var u=n.xaxis[l.params.x];u&&(c=u.data)}h.style.left=Math.round(r.pixelFromBar(l.params.x,n)-l.clientWidth/2)+1+"px"}else{if(!l.tick&&0!==l.tick){if(!(l.params.future&&n.scroll<n.maxTicks)){h.style.left="-1000px";continue}if(r.futureTickIfDisplayed(l),!l.tick&&0!==l.tick){h.style.left="-1000px";continue}}if(l.tick<n.dataSet.length&&(c=n.dataSet[l.tick]),l.tick<t.firstTick&&l.rightEdge<0)continue;l.leftpx=Math.round(r.pixelFromTick(l.tick,n)-n.left-l.clientWidth/2),l.rightEdge=l.leftpx+h.clientWidth,h.style.left=l.leftpx+"px"}c||(c=n.dataSet[n.dataSet.length-1]),"undefined"!=typeof o[h.style.left]?o[h.style.left]+=1:o[h.style.left]=0;var d=l.params.chartContainer?r.height:e.yAxis.bottom,p=0;o[h.style.left]&&(p=(h.clientHeight+2)*o[h.style.left]);var f;f=a?Math.round(d-r.pixelFromPriceTransform(c.High,e,i)+p)+"px":Math.round(d-r.pixelFromPriceTransform(c.Close,e,i)+p)+"px",h.style.bottom!=f&&(h.style.bottom=f)}},CIQ.extend(CIQ.Studies.studyLibrary,{Directional:{name:"ADX/DMS",calculateFN:CIQ.Studies.calculateADX,outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto"}},Gopala:{name:"Gopalakrishnan Range Index",calculateFN:CIQ.Studies.calculateMaxHighMinLow},vchart:{name:"Volume Chart",display:"Volume",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0},seriesFN:CIQ.Studies.createVolumeChart,calculateFN:CIQ.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{zoom:0,widthFactor:1}}}),_exports});var RIGHT_SWIPE="swiperight",currentIndex=0,isAndroid=!1;!function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./thirdparty/iscroll"),require("./chartiq"),require("./studies"));else if("function"==typeof define&&define.amd)define(["thirdparty/iscroll","chartiq","studies"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for plugin.js.");var e="undefined"!=typeof window?window:self;t(e,e,e)}}(function(t,e){var i=e.CIQ,n=e.$$,r=t.IScroll5;return i.iscroll=function(){},i.iscroll.scrollers=[],i.iscroll.newScroller=function(t,e){e||(e={tap:!0,scrollbars:!0,interactiveScrollbars:!0,mouseWheel:!0});var n=new r(t,e);return n.utils=r.utils,i.iscroll.scrollers.push(n),n},i.iscroll.refresh=function(){
for(var t=0;t<i.iscroll.scrollers.length;t++){i.iscroll.scrollers[t].refresh()}},i.DialogManager=function(){},i.DialogManager.useOverlay=!1,i.DialogManager.stack=[],i.DialogManager.modalBegin=function(){i.MenuManager&&(i.MenuManager.menusDisabledDialog=!0);for(var t=0;t<i.ChartEngine.registeredContainers.length;t++){i.ChartEngine.registeredContainers[t].stx.modalBegin()}},i.DialogManager.modalEnd=function(){i.MenuManager&&(i.MenuManager.menusDisabledDialog=!1);for(var t=0;t<i.ChartEngine.registeredContainers.length;t++){i.ChartEngine.registeredContainers[t].stx.modalEnd()}},i.DialogManager.displayDialog=function(t){i.hideKeyboard(),i.DialogManager.modalBegin(),i.DialogManager.useOverlay&&!i.DialogManager.bodyOverlay&&(i.DialogManager.bodyOverlay=i.newChild(document.body,"DIV","stxDialogOverlay")),i.DialogManager.useOverlay&&(i.DialogManager.bodyOverlay.style.display="block");var e=t;"string"==typeof t&&(e=n(t)),e.style.display="block",i.DialogManager.stack.push(e)},i.DialogManager.dismissDialog=function(){document.activeElement.blur();var t=i.DialogManager.stack.pop();t&&(t.style.display="none",t.colorPickerDiv&&(t.colorPickerDiv.style.display="none"),i.DialogManager.stack.length||(i.DialogManager.bodyOverlay&&"block"==i.DialogManager.bodyOverlay.style.display&&(i.DialogManager.bodyOverlay.style.display="none"),i.DialogManager.modalEnd()),i.fixScreen())},e}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for quoteFeedBarChart.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){var e=t.CIQ;return e.QuoteFeed.BarChart=function(t){this.url=t,this.exchangeZones={AX:"Australia/Sydney"}},e.QuoteFeed.BarChart.ciqInheritsFrom(e.QuoteFeed),e.QuoteFeed.BarChart.prototype.isBats=function(t){return t.length<5},e.QuoteFeed.BarChart.prototype.isIndex=function(t){return!(!t.length||"$"!=t[0])},e.QuoteFeed.BarChart.prototype.symbology=function(t){return t},e.QuoteFeed.BarChart.prototype.batsOpen=function(){var t=e.getETDateTime();return!(t.getHours()>=17)&&!(t.getHours()<8)},e.QuoteFeed.BarChart.prototype.isAfterDelayed=function(){var t=e.getETDateTime();return t.getHours()>16||16==t.getHours()&&t.getMinutes()>20},e.QuoteFeed.BarChart.prototype.fetch=function(t,i){var n=this.url+"/getHistory.csv",r=!t.noBats&&this.isBats(t.symbol);e.ChartEngine.isDailyInterval(t.interval)?n+="?type=dailyContinue":(t.extended&&r?n+="?type=formTMinutes":n+="?type=minutes",n+="&interval="+t.period),!1===t.adj?n+="&splits=false":n+="&splits=true";var a,o=new Date;t.endDate?(o=t.endDate,e.ChartEngine.isDailyInterval(t.interval)&&o.setDate(o.getDate()-1),o=e.convertTimeZone(o,null,"America/New_York"),n+="&endDate="+e.yyyymmddhhmm(o),t.startDate?(a=new Date(t.startDate),e.ChartEngine.isDailyInterval(t.interval)&&a.setDate(a.getDate()+1),a=e.convertTimeZone(a,null,"America/New_York"),n+="&startDate="+e.yyyymmddhhmm(a),t.maxRecords=0):t.maxRecords||(t.maxRecords=t.maxTicks)):t.startDate?(a=new Date(t.startDate),e.ChartEngine.isDailyInterval(t.interval)&&a.setDate(a.getDate()+1),a=e.convertTimeZone(a,null,"America/New_York"),n+="&startDate="+e.yyyymmddhhmm(a),t.maxRecords=0):t.maxRecords||(t.maxRecords=3*t.ticks),t.maxRecords&&(n+="&maxRecords="+t.maxRecords),n+="&order=asc";var s=this.symbology(t.symbol);r&&t.update&&(-1!=s.indexOf(".BZ")||this.isAfterDelayed()&&!t.extended||!this.batsOpen()||"$"==s.charAt(0)||(s+=".BZ")),n+="&symbol="+encodeURIComponent(s),t.nocache&&(n+="&nocache");var l=this;e.postAjax(n,null,function(n,a){if(200!=n)return void i({error:n});if("\r\n"==a)return void i({quotes:[]});a=l.process(a,t);var o=!t.stx.quoteDriver.behavior.noLoadMore;(!t.maxRecords||a.length<t.maxRecords)&&(o=!1);var s="DELAYED";r?s="BATS":e.Market.Symbology.isForexSymbol(t.symbol)&&(s="REAL-TIME"),i({quotes:a,moreAvailable:o,attribution:{source:"barchart",exchange:s}})})},e.QuoteFeed.BarChart.prototype.process=function(t,i){var n=i.interval,r=[],a=t.split("\r\n");if(a.length<2)return r;var o,s=a[0].split(","),l={},h=i.update&&e.ChartEngine.isDailyInterval(n);for(o=0;o<s.length;o++)l[s[o]]=o;for(o=1;o<a.length;o++){var c=a[o].split(",");if(!(c.length<s.length)){var u=c[l.timestamp].replace(/"/g,"");if(""!==u){var d=e.strToDateTime(u);i.startDate&&d<i.startDate||r.push({Date:e.yyyymmddhhmm(d),Open:parseFloat(c[l.open].replace(/"/g,"")),High:parseFloat(c[l.high].replace(/"/g,"")),Low:parseFloat(c[l.low].replace(/"/g,"")),Close:parseFloat(c[l.close].replace(/"/g,"")),Volume:h?0:parseFloat(c[l.volume].replace(/"/g,"")),Adj_Close:parseFloat(c[l.close].replace(/"/g,""))})}}}return r},t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for quoteFeedSamples.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){var e=t.CIQ;return e.QuoteFeed.CopyAndPasteMe=function(){},e.QuoteFeed.CopyAndPasteMe.ciqInheritsFrom(e.QuoteFeed.Subscriptions),e.QuoteFeed.CopyAndPasteMe.prototype.fetchFromSource=function(t){t.startDate&&t.endDate||t.startDate||t.endDate},e.QuoteFeed.CopyAndPasteMe.prototype.subscribe=function(){},e.QuoteFeed.CopyAndPasteMe.prototype.unsubscribe=function(){},e.QuoteFeed.Demo=function(){},e.QuoteFeed.Demo.ciqInheritsFrom(e.QuoteFeed.Subscriptions),e.QuoteFeed.Demo.prototype.fetchFromSource=function(t,e){return t.startDate&&t.endDate?void("tick"==t.interval||"minute"==t.interval||"second"==t.interval||"millisecond"==t.interval?this.generateIntradayRange(t,e):this.generateDaily(t,e)):t.startDate?void("tick"==t.interval||"minute"==t.interval||"second"==t.interval||"millisecond"==t.interval?this.update(t,e):e({error:"CIQ.QuoteFeed.Demo does not support updates for daily charts"})):t.endDate?void("tick"==t.interval||"minute"==t.interval||"second"==t.interval||"millisecond"==t.interval?this.loadMore(t,e):e({error:"CIQ.QuoteFeed.Demo does not support loadMore for daily charts"})):void("tick"==t.interval||"minute"==t.interval||"second"==t.interval||"millisecond"==t.interval?this.generateIntraday(t,e):this.generateDaily(t,e))},e.QuoteFeed.Demo.prototype.update=function(t,e){if(!this.market.isOpen())return void e({quotes:[],attribution:{source:"demo",exchange:"RANDOM"}});var i=t.stx.chart.masterData,n=i[i.length-1],r=i[i.length-2],a=this.market.marketZoneNow().getTime(),o=6e4;"second"==t.interval&&(o=1e3),"millisecond"==t.interval&&(o=1),a-=a%(t.period*o);var s=new Date(a),l={};l.DT=s;var h=t.symbol;n[h]||(r[h]?n=r:h="Close"),l.Close=Math.round(100*(n[h]-.8*(Math.random()-.5)))/100,a==i[i.length-1].DT.getTime()?("Close"==h?(l.Open=n.Open,l.High=Math.max(n.High,l.Close),l.Low=Math.min(n.Low,l.Close)):(l.Open=Math.round(100*(n[h]-.8*(Math.random()-.5)))/100,l.High=Math.max(l.Open,l.Close),l.Low=Math.min(l.Open,l.Close)),l.Volume=n.Volume+Math.round(1e3*Math.random())):(l.Open=l.High=l.Low=l.Close,l.Volume=1e3),e({quotes:[l],attribution:{source:"demo",exchange:"RANDOM"}})},e.QuoteFeed.Demo.prototype.randomQuote=function(t){var e=t-2*(Math.random()-.5),i=t-2*(Math.random()-.5),n=Math.max(t-2*(Math.random()-.5),e,i),r=Math.min(t-2*(Math.random()-.5),e,i),a={Open:Math.round(100*e)/100,Close:Math.round(100*i)/100,High:Math.round(100*n)/100,Low:Math.round(100*r)/100};return a.Close<a.Open?a.Volume=1e6+Math.round(15e5*Math.random()):a.Volume=1e6+Math.round(3e5*Math.random()),a},e.QuoteFeed.Demo.prototype.generateDaily=function(t,i){function n(t){var e=t.substr(0,t.indexOf("=")),i=t.substring(t.indexOf(e+"=")+(e+"=").length,t.length-1);try{return JSON.parse(i.replace(/,0+/g,",0").replace(/,[.]/g,",0.").replace(/;/g,""))}catch(t){return[]}}var r=t.symbol;if(!r&&""!==r)return void i({quotes:[],moreAvailable:!1});r=r.toUpperCase(),"^"!=r.charAt(0)&&e.Market.Symbology.isForexSymbol(r)&&(r="^"+r);var a="https://demoquotes.chartiq.com/"+r.replace(/\//g,"-");e.postAjax(a,null,function(e,r){if(200!=e)return void i({error:e});for(var a=n(r),o=[],s=0;s<a.length;s++)o[s]={},o[s].Date=a[s][0],o[s].Open=a[s][1],o[s].High=a[s][2],o[s].Low=a[s][3],o[s].Close=a[s][4],o[s].Volume=a[s][5],o[s].Adj_Close=a[s][6];t.noUpdate=!0,i({quotes:o,moreAvailable:!1,attribution:{source:"demo",exchange:"RANDOM"}})})},e.QuoteFeed.Demo.prototype.generateIntraday=function(t,e){t.stx.marketFactory&&t.stx.setMarket(t.stx.marketFactory(t.symbolObject),t.stx.chart),this.market=t.stx.chart.market;var i,n=["pre","post"];for(i=0;i<n.length;i++)this.market.enableSession(n[i]);var r=155.43,a=[],o=3*t.ticks;o>2e3&&(o=2e3),isNaN(o)&&(o=t.stx.chart.dataSet.length);var s=this.market.marketZoneNow().getTime(),l=6e4;"second"==t.interval&&(l=1e3),"millisecond"==t.interval&&(l=1),s-=s%(t.period*l);var h=new Date(s),c=this.market.newIterator({begin:h,interval:"tick"==t.stx.layout.interval?1:t.stx.layout.interval,periodicity:1,timeUnit:t.stx.layout.timeUnit,inZone:t.stx.dataZone,outZone:t.stx.dataZone});for(this.market.isOpen()||(h=c.previous()),i=0;i<o;i++){var u=this.randomQuote(r);u.DT=new Date(h),u.Volume=Math.round(u.Volume*t.period/500),a.push(u),h=c.previous(),r=u.Close}e({quotes:a.reverse(),moreAvailable:!0,attribution:{source:"demo",exchange:"RANDOM"}})},e.QuoteFeed.Demo.prototype.generateIntradayRange=function(t,e){for(var i=155.43,n=[],r=new Date(t.startDate),a=["pre","post"],o=0;o<a.length;o++)this.market.enableSession(a[o]);for(var s=this.market.newIterator({begin:r,interval:"tick"==t.stx.layout.interval?1:t.stx.layout.interval,periodicity:1,timeUnit:t.stx.layout.timeUnit,inZone:t.stx.dataZone,outZone:t.stx.dataZone});r<=t.endDate;){var l=this.randomQuote(i);l.DT=new Date(r),l.Volume=Math.round(l.Volume*t.period/500),n.push(l),r=s.next(),i=l.Close}e({quotes:n,moreAvailable:!0,attribution:{source:"demo",exchange:"RANDOM"}})},e.QuoteFeed.Demo.prototype.loadMore=function(t,e){var i,n=t.chart.masterData[0];for(i=0;i<t.chart.masterData.length&&!(t.chart.masterData[i].DT.getTime()>=t.endDate.getTime()&&(n=t.chart.masterData[i],n[t.symbol]||n.Close));i++);var r=t.symbol;n[r]||(r="Close");var a=n[r],o=[],s=this.market.newIterator({begin:t.endDate,interval:"tick"==t.stx.layout.interval?1:t.stx.layout.interval,periodicity:1,timeUnit:t.stx.layout.timeUnit,inZone:t.stx.dataZone,outZone:t.stx.dataZone}),l=new Date(s.previous());for(i=0;i<t.ticks;i++){var h=this.randomQuote(a);h.DT=new Date(l),"minute"==t.interval&&(h.Volume=Math.round(h.Volume*t.period/500)),o.push(h),l=s.previous(),a=h.Close}o.reverse(),e({quotes:o,moreAvailable:t.chart.masterData.length<1e5,attribution:{source:"demo",exchange:"RANDOM"}})},e.QuoteFeed.ChartIQEOD=function(t,e){this.urlQuick=t,this.urlFull=e},e.QuoteFeed.ChartIQEOD.ciqInheritsFrom(e.QuoteFeed),e.QuoteFeed.ChartIQEOD.prototype.fetch=function(t,i){function n(t){var e=t.substr(0,t.indexOf("=")),i=t.substring(t.indexOf(e+"=")+(e+"=").length,t.length-1);try{return JSON.parse(i.replace(/,0+/g,",0").replace(/,[.]/g,",0.").replace(/;/g,""))}catch(t){return[]}}if(t.startDate&&!t.endDate)return void i({error:"CIQ.QuoteFeed.ChartIQEOD does not support updates for daily charts"});if(t.endDate&&!t.loadMoreReplace)return void i({error:"CIQ.QuoteFeed.ChartIQEOD does not support loadMore for daily charts"});if("minute"==t.interval)return void i({error:"CIQ.QuoteFeed.ChartIQEOD does not support intraday charts"});var r=t.symbol;if(!r&&""!==r)return void i({quotes:[],moreAvailable:!1});r=r.toUpperCase(),"^"!=r.charAt(0)&&e.Market.Symbology.isForexSymbol(r)&&(r="^"+r);var a=this.urlQuick,o=!0;t.endDate&&t.loadMoreReplace?a=this.urlFull:((new Date).getTime()-13332384e5)/864e5<t.ticks&&(a=this.urlFull),a==this.urlFull&&(delete t.endDate,o=!1),a||(a=this.urlQuick+"/pts");var s=this;e.postAjax(a+"/"+r.replace(/\//g,"-").toUpperCase(),null,function(r,a){if(200!=r)return void i({error:r});for(var l=n(a),h=[],c=0;c<l.length;c++)h[c]={},h[c].Date=l[c][0],h[c].Open=l[c][1],h[c].High=l[c][2],h[c].Low=l[c][3],h[c].Close=l[c][4],h[c].Volume=l[c][5],h[c].Adj_Close=l[c][6];var u={quotes:h,moreAvailable:o,attribution:{source:"chartiq",exchange:"EOD"}},d=(new Date).getTime();if((!u.quotes.length||d-e.strToDate(u.quotes[u.quotes.length-1].Date).getTime()>864e5)&&s.realTimeHook)return s.realTimeHook(t,u,i);i(u)})},e.QuoteFeed.ChartIQEOD.prototype.realTimeHook=function(t,e,i){i(e)},t});var quotefeedSimulator={},quoteFeedSimulator=quotefeedSimulator;quotefeedSimulator.generateGUID=function(){var t=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)})},quotefeedSimulator.maxTicks=5e4,quotefeedSimulator.url="https://simulator.chartiq.com/datafeed",quotefeedSimulator.url+="?session="+quotefeedSimulator.generateGUID(),quotefeedSimulator.fetchInitialData=function(t,e,i,n,r){var a=this.url+"&identifier="+t+"&startdate="+e.toISOString()+"&enddate="+i.toISOString()+"&interval="+n.interval+"&period="+n.period+"&extended="+(n.stx.extendedHours?1:0);CIQ.postAjax(a,null,function(t,e){if(200==t){var i=quotefeedSimulator.formatChartData(e);r({quotes:i,attribution:{source:"simulator",exchange:"RANDOM"}})}else r({error:e||t})})},quotefeedSimulator.fetchUpdateData=function(t,e,i,n){var r=this.url+"&identifier="+t+"&startdate="+e.toISOString()+"&interval="+i.interval+"&period="+i.period+"&extended="+(i.stx.extendedHours?1:0);CIQ.postAjax(r,null,function(t,e){if(200==t){var i=quotefeedSimulator.formatChartData(e);n({quotes:i,attribution:{source:"simulator",exchange:"RANDOM"}})}else n({error:e||t})})},quotefeedSimulator.fetchPaginationData=function(t,e,i,n,r){var a=this.url+"&identifier="+t+"&startdate="+e.toISOString()+"&enddate="+i.toISOString()+"&interval="+n.interval+"&period="+n.period+"&extended="+(n.stx.extendedHours?1:0);CIQ.postAjax(a,null,function(t,e){if(200==t){var i=quotefeedSimulator.formatChartData(e);r({quotes:i,attribution:{source:"simulator",exchange:"RANDOM"}})}else r({error:e||t})})},quotefeedSimulator.formatChartData=function(t){for(var e=JSON.parse(t),i=[],n=0;n<e.length;n++)i[n]={},i[n].DT=new Date(e[n].DT),i[n].Open=e[n].Open,i[n].High=e[n].High,i[n].Low=e[n].Low,i[n].Close=e[n].Close,i[n].Volume=e[n].Volume;return i},function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for quoteFeedXignite.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){var e=t.CIQ,i=t.timezoneJS;return e.QuoteFeed.Xignite=function(t,i){i||(i={}),this.token=t,this.useSuperquotes=!0===i.useSuperquotes,this.mfUpdate=!0===i.mfUpdate,this.exchangeZones=e.QuoteFeed.Xignite.Utility.timeZone,t&&"devservices.chartiq.com/data"==e.QuoteFeed.Xignite.Utility.overrides.server&&(e.QuoteFeed.Xignite.Utility.overrides.server=null,e.QuoteFeed.Xignite.Utility.overrides.path="")},e.QuoteFeed.Xignite.ciqInheritsFrom(e.QuoteFeed),e.QuoteFeed.Xignite.prototype.requiresImmediateRefresh=function(t){return this.isBats(t.chart.symbol)},e.QuoteFeed.Xignite.prototype.isBats=function(t){return t&&(t.length<5||5==t.length&&"X"!=t[4])&&-1==t.indexOf(".")&&-1==t.indexOf(":")&&"/"!=t.charAt(0)&&"^"!=t.charAt(0)},e.QuoteFeed.Xignite.prototype.isIndex=function(t){return!!(t&&t.indexOf(".IND")>0)||!!(t&&"^"==t.charAt(0)&&t.length<6)},e.QuoteFeed.Xignite.prototype.isRTEquity=function(){return!1},e.QuoteFeed.Xignite.prototype.isRTIndex=function(){return!1},e.QuoteFeed.Xignite.prototype.isMutual=function(t){if(!t||t.length<5||t.length>6)return!1;for(var e=0;e<t.length;e++)if(t[e]<"A"||t[e]>"Z")return!1;return"X"==t[t.length-1]},e.QuoteFeed.Xignite.prototype.symbology=function(t){return t?t.toUpperCase():t},e.QuoteFeed.Xignite.prototype.batsOpen=function(){var t=e.getETDateTime();return!(t.getHours()>=17)&&!(t.getHours()<8)},e.QuoteFeed.Xignite.prototype.fetch=function(t,n){function r(t,i){var n=new Date(t.getTime()+6e4*t.getTimezoneOffset());return i&&-1!=i.indexOf("UTC")?n:e.convertTimeZone(n,"UTC",i)}function a(t,e){if(t.getDay()%6==0)return!1;if(e){if(t.getHours()>17)return!1;if(t.getHours()<8)return!1;if(17==t.getHours()&&t.getMinutes()>=15)return!1}else{if(t.getHours()>16)return!1;if(t.getHours()<9)return!1;if(16==t.getHours()&&t.getMinutes()>=30)return!1;if(9==t.getHours()&&t.getMinutes()<30)return!1}return!0}var o=!0,s=function(t,e){return!!t&&t.toLowerCase()===e.toLowerCase()};t.symbolObject||(t.symbolObject={symbol:t.symbol});var l=t.symbolObject.customSymbol?t.symbolObject.customSymbol:t.symbol,h=this.symbology(l),c=t.symbolObject.identifierType?t.symbolObject.identifierType:"Symbol",u=this.isRTEquity(h)&&!t.symbolObject.assetClass,d=!u&&!t.noBats&&this.isBats(h)&&!t.symbolObject.noBats&&!t.symbolObject.assetClass,p=this.isIndex(h)||s(t.symbolObject.assetClass,e.QuoteFeed.Xignite.Constants.INDEX),f=this.isRTIndex(h)&&!t.symbolObject.assetClass,m=this.isMutual(h)&&!t.symbolObject.assetClass,g=e.Market.Symbology.isForexSymbol(h)||s(t.symbolObject.assetClass,e.QuoteFeed.Xignite.Constants.CURRENCY),v=e.Market.Symbology.isFuturesSymbol(h)||s(t.symbolObject.assetClass,e.QuoteFeed.Xignite.Constants.FUTURES),y=s(t.symbolObject.assetClass,e.QuoteFeed.Xignite.Constants.OPTIONS),x=s(t.symbolObject.assetClass,e.QuoteFeed.Xignite.Constants.OPTION_FUTURE),b=e.ChartEngine.isDailyInterval(t.interval),C=!1,w=null,S=!1,T=!1,D=g,M=m,k=2e4;t.chart.loadingMore&&(t.loadMore=!0),t.update||(t.xigniteID=(new Date).getTime()),this.resultsCache||(this.resultsCache={}),g&&"^"!=h.charAt(0)&&(h="^"+h);var _=new Date;t.endDate?(_=t.endDate,t.loadMore&&(t.maxRecords=k)):t.startDate||(this.startDate&&(t.startDate=this.startDate),t.maxRecords||(t.maxRecords=3*t.ticks));var E=1;"day"==t.interval?E=e.QuoteFeed.Xignite.Utility.nonMarketMaxRecordsFactor:b||(E=e.QuoteFeed.Xignite.Utility.marketClosedMaxRecordsFactor);var A=1e3;"month"==t.interval?console.log("Interval 'month' not supported natively by Xignite!"):"week"==t.interval&&console.log("Interval 'week' not supported natively by Xignite!"),((A=t.maxRecords?!b&&t.period<10?Math.ceil(Math.min(Math.max(t.maxRecords*E,6e3),k)):Math.ceil(Math.min(Math.max(t.maxRecords*E,1e3),k)):Math.min(A,k))>k||t.stx.chart.symbol==t.symbol&&t.fetchMaximumBars)&&(A=k);var I,P=null,F=null,L="";if(t.symbol)if(g){if(w="UTC",_=r(_,w),"^"==h.charAt(0)&&(h=h.substr(1)),h.substr(0,3).toUpperCase()==h.substr(3,3).toUpperCase()&&(L="Invalid Forex symbol"),t.stx.quoteDriver.behavior.snapshotRefresh&&6!=_.getDay()&&e.QuoteFeed.Xignite.getSnapshotQuote(t,h,b,0,n,this))return;if(I=_,!t.startDate&&t.maxRecords?(I=new Date(_.getTime()),b?I.setDate(I.getDate()-A):I.setMinutes(I.getMinutes()-A*(isNaN(t.interval)?t.period:t.interval))):t.startDate&&(I=r(t.startDate,w)),I>_&&_.setDate(_.getDate()+1),!t.update&&b)P=e.Market.Symbology.isForexMetal(h)?-1!=",USD,AUD,CAD,CHF,EUR,GBP,HKD,ZAR,".indexOf(","+h.substr(3,3)+",")?e.clone(e.QuoteFeed.Xignite.Templates.HistoricalMajorMetals):e.clone(e.QuoteFeed.Xignite.Templates.HistoricalMetals):e.clone(e.QuoteFeed.Xignite.Templates.HistoricalForex),F={Symbol:h,StartDate:e.mmddyyyy(e.yyyymmdd(I)),EndDate:e.mmddyyyy(e.yyyymmdd(_))},M=!0;else if(e.Market.Symbology.isForexMetal(h,!0))L="Intraday data not available.";else if(P=e.Market.Symbology.isForexMetal(h)?e.clone(e.QuoteFeed.Xignite.Templates.IntradayRTMetals):e.clone(e.QuoteFeed.Xignite.Templates.IntradayRTForex),F={Symbol:h,StartTime:e.mmddyyyy(e.yyyymmdd(I))+" 00:00:00",EndTime:e.mmddyyyy(e.yyyymmdd(_))+" 23:59:59",Period:"hour"==t.interval?60*t.period:t.period},b)F.Period=1440;else if(t.update){if(t.startDate){var H=r(t.startDate,w);F.StartTime=e.mmddyyyy(e.yyyymmdd(I))+" "+e.friendlyDate(H).split(" ")[1]+":00"}}else F.StartTime=e.mmddyyyy(e.yyyymmdd(I))+" "+e.friendlyDate(I).split(" ")[1]+":00",F.EndTime=e.mmddyyyy(e.yyyymmdd(_))+" "+e.friendlyDate(_).split(" ")[1]+":59";"^"!=h.charAt(0)&&(h="^"+h)}else if(v){w="America/New_York",_=r(_,w);var N=h;"/"==N.charAt(0)&&(N=N.substr(1));var O=0,R=0,U=!1,B=/(^[A-Z0-9]{1,3})([A-Z])([0-9]{1,2}$)/i.exec(N);if(B){N=B[1];var X=r(new Date,w).getFullYear();R=X+9;var V=B[3],z=parseInt(V,10);if(V.length<=4&&z>0&&z<R){for(;R%Math.pow(10,V.length)!=z;)R--;X>R&&(C=!0)}else R="X";O=e.convertFutureMonth(B[2]),"Y"==O&&0===z&&(U=!0,O=0,R=0,C=!0)}if(isNaN(R)||isNaN(O))L="Invalid futures symbol.";else if(b)if(t.update)C||(P=e.clone(e.QuoteFeed.Xignite.Templates.DelayedFuture),F={Symbol:N,Month:O.toString(),Year:R.toString()});else{P=e.clone(e.QuoteFeed.Xignite.Templates.HistoricalFuture);var j=new Date(_.getTime());R>0&&R<=j.getFullYear()&&(j.setYear(R),O>0&&O<=j.getMonth()+1&&(j.setDate(28),j.setMonth(O-1))),!t.startDate&&t.maxRecords?(I=new Date(j.getTime()),R>0&&I.setFullYear(Math.min(R,I.getFullYear())),I.setDate(I.getDate()-A)):t.startDate&&(I=r(t.startDate,w)),F={Symbol:N,StartDate:I?e.mmddyyyy(e.yyyymmdd(I)):null,EndDate:e.mmddyyyy(e.yyyymmdd(j))},0!==R||U?(P.method=P.method.future,F.Month=O.toString(),F.Year=R.toString()):P.method=P.method.commodity,M=!0}else L="Intraday futures data is not supported."}else if(y){w||(w="America/New_York"),_=r(_,w),P=e.clone(e.QuoteFeed.Xignite.Templates.HistoricalOptions);var W=new Date;W.setMonth(W.getMonth()-12),F={Symbol:h,StartTime:t.startDate?e.mmddyyyy(r(t.startDate,w)):e.mmddyyyy(W),EndTime:e.mmddyyyy(_)},M=!0}else if(x)w||(w="America/New_York"),_=r(_,w),P=e.clone(e.QuoteFeed.Xignite.Templates.FutureOption),F={Identifier:h,Exchange:t.symbolObject.exchange};else if(d&&t.startDate&&t.update){if(w="America/New_York",_=r(_,w),t.stx.quoteDriver.behavior.snapshotRefresh&&_.getDay()%6){var q=new i.Date(_.getFullYear(),_.getMonth(),_.getDate(),_.getHours(),_.getMinutes(),w);if(e.QuoteFeed.Xignite.getSnapshotQuote(t,h,b,q.getTimezoneOffset(),n,this))return}if(b)t.extended?(a(_,!0)?(P=e.clone(e.QuoteFeed.Xignite.Templates.BATSRealQuote),T=!0):P=e.clone(e.QuoteFeed.Xignite.Templates.DelayedEquity),P.results.extCls="ExtendedHoursPrice",P.fields+=",ExtendedHoursPrice"):a(_)?(P=e.clone(e.QuoteFeed.Xignite.Templates.BATSRealQuote),T=!0):P=e.clone(e.QuoteFeed.Xignite.Templates.DelayedEquity),F={Identifier:h.replace(/-/g,"/")};else if(t.update&&(I=e.mmddyyyy(e.yyyymmdd(_)),t.extended&&a(_,!0)?(P=e.clone(e.QuoteFeed.Xignite.Templates.IntradayBATSRTEquity),T=!0):a(_)?(P=e.clone(e.QuoteFeed.Xignite.Templates.IntradayBATSRTEquity),T=!0):P=e.clone(e.QuoteFeed.Xignite.Templates.IntradayEquity),F={Identifier:h.replace(/-/g,"/"),Period:"hour"==t.interval?60*t.period:t.period,StartTime:I+" 00:00:00",EndTime:e.mmddyyyy(e.yyyymmdd(_))+" 23:59:59",IncludeExtended:(!!t.extended).toString()},t.startDate)){var Q=r(t.startDate,w);_.getDate()==Q.getDate()&&(F.StartTime=e.mmddyyyy(e.yyyymmdd(_))+" "+e.friendlyDate(Q).split(" ")[1]+":00")}}else{delete t.noBats;var Y=h.split(".").pop();Y&&(h.indexOf(".")>-1&&Y.length<4?L="Invalid Exchange":w=e.QuoteFeed.Xignite.Utility.timeZone[Y]),w||(w="America/New_York"),_=r(_,w),!t.update&&b?(P=p?e.clone(e.QuoteFeed.Xignite.Templates.HistoricalIndex):e.clone(e.QuoteFeed.Xignite.Templates.HistoricalEquity),F={Identifier:h.replace(/-/g,"/"),StartDate:t.startDate?e.mmddyyyy(e.yyyymmdd(r(t.startDate,w))):null,EndDate:e.mmddyyyy(e.yyyymmdd(_)),PeriodType:e.QuoteFeed.Xignite.Utility.xIgniteInterval(t.interval),Periods:A},M=!0):b?(m?this.mfUpdate?P=e.clone(e.QuoteFeed.Xignite.Templates.DelayedMF):L="Intraday data not available.":f?P=e.clone(e.QuoteFeed.Xignite.Templates.RealTimeIndex):p?P=e.clone(e.QuoteFeed.Xignite.Templates.DelayedIndex):this.useSuperquotes?(P=e.clone(e.QuoteFeed.Xignite.Templates.SuperQuoteEquity),t.extended&&(P.results.extCls="ExtendedHoursPrice",P.fields+=",ExtendedHoursPrice")):u?(P=e.clone(e.QuoteFeed.Xignite.Templates.RealTimeEquity),t.extended&&(P.results.extCls="ExtendedHoursPrice",P.fields+=",ExtendedHoursPrice"),D=!0):(P=e.clone(e.QuoteFeed.Xignite.Templates.DelayedEquity),t.extended&&(P.results.extCls="ExtendedHoursPrice",P.fields+=",ExtendedHoursPrice")),F={Identifier:h.replace(/-/g,"/")}):(m?L="Intraday data not available.":f?P=e.clone(e.QuoteFeed.Xignite.Templates.IntradayRTIndex):p?P=e.clone(e.QuoteFeed.Xignite.Templates.IntradayIndex):this.useSuperquotes?(P=e.clone(e.QuoteFeed.Xignite.Templates.SuperIntradayEquity),t.loadMore||(P.results.timing="Timing",P.fields+=",Timing")):u?(P=e.clone(e.QuoteFeed.Xignite.Templates.IntradayRTEquity),D=!0):P=e.clone(e.QuoteFeed.Xignite.Templates.IntradayEquity),I=_,!t.startDate&&t.maxRecords?(I=new Date(_.getTime()),I.setMinutes(I.getMinutes()-A*("hour"==t.interval?60*t.period:t.period))):t.startDate&&(I=r(t.startDate,w)),F={Identifier:h.replace(/-/g,"/"),StartTime:e.mmddyyyy(e.yyyymmdd(I))+" 00:00:00",EndTime:e.mmddyyyy(e.yyyymmdd(_))+" 23:59:59",Period:"hour"==t.interval?60*t.period:t.period,IncludeExtended:t.extended?"true":"false"},t.update?t.startDate&&_.getDate()>=I.getDate()&&(F.StartTime=F.StartTime.split(" ")[0]+" "+e.friendlyDate(I).split(" ")[1]+":00"):(F.StartTime=F.StartTime.split(" ")[0]+" "+e.friendlyDate(I).split(" ")[1]+":00",F.EndTime=F.EndTime.split(" ")[0]+" "+e.friendlyDate(_).split(" ")[1]+":59",p||(S=!0)))}else L="No Symbol";var $=t.stx.quoteDriver.behavior.adjustmentMethod;if($&&!p&&P&&P.statics&&(S=!1,P.statics=P.statics.replace("AdjustmentMethod=None","AdjustmentMethod="+$),t.stx.layout.adj&&(t.stx.layout.adj=!1,t.stx.changeCallback&&t.stx.changeCallback(t.stx,"layout"))),P&&F&&""===L){var G=[];P.results.eod&&(M=!0);var Z=function(i,r){function a(t,i){var n=[],r=t.split("\r\n");if(r.length<2)return n;var a,s=r[0].split(","),l={};for(a=0;a<s.length;a++)l[s[a]]=a;var c={};for(a=1;a<r.length;a++){var u=r[a].split(",");if(!(u.length<s.length)){var d=u[l[P.results.date]];if(""!==d){P.results.time?d+=" "+u[l[P.results.time]]:b&&(d=d.split(" ")[0]);var p=d;P.results.vdate&&(p=u[l[P.results.vdate]]);var f=e.strToDateTime(d);if(g&&b&&i.update&&23==f.getHours()&&f.setHours(f.getHours()+1),6!=f.getDay()){if(!b){var m=0;P.results.offset&&(m=u[l[P.results.offset]]),f.setMinutes(f.getMinutes()-f.getTimezoneOffset()-60*m);var y={beginHour:9,beginMinute:30,endHour:16,endMinute:0};if(g||v?y={beginHour:0,beginMinute:0,endHour:23,endMinute:59}:h.indexOf(".")>1?y={beginHour:0,beginMinute:0,endHour:23,endMinute:59}:i.extended&&(y={beginHour:8,beginMinute:0,endHour:20,endMinute:0}),23!=y.endHour||59!=y.endMinute){var x=f.getFullYear().toString()+"-"+(f.getMonth()+1).toString()+"-"+f.getDate().toString();if(!c[x]&&0!==c[x]){var C=e.convertTimeZone(f,null,"America/New_York"),w=C.getTimezoneOffset()-f.getTimezoneOffset();c[x]=6e4*w}var k=new Date(f.getTime()-c[x]);if(k.getHours()>y.endHour||k.getHours()==y.endHour&&k.getMinutes()>=y.endMinute||k.getHours()<y.beginHour||k.getHours()==y.beginHour&&k.getMinutes()<y.beginMinute)continue}}if(!(i.startDate&&f<i.startDate||i.endDate&&f>=i.endDate)){var _=parseFloat(u[l[P.results.ratio]]);_&&!isNaN(_)||(_=1),S&&G.length&&(f<G[0].ExDate?_*=G[0].SplitRatio:G.pop());var E=parseFloat(u[l[P.results.open]]),A=parseFloat(u[l[P.results.high]]),I=parseFloat(u[l[P.results.low]]),F=parseFloat(u[l[P.results.close]]);if(P.results.timing){var L=u[l[P.results.timing]];"Real Time"==L&&(D=!0),"Historical"!=L&&(M=!1)}else if(P.results.eod){var H=u[l[P.results.eod]];parseFloat(H)!=F&&(M=!1)}if(0===E&&A==I&&(E=F),0===A&&(A=Math.max(E,F)),0===I&&(I=Math.min(E,F)),F>0){n.push({DT:f,Open:E,High:A,Low:I,Close:F,Volume:P.results.volume&&p==d?parseFloat(u[l[P.results.volume]]):0,Adj_Close:parseFloat(u[l[P.results.close]])/_});var N=parseFloat(u[l[P.results.extCls]]);N&&(n[n.length-1].Reg_Close=F,n[n.length-1].Close=N,n[n.length-1].Adj_Close=N,M=!1),T&&i.batsVolumeMultiplier&&(n[n.length-1].Volume*=i.batsVolumeMultiplier)}else if(!o&&i.stx.cleanupGaps){var O=n[n.length-1];n.push({DT:f,Open:O.Close,High:O.Close,Low:O.Close,Close:O.Close,Volume:0,Adj_Close:O.Adj_Close})}}}}else T&&u[l[P.results.market]].indexOf("OTC")>-1&&(i.symbolObject.noBats=!0)}}return n.length&&(i.attempts=0,n[0].DT>n[n.length-1].DT&&n.reverse()),i.totalRecords||(i.totalRecords=0),i.totalRecords+=n.length,o||(i.missingBarsCreated=!0),n}if(200!=i)return void(n&&n({error:i}));var s=a(r,t),l=null;if(!t.loadMore)if(b){if(this.resultsCache[t.xigniteID])for(;s.length&&this.resultsCache[t.xigniteID]&&this.resultsCache[t.xigniteID].length;)if(s[0].DT<this.resultsCache[t.xigniteID][this.resultsCache[t.xigniteID].length-1].DT)s.shift();else{if(+s[0].DT!=+this.resultsCache[t.xigniteID][this.resultsCache[t.xigniteID].length-1].DT)break;var c=this.resultsCache[t.xigniteID].pop();c.Volume>s[0].Volume&&(s[0].Volume=c.Volume)}else this.resultsCache[t.xigniteID]=[];s=this.resultsCache[t.xigniteID]=this.resultsCache[t.xigniteID].concat(s),v&&this.resultsCache[t.xigniteID].length>1&&this.resultsCache[t.xigniteID][this.resultsCache[t.xigniteID].length-2].DT.getTime()==this.resultsCache[t.xigniteID][this.resultsCache[t.xigniteID].length-1].DT.getTime()&&this.resultsCache[t.xigniteID].splice(-2,1),t.update||(t.update=!0,t.endDate=null,s.length?t.startDate=new Date(s[s.length-1].DT.getTime()):(t.startDate=new Date,t.startDate.setDate(t.startDate.getDate()-2)),s.length&&e.yyyymmddhhmm(new Date(+_)).substr(0,8)==e.yyyymmddhhmm(s[s.length-1].DT).substr(0,8)||C||e.Market.Symbology.isForexMetal(h,!0)||t.noUpdate||m&&!this.mfUpdate||(l=function(t){return function(e,i){setTimeout(function(){t.fetch(e,i)},10)}}(this))),l||delete this.resultsCache[t.xigniteID]}else if(d){if(this.resultsCache[t.xigniteID])for(;s.length&&this.resultsCache[t.xigniteID].length;)if(s[0].DT<this.resultsCache[t.xigniteID][this.resultsCache[t.xigniteID].length-1].DT)s.shift();else{if(+s[0].DT!=+this.resultsCache[t.xigniteID][this.resultsCache[t.xigniteID].length-1].DT)break;var u=this.resultsCache[t.xigniteID].pop();s[0].Open=u.Open,u.Low<s[0].Low&&(s[0].Low=u.Low),u.High>s[0].High&&(s[0].High=u.High),u.Volume>s[0].Volume&&(s[0].Volume=u.Volume)}else this.resultsCache[t.xigniteID]=[];s=this.resultsCache[t.xigniteID]=this.resultsCache[t.xigniteID].concat(s),t.update||t.noUpdate?delete this.resultsCache[t.xigniteID]:(t.update=!0,t.endDate=null,s.length?t.startDate=new Date(s[s.length-1].DT.getTime()):(t.startDate=new Date,t.startDate.setHours(0,0,0,0),t.startDate.setDate(t.startDate.getDate())),l=function(t){return function(e,i){setTimeout(function(){t.fetch(e,i)},10)}}(this))}var p=!1;if(!l&&t.totalRecords>0&&t.maxRecords&&(p=!t.stx.quoteDriver.behavior.noLoadMore),!l||!t.startDate||t.maxRecords&&!t.update){if(t.noUpdate=!!l,t.moreToLoad&&(p=!0,t.moreToLoad=!1),!l){if(n)if(0!==s.length||t.loadMore){var f="DELAYED";T?f="BATS":D&&(f="REAL-TIME"),M&&(f="EOD");var y="REAL-TIME"!=f||g||t.loadMore?0:1;n({quotes:s,moreAvailable:p,attribution:{source:"xignite",exchange:f,charge:y}})}else n({error:"Symbol not found"});t.loadMore=!1}}else p&&(t.moreToLoad=!0);l&&(t.bypassSnapshot=!0,b&&(t.noBats=!0),l(t,n))};e.postAjax({url:e.QuoteFeed.Xignite.Utility.url(P,F,t,this.token,c),cb:function(t,i){if(S){var n=e.clone(e.QuoteFeed.Xignite.Templates.SplitRatio),r={Identifier:h,StartDate:e.mmddyyyy(e.yyyymmdd(I)),EndDate:e.mmddyyyy(e.yyyymmdd(new Date))};e.postAjax({url:e.QuoteFeed.Xignite.Utility.url(n,r,null,this.token,c),cb:function(n,r){if(200==n){try{G=JSON.parse(r).Splits}catch(t){}for(var a=0;a<G.length;a++)G[a].ExDate=e.strToDateTime(G[a].ExDate),a&&(G[a].SplitRatio*=G[a-1].SplitRatio)}Z.call(this,t,i)}.bind(this),noEpoch:!0,timeout:1e4})}else Z.call(this,t,i)}.bind(this),noEpoch:!0,timeout:1e4})}""!==L&&n&&n({error:L})},e.QuoteFeed.Xignite.Constants={EQUITY:"Equity",OPTIONS:"Options",FUTURES:"Futures",INDEX:"Index",CURRENCY:"Currency",OPTION_FUTURE:"OptionOnFuture",FUTURE_SPREAD:"FutureSpread"},e.QuoteFeed.Xignite.Templates={token:"/* xignite token */",HistoricalEquity:{host:{protocol:"https://",server:"GlobalHistorical-chartiq.xignite.com",path:"/www_xignite"},version:null,func:"xGlobalHistorical",format:"csv",method:{day:"GetGlobalHistoricalQuotesRange",week:"GetGlobalHistoricalWeeklyQuotesRange",month:"GetGlobalHistoricalMonthlyQuotesRange",as_of:"GetGlobalHistoricalQuotesAsOf"},statics:"AdjustmentMethod=None",fields:"GlobalQuotes.Date,GlobalQuotes.Last,GlobalQuotes.Open,GlobalQuotes.High,GlobalQuotes.Low,GlobalQuotes.Volume,GlobalQuotes.SplitRatio",results:{date:"GlobalQuotes Date",time:null,open:"GlobalQuotes Open",close:"GlobalQuotes Last",high:"GlobalQuotes High",low:"GlobalQuotes Low",volume:"GlobalQuotes Volume",
offset:null,ratio:"GlobalQuotes SplitRatio"}},HistoricalIndex:{host:{protocol:"https://",server:"GlobalIndicesHistorical-chartiq.xignite.com",path:"/globalindiceshistorical_xignite"},version:null,func:"xglobalindiceshistorical",format:"csv",method:{day:"GetHistoricalIndexValues",as_of:"GetHistoricalIndexValuesTrailing"},statics:null,fields:"Values.Date,Values.Last,Values.Open,Values.High,Values.Low,Values.Volume",results:{date:"Values Date",time:null,open:"Values Open",close:"Values Last",high:"Values High",low:"Values Low",volume:"Values Volume",offset:null,ratio:null}},HistoricalForex:{host:{protocol:"https://",server:"GlobalCurrencies-chartiq.xignite.com",path:"/globalcurrencies_xignite"},version:null,func:"xGlobalCurrencies",format:"csv",method:"GetHistoricalRatesRange",statics:"FixingTime=00:00:00&PriceType=Bid&PeriodType=Daily",fields:"StartDate,Open,High,Low,Close",results:{date:"StartDate",time:null,open:"Open",close:"Close",high:"High",low:"Low",volume:null,offset:null,ratio:null}},HistoricalOptions:{host:{protocol:"https://",server:"globaloptionshistorical.xignite.com/",path:""},version:null,func:"xGlobalOptionsHistorical",format:"csv",method:"GetChartBars",statics:"SymbologyType=ListingSymbol&Period=24&Precision=Hour&IncludeExtended=false&_order=descending",fields:"ChartBars.StartDate,ChartBars.Open,ChartBars.Close,ChartBars.High,ChartBars.Low,ChartBars.Volume",results:{date:"ChartBars StartDate",time:null,open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:null,ratio:null}},HistoricalMajorMetals:{host:{protocol:"https://",server:"GlobalMetals-chartiq.xignite.com",path:"/globalmetals_xignite"},version:null,func:"xGlobalMetals",format:"csv",method:"GetHistoricalMetalQuotesRange",statics:"FixingTime=00:00:00&PriceType=Bid&PeriodType=Daily&Currency=",fields:"StartDate,StartTime,Open,High,Low,Close",results:{date:"StartDate",time:null,open:"Open",close:"Close",high:"High",low:"Low",volume:null,offset:null,ratio:null}},HistoricalMetals:{host:{protocol:"https://",server:"GlobalCurrencies-chartiq.xignite.com",path:"/globalcurrencies_xignite"},version:null,func:"xGlobalCurrencies",format:"csv",method:"GetLondonHistoricalRatesRange",statics:null,fields:"StartDate,Open,High,Low,Close",results:{date:"StartDate",time:null,open:"Open",close:"Close",high:"High",low:"Low",volume:null,offset:null,ratio:null}},HistoricalFuture:{host:{protocol:"https://",server:"Futures-chartiq.xignite.com",path:"/www_xignite"},version:null,func:"xFutures",format:"csv",method:{future:"GetHistoricalFutureRange",commodity:"GetHistoricalCommodityRange"},statics:null,fields:"Quotes.Date,Quotes.Open,Quotes.High,Quotes.Low,Quotes.Last,Quotes.Volume",results:{date:"Quotes Date",time:null,open:"Quotes Open",close:"Quotes Last",high:"Quotes High",low:"Quotes Low",volume:"Quotes Volume",offset:null,ratio:null}},FutureOption:{host:{protocol:"https://",server:"globalfutures.xignite.com",path:"/globalfutures_xignite"},version:null,func:"xGlobalFutures",format:"csv",method:"GetFutureOptionQuote",statics:null,fields:"Date,Open,High,Low,Last,Volume",results:{date:"Date",time:null,open:"Open",close:"Last",high:"High",low:"Low",volume:"Volume",offset:null,ratio:null}},DelayedEquity:{host:{protocol:"https://",server:"GlobalQuotes-chartiq.xignite.com",path:"/globalquotes_xignite"},version:"v3",func:"xglobalquotes",format:"csv",method:"GetGlobalExtendedQuote",statics:null,fields:"Date,Volume,Open,High,Low,Last,Close,VolumeDate",results:{date:"Date",time:null,open:"Open",close:"Last",high:"High",low:"Low",volume:"Volume",offset:null,ratio:null,extCls:null,eod:"Close",vdate:"VolumeDate"}},RealTimeEquity:{host:{protocol:"https://",server:"GlobalRealTime-chartiq.xignite.com",path:"/globalrealtime_xignite"},version:"v3",func:"xGlobalRealTime",format:"csv",method:"GetGlobalExtendedQuote",statics:null,fields:"Date,Volume,Open,High,Low,Last,Close",results:{date:"Date",time:null,open:"Open",close:"Last",high:"High",low:"Low",volume:"Volume",offset:null,ratio:null,extCls:null,eod:"Close"}},SuperQuoteEquity:{host:{protocol:"https://",server:"SuperQuotes-chartiq.xignite.com",path:"/superquotes_xignite"},version:null,func:"xsuperquotes",format:"csv",method:"GetQuote",statics:null,fields:"DateTime,Volume,Open,High,Low,Last,Close",results:{date:"DateTime",time:null,open:"Open",close:"Last",high:"High",low:"Low",volume:"Volume",offset:null,ratio:null,extCls:null,eod:"Close"}},IntradayEquity:{host:{protocol:"https://",server:"GlobalQuotes-chartiq.xignite.com",path:"/chartiq_xignite"},version:"v3",func:"xGlobalQuotes",format:"csv",method:"GetChartBars",statics:"Precision=Minutes&AdjustmentMethod=None",fields:"ChartBars.StartDate,ChartBars.StartTime,ChartBars.UTCOffset,ChartBars.Close,ChartBars.Open,ChartBars.High,ChartBars.Low,ChartBars.Volume,ChartBars.AdjustmentRatio",results:{date:"ChartBars StartDate",time:"ChartBars StartTime",open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:"ChartBars UTCOffset",ratio:null}},IntradayRTEquity:{host:{protocol:"https://",server:"GlobalRealTime-chartiq.xignite.com",path:"/chartiq_xignite"},version:"v3",func:"xGlobalRealTime",format:"csv",method:"GetChartBars",statics:"Precision=Minutes&AdjustmentMethod=None",fields:"ChartBars.StartDate,ChartBars.StartTime,ChartBars.UTCOffset,ChartBars.Close,ChartBars.Open,ChartBars.High,ChartBars.Low,ChartBars.Volume,ChartBars.AdjustmentRatio",results:{date:"ChartBars StartDate",time:"ChartBars StartTime",open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:"ChartBars UTCOffset",ratio:null}},SuperIntradayEquity:{host:{protocol:"http"+(e.isIE9?"":"s")+"://",server:"SuperQuotes-chartiq.xignite.com",path:"/superquotes_xignite"},version:null,func:"xSuperQuotes",format:"csv",method:"GetChartBars",statics:"Precision=Minutes&AdjustmentMethod=None",fields:"ChartBars.StartDateTime,ChartBars.UTCOffset,ChartBars.Close,ChartBars.Open,ChartBars.High,ChartBars.Low,ChartBars.Volume,ChartBars.AdjustmentRatio",results:{date:"ChartBars StartDateTime",time:null,open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:"ChartBars UTCOffset",ratio:null,timing:null}},IntradayBATSRTEquity:{host:{protocol:"https://",server:"BATSRealTime-chartiq.xignite.com",path:"/chartiq_xignite"},version:null,func:"xBATSRealTime",format:"csv",method:"GetChartBars",statics:"Precision=Minutes&AdjustmentMethod=None",fields:"ChartBars.StartDate,ChartBars.StartTime,ChartBars.UTCOffset,ChartBars.Close,ChartBars.Open,ChartBars.High,ChartBars.Low,ChartBars.Volume,ChartBars.AdjustmentRatio,Security.MarketIdentificationCode",results:{date:"ChartBars StartDate",time:"ChartBars StartTime",open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:"ChartBars UTCOffset",ratio:null,market:"Security MarketIdentificationCode"}},BATSRealQuote:{host:{protocol:"https://",server:"BatsRealTime-chartiq.xignite.com",path:"/batsrealtime_xignite"},version:"v3",func:"xBATSRealTime",format:"csv",method:"GetExtendedQuote",statics:null,fields:"Date,Open,High,Low,Last,Close,Security.MarketIdentificationCode",results:{date:"Date",time:null,open:"Open",close:"Last",high:"High",low:"Low",volume:null,offset:null,ratio:null,extCls:null,eod:"Close",market:"Security MarketIdentificationCode"}},DelayedIndex:{host:{protocol:"https://",server:"GlobalIndices-chartiq.xignite.com",path:"/globalindices_xignite"},version:null,func:"xglobalindices",format:"csv",method:"GetDelayedIndexValue",statics:null,fields:"Value.Date,Value.Volume,Value.Open,Value.High,Value.Low,Value.Last,Value.Close",results:{date:"Value Date",time:null,open:"Value Open",close:"Value Last",high:"Value High",low:"Value Low",volume:"Value Volume",offset:null,ratio:null,eod:"Value Close"}},RealTimeIndex:{host:{protocol:"https://",server:"GlobalIndicesRealTime-chartiq.xignite.com",path:"/globalindicesrealtime_xignite"},version:null,func:"xglobalindicesrealtime",format:"csv",method:"GetRealTimeIndexValue",statics:null,fields:"Value.Date,Value.Volume,Value.Open,Value.High,Value.Low,Value.Last,Value.Close",results:{date:"Value Date",time:null,open:"Value Open",close:"Value Last",high:"Value High",low:"Value Low",volume:"Value Volume",offset:null,ratio:null,eod:"Value Close"}},IntradayIndex:{host:{protocol:"https://",server:"GlobalIndices-chartiq.xignite.com",path:"/chartiq_xignite"},version:null,func:"xglobalindices",format:"csv",method:"GetChartBars",statics:"Precision=Minutes&AdjustmentMethod=None",fields:"ChartBars.StartDate,ChartBars.StartTime,ChartBars.UTCOffset,ChartBars.Close,ChartBars.Open,ChartBars.High,ChartBars.Low,ChartBars.Volume",results:{date:"ChartBars StartDate",time:"ChartBars StartTime",open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:"ChartBars UTCOffset",ratio:null}},IntradayRTIndex:{host:{protocol:"https://",server:"GlobalIndicesRealTime-chartiq.xignite.com",path:"/chartiq_xignite"},version:null,func:"xglobalindicesrealtime",format:"csv",method:"GetChartBars",statics:"Precision=Minutes&AdjustmentMethod=None",fields:"ChartBars.StartDate,ChartBars.StartTime,ChartBars.UTCOffset,ChartBars.Close,ChartBars.Open,ChartBars.High,ChartBars.Low,ChartBars.Volume",results:{date:"ChartBars StartDate",time:"ChartBars StartTime",open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:"ChartBars UTCOffset",ratio:null}},IntradayRTForex:{host:{protocol:"https://",server:"GlobalCurrencies-chartiq.xignite.com",path:"/chartiq_xignite"},version:null,func:"xGlobalCurrencies",format:"csv",method:"GetChartBars",statics:"Precision=Minutes&PriceType=Bid",fields:"ChartBars.StartDate,ChartBars.StartTime,ChartBars.UTCOffset,ChartBars.Open,ChartBars.High,ChartBars.Low,ChartBars.Close,ChartBars.Volume",results:{date:"ChartBars StartDate",time:"ChartBars StartTime",open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:"ChartBars UTCOffset",ratio:"ChartBars AdjustmentRatio"}},IntradayRTMetals:{host:{protocol:"https://",server:"GlobalMetals-chartiq.xignite.com",path:"/chartiq_xignite"},version:null,func:"xGlobalMetals",format:"csv",method:"GetChartBars",statics:"Precision=Minutes&PriceType=Bid&Currency=",fields:"ChartBars.StartDate,ChartBars.StartTime,ChartBars.UTCOffset,ChartBars.Open,ChartBars.High,ChartBars.Low,ChartBars.Close,ChartBars.Volume",results:{date:"ChartBars StartDate",time:"ChartBars StartTime",open:"ChartBars Open",close:"ChartBars Close",high:"ChartBars High",low:"ChartBars Low",volume:"ChartBars Volume",offset:"ChartBars UTCOffset",ratio:"ChartBars AdjustmentRatio"}},DelayedFuture:{host:{protocol:"https://",server:"Futures-chartiq.xignite.com",path:"/www_xignite"},version:null,func:"xFutures",format:"csv",method:"GetDelayedFuture",statics:null,fields:"Date,Time,Open,High,Low,Last,Volume",results:{date:"Date",time:null,open:"Open",close:"Last",high:"High",low:"Low",volume:"Volume",offset:null,ratio:null}},DelayedMF:{host:{protocol:"https://",server:"NAVs-chartiq.xignite.com",path:"/navs_xignite"},version:"v2",func:"xNAVs",format:"csv",method:"GetNAV",statics:null,fields:"Date,NAV,PreviousNAV",results:{date:"Date",time:null,open:"NAV",close:"NAV",high:"NAV",low:"NAV",volume:null,offset:null,ratio:null}},SplitRatio:{host:{protocol:"https://",server:"GlobalHistorical-chartiq.xignite.com",path:"/www_xignite"},version:null,func:"xGlobalHistorical",format:"json",method:"GetSplitHistory",statics:null,fields:"Splits.ExDate,Splits.SplitRatio",results:{date:"Splits ExDate",ratio:"Splits SplitRatio"}},FundamentalData:{host:{protocol:"https://",server:"factsetfundamentals.xignite.com",path:""},version:null,func:"xFactSetFundamentals",format:"json",method:"GetLatestFundamentals",statics:"UpdatedSince=",fields:null,fundamentaltypes:"DividendYieldFiscal,AverageDailyVolumeYTD,HighPriceLast52Weeks,LowPriceLast52Weeks,Beta,EPS,MarketCapitalization,SharesOutstanding,PERatio"},ExchangeData:{host:{protocol:"https://",server:"globalholidays.xignite.com",path:""},version:null,func:"xGlobalHolidays",format:"json",method:"GetExchangeHoursRange",statics:"TimeZone=Local",fields:null},CorpActionData:{host:{protocol:"https://",server:"www.xignite.com",path:""},version:null,func:"xGlobalHistorical",format:"json",method:"GetSplitHistory",statics:"StartDate=&EndDate=",fields:null},DividendData:{host:{protocol:"https://",server:"www.xignite.com",path:""},version:null,func:"xGlobalHistorical",format:"json",method:"GetCashDividendHistory",statics:"StartDate=&EndDate=",fields:null}},e.QuoteFeed.Xignite.getSnapshotQuote=function(t,i,n,r,a,o){if(t.update&&!t.bypassSnapshot&&t.stx.chart.masterData&&t.stx.chart.masterData.length){var s={host:{protocol:"https://",server:"chartiq.xignite.com",path:"/chartiq_xignite"},version:null,func:"<>",format:"json",method:"<>",fields:"<>"},l="Bid";e.Market.Symbology.isForexMetal(t.symbol)?e.extend(s,{func:"xGlobalMetals",method:"GetRealTimeMetalQuote",fields:"Date,Time,Bid",statics:"Currency="}):e.Market.Symbology.isForexSymbol(t.symbol)?e.extend(s,{func:"xGlobalCurrencies",method:"GetRealTimeRate",fields:"Date,Time,Bid"}):(e.extend(s,{func:"xBATSRealTime",method:"GetRealQuote",fields:"Date,Time,Last"}),l="Last");var h=e.QuoteFeed.Xignite.Utility.url(s,{Symbol:i},t,this.token);return e.postAjax({url:h,cb:function(i,s){if(200==i){s=JSON.parse(s);var h=t.stx.chart.masterData[t.stx.chart.masterData.length-1].DT,c=new Date(+h);n?c.setDate(c.getDate()+1):c.setMinutes(c.getMinutes()+(isNaN(t.interval)?t.period:t.interval));var u=e.strToDateTime(s.Date+" "+s.Time);u.setMinutes(u.getMinutes()+r-u.getTimezoneOffset()),u.setSeconds(0),u.setMilliseconds(0);var d=s[l];if(u>=h&&u<=c&&d>0){var p=[{DT:+u==+c?c:h,Open:d,High:d,Low:d,Close:d,Volume:0,Adj_Close:d}];return void(t.stx.quoteDriver?a({quotes:p}):a(null,p))}}t.bypassSnapshot=!0,o.fetch(t,a)},timeout:1e4}),!0}return!1},e.QuoteFeed.Xignite.Utility={overrides:{protocol:"https://",server:"devservices.chartiq.com/data",path:null,token:null,tokenUser:null},xIgniteInterval:function(t){return isNaN(t)?"d"==t.charAt(0)?"Day":"w"==t.charAt(0)?"Week":"m"==t.charAt(0)?"Month":"y"==t.charAt(0)?"Year":t:""},url:function(t,i,n,r,a){var o=e.QuoteFeed.Xignite.Utility.overrides,s="";t.host instanceof Object?(s+=null!==o.protocol?o.protocol:t.host.protocol,s+=null!==o.server?o.server:t.host.server,s+=null!==o.path?o.path:t.host.path):s+=t.host,t.version&&(s+="/"+t.version),s+="/"+t.func+"."+t.format,t.method instanceof Object?t.method.as_of&&!n.startDate&&n.maxRecords?s+="/"+t.method.as_of:s+="/"+t.method.day:s+="/"+t.method,s+="?",null!==r&&void 0!==r?""!==r&&(s+="&_Token="+r):-1==e.QuoteFeed.Xignite.Templates.token.indexOf("/*")?""!==e.QuoteFeed.Xignite.Templates.token&&(s+=null!==o.token?o.token:"&_Token="+e.QuoteFeed.Xignite.Templates.token):null!==o.token&&(s+="&_Token="+o.token),o.tokenUser&&(s+="&_Token_Userid="+o.tokenUser),a&&(s+="&IdentifierType="+a),t.statics&&(s+="&"+t.statics),t.fields&&(s+="&_fields="+t.fields);for(var l in i)s+="&"+l+"="+(i[l]?i[l]:"");return s},nonMarketMaxRecordsFactor:1.6,marketClosedMaxRecordsFactor:3.5,timeZone:{BVMF:"America/Sao_Paulo",MISX:"Europe/Moscow",MTAA:"Europe/Rome",RTSX:"Europe/Moscow",XAMS:"Europe/Amsterdam",XASX:"Australia/Sydney",XATH:"Europe/Athens",XBAR:"Europe/Madrid",XBER:"Europe/Berlin",XBOM:"Asia/Kolkata",XBRA:"Europe/Bratislava",XBRU:"Europe/Brussels",XBUD:"Europe/Budapest",XCNQ:"America/Toronto",XCSE:"Europe/Copenhagen",XDUB:"Europe/Dublin",XDUS:"Europe/Berlin",XETR:"Europe/Berlin",XFRA:"Europe/Berlin",XHAM:"Europe/Berlin",XHAN:"Europe/Berlin",XHEL:"Europe/Helsinki",XHKG:"Asia/Hong_Kong",XICE:"Atlantic/Reykjavik",XJSE:"Africa/Johannesburg",XKOS:"Asia/Seoul",XKRX:"Asia/Seoul",XLIM:"America/Lima",XLIS:"Europe/Lisbon",XLIT:"Europe/Vilnius",XLON:"Europe/London",XMAD:"Europe/Madrid",XMCE:"Europe/Madrid",XMEX:"America/Mexico_City",XMOD:"America/Montreal",XMUN:"Europe/Berlin",XMUS:"Asia/Muscat",XNSE:"Asia/Kolkata",XNZE:"Pacific/Auckland",XOSL:"Europe/Oslo",XPAR:"Europe/Paris",XPRA:"Europe/Prague",XRIS:"Europe/Riga",XSES:"Asia/Singapore",XSGO:"America/Santiago",XSHE:"Asia/Shanghai",XSHG:"Asia/Shanghai",XSTO:"Europe/Stockholm",XSTU:"Europe/Berlin",XSWX:"Europe/Zurich",XTAE:"Asia/Tel_Aviv",XTAI:"Asia/Taipei",XTAL:"Europe/Tallinn",XTKS:"Asia/Tokyo",XTNX:"America/Toronto",XTSE:"America/Toronto",XTSX:"America/Toronto",XVAL:"Europe/Madrid",XVTX:"Europe/Zurich",XWAR:"Europe/Warsaw",XWBO:"Europe/Vienna",XIDX:"Asia/Jakarta",XKLS:"Asia/Kuala_Lumpur",XPHS:"Asia/Manila",XBKK:"Asia/Bangkok",HSTC:"Asia/Ho_Chi_Minh",XSTC:"Asia/Ho_Chi_Minh",XBOT:"Africa/Gaborone",XGHA:"Africa/Accra",XNAI:"Africa/Nairobi",INDARCX:"America/New_York",INDBVMF:"America/Sao_Paulo",INDCBSX:"America/Chicago",INDMTAA:"Europe/Rome",INDXASE:"America/New_York",INDXASX:"Australia/Sydney",INDXATH:"Europe/Athens",INDXBOM:"Asia/Kolkata",INDXBRA:"Europe/Bratislava",INDXBSE:"Europe/Bucharest",INDXBUD:"Europe/Budapest",INDXCME:"America/Chicago",INDXCSE:"Europe/Copenhagen",IND_DBI:"Europe/Berlin",INDXDUB:"Europe/Dublin",INDXHEL:"Europe/Helsinki",INDXHKG:"Asia/Hong_Kong",INDXJSE:"Africa/Johannesburg",INDXKOS:"Asia/Seoul",INDXKRX:"Asia/Seoul",INDXMAD:"Europe/Madrid",INDXMCE:"Europe/Madrid",INDXMEX:"America/Mexico_City",INDXNAS:"America/New_York",INDXNSE:"Asia/Kolkata",INDXNZE:"Pacific/Auckland",INDXOSL:"Europe/Oslo",INDXPHL:"America/New_York",INDXSES:"Asia/Singapore",INDXSGO:"America/Santiago",INDXSHE:"Asia/Shanghai",INDXSHG:"Asia/Shanghai",INDXSTO:"Europe/Stockholm",INDXSTU:"Europe/Berlin",INDXSTX:"Europe/Zurich",INDXSWX:"Europe/Zurich",INDXTAE:"Asia/Tel_Aviv",INDXTAI:"Asia/Taipei",INDXTKS:"Asia/Tokyo",INDXTSE:"America/Toronto",INDXTSX:"America/Toronto",INDXWAR:"Europe/Warsaw",INDXWBO:"Europe/Vienna",IND_BBGI:"America/New_York",IND_DJI:"America/New_York",IND_DJTSMI:"America/New_York",IND_EURONEXT:"Europe/Brussels",IND_FTSE:"Europe/London",IND_FTSEEUR:"Europe/London",IND_FTSEUSD:"Europe/London",IND_GIDS:"America/New_York",IND_GIF:"America/New_York",IND_HKGI:"Asia/Shanghai",IND_MSCI:"America/New_York",IND_NIKKEI:"Asia/Tokyo",IND_OPRAUnderlying:"America/Chicago",IND_RSL:"America/New_York",IND_SPF:"America/New_York",IND_SPW:"America/Chicago"}},t}),document.createElement("canvas").getContext||function(){function t(){return this.context_||(this.context_=new b(this))}function e(t,e){var i=B.call(arguments,2);return function(){return t.apply(e,i.concat(B.call(arguments)))}}function i(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(t,e,i){t.namespaces[e]||t.namespaces.add(e,i,"#default#VML")}function r(t){if(n(t,"g_vml_","urn:schemas-microsoft-com:vml"),n(t,"g_o_","urn:schemas-microsoft-com:office:office"),!t.styleSheets.ex_canvas_){var e=t.createStyleSheet();e.owningElement.id="ex_canvas_",e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function a(t){var e=t.srcElement;switch(t.propertyName){case"width":e.getContext().clearRect(),e.style.width=e.attributes.width.nodeValue+"px",e.firstChild.style.width=e.clientWidth+"px";break;case"height":e.getContext().clearRect(),e.style.height=e.attributes.height.nodeValue+"px",e.firstChild.style.height=e.clientHeight+"px"}}function o(t){var e=t.srcElement;e.firstChild&&(e.firstChild.style.width=e.clientWidth+"px",e.firstChild.style.height=e.clientHeight+"px")}function s(){return[[1,0,0],[0,1,0],[0,0,1]]}function l(t,e){for(var i=s(),n=0;n<3;n++)for(var r=0;r<3;r++){for(var a=0,o=0;o<3;o++)a+=t[n][o]*e[o][r];i[n][r]=a}return i}function h(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function c(t){var e=t.indexOf("(",3),i=t.indexOf(")",e+1),n=t.substring(e+1,i).split(",");return 4==n.length&&"a"==t.charAt(3)||(n[3]=1),n}function u(t){return parseFloat(t)/100}function d(t,e,i){return Math.min(i,Math.max(e,t))}function p(t){var e,i,n,r,a,o;if(r=parseFloat(t[0])/360%360,r<0&&r++,a=d(u(t[1]),0,1),o=d(u(t[2]),0,1),0===a)e=i=n=o;else{var s=o<.5?o*(1+a):o+a-o*a,l=2*o-s;e=f(l,s,r+1/3),i=f(l,s,r),n=f(l,s,r-1/3)}return"#"+V[Math.floor(255*e)]+V[Math.floor(255*i)]+V[Math.floor(255*n)]}function f(t,e,i){return i<0&&i++,i>1&&i--,6*i<1?t+6*(e-t)*i:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function m(t){if(t in q)return q[t];var e,i,n=1;if(t=String(t),"#"==t.charAt(0))e=t;else if(/^rgb/.test(t)){i=c(t),e="#";for(var r,a=0;a<3;a++)r=-1!=i[a].indexOf("%")?Math.floor(255*u(i[a])):+i[a],e+=V[d(r,0,255)];n=+i[3]}else/^hsl/.test(t)?(i=c(t),e=p(i),n=i[3]):e=W[t]||t;return q[t]={color:e,alpha:n},q[t]}function g(t){if(Y[t])return Y[t];var e=document.createElement("div"),i=e.style;try{i.font=t}catch(t){}return Y[t]={style:i.fontStyle||Q.style,variant:i.fontVariant||Q.variant,weight:i.fontWeight||Q.weight,size:i.fontSize||Q.size,family:i.fontFamily||Q.family},Y[t]}function v(t,e){var i={};for(var n in t)i[n]=t[n];var r=parseFloat(e.currentStyle.fontSize),a=parseFloat(t.size);return"number"==typeof t.size?i.size=t.size:-1!=t.size.indexOf("px")?i.size=a:-1!=t.size.indexOf("em")?i.size=r*a:-1!=t.size.indexOf("%")?i.size=r/100*a:-1!=t.size.indexOf("pt")?i.size=a/.75:i.size=r,i.size*=.981,i}function y(t){return t.style+" "+t.variant+" "+t.weight+" "+t.size+"px "+t.family}function x(t){return $[t]||"square"}function b(t){this.m_=s(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*R,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=t;var e="width:"+t.clientWidth+"px;height:"+t.clientHeight+"px;overflow:hidden;position:absolute",i=t.ownerDocument.createElement("div");i.style.cssText=e,t.appendChild(i);var n=i.cloneNode(!1);n.style.backgroundColor="red",n.style.filter="alpha(opacity=0)",t.appendChild(n),this.element_=i,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function C(t,e,i,n){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:i.x,cp2y:i.y,x:n.x,y:n.y}),t.currentX_=n.x,t.currentY_=n.y}function w(t,e){var i=m(t.strokeStyle),n=i.color,r=i.alpha*t.globalAlpha,a=t.lineScale_*t.lineWidth;a<1&&(r*=a),e.push("<g_vml_:stroke",' opacity="',r,'"',' joinstyle="',t.lineJoin,'"',' miterlimit="',t.miterLimit,'"',' endcap="',x(t.lineCap),'"',' weight="',a,'px"',' color="',n,'" />')}function S(t,e,i,n){var r=t.fillStyle,a=t.arcScaleX_,o=t.arcScaleY_,s=n.x-i.x,l=n.y-i.y;if(r instanceof k){var h,c=0,u={x:0,y:0},d=0,p=1;if("gradient"==r.type_){var f=r.x0_/a,g=r.y0_/o,v=r.x1_/a,y=r.y1_/o;h=T(t,f,g);var x=T(t,v,y),b=x.x-h.x,C=x.y-h.y;c=180*Math.atan2(b,C)/Math.PI,c<0&&(c+=360),c<1e-6&&(c=0)}else{h=T(t,r.x0_,r.y0_),u={x:(h.x-i.x)/s,y:(h.y-i.y)/l},s/=a*R,l/=o*R;var w=P.max(s,l);d=2*r.r0_/w,p=2*r.r1_/w-d}var S=r.colors_;S.sort(function(t,e){return t.offset-e.offset});for(var D=S.length,M=S[0].color,E=S[D-1].color,A=S[0].alpha*t.globalAlpha,I=S[D-1].alpha*t.globalAlpha,F=[],L=0;L<D;L++){var H=S[L];F.push(H.offset*p+d+" "+H.color)}e.push('<g_vml_:fill type="',r.type_,'"',' method="none" focus="100%"',' color="',M,'"',' color2="',E,'"',' colors="',F.join(","),'"',' opacity="',I,'"',' g_o_:opacity2="',A,'"',' angle="',c,'"',' focusposition="',u.x,",",u.y,'" />')}else if(r instanceof _){if(s&&l){var N=-i.x,O=-i.y;e.push("<g_vml_:fill",' position="',N/s*a*a,",",O/l*o*o,'"',' type="tile"',' src="',r.src_,'" />')}}else{var U=m(t.fillStyle),B=U.color,X=U.alpha*t.globalAlpha;e.push('<g_vml_:fill color="',B,'" opacity="',X,'" />')}}function T(t,e,i){var n=t.m_,r=e,a=i;if(t.clip_rect&&t.clip_rect.do_clip){var o=t.clip_rect.y+t.clip_rect.h,s=t.clip_rect.x+t.clip_rect.w;r=e<t.clip_rect.x?t.clip_rect.x:e>s?s:e,a=i<t.clip_rect.y?t.clip_rect.y:i>o?o:i}return{x:R*(r*n[0][0]+a*n[1][0]+n[2][0])-U,y:R*(r*n[0][1]+a*n[1][1]+n[2][1])-U}}function D(t){return isFinite(t[0][0])&&isFinite(t[0][1])&&isFinite(t[1][0])&&isFinite(t[1][1])&&isFinite(t[2][0])&&isFinite(t[2][1])}function M(t,e,i){if(D(e)&&(t.m_=e,i)){var n=e[0][0]*e[1][1]-e[0][1]*e[1][0];t.lineScale_=O(N(n))}}function k(t){this.type_=t,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function _(t,e){switch(A(t),e){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=e;break;default:E("SYNTAX_ERR")}this.src_=t.src,this.width_=t.width,this.height_=t.height}function E(t){throw new I(t)}function A(t){t&&1==t.nodeType&&"IMG"==t.tagName||E("TYPE_MISMATCH_ERR"),"complete"!=t.readyState&&E("INVALID_STATE_ERR")}function I(t){this.code=this[t],this.message=t+": DOM Exception "+this.code}var P=Math,F=P.round,L=P.sin,H=P.cos,N=P.abs,O=P.sqrt,R=10,U=R/2,B=(navigator.userAgent.match(/MSIE ([\d.]+)?/)[1],Array.prototype.slice);r(document);var X={init:function(t){var i=t||document;i.createElement("canvas"),i.attachEvent("onreadystatechange",e(this.init_,this,i))},init_:function(t){for(var e=t.getElementsByTagName("canvas"),i=0;i<e.length;i++)this.initElement(e[i])},initElement:function(e){if(!e.getContext){e.getContext=t,r(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",a),e.attachEvent("onresize",o);var i=e.attributes;i.width&&i.width.specified?e.style.width=i.width.nodeValue+"px":e.width=e.clientWidth,i.height&&i.height.specified?e.style.height=i.height.nodeValue+"px":e.height=e.clientHeight}return e}};X.init();for(var V=[],z=0;z<16;z++)for(var j=0;j<16;j++)V[16*z+j]=z.toString(16)+j.toString(16);var W={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},q={},Q={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"},Y={},$={butt:"flat",round:"round"},G=b.prototype;G.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},G.beginPath=function(){this.currentPath_=[]},G.moveTo=function(t,e){var i=T(this,t,e);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},G.lineTo=function(t,e){var i=T(this,t,e);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},G.bezierCurveTo=function(t,e,i,n,r,a){var o=T(this,r,a);C(this,T(this,t,e),T(this,i,n),o)},G.quadraticCurveTo=function(t,e,i,n){var r=T(this,t,e),a=T(this,i,n),o={x:this.currentX_+2/3*(r.x-this.currentX_),y:this.currentY_+2/3*(r.y-this.currentY_)};C(this,o,{x:o.x+(a.x-this.currentX_)/3,y:o.y+(a.y-this.currentY_)/3},a)},G.arc=function(t,e,i,n,r,a){i*=R;var o=a?"at":"wa",s=t+H(n)*i-U,l=e+L(n)*i-U,h=t+H(r)*i-U,c=e+L(r)*i-U;s!=h||a||(s+=.125);var u=T(this,t,e),d=T(this,s,l),p=T(this,h,c);this.currentPath_.push({type:o,x:u.x,y:u.y,radius:i,xStart:d.x,yStart:d.y,xEnd:p.x,yEnd:p.y})},G.rect=function(t,e,i,n){this.clip_rect?(this.clip_rect.x=t,this.clip_rect.y=e,this.clip_rect.w=i,this.clip_rect.h=n):this.clip_rect={x:t,y:e,w:i,h:n},this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()},G.strokeRect=function(t,e,i,n){var r=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath(),this.stroke(),this.currentPath_=r},G.fillRect=function(t,e,i,n){var r=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath(),this.fill(),this.currentPath_=r},G.createLinearGradient=function(t,e,i,n){var r=new k("gradient");return r.x0_=t,r.y0_=e,r.x1_=i,r.y1_=n,r},G.createRadialGradient=function(t,e,i,n,r,a){var o=new k("gradientradial");return o.x0_=t,o.y0_=e,o.r0_=i,o.x1_=n,o.y1_=r,o.r1_=a,o},G.drawImage=function(t){var e,i,n,r,a,o,s,l,h=t.runtimeStyle.width,c=t.runtimeStyle.height;t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var u=t.width,d=t.height;if(t.runtimeStyle.width=h,t.runtimeStyle.height=c,3==arguments.length)e=arguments[1],i=arguments[2],a=o=0,s=n=u,l=r=d;else if(5==arguments.length)e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[4],a=o=0,s=u,l=d;else{if(9!=arguments.length)throw Error("Invalid number of arguments");a=arguments[1],o=arguments[2],s=arguments[3],l=arguments[4],e=arguments[5],i=arguments[6],n=arguments[7],r=arguments[8]}var p=T(this,e,i),f=[],m=10,g=10;if(f.push(" <g_vml_:group",' coordsize="',R*m,",",R*g,'"',' coordorigin="0,0"',' style="width:',m,"px;height:",g,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var v=[];v.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",F(p.x/R),",","Dy=",F(p.y/R),"");var y=p,x=T(this,e+n,i),b=T(this,e,i+r),C=T(this,e+n,i+r);y.x=P.max(y.x,x.x,b.x,C.x),y.y=P.max(y.y,x.y,b.y,C.y),f.push("padding:0 ",F(y.x/R),"px ",F(y.y/R),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",v.join(""),", sizingmethod='clip');")}else f.push("top:",F(p.y/R),"px;left:",F(p.x/R),"px;");f.push(' ">','<g_vml_:image src="',t.src,'"',' style="width:',R*n,"px;"," height:",R*r,'px"',' cropleft="',a/u,'"',' croptop="',o/d,'"',' cropright="',(u-a-s)/u,'"',' cropbottom="',(d-o-l)/d,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",f.join(""))},G.stroke=function(t){var e=[],i=10,n=10;e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',i,"px;height:",n,'px;"',' coordorigin="0,0"',' coordsize="',R*i,",",R*n,'"',' stroked="',!t,'"',' path="');for(var r={x:null,y:null},a={x:null,y:null},o=0;o<this.currentPath_.length;o++){var s=this.currentPath_[o];switch(s.type){case"moveTo":s,e.push(" m ",F(s.x),",",F(s.y));break;case"lineTo":e.push(" l ",F(s.x),",",F(s.y));break;case"close":
e.push(" x "),s=null;break;case"bezierCurveTo":e.push(" c ",F(s.cp1x),",",F(s.cp1y),",",F(s.cp2x),",",F(s.cp2y),",",F(s.x),",",F(s.y));break;case"at":case"wa":e.push(" ",s.type," ",F(s.x-this.arcScaleX_*s.radius),",",F(s.y-this.arcScaleY_*s.radius)," ",F(s.x+this.arcScaleX_*s.radius),",",F(s.y+this.arcScaleY_*s.radius)," ",F(s.xStart),",",F(s.yStart)," ",F(s.xEnd),",",F(s.yEnd))}s&&((null===r.x||s.x<r.x)&&(r.x=s.x),(null===a.x||s.x>a.x)&&(a.x=s.x),(null===r.y||s.y<r.y)&&(r.y=s.y),(null===a.y||s.y>a.y)&&(a.y=s.y))}e.push(' ">'),t?S(this,e,r,a):w(this,e),e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},G.fill=function(){this.stroke(!0)},G.closePath=function(){this.currentPath_.push({type:"close"})},G.save=function(){var t={};h(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=l(s(),this.m_)},G.restore=function(){this.aStack_.length&&(h(this.aStack_.pop(),this),this.m_=this.mStack_.pop()),this.clip_rect||(this.clip_rect={}),this.clip_rect.do_clip=!1},G.translate=function(t,e){M(this,l([[1,0,0],[0,1,0],[t,e,1]],this.m_),!1)},G.rotate=function(t){var e=H(t),i=L(t);M(this,l([[e,i,0],[-i,e,0],[0,0,1]],this.m_),!1)},G.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e,M(this,l([[t,0,0],[0,e,0],[0,0,1]],this.m_),!0)},G.transform=function(t,e,i,n,r,a){M(this,l([[t,e,0],[i,n,0],[r,a,1]],this.m_),!0)},G.setTransform=function(t,e,i,n,r,a){M(this,[[t,e,0],[i,n,0],[r,a,1]],!0)},G.drawText_=function(t,e,n,r,a){var o=this.m_,s=1e3,l=0,h=s,c={x:0,y:0},u=[],d=v(g(this.font),this.element_),p=y(d),f=this.element_.currentStyle,m=this.textAlign.toLowerCase();switch(m){case"left":case"center":case"right":break;case"end":m="ltr"==f.direction?"right":"left";break;case"start":m="rtl"==f.direction?"right":"left";break;default:m="left"}switch(this.textBaseline){case"hanging":case"top":c.y=d.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":c.y=-d.size/2.25}switch(m){case"right":l=s,h=.05;break;case"center":l=h=s/2}var x=T(this,e+c.x,n+c.y);u.push('<g_vml_:line from="',-l,' 0" to="',h,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!a,'" stroked="',!!a,'" style="position:absolute;width:1px;height:1px;">'),a?w(this,u):S(this,u,{x:-l,y:0},{x:h,y:d.size});var b=o[0][0].toFixed(3)+","+o[1][0].toFixed(3)+","+o[0][1].toFixed(3)+","+o[1][1].toFixed(3)+",0,0",C=F(x.x/R)+","+F(x.y/R);u.push('<g_vml_:skew on="t" matrix="',b,'" ',' offset="',C,'" origin="',l,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',i(t),'" style="v-text-align:',m,";font:",i(p),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",u.join(""))},G.fillText=function(t,e,i,n){this.drawText_(t,e,i,n,!1)},G.strokeText=function(t,e,i,n){this.drawText_(t,e,i,n,!0)},G.measureText=function(t){if(!this.textMeasureEl_){this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild}var e=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(e.createTextNode(t)),{width:this.textMeasureEl_.offsetWidth}},G.clip=function(){this.clip_rect||(this.clip_rect={}),this.clip_rect.do_clip=!0},G.arcTo=function(){},G.createPattern=function(t,e){return new _(t,e)},k.prototype.addColorStop=function(t,e){e=m(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})};var Z=I.prototype=new Error;Z.INDEX_SIZE_ERR=1,Z.DOMSTRING_SIZE_ERR=2,Z.HIERARCHY_REQUEST_ERR=3,Z.WRONG_DOCUMENT_ERR=4,Z.INVALID_CHARACTER_ERR=5,Z.NO_DATA_ALLOWED_ERR=6,Z.NO_MODIFICATION_ALLOWED_ERR=7,Z.NOT_FOUND_ERR=8,Z.NOT_SUPPORTED_ERR=9,Z.INUSE_ATTRIBUTE_ERR=10,Z.INVALID_STATE_ERR=11,Z.SYNTAX_ERR=12,Z.INVALID_MODIFICATION_ERR=13,Z.NAMESPACE_ERR=14,Z.INVALID_ACCESS_ERR=15,Z.VALIDATION_ERR=16,Z.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=X,CanvasRenderingContext2D=b,CanvasGradient=k,CanvasPattern=_,DOMException=I}(),function(t,e,i,n){"use strict";function r(t,e,i){return setTimeout(h(t,i),e)}function a(t,e,i){return!!Array.isArray(t)&&(o(t,i[e],i),!0)}function o(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function s(e,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=t.console&&(t.console.warn||t.console.log);return a&&a.call(t.console,r,n),e.apply(this,arguments)}}function l(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&ut(n,i)}function h(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return typeof t==ft?t.apply(e?e[0]||n:n,e):t}function u(t,e){return t===n?e:t}function d(t,e,i){o(g(e),function(e){t.addEventListener(e,i,!1)})}function p(t,e,i){o(g(e),function(e){t.removeEventListener(e,i,!1)})}function f(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function g(t){return t.trim().split(/\s+/g)}function v(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];v(r,o)<0&&n.push(t[a]),r[a]=o,a++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function b(t,e){for(var i,r,a=e[0].toUpperCase()+e.slice(1),o=0;o<dt.length;){if(i=dt[o],(r=i?i+a:e)in t)return r;o++}return n}function C(){return bt++}function w(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}function S(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&i.handler(e)},this.init()}function T(t){var e=t.options.inputClass;return new(e||(St?R:Tt?X:wt?z:O))(t,D)}function D(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,a=e&At&&n-r==0,o=e&(Pt|Ft)&&n-r==0;i.isFirst=!!a,i.isFinal=!!o,a&&(t.session={}),i.eventType=e,M(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function M(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=E(e)),r>1&&!i.firstMultiple?i.firstMultiple=E(e):1===r&&(i.firstMultiple=!1);var a=i.firstInput,o=i.firstMultiple,s=o?o.center:a.center,l=e.center=A(n);e.timeStamp=vt(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=L(s,l),e.distance=F(s,l),k(i,e),e.offsetDirection=P(e.deltaX,e.deltaY);var h=I(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=gt(h.x)>gt(h.y)?h.x:h.y,e.scale=o?N(o.pointers,n):1,e.rotation=o?H(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,_(i,e);var c=t.element;f(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function k(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},a=t.prevInput||{};e.eventType!==At&&a.eventType!==Pt||(r=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function _(t,e){var i,r,a,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=Ft&&(l>Et||s.velocity===n)){var h=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,u=I(l,h,c);r=u.x,a=u.y,i=gt(u.x)>gt(u.y)?u.x:u.y,o=P(h,c),t.lastInterval=e}else i=s.velocity,r=s.velocityX,a=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=r,e.velocityY=a,e.direction=o}function E(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:mt(t.pointers[i].clientX),clientY:mt(t.pointers[i].clientY)},i++;return{timeStamp:vt(),pointers:e,center:A(e),deltaX:t.deltaX,deltaY:t.deltaY}}function A(t){var e=t.length;if(1===e)return{x:mt(t[0].clientX),y:mt(t[0].clientY)};for(var i=0,n=0,r=0;e>r;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:mt(i/e),y:mt(n/e)}}function I(t,e,i){return{x:e/t||0,y:i/t||0}}function P(t,e){return t===e?Lt:gt(t)>=gt(e)?0>t?Ht:Nt:0>e?Ot:Rt}function F(t,e,i){i||(i=Vt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function L(t,e,i){i||(i=Vt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function H(t,e){return L(e[1],e[0],zt)+L(t[1],t[0],zt)}function N(t,e){return F(e[0],e[1],zt)/F(t[0],t[1],zt)}function O(){this.evEl=Wt,this.evWin=qt,this.pressed=!1,S.apply(this,arguments)}function R(){this.evEl=$t,this.evWin=Gt,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Kt,this.evWin=Jt,this.started=!1,S.apply(this,arguments)}function B(t,e){var i=y(t.touches),n=y(t.changedTouches);return e&(Pt|Ft)&&(i=x(i.concat(n),"identifier",!0)),[i,n]}function X(){this.evTarget=ee,this.targetIds={},S.apply(this,arguments)}function V(t,e){var i=y(t.touches),n=this.targetIds;if(e&(At|It)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,a,o=y(t.changedTouches),s=[],l=this.target;if(a=i.filter(function(t){return f(t.target,l)}),e===At)for(r=0;r<a.length;)n[a[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&s.push(o[r]),e&(Pt|Ft)&&delete n[o[r].identifier],r++;return s.length?[x(a.concat(s),"identifier",!0),s]:void 0}function z(){S.apply(this,arguments);var t=h(this.handler,this);this.touch=new X(this.manager,t),this.mouse=new O(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function j(t,e){t&At?(this.primaryTouch=e.changedPointers[0].identifier,W.call(this,e)):t&(Pt|Ft)&&W.call(this,e)}function W(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,r=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(r,ie)}}function q(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],a=Math.abs(e-r.x),o=Math.abs(i-r.y);if(ne>=a&&ne>=o)return!0}return!1}function Q(t,e){this.manager=t,this.set(e)}function Y(t){if(m(t,he))return he;var e=m(t,ce),i=m(t,ue);return e&&i?he:e||i?e?ce:ue:m(t,le)?le:se}function $(){if(!ae)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!i||t.CSS.supports("touch-action",n)}),e}function G(t){this.options=ut({},this.defaults,t||{}),this.id=C(),this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=pe,this.simultaneous={},this.requireFail=[]}function Z(t){return t&ye?"cancel":t&ge?"end":t&me?"move":t&fe?"start":""}function K(t){return t==Rt?"down":t==Ot?"up":t==Ht?"left":t==Nt?"right":""}function J(t,e){var i=e.manager;return i?i.get(t):t}function tt(){G.apply(this,arguments)}function et(){tt.apply(this,arguments),this.pX=null,this.pY=null}function it(){tt.apply(this,arguments)}function nt(){G.apply(this,arguments),this._timer=null,this._input=null}function rt(){tt.apply(this,arguments)}function at(){tt.apply(this,arguments)}function ot(){G.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(t,e){return e=e||{},e.recognizers=u(e.recognizers,st.defaults.preset),new lt(t,e)}function lt(t,e){this.options=ut({},st.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=T(this),this.touchAction=new Q(this,this.options.touchAction),ht(this,!0),o(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ht(t,e){var i=t.element;if(i.style){var n;o(t.options.cssProps,function(r,a){n=b(i.style,a),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function ct(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var ut,dt=["","webkit","Moz","MS","ms","o"],pt=e.createElement("div"),ft="function",mt=Math.round,gt=Math.abs,vt=Date.now;ut="function"!=typeof Object.assign?function(t){if(t===n||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(r!==n&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])}return e}:Object.assign;var yt=s(function(t,e,i){for(var r=Object.keys(e),a=0;a<r.length;)(!i||i&&t[r[a]]===n)&&(t[r[a]]=e[r[a]]),a++;return t},"extend","Use `assign`."),xt=s(function(t,e){return yt(t,e,!0)},"merge","Use `assign`."),bt=1,Ct=/mobile|tablet|ip(ad|hone|od)|android/i,wt="ontouchstart"in t,St=b(t,"PointerEvent")!==n,Tt=wt&&Ct.test(navigator.userAgent),Dt="touch",Mt="pen",kt="mouse",_t="kinect",Et=25,At=1,It=2,Pt=4,Ft=8,Lt=1,Ht=2,Nt=4,Ot=8,Rt=16,Ut=Ht|Nt,Bt=Ot|Rt,Xt=Ut|Bt,Vt=["x","y"],zt=["clientX","clientY"];S.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(w(this.element),this.evWin,this.domHandler)}};var jt={mousedown:At,mousemove:It,mouseup:Pt},Wt="mousedown",qt="mousemove mouseup";l(O,S,{handler:function(t){var e=jt[t.type];e&At&&0===t.button&&(this.pressed=!0),e&It&&1!==t.which&&(e=Pt),this.pressed&&(e&Pt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:kt,srcEvent:t}))}});var Qt={pointerdown:At,pointermove:It,pointerup:Pt,pointercancel:Ft,pointerout:Ft},Yt={2:Dt,3:Mt,4:kt,5:_t},$t="pointerdown",Gt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&($t="MSPointerDown",Gt="MSPointerMove MSPointerUp MSPointerCancel"),l(R,S,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Qt[n],a=Yt[t.pointerType]||t.pointerType,o=a==Dt,s=v(e,t.pointerId,"pointerId");r&At&&(0===t.button||o)?0>s&&(e.push(t),s=e.length-1):r&(Pt|Ft)&&(i=!0),0>s||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),i&&e.splice(s,1))}});var Zt={touchstart:At,touchmove:It,touchend:Pt,touchcancel:Ft},Kt="touchstart",Jt="touchstart touchmove touchend touchcancel";l(U,S,{handler:function(t){var e=Zt[t.type];if(e===At&&(this.started=!0),this.started){var i=B.call(this,t,e);e&(Pt|Ft)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Dt,srcEvent:t})}}});var te={touchstart:At,touchmove:It,touchend:Pt,touchcancel:Ft},ee="touchstart touchmove touchend touchcancel";l(X,S,{handler:function(t){var e=te[t.type],i=V.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Dt,srcEvent:t})}});var ie=2500,ne=25;l(z,S,{handler:function(t,e,i){var n=i.pointerType==Dt,r=i.pointerType==kt;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)j.call(this,e,i);else if(r&&q.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var re=b(pt.style,"touchAction"),ae=re!==n,oe="compute",se="auto",le="manipulation",he="none",ce="pan-x",ue="pan-y",de=$();Q.prototype={set:function(t){t==oe&&(t=this.compute()),ae&&this.manager.element.style&&de[t]&&(this.manager.element.style[re]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Y(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=m(n,he)&&!de[he],a=m(n,ue)&&!de[ue],o=m(n,ce)&&!de[ce];if(r){var s=1===t.pointers.length,l=t.distance<2,h=t.deltaTime<250;if(s&&l&&h)return}return o&&a?void 0:r||a&&i&Ut||o&&i&Bt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var pe=1,fe=2,me=4,ge=8,ve=ge,ye=16,xe=32;G.prototype={defaults:{},set:function(t){return ut(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=J(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=J(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=J(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=J(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;ge>n&&e(i.options.event+Z(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=ge&&e(i.options.event+Z(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=xe)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(xe|pe)))return!1;t++}return!0},recognize:function(t){var e=ut({},t);return c(this.options.enable,[this,e])?(this.state&(ve|ye|xe)&&(this.state=pe),this.state=this.process(e),void(this.state&(fe|me|ge|ye)&&this.tryEmit(e))):(this.reset(),void(this.state=xe))},process:function(){},getTouchAction:function(){},reset:function(){}},l(tt,G,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(fe|me),r=this.attrTest(t);return n&&(i&Ft||!r)?e|ye:n||r?i&Pt?e|ge:e&fe?e|me:fe:xe}}),l(et,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Xt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ut&&e.push(ue),t&Bt&&e.push(ce),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,a=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&Ut?(r=0===a?Lt:0>a?Ht:Nt,i=a!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?Lt:0>o?Ot:Rt,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return tt.prototype.attrTest.call(this,t)&&(this.state&fe||!(this.state&fe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=K(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(it,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&fe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(nt,G,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[se]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,a=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Pt|Ft)&&!a)this.reset();else if(t.eventType&At)this.reset(),this._timer=r(function(){this.state=ve,this.tryEmit()},e.time,this);else if(t.eventType&Pt)return ve;return xe},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ve&&(t&&t.eventType&Pt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=vt(),this.manager.emit(this.options.event,this._input)))}}),l(rt,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&fe)}}),l(at,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ut|Bt,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Ut|Bt)?e=t.overallVelocity:i&Ut?e=t.overallVelocityX:i&Bt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&gt(e)>this.options.velocity&&t.eventType&Pt},emit:function(t){var e=K(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(ot,G,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,a=t.deltaTime<e.time;if(this.reset(),t.eventType&At&&0===this.count)return this.failTimeout();if(n&&a&&i){if(t.eventType!=Pt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||F(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=r(function(){this.state=ve,this.tryEmit()},e.interval,this),fe):ve}return xe},failTimeout:function(){return this._timer=r(function(){this.state=xe},this.options.interval,this),xe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ve&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.8",st.defaults={domEvents:!1,touchAction:oe,enable:!0,inputTarget:null,inputClass:null,preset:[[rt,{enable:!1}],[it,{enable:!1},["rotate"]],[at,{direction:Ut}],[et,{direction:Ut},["swipe"]],[ot],[ot,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var be=2;lt.prototype={set:function(t){return ut(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?be:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&ve)&&(r=e.curRecognizer=null);for(var a=0;a<n.length;)i=n[a],e.stopped===be||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(fe|me|ge)&&(r=e.curRecognizer=i),a++}},get:function(t){if(t instanceof G)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=v(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==n&&e!==n){var i=this.handlers;return o(g(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==n){var i=this.handlers;return o(g(t),function(t){e?i[t]&&i[t].splice(v(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&ct(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ut(st,{INPUT_START:At,INPUT_MOVE:It,INPUT_END:Pt,INPUT_CANCEL:Ft,STATE_POSSIBLE:pe,STATE_BEGAN:fe,STATE_CHANGED:me,STATE_ENDED:ge,STATE_RECOGNIZED:ve,STATE_CANCELLED:ye,STATE_FAILED:xe,DIRECTION_NONE:Lt,DIRECTION_LEFT:Ht,DIRECTION_RIGHT:Nt,DIRECTION_UP:Ot,DIRECTION_DOWN:Rt,DIRECTION_HORIZONTAL:Ut,DIRECTION_VERTICAL:Bt,DIRECTION_ALL:Xt,Manager:lt,Input:S,TouchAction:Q,TouchInput:X,MouseInput:O,PointerEventInput:R,TouchMouseInput:z,SingleTouchInput:U,Recognizer:G,AttrRecognizer:tt,Tap:ot,Pan:et,Swipe:at,Pinch:it,Rotate:rt,Press:nt,on:d,off:p,each:o,merge:xt,extend:yt,assign:ut,inherit:l,bindFn:h,prefixed:b}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=st,"function"==typeof define&&define.amd?define(function(){return st}):"undefined"!=typeof module&&module.exports?module.exports=st:t[i]=st}(window,document,"Hammer"),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("html2canvas",t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.html2canvas=t()}}(function(){var t;return function t(e,i,n){function r(o,s){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return r(i||t)},c,c.exports,t,e,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,i,n){(function(e){!function(r){function a(t){throw RangeError(L[t])}function o(t,e){for(var i=t.length;i--;)t[i]=e(t[i]);return t}function s(t,e){return o(t.split(F),e).join(".")}function l(t){for(var e,i,n=[],r=0,a=t.length;r<a;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<a?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function h(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=O(t>>>10&1023|55296),t=56320|1023&t),e+=O(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:S}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,i){var n=0;for(t=i?N(t/k):t>>1,t+=N(t/e);t>H*D>>1;n+=S)t=N(t/H);return N(n+(H+1)*t/(t+M))}function p(t){var e,i,n,r,o,s,l,u,p,f,m=[],g=t.length,v=0,y=E,x=_;for(i=t.lastIndexOf(A),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&a("not-basic"),m.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<g;){for(o=v,s=1,l=S;r>=g&&a("invalid-input"),u=c(t.charCodeAt(r++)),(u>=S||u>N((w-v)/s))&&a("overflow"),v+=u*s,p=l<=x?T:l>=x+D?D:l-x,!(u<p);l+=S)f=S-p,s>N(w/f)&&a("overflow"),s*=f;e=m.length+1,x=d(v-o,e,0==o),N(v/e)>w-y&&a("overflow"),y+=N(v/e),v%=e,m.splice(v++,0,y)}return h(m)}function f(t){var e,i,n,r,o,s,h,c,p,f,m,g,v,y,x,b=[];for(t=l(t),g=t.length,e=E,i=0,o=_,s=0;s<g;++s)(m=t[s])<128&&b.push(O(m));for(n=r=b.length,r&&b.push(A);n<g;){for(h=w,s=0;s<g;++s)(m=t[s])>=e&&m<h&&(h=m);for(v=n+1,h-e>N((w-i)/v)&&a("overflow"),i+=(h-e)*v,e=h,s=0;s<g;++s)if(m=t[s],m<e&&++i>w&&a("overflow"),m==e){for(c=i,p=S;f=p<=o?T:p>=o+D?D:p-o,!(c<f);p+=S)x=c-f,y=S-f,b.push(O(u(f+x%y,0))),c=N(x/y);b.push(O(u(c,0))),o=d(i,v,n==r),i=0,++n}++i,++e}return b.join("")}function m(t){return s(t,function(t){return I.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return s(t,function(t){return P.test(t)?"xn--"+f(t):t})}var v="object"==typeof n&&n,y="object"==typeof i&&i&&i.exports==v&&i,x="object"==typeof e&&e;x.global!==x&&x.window!==x||(r=x);var b,C,w=2147483647,S=36,T=1,D=26,M=38,k=700,_=72,E=128,A="-",I=/^xn--/,P=/[^ -~]/,F=/\x2E|\u3002|\uFF0E|\uFF61/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},H=S-T,N=Math.floor,O=String.fromCharCode;if(b={version:"1.2.4",ucs2:{decode:l,encode:h},decode:p,encode:f,toASCII:g,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return b});else if(v&&!v.nodeType)if(y)y.exports=b;else for(C in b)b.hasOwnProperty(C)&&(v[C]=b[C]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e){function i(t,e,i){!t.defaultView||e===t.defaultView.pageXOffset&&i===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,i)}function n(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){o("Unable to copy canvas content from",t,e)}}function r(t,e){for(var i=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;)!0!==e&&1===a.nodeType&&"SCRIPT"===a.nodeName||i.appendChild(r(a,e)),a=a.nextSibling;return 1===t.nodeType&&(i._scrollTop=t.scrollTop,i._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?n(t,i):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(i.value=t.value)),i}function a(t){if(1===t.nodeType){t.scrollTop=t._scrollTop,t.scrollLeft=t._scrollLeft;for(var e=t.firstChild;e;)a(e),e=e.nextSibling}}var o=t("./log");e.exports=function(t,e,n,o,s,l,h){var c=r(t.documentElement,s.javascriptEnabled),u=e.createElement("iframe");return u.className="html2canvas-container",u.style.visibility="hidden",u.style.position="fixed",u.style.left="-10000px",u.style.top="0px",u.style.border="0",u.width=n,u.height=o,u.scrolling="no",e.body.appendChild(u),new Promise(function(e){var n=u.contentWindow.document;u.contentWindow.onload=u.onload=function(){var t=setInterval(function(){n.body.childNodes.length>0&&(a(n.documentElement),clearInterval(t),"view"===s.type&&(u.contentWindow.scrollTo(l,h),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||u.contentWindow.scrollY===h&&u.contentWindow.scrollX===l||(n.documentElement.style.top=-h+"px",n.documentElement.style.left=-l+"px",n.documentElement.style.position="absolute")),e(u))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),i(t,l,h),n.replaceChild(n.adoptNode(c,!0),n.documentElement),n.close()})}},{"./log":13}],3:[function(t,e){function i(t){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}i.prototype.darken=function(t){var e=1-t;return new i([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},i.prototype.isTransparent=function(){return 0===this.a},i.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},i.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),t.length>3&&(this.a=t[3])),Array.isArray(t)};var n=/^#([a-f0-9]{3})$/i;i.prototype.hex3=function(t){var e=null;return null!==(e=t.match(n))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var r=/^#([a-f0-9]{6})$/i;i.prototype.hex6=function(t){var e=null;return null!==(e=t.match(r))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;i.prototype.rgb=function(t){var e=null;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var o=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;i.prototype.rgba=function(t){var e=null;return null!==(e=t.match(o))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},i.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},i.prototype.namedColor=function(t){t=t.toLowerCase();var e=s[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},i.prototype.isColor=!0;var s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],
floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=i},{}],4:[function(e,i){function n(t,e){var i=w++;if(e=e||{},e.logging&&(g.options.logging=!0,g.options.start=Date.now()),e.async="undefined"==typeof e.async||e.async,e.allowTaint="undefined"!=typeof e.allowTaint&&e.allowTaint,e.removeContainer="undefined"==typeof e.removeContainer||e.removeContainer,e.javascriptEnabled="undefined"!=typeof e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout="undefined"==typeof e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:d,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var n=null!=e.width?e.width:window.innerWidth,o=null!=e.height?e.height:window.innerHeight;return x(c(t),e.proxy,document,n,o,e).then(function(t){return a(t.contentWindow.document.documentElement,t,e,n,o)})}var s=(t===undefined?[document.documentElement]:t.length?t:[t])[0];return s.setAttribute(C+i,i),r(s.ownerDocument,e,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,i).then(function(t){return"function"==typeof e.onrendered&&(g("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}function r(t,e,i,n,r){return y(t,t,i,n,e,t.defaultView.pageXOffset,t.defaultView.pageYOffset).then(function(o){g("Document cloned");var s=C+r,l="["+s+"='"+r+"']";t.querySelector(l).removeAttribute(s);var h=o.contentWindow,c=h.document.querySelector(l);return("function"==typeof e.onclone?Promise.resolve(e.onclone(h.document)):Promise.resolve(!0)).then(function(){return a(c,o,e,i,n)})})}function a(t,e,i,n,r){var a=e.contentWindow,c=new u(a.document),d=new p(i,c),m=b(t),v="view"===i.type?n:l(a.document),y="view"===i.type?r:h(a.document),x=new i.renderer(v,y,d,i,document);return new f(t,x,c,d,i).ready.then(function(){g("Finished rendering");var n;return n="view"===i.type?s(x.canvas,{width:x.canvas.width,height:x.canvas.height,top:0,left:0,x:0,y:0}):t===a.document.body||t===a.document.documentElement||null!=i.canvas?x.canvas:s(x.canvas,{width:null!=i.width?i.width:m.width,height:null!=i.height?i.height:m.height,top:m.top,left:m.left,x:0,y:0}),o(e,i),n})}function o(t,e){e.removeContainer&&(t.parentNode.removeChild(t),g("Cleaned up container"))}function s(t,e){var i=document.createElement("canvas"),n=Math.min(t.width-1,Math.max(0,e.left)),r=Math.min(t.width,Math.max(1,e.left+e.width)),a=Math.min(t.height-1,Math.max(0,e.top)),o=Math.min(t.height,Math.max(1,e.top+e.height));i.width=e.width,i.height=e.height;var s=r-n,l=o-a;return g("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",s,"height:",l),g("Resulting crop with width",e.width,"and height",e.height,"with x",n,"and y",a),i.getContext("2d").drawImage(t,n,a,s,l,e.x,e.y,s,l),i}function l(t){return Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth))}function h(t){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}function c(t){var e=document.createElement("a");return e.href=t,e.href=e.href,e}var u=e("./support"),d=e("./renderers/canvas"),p=e("./imageloader"),f=e("./nodeparser"),m=e("./nodecontainer"),g=e("./log"),v=e("./utils"),y=e("./clone"),x=e("./proxy").loadUrlDocument,b=v.getBounds,C="data-html2canvas-node",w=0;n.CanvasRenderer=d,n.NodeContainer=m,n.log=g,n.utils=v;var S="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:n;i.exports=S,"function"==typeof t&&t.amd&&t("html2canvas",[],function(){return S})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e){function i(t){if(this.src=t,n("DummyImageContainer for",t),!this.promise||!this.image){n("Initiating DummyImageContainer"),i.prototype.image=new Image;var e=this.image;i.prototype.promise=new Promise(function(t,i){e.onload=t,e.onerror=i,e.src=r(),!0===e.complete&&t(e)})}}var n=t("./log"),r=t("./utils").smallImage;e.exports=i},{"./log":13,"./utils":26}],6:[function(t,e){function i(t,e){var i,r,a=document.createElement("div"),o=document.createElement("img"),s=document.createElement("span"),l="Hidden Text";a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=e,a.style.margin=0,a.style.padding=0,document.body.appendChild(a),o.src=n(),o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode(l)),a.appendChild(s),a.appendChild(o),i=o.offsetTop-s.offsetTop+1,a.removeChild(s),a.appendChild(document.createTextNode(l)),a.style.lineHeight="normal",o.style.verticalAlign="super",r=o.offsetTop-a.offsetTop+1,document.body.removeChild(a),this.baseline=i,this.lineWidth=1,this.middle=r}var n=t("./utils").smallImage;e.exports=i},{"./utils":26}],7:[function(t,e){function i(){this.data={}}var n=t("./font");i.prototype.getMetrics=function(t,e){return this.data[t+"-"+e]===undefined&&(this.data[t+"-"+e]=new n(t,e)),this.data[t+"-"+e]},e.exports=i},{"./font":6}],8:[function(t,e){function i(e,i,n){this.image=null,this.src=e;var a=this,o=r(e);this.promise=(i?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(n.proxy,o,n)).then(function(e){return t("./core")(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(t){return a.image=t})}var n=t("./utils"),r=n.getBounds,a=t("./proxy").loadUrlDocument;i.prototype.proxyLoad=function(t,e,i){var n=this.src;return a(n.src,t,n.ownerDocument,e.width,e.height,i)},e.exports=i},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e){function i(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}i.TYPES={LINEAR:1,RADIAL:2},i.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=i},{}],10:[function(t,e){function i(t,e){this.src=t,this.image=new Image;var i=this;this.tainted=null,this.promise=new Promise(function(n,r){i.image.onload=n,i.image.onerror=r,e&&(i.image.crossOrigin="anonymous"),i.image.src=t,!0===i.image.complete&&n(i.image)})}e.exports=i},{}],11:[function(t,e){function i(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var n=t("./log"),r=t("./imagecontainer"),a=t("./dummyimagecontainer"),o=t("./proxyimagecontainer"),s=t("./framecontainer"),l=t("./svgcontainer"),h=t("./svgnodecontainer"),c=t("./lineargradientcontainer"),u=t("./webkitgradientcontainer"),d=t("./utils").bind;i.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},i.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},i.prototype.addImage=function(t,e){return function(i){i.args.forEach(function(r){this.imageExists(t,r)||(t.splice(0,0,e.call(this,i)),n("Added image #"+t.length,"string"==typeof r?r.substring(0,100):r))},this)}},i.prototype.hasImageBackground=function(t){return"none"!==t.method},i.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new r(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new r(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new r(e,!0):this.options.proxy?new o(e,this.options.proxy):new a(e):new l(e)}return"linear-gradient"===t.method?new c(t):"gradient"===t.method?new u(t):"svg"===t.method?new h(t.args[0],this.support.svg):"IFRAME"===t.method?new s(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new a(t)},i.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||l.prototype.isInline(t)},i.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},i.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},i.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},i.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout)["catch"](function(){return new a(t.src).promise.then(function(e){t.image=e})})},i.prototype.get=function(t){var e=null;return this.images.some(function(i){return(e=i).src===t})?e:null},i.prototype.fetch=function(t){return this.images=t.reduce(d(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(t,e){t.promise.then(function(){n("Succesfully loaded image #"+(e+1),t)},function(i){n("Failed loading image #"+(e+1),t,i)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),n("Finished searching images"),this},i.prototype.timeout=function(t,e){var i,r=Promise.race([t.promise,new Promise(function(r,a){i=setTimeout(function(){n("Timed out loading image",t),a(t)},e)})]).then(function(t){return clearTimeout(i),t});return r["catch"](function(){clearTimeout(i)}),r},e.exports=i},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e){function i(t){n.apply(this,arguments),this.type=n.TYPES.LINEAR;var e=i.REGEXP_DIRECTION.test(t.args[0])||!n.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var i=this.y0,n=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=n,this.y1=i;break;case"center":break;default:var r=.01*parseFloat(t,10);if(isNaN(r))break;0===e?(this.y0=r,this.y1=1-this.y0):(this.x0=r,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(n.REGEXP_COLORSTOP),i=+e[2],a=0===i?"%":e[3];return{color:new r(e[1]),stop:"%"===a?i/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(t,e){null===t.stop&&this.colorStops.slice(e).some(function(i,n){return null!==i.stop&&(t.stop=(i.stop-this.colorStops[e-1].stop)/(n+1)+this.colorStops[e-1].stop,!0)},this)},this)}var n=t("./gradientcontainer"),r=t("./color");i.prototype=Object.create(n.prototype),i.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=i},{"./color":3,"./gradientcontainer":9}],13:[function(t,e){var i=function(){i.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-i.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};i.options={logging:!1},e.exports=i},{}],14:[function(t,e){function i(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function n(t){var e=t.options[t.selectedIndex||0];return e?e.text||"":""}function r(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}function a(t){return-1!==t.toString().indexOf("%")}function o(t){return t.replace("px","")}function s(t){return parseFloat(t)}var l=t("./color"),h=t("./utils"),c=h.getBounds,u=h.parseBackgrounds,d=h.offsetBounds;i.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},i.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},i.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},i.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},i.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},i.prototype.prefixedCss=function(t){var e=["webkit","moz","ms","o"],i=this.css(t);return i===undefined&&e.some(function(e){return(i=this.css(e+t.substr(0,1).toUpperCase()+t.substr(1)))!==undefined},this),i===undefined?null:i},i.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},i.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},i.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new l(this.css(t)))},i.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},i.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},i.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},i.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=u(this.css("backgroundImage")))},i.prototype.cssList=function(t,e){var i=(this.css(t)||"").split(",");return i=i[e||0]||i[0]||"auto",i=i.trim().split(" "),1===i.length&&(i=[i[0],a(i[0])?"auto":i[0]]),i},i.prototype.parseBackgroundSize=function(t,e,i){var n,r,o=this.cssList("backgroundSize",i);if(a(o[0]))n=t.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=t.width/t.height,l=e.width/e.height;return s<l^"contain"===o[0]?{width:t.height*l,height:t.height}:{width:t.width,height:t.width/l}}n=parseInt(o[0],10)}return r="auto"===o[0]&&"auto"===o[1]?e.height:"auto"===o[1]?n/e.width*e.height:a(o[1])?t.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(n=r/e.height*e.width),{width:n,height:r}},i.prototype.parseBackgroundPosition=function(t,e,i,n){var r,o,s=this.cssList("backgroundPosition",i);return r=a(s[0])?(t.width-(n||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?r/e.width*e.height:a(s[1])?(t.height-(n||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(r=o/e.height*e.width),{left:r,top:o}},i.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},i.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var i=t.match(this.TEXT_SHADOW_PROPERTY),n=0;i&&n<i.length;n++){var r=i[n].match(this.TEXT_SHADOW_VALUES);e.push({color:new l(r[0]),offsetX:r[1]?parseFloat(r[1].replace("px","")):0,offsetY:r[2]?parseFloat(r[2].replace("px","")):0,blur:r[3]?r[3].replace("px",""):0})}return e},i.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(o).map(s);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},i.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?r(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},i.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?d(this.node):c(this.node))},i.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},i.prototype.getValue=function(){var t=this.node.value||"";return"SELECT"===this.node.tagName?t=n(this.node):"password"===this.node.type&&(t=Array(t.length+1).join("\u2022")),0===t.length?this.node.placeholder||"":t},i.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,i.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,i.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,i.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=i},{"./color":3,"./utils":26}],15:[function(t,e){function i(t,e,i,n,r){U("Starting NodeParser"),this.renderer=e,this.options=r,this.range=null,this.support=i,this.renderQueue=[],this.stack=new q(!0,1,t.ownerDocument,null);var a=new X(t,null);if(r.background&&e.rectangle(0,0,e.width,e.height,new W(r.background)),t===t.ownerDocument.documentElement){var o=new X(a.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,o.color("backgroundColor"))}a.visibile=a.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=L([a].concat(this.getChildren(a)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new j,U("Fetched nodes, total:",this.nodes.length),U("Calculate overflow clips"),this.calculateOverflowClips(),U("Start fetching images"),this.images=n.fetch(this.nodes.filter(M)),this.ready=this.images.ready.then(Y(function(){return U("Images loaded, starting parsing"),U("Creating stacking contexts"),this.createStackingContexts(),U("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),U("Render queue created with "+this.renderQueue.length+" items"),new Promise(Y(function(t){r.async?"function"==typeof r.async?r.async.call(this,this.renderQueue,t):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function n(t){return t.parent&&t.parent.clip.length}function r(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function a(){}function o(t,e,i,n){return t.map(function(r,a){if(r.width>0){var o=e.left,s=e.top,l=e.width,h=e.height-t[2].width;switch(a){case 0:h=t[0].width,r.args=c({c1:[o,s],c2:[o+l,s],c3:[o+l-t[1].width,s+h],c4:[o+t[3].width,s+h]},n[0],n[1],i.topLeftOuter,i.topLeftInner,i.topRightOuter,i.topRightInner);break;case 1:o=e.left+e.width-t[1].width,l=t[1].width,r.args=c({c1:[o+l,s],c2:[o+l,s+h+t[2].width],c3:[o,s+h],c4:[o,s+t[0].width]},n[1],n[2],i.topRightOuter,i.topRightInner,i.bottomRightOuter,i.bottomRightInner);break;case 2:s=s+e.height-t[2].width,h=t[2].width,r.args=c({c1:[o+l,s+h],c2:[o,s+h],c3:[o+t[3].width,s],c4:[o+l-t[3].width,s]},n[2],n[3],i.bottomRightOuter,i.bottomRightInner,i.bottomLeftOuter,i.bottomLeftInner);break;case 3:l=t[3].width,r.args=c({c1:[o,s+h+t[2].width],c2:[o,s],c3:[o+l,s+t[0].width],c4:[o+l,s+h]},n[3],n[0],i.bottomLeftOuter,i.bottomLeftInner,i.topLeftOuter,i.topLeftInner)}}return r})}function s(t,e,i,n){var r=(Math.sqrt(2)-1)/3*4,a=i*r,o=n*r,s=t+i,l=e+n;return{topLeft:h({x:t,y:l},{x:t,y:l-o},{x:s-a,y:e},{x:s,y:e}),topRight:h({x:t,y:e},{x:t+a,y:e},{x:s,y:l-o},{x:s,y:l}),bottomRight:h({x:s,y:e},{x:s,y:e+o},{x:t+a,y:l},{x:t,y:l}),bottomLeft:h({x:s,y:l},{x:s-a,y:l},{x:t,y:e+o},{x:t,y:e})}}function l(t,e,i){var n=t.left,r=t.top,a=t.width,o=t.height,l=e[0][0]<a/2?e[0][0]:a/2,h=e[0][1]<o/2?e[0][1]:o/2,c=e[1][0]<a/2?e[1][0]:a/2,u=e[1][1]<o/2?e[1][1]:o/2,d=e[2][0]<a/2?e[2][0]:a/2,p=e[2][1]<o/2?e[2][1]:o/2,f=e[3][0]<a/2?e[3][0]:a/2,m=e[3][1]<o/2?e[3][1]:o/2,g=a-c,v=o-p,y=a-d,x=o-m;return{topLeftOuter:s(n,r,l,h).topLeft.subdivide(.5),topLeftInner:s(n+i[3].width,r+i[0].width,Math.max(0,l-i[3].width),Math.max(0,h-i[0].width)).topLeft.subdivide(.5),topRightOuter:s(n+g,r,c,u).topRight.subdivide(.5),topRightInner:s(n+Math.min(g,a+i[3].width),r+i[0].width,g>a+i[3].width?0:c-i[3].width,u-i[0].width).topRight.subdivide(.5),bottomRightOuter:s(n+y,r+v,d,p).bottomRight.subdivide(.5),bottomRightInner:s(n+Math.min(y,a-i[3].width),r+Math.min(v,o+i[0].width),Math.max(0,d-i[1].width),p-i[2].width).bottomRight.subdivide(.5),bottomLeftOuter:s(n,r+x,f,m).bottomLeft.subdivide(.5),bottomLeftInner:s(n+i[3].width,r+x,Math.max(0,f-i[3].width),m-i[2].width).bottomLeft.subdivide(.5)}}function h(t,e,i,n){var r=function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}};return{start:t,startControl:e,endControl:i,end:n,subdivide:function(a){var o=r(t,e,a),s=r(e,i,a),l=r(i,n,a),c=r(o,s,a),u=r(s,l,a),d=r(c,u,a);return[h(t,o,c,d),h(d,u,l,n)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,i.x,i.y,n.x,n.y])},curveToReversed:function(n){n.push(["bezierCurve",i.x,i.y,e.x,e.y,t.x,t.y])}}}function c(t,e,i,n,r,a,o){var s=[];return e[0]>0||e[1]>0?(s.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),i[0]>0||i[1]>0?(s.push(["line",a[0].start.x,a[0].start.y]),a[0].curveTo(s),s.push(["line",o[0].end.x,o[0].end.y]),o[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function u(t,e,i,n,r,a,o){e[0]>0||e[1]>0?(t.push(["line",n[0].start.x,n[0].start.y]),n[0].curveTo(t),n[1].curveTo(t)):t.push(["line",a,o]),(i[0]>0||i[1]>0)&&t.push(["line",r[0].start.x,r[0].start.y])}function d(t){return t.cssInt("zIndex")<0}function p(t){return t.cssInt("zIndex")>0}function f(t){return 0===t.cssInt("zIndex")}function m(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function g(t){return t instanceof q}function v(t){return t.node.data.trim().length>0}function y(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}function x(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var i=t.css("border"+e+"Radius"),n=i.split(" ");return n.length<=1&&(n[1]=n[0]),n.map(I)})}function b(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function C(t){var e=t.css("position");return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(e)?t.css("zIndex"):"auto")}function w(t){return"static"!==t.css("position")}function S(t){return"none"!==t.css("float")}function T(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}function D(t){var e=this;return function(){return!t.apply(e,arguments)}}function M(t){return t.node.nodeType===Node.ELEMENT_NODE}function k(t){return!0===t.isPseudoElement}function _(t){return t.node.nodeType===Node.TEXT_NODE}function E(t){return function(e,i){return e.cssInt("zIndex")+t.indexOf(e)/t.length-(i.cssInt("zIndex")+t.indexOf(i)/t.length)}}function A(t){return t.getOpacity()<1}function I(t){return parseInt(t,10)}function P(t){return t.width}function F(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function L(t){return[].concat.apply([],t)}function H(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/'|"/)?t.substr(1,t.length-2):t}function N(t){for(var e,i=[],n=0,r=!1;t.length;)O(t[n])===r?(e=t.splice(0,n),e.length&&i.push(B.ucs2.encode(e)),r=!r,n=0):n++,n>=t.length&&(e=t.splice(0,n),e.length&&i.push(B.ucs2.encode(e)));return i}function O(t){return-1!==[32,13,10,9,45].indexOf(t)}function R(t){return/[^\u0000-\u00ff]/.test(t)}var U=t("./log"),B=t("punycode"),X=t("./nodecontainer"),V=t("./textcontainer"),z=t("./pseudoelementcontainer"),j=t("./fontmetrics"),W=t("./color"),q=t("./stackingcontext"),Q=t("./utils"),Y=Q.bind,$=Q.getBounds,G=Q.parseBackgrounds,Z=Q.offsetBounds;i.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(M(t)){k(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],i=t.parseClip();i&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+i.left,t.bounds.top+i.top,i.right-i.left,i.bottom-i.top]]),t.clip=n(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,k(t)&&t.cleanDOM()}else _(t)&&(t.clip=n(t)?t.parent.clip:[]);k(t)||(t.bounds=null)},this)},i.prototype.asyncRenderer=function(t,e,i){i=i||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():i+20>Date.now()?this.asyncRenderer(t,e,i):setTimeout(Y(function(){this.asyncRenderer(t,e)},this),0)},i.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},i.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},i.prototype.createStyles=function(t,e){var i=t.createElement("style");i.innerHTML=e,t.body.appendChild(i)},i.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var i=this.getPseudoElement(t,":before"),n=this.getPseudoElement(t,":after");i&&e.push(i),n&&e.push(n)}return L(e)},i.prototype.getPseudoElement=function(t,e){var i=t.computedStyle(e);if(!i||!i.content||"none"===i.content||"-moz-alt-content"===i.content||"none"===i.display)return null;for(var n=H(i.content),a="url"===n.substr(0,3),o=document.createElement(a?"img":"html2canvaspseudoelement"),s=new z(o,t,e),l=i.length-1;l>=0;l--){var h=r(i.item(l));o.style[h]=i[h]}if(o.className=z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,a)return o.src=G(n)[0].args[0],[s];var c=document.createTextNode(n);return o.appendChild(c),[s,new V(c,s)]},i.prototype.getChildren=function(t){return L([].filter.call(t.node.childNodes,b).map(function(e){var i=[e.nodeType===Node.TEXT_NODE?new V(e,t):new X(e,t)].filter(F);return e.nodeType===Node.ELEMENT_NODE&&i.length&&"TEXTAREA"!==e.tagName?i[0].isElementVisible()?i.concat(this.getChildren(i[0])):[]:i},this))},i.prototype.newStackingContext=function(t,e){var i=new q(e,t.getOpacity(),t.node,t.parent);t.cloneTo(i),(e?i.getParentStack(this):i.parent.stack).contexts.push(i),t.stack=i},i.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){M(t)&&(this.isRootElement(t)||A(t)||C(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):M(t)&&(w(t)&&f(t)||T(t)||S(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},i.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},i.prototype.isRootElement=function(t){return null===t.parent},i.prototype.sortStackingContexts=function(t){t.contexts.sort(E(t.contexts.slice(0))),t.contexts.forEach(this.sortStackingContexts,this)},i.prototype.parseTextBounds=function(t){return function(e,i,n){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&&!t.parent.hasTransform()){var r=n.slice(0,i).join("").length;return this.getRangeBounds(t.node,r,e.length)}if(t.node&&"string"==typeof t.node.data){var a=t.node.splitText(e.length),o=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=a,o}}else this.support.rangeBounds&&!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},i.prototype.getWrapperBounds=function(t,e){var i=t.ownerDocument.createElement("html2canvaswrapper"),n=t.parentNode,r=t.cloneNode(!0);i.appendChild(t.cloneNode(!0)),n.replaceChild(i,t);var a=e?Z(i):$(i);return n.replaceChild(r,i),a},i.prototype.getRangeBounds=function(t,e,i){var n=this.range||(this.range=t.ownerDocument.createRange());return n.setStart(t,e),n.setEnd(t,e+i),n.getBoundingClientRect()},i.prototype.parse=function(t){var e=t.contexts.filter(d),i=t.children.filter(M),n=i.filter(D(S)),r=n.filter(D(w)).filter(D(m)),o=i.filter(D(w)).filter(S),s=n.filter(D(w)).filter(m),l=t.contexts.concat(n.filter(w)).filter(f),h=t.children.filter(_).filter(v),c=t.contexts.filter(p);e.concat(r).concat(o).concat(s).concat(l).concat(h).concat(c).forEach(function(t){this.renderQueue.push(t),g(t)&&(this.parse(t),this.renderQueue.push(new a))},this)},i.prototype.paint=function(t){try{t instanceof a?this.renderer.ctx.restore():_(t)?(k(t.parent)&&t.parent.appendToDOM(),this.paintText(t),k(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(U(t),this.options.strict)throw t}},i.prototype.paintNode=function(t){g(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},i.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,function(){this.renderer.renderBackground(t,e,t.borders.borders.map(P))
},this),this.renderer.clip(t.clip,function(){this.renderer.renderBorders(t.borders.borders)},this),this.renderer.clip(t.backgroundClip,function(){switch(t.node.nodeName){case"svg":case"IFRAME":var i=this.images.get(t.node);i?this.renderer.renderImage(t,e,t.borders,i):U("Error loading <"+t.node.nodeName+">",t.node);break;case"IMG":var n=this.images.get(t.node.src);n?this.renderer.renderImage(t,e,t.borders,n):U("Error loading <img>",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}},this)},i.prototype.paintCheckbox=function(t){var e=t.parseBounds(),i=Math.min(e.width,e.height),n={width:i-1,height:i-1,top:e.top,left:e.left},r=[3,3],a=[r,r,r,r],s=[1,1,1,1].map(function(t){return{color:new W("#A5A5A5"),width:t}}),h=l(n,a,s);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(n.left+1,n.top+1,n.width-2,n.height-2,new W("#DEDEDE")),this.renderer.renderBorders(o(s,n,h,a)),t.node.checked&&(this.renderer.font(new W("#424242"),"normal","normal","bold",i-3+"px","arial"),this.renderer.text("\u2714",n.left+i/6,n.top+i-1))},this)},i.prototype.paintRadio=function(t){var e=t.parseBounds(),i=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,i,new W("#DEDEDE"),1,new W("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+i/4)+1,Math.ceil(e.top+i/4)+1,Math.floor(i/2),new W("#424242"))},this)},i.prototype.paintFormValue=function(t){var e=t.getValue();if(e.length>0){var i=t.node.ownerDocument,n=i.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(e){try{n.style[e]=t.css(e)}catch(t){U("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var r=t.parseBounds();n.style.position="fixed",n.style.left=r.left+"px",n.style.top=r.top+"px",n.textContent=e,i.body.appendChild(n),this.paintText(new V(n.firstChild,t)),i.body.removeChild(n)}},i.prototype.paintText=function(t){t.applyTextTransform();var e=B.ucs2.decode(t.node.data),i=this.options.letterRendering&&!y(t)||R(t.node.data)?e.map(function(t){return B.ucs2.encode([t])}):N(e),n=t.parent.fontWeight(),r=t.parent.css("fontSize"),a=t.parent.css("fontFamily"),o=t.parent.parseTextShadows();this.renderer.font(t.parent.color("color"),t.parent.css("fontStyle"),t.parent.css("fontVariant"),n,r,a),o.length?this.renderer.fontShadow(o[0].color,o[0].offsetX,o[0].offsetY,o[0].blur):this.renderer.clearShadow(),this.renderer.clip(t.parent.clip,function(){i.map(this.parseTextBounds(t),this).forEach(function(e,n){e&&(this.renderer.text(i[n],e.left,e.bottom),this.renderTextDecoration(t.parent,e,this.fontMetrics.getMetrics(a,r)))},this)},this)},i.prototype.renderTextDecoration=function(t,e,i){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+i.baseline+i.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+i.middle+i.lineWidth),e.width,1,t.color("color"))}};var K={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};i.prototype.parseBorders=function(t){var e=t.parseBounds(),i=x(t),n=["Top","Right","Bottom","Left"].map(function(e,i){var n=t.css("border"+e+"Style"),r=t.color("border"+e+"Color");"inset"===n&&r.isBlack()&&(r=new W([255,255,255,r.a]));var a=K[n]?K[n][i]:null;return{width:t.cssInt("border"+e+"Width"),color:a?r[a[0]](a[1]):r,args:null}}),r=l(e,i,n);return{clip:this.parseBackgroundClip(t,r,n,i,e),borders:o(n,e,r,i)}},i.prototype.parseBackgroundClip=function(t,e,i,n,r){var a=t.css("backgroundClip"),o=[];switch(a){case"content-box":case"padding-box":u(o,n[0],n[1],e.topLeftInner,e.topRightInner,r.left+i[3].width,r.top+i[0].width),u(o,n[1],n[2],e.topRightInner,e.bottomRightInner,r.left+r.width-i[1].width,r.top+i[0].width),u(o,n[2],n[3],e.bottomRightInner,e.bottomLeftInner,r.left+r.width-i[1].width,r.top+r.height-i[2].width),u(o,n[3],n[0],e.bottomLeftInner,e.topLeftInner,r.left+i[3].width,r.top+r.height-i[2].width);break;default:u(o,n[0],n[1],e.topLeftOuter,e.topRightOuter,r.left,r.top),u(o,n[1],n[2],e.topRightOuter,e.bottomRightOuter,r.left+r.width,r.top),u(o,n[2],n[3],e.bottomRightOuter,e.bottomLeftOuter,r.left+r.width,r.top+r.height),u(o,n[3],n[0],e.bottomLeftOuter,e.topLeftOuter,r.left,r.top+r.height)}return o},e.exports=i},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,i){function n(t,e,i){var n="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var r=o(n),l=s(e,t,r);return n?c(l):a(i,l,r).then(function(t){return f(t.content)})}function r(t,e,i){var n="crossOrigin"in new Image,r=o(n),l=s(e,t,r);return n?Promise.resolve(l):a(i,l,r).then(function(t){return"data:"+t.type+";base64,"+t.content})}function a(t,e,i){return new Promise(function(n,r){var a=t.createElement("script"),o=function(){delete window.html2canvas.proxy[i],t.body.removeChild(a)};window.html2canvas.proxy[i]=function(t){o(),n(t)},a.src=e,a.onerror=function(t){o(),r(t)},t.body.appendChild(a)})}function o(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++m+"_"+Math.round(1e5*Math.random())}function s(t,e,i){return t+"?url="+encodeURIComponent(e)+(i.length?"&callback=html2canvas.proxy."+i:"")}function l(t){return function(e){var i,n=new DOMParser;try{i=n.parseFromString(e,"text/html")}catch(t){d("DOMParser not supported, falling back to createHTMLDocument"),i=document.implementation.createHTMLDocument("");try{i.open(),i.write(e),i.close()}catch(t){d("createHTMLDocument write not supported, falling back to document.body.innerHTML"),i.body.innerHTML=e}}var r=i.querySelector("base");if(!r||!r.href.host){var a=i.createElement("base");a.href=t,i.head.insertBefore(a,i.head.firstChild)}return i}}function h(t,e,i,r,a,o){return new n(t,e,window.document).then(l(t)).then(function(t){return p(t,i,r,a,o,0,0)})}var c=t("./xhr"),u=t("./utils"),d=t("./log"),p=t("./clone"),f=u.decode64,m=0;i.Proxy=n,i.ProxyURL=r,i.loadUrlDocument=h},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e){function i(t,e){var i=document.createElement("a");i.href=t,t=i.href,this.src=t,this.image=new Image;var r=this;this.promise=new Promise(function(i,a){r.image.crossOrigin="Anonymous",r.image.onload=i,r.image.onerror=a,new n(t,e,document).then(function(t){r.image.src=t})["catch"](a)})}var n=t("./proxy").ProxyURL;e.exports=i},{"./proxy":16}],18:[function(t,e){function i(t,e,i){n.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===i}var n=t("./nodecontainer");i.prototype.cloneTo=function(t){i.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},i.prototype=Object.create(n.prototype),i.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=i},{"./nodecontainer":14}],19:[function(t,e){function i(t,e,i,n,r){this.width=t,this.height=e,this.images=i,this.options=n,this.document=r}var n=t("./log");i.prototype.renderImage=function(t,e,i,n){var r=t.cssInt("paddingLeft"),a=t.cssInt("paddingTop"),o=t.cssInt("paddingRight"),s=t.cssInt("paddingBottom"),l=i.borders,h=e.width-(l[1].width+l[3].width+r+o),c=e.height-(l[0].width+l[2].width+a+s);this.drawImage(n,0,0,n.image.width||h,n.image.height||c,e.left+r+l[3].width,e.top+a+l[0].width,h,c)},i.prototype.renderBackground=function(t,e,i){e.height>0&&e.width>0&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,i))},i.prototype.renderBackgroundColor=function(t,e){var i=t.color("backgroundColor");i.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,i)},i.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},i.prototype.renderBorder=function(t){t.color.isTransparent()||null===t.args||this.drawShape(t.args,t.color)},i.prototype.renderBackgroundImage=function(t,e,i){t.parseBackgroundImages().reverse().forEach(function(r,a,o){switch(r.method){case"url":var s=this.images.get(r.args[0]);s?this.renderBackgroundRepeating(t,e,s,o.length-(a+1),i):n("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(r.value);l?this.renderBackgroundGradient(l,e,i):n("Error loading background-image",r.args[0]);break;case"none":break;default:n("Unknown background-image type",r.args[0])}},this)},i.prototype.renderBackgroundRepeating=function(t,e,i,n,r){var a=t.parseBackgroundSize(e,i.image,n),o=t.parseBackgroundPosition(e,i.image,n,a);switch(t.parseBackgroundRepeat(n)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,o,a,e,e.left+r[3],e.top+o.top+r[0],99999,a.height,r);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,o,a,e,e.left+o.left+r[3],e.top+r[0],a.width,99999,r);break;case"no-repeat":this.backgroundRepeatShape(i,o,a,e,e.left+o.left+r[3],e.top+o.top+r[0],a.width,a.height,r);break;default:this.renderBackgroundRepeat(i,o,a,{top:e.top,left:e.left},r[3],r[0])}},e.exports=i},{"./log":13}],20:[function(t,e){function i(t,e){r.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},o("Initialized CanvasRenderer with size",t,"x",e)}function n(t){return t.length>0}var r=t("../renderer"),a=t("../lineargradientcontainer"),o=t("../log");i.prototype=Object.create(r.prototype),i.prototype.setFillStyle=function(t){return this.ctx.fillStyle="object"==typeof t&&t.isColor?t.toString():t,this.ctx},i.prototype.rectangle=function(t,e,i,n,r){this.setFillStyle(r).fillRect(t,e,i,n)},i.prototype.circle=function(t,e,i,n){this.setFillStyle(n),this.ctx.beginPath(),this.ctx.arc(t+i/2,e+i/2,i/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},i.prototype.circleStroke=function(t,e,i,n,r,a){this.circle(t,e,i,n),this.ctx.strokeStyle=a.toString(),this.ctx.stroke()},i.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},i.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},i.prototype.drawImage=function(t,e,i,n,r,a,o,s,l){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,i,n,r,a,o,s,l)},i.prototype.clip=function(t,e,i){this.ctx.save(),t.filter(n).forEach(function(t){this.shape(t).clip()},this),e.call(i),this.ctx.restore()},i.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},i.prototype.font=function(t,e,i,n,r,a){this.setFillStyle(t).font=[e,i,n,r,a].join(" ").split(",")[0]},i.prototype.fontShadow=function(t,e,i,n){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",i).setVariable("shadowBlur",n)},i.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},i.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},i.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},i.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},i.prototype.text=function(t,e,i){this.ctx.fillText(t,e,i)},i.prototype.backgroundRepeatShape=function(t,e,i,n,r,a,o,s,l){var h=[["line",Math.round(r),Math.round(a)],["line",Math.round(r+o),Math.round(a)],["line",Math.round(r+o),Math.round(s+a)],["line",Math.round(r),Math.round(s+a)]];this.clip([h],function(){this.renderBackgroundRepeat(t,e,i,n,l[3],l[0])},this)},i.prototype.renderBackgroundRepeat=function(t,e,i,n,r,a){var o=Math.round(n.left+e.left+r),s=Math.round(n.top+e.top+a);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,i),"repeat")),this.ctx.translate(o,s),this.ctx.fill(),this.ctx.translate(-o,-s)},i.prototype.renderBackgroundGradient=function(t,e){if(t instanceof a){var i=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){i.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,i)}},i.prototype.resizeImage=function(t,e){var i=t.image;if(i.width===e.width&&i.height===e.height)return i;var n,r=document.createElement("canvas");return r.width=e.width,r.height=e.height,n=r.getContext("2d"),n.drawImage(i,0,0,i.width,i.height,0,0,e.width,e.height),r},e.exports=i},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e){function i(t,e,i,r){n.call(this,i,r),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var n=t("./nodecontainer");i.prototype=Object.create(n.prototype),i.prototype.getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=i},{"./nodecontainer":14}],22:[function(t,e){function i(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}i.prototype.testRangeBounds=function(t){var e,i,n,r,a=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(i=t.createElement("boundtest"),i.style.height="123px",i.style.display="block",t.body.appendChild(i),e.selectNode(i),n=e.getBoundingClientRect(),r=n.height,123===r&&(a=!0),t.body.removeChild(i))),a},i.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},i.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),i=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=i},{}],23:[function(t,e){function i(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then(function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):n(t)}).then(function(t){return new Promise(function(i){window.html2canvas.svg.fabric.loadSVGFromString(t,e.createCanvas.call(e,i))})})}var n=t("./xhr"),r=t("./utils").decode64;i.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},i.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},i.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},i.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},i.prototype.createCanvas=function(t){var e=this;return function(i,n){var r=new window.html2canvas.svg.fabric.StaticCanvas("c");e.image=r.lowerCanvasEl,r.setWidth(n.width).setHeight(n.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(i,n)).renderAll(),t(r.lowerCanvasEl)}},i.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):r(t)},e.exports=i},{"./utils":26,"./xhr":28}],24:[function(t,e){function i(t,e){this.src=t,this.image=null;var i=this;this.promise=e?new Promise(function(e,n){i.image=new Image,i.image.onload=e,i.image.onerror=n,i.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),!0===i.image.complete&&e(i.image)}):this.hasFabric().then(function(){return new Promise(function(e){window.html2canvas.svg.fabric.parseSVGDocument(t,i.createCanvas.call(i,e))})})}var n=t("./svgcontainer");i.prototype=Object.create(n.prototype),e.exports=i},{"./svgcontainer":23}],25:[function(t,e){function i(t,e){r.call(this,t,e)}function n(t,e,i){if(t.length>0)return e+i.toUpperCase()}var r=t("./nodecontainer");i.prototype=Object.create(r.prototype),i.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},i.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,n);case"uppercase":return e.toUpperCase();default:return e}},e.exports=i},{"./nodecontainer":14}],26:[function(t,e,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},i.bind=function(t,e){return function(){return t.apply(e,arguments)}},i.decode64=function(t){var e,i,n,r,a,o,s,l,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=t.length,u="";for(e=0;e<c;e+=4)i=h.indexOf(t[e]),n=h.indexOf(t[e+1]),r=h.indexOf(t[e+2]),a=h.indexOf(t[e+3]),o=i<<2|n>>4,s=(15&n)<<4|r>>2,l=(3&r)<<6|a,u+=64===r?String.fromCharCode(o):64===a||-1===a?String.fromCharCode(o,s):String.fromCharCode(o,s,l);return u},i.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+i,left:e.left,width:i,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},i.offsetBounds=function(t){var e=t.offsetParent?i.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},i.parseBackgrounds=function(t){var e,i,n,r,a,o,s,l=" \r\n\t",h=[],c=0,u=0,d=function(){e&&('"'===i.substr(0,1)&&(i=i.substr(1,i.length-2)),i&&s.push(i),"-"===e.substr(0,1)&&(r=e.indexOf("-",1)+1)>0&&(n=e.substr(0,r),e=e.substr(r)),h.push({prefix:n,method:e.toLowerCase(),value:a,args:s,image:null})),s=[],e=n=i=a=""};return s=[],e=n=i=a="",t.split("").forEach(function(t){if(!(0===c&&l.indexOf(t)>-1)){switch(t){case'"':o?o===t&&(o=null):o=t;break;case"(":if(o)break;if(0===c)return c=1,void(a+=t);u++;break;case")":if(o)break;if(1===c){if(0===u)return c=0,a+=t,void d();u--}break;case",":if(o)break;if(0===c)return void d();if(1===c&&0===u&&!e.match(/^url$/i))return s.push(i),i="",void(a+=t)}a+=t,0===c?e+=t:i+=t}}),d(),h}},{}],27:[function(t,e){function i(t){n.apply(this,arguments),this.type="linear"===t.args[0]?n.TYPES.LINEAR:n.TYPES.RADIAL}var n=t("./gradientcontainer");i.prototype=Object.create(n.prototype),e.exports=i},{"./gradientcontainer":9}],28:[function(t,e){function i(t){return new Promise(function(e,i){var n=new XMLHttpRequest;n.open("GET",t),n.onload=function(){200===n.status?e(n.responseText):i(new Error(n.statusText))},n.onerror=function(){i(new Error("Network Error"))},n.send()})}e.exports=i},{}]},{},[4])(4)}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for ie8.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){return window.innerHeight||0===window.innerHeight||function(t,e){var i=e.documentElement,n=function(t,e,i){"undefined"==typeof t[e]&&Object.defineProperty(t,e,{get:i})};n(t,"innerWidth",function(){return i.clientWidth}),n(t,"innerHeight",function(){return i.clientHeight}),n(t,"scrollX",function(){return t.pageXOffset||i.scrollLeft}),n(t,"scrollY",function(){return t.pageYOffset||i.scrollTop}),n(e,"width",function(){return Math.max(e.body.scrollWidth,i.scrollWidth,e.body.offsetWidth,i.offsetWidth,e.body.clientWidth,i.clientWidth)}),n(e,"height",function(){return Math.max(e.body.scrollHeight,i.scrollHeight,e.body.offsetHeight,i.offsetHeight,e.body.clientHeight,i.clientHeight)})}(window,document),Object.create||(Object.defineProperty=!window.isIE8&&Object.defineProperty||function(t,e,i){i.get&&t.__defineGetter__?t.__defineGetter__(e,i.get):(i.value||i.get)&&(t[e]=i.value||i.get)},Object.create=function(t,e){function i(){}var n;i.prototype=t,n=new i;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&Object.defineProperty(n,r,e[r]);return n}),Date.now||(Date.now=function(){return(new Date).getTime()}),function(){"use strict";for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(n+16,e);return setTimeout(function(){t(n=i)},i-e)},window.cancelAnimationFrame=clearTimeout}}(),window.addEventListener||function(t,e,i,n,r,a,o){t[n]=e[n]=i[n]=function(t,e){var i=this;o.unshift([i,t,e,function(t){t.currentTarget=i,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||i,"function"==typeof e?e.call(i,t):"object"==typeof e&&"function"==typeof e.handleEvent&&e.handleEvent.call(e,t)}]),this.attachEvent("on"+t,o[0][3])},t[r]=e[r]=i[r]=function(t,e){for(var i=0,n=o[i];n;n=o[++i])if(n[0]==this&&n[1]==t&&n[2]==e)return this.detachEvent("on"+t,o.splice(i,1)[0][3])},t[a]=e[a]=i[a]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r},window.getComputedStyle||(window.getComputedStyle=function(t){var e={};for(var i in t.currentStyle)"undefined"!=typeof t.currentStyle[i]&&"outline"!=i&&"outlineWidth"!=i&&(e[i]=t.currentStyle[i]);return e.getPropertyValue=function(t){var e=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),e.test(t)&&(t=t.replace(e,function(){return arguments[2].toUpperCase()})),this[t]?this[t]:null},e})),t}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for intl.js.");t()}}(function(){var t="undefined"!=typeof window?window:self,e="undefined"!=typeof t.Intl?t.Intl:function(t){"use strict";function e(t){return!!R.test(t)&&(!B.test(t)&&!X.test(t))}function i(t){var e,i;t=t.toLowerCase(),i=t.split("-");for(var n=1,r=i.length;n<r;n++)if(2===i[n].length)i[n]=i[n].toUpperCase();else if(4===i[n].length)i[n]=i[n].charAt(0).toUpperCase()+i[n].slice(1);else if(1===i[n].length&&"x"!=i[n])break;t=$.call(i,"-"),(e=t.match(U))&&e.length>1&&(e.sort(),t=t.replace(RegExp("(?:"+U.source+")+","i"),$.call(e,""))),V.call(ot.tags,t)&&(t=ot.tags[t]),i=t.split("-");for(var n=1,r=i.length;n<r;n++)V.call(ot.subtags,i[n])?i[n]=ot.subtags[i[n]]:V.call(ot.extLang,i[n])&&(i[n]=ot.extLang[i[n]][0],1===n&&ot.extLang[i[1]][1]===i[0]&&(i=q.call(i,n++),r-=1));return $.call(i,"-")}function n(){return O}function r(t){var e=String(t),i=L(e);return!1!==rt.test(i)}function a(t){if(t===undefined)return new P;for(var n=new P,t="string"==typeof t?[t]:t,r=H(t),a=r.length,o=0;o<a;){var s=String(o);if(s in r){var l=r[s];if(null==l||"string"!=typeof l&&"object"!=typeof l)throw new TypeError("String or Object type expected");var h=String(l);if(!e(h))throw new RangeError("'"+h+"' is not a structurally valid language tag");h=i(h),-1===j.call(n,h)&&Y.call(n,h)}o++}return n}function o(t,e){for(var i=e;;){if(j.call(t,i)>-1)return i;var n=i.lastIndexOf("-");if(n<0)return;n>=2&&"-"==i.charAt(n-2)&&(n-=2),i=i.substring(0,n)}}function s(t,e){for(var i,r=0,a=e.length;r<a&&!i;){var s=e[r],l=String(s).replace(at,""),i=o(t,l);r++}var h=new I;if(i!==undefined){if(h["[[locale]]"]=i,String(s)!==String(l)){var c=s.match(at)[0],u=s.indexOf("-u-");h["[[extension]]"]=c,h["[[extensionIndex]]"]=u}}else h["[[locale]]"]=n();return h}function l(t,e){return s(t,e)}function h(t,e,i,n,r){if(0===t.length)throw new ReferenceError("No locale data has been provided for this object yet.");if("lookup"===i["[[localeMatcher]]"])var a=s(t,e);else var a=l(t,e);var o=a["[[locale]]"];if(V.call(a,"[[extension]]"))var h=a["[[extension]]"],c=a["[[extensionIndex]]"],u=String.prototype.split,d=u.call(h,"-"),p=d.length;var f=new I;f["[[dataLocale]]"]=o;for(var m="-u",g=0,v=n.length;g<v;){var y=n[g],x=r[o],b=x[y],C=b[0],w="",S=j;if(d!==undefined){var T=S.call(d,y);if(-1!==T)if(T+1<p&&d[T+1].length>2){var D=d[T+1],M=S.call(b,D);if(-1!==M)var C=D,w="-"+y+"-"+C}else{var M=S(b,"true");if(-1!==M)var C="true"}}if(V.call(i,"[["+y+"]]")){var k=i["[["+y+"]]"];-1!==S.call(b,k)&&k!==C&&(C=k,w="")}f["[["+y+"]]"]=C,m+=w,g++}if(m.length>2)var _=o.substring(0,c),E=o.substring(c),o=_+m+E;return f["[[locale]]"]=o,f}function c(t,e){for(var i=e.length,n=new P,r=0;r<i;){var a=e[r];o(t,String(a).replace(at,""))!==undefined&&Y.call(n,a),r++}return q.call(n)}function u(t,e){return c(t,e)}function d(t,e,i){if(i!==undefined){var i=new I(H(i)),n=i.localeMatcher;if(n!==undefined&&"lookup"!==(n=String(n))&&"best fit"!==n)throw new RangeError('matcher should be "lookup" or "best fit"')}if(n===undefined||"best fit"===n)var r=u(t,e);else var r=c(t,e);for(var a in r)V.call(r,a)&&z(r,a,{writable:!1,configurable:!1,value:r[a]});return z(r,"length",{writable:!1}),r}function p(t,e,i,n,r){var a=t[e];if(a!==undefined){if(a="boolean"===i?Boolean(a):"string"===i?String(a):a,n!==undefined&&-1===j.call(n,a))throw new RangeError("'"+a+"' is not an allowed value for `"+e+"`");return a}return r}function f(t,e,i,n,r){var a=t[e];if(a!==undefined){if(a=Number(a),isNaN(a)||a<i||a>n)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(a)}return r}function m(){var e=arguments[0],i=arguments[1];return this&&this!==t?g(H(this),e,i):new t.NumberFormat(e,i)}function g(t,e,i){var n=N(t),o=F();if(!0===n["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");z(t,"__getInternalProperties",{value:function(){if(arguments[0]===J)return n}}),n["[[initializedIntlObject]]"]=!0;var s=a(e);i=i===undefined?{}:H(i);var l=new I,c=p(i,"localeMatcher","string",new P("lookup","best fit"),"best fit");l["[[localeMatcher]]"]=c;var u=K.NumberFormat["[[localeData]]"],d=h(K.NumberFormat["[[availableLocales]]"],s,l,K.NumberFormat["[[relevantExtensionKeys]]"],u);n["[[locale]]"]=d["[[locale]]"],n["[[numberingSystem]]"]=d["[[nu]]"],n["[[dataLocale]]"]=d["[[dataLocale]]"];var m=d["[[dataLocale]]"],g=p(i,"style","string",new P("decimal","percent","currency"),"decimal");n["[[style]]"]=g;var y=p(i,"currency","string");if(y!==undefined&&!r(y))throw new RangeError("'"+y+"' is not a valid currency code");if("currency"===g&&y===undefined)throw new TypeError("Currency code is required when style is currency");if("currency"===g){y=y.toUpperCase(),n["[[currency]]"]=y;var x=v(y)}var b=p(i,"currencyDisplay","string",new P("code","symbol","name"),"symbol");"currency"===g&&(n["[[currencyDisplay]]"]=b);var C=f(i,"minimumIntegerDigits",1,21,1);n["[[minimumIntegerDigits]]"]=C;var w="currency"===g?x:0,S=f(i,"minimumFractionDigits",0,20,w);n["[[minimumFractionDigits]]"]=S;var T="currency"===g?Math.max(S,x):"percent"===g?Math.max(S,0):Math.max(S,3),D=f(i,"maximumFractionDigits",S,20,T);n["[[maximumFractionDigits]]"]=D;var M=i.minimumSignificantDigits,k=i.maximumSignificantDigits;M===undefined&&k===undefined||(M=f(i,"minimumSignificantDigits",1,21,1),k=f(i,"maximumSignificantDigits",M,21,21),n["[[minimumSignificantDigits]]"]=M,n["[[maximumSignificantDigits]]"]=k);var _=p(i,"useGrouping","boolean",undefined,!0);n["[[useGrouping]]"]=_;var E=u[m],A=E.patterns,L=A[g];return n["[[positivePattern]]"]=L.positivePattern,n["[[negativePattern]]"]=L.negativePattern,n["[[boundFormat]]"]=undefined,n["[[initializedNumberFormat]]"]=!0,o.exp.test(o.input),t}function v(t){return st[t]!==undefined?st[t]:2}function y(t,e){var i,n=F(),r=N(t),a=r["[[dataLocale]]"],o=r["[[numberingSystem]]"],s=K.NumberFormat["[[localeData]]"][a],l=s.symbols[o]||s.symbols.latn,h=!1;if(!1===isFinite(e))isNaN(e)?i=l.nan:(i=l.infinity,e<0&&(h=!0));else{if(e<0&&(h=!0,e=-e),"percent"===r["[[style]]"]&&(e*=100),i=V.call(r,"[[minimumSignificantDigits]]")&&V.call(r,"[[maximumSignificantDigits]]")?x(e,r["[[minimumSignificantDigits]]"],r["[[maximumSignificantDigits]]"]):b(e,r["[[minimumIntegerDigits]]"],r["[[minimumFractionDigits]]"],r["[[maximumFractionDigits]]"]),lt[o]){var c=lt[r["[[numberingSystem]]"]];i=String(i).replace(/\d/g,function(t){return c[t]})}else i=String(i);if(i=i.replace(/\./g,l.decimal),!0===r["[[useGrouping]]"]){var u=i.split(l.decimal);u[0]=u[0].replace(nt,l.group),i=$.call(u,l.decimal)}}var d=r[!0===h?"[[negativePattern]]":"[[positivePattern]]"];if(d=d.replace("{number}",i),"currency"===r["[[style]]"]){var p,f=r["[[currency]]"],m=s.currencies[f];"code"===r["[[currencyDisplay]]"]?p=f:"symbol"===r["[[currencyDisplay]]"]?p=m||f:"name"===r["[[currencyDisplay]]"]&&(p=m?m["displayName-count-one"]:f),d=d.replace("{currency}",p)}return n.exp.test(n.input),d}function x(t,e,i){var n=i;if(0===t)var r=$.call(Array(n+1),"0"),a=0;else{var o,s=t%1,l=s?Math.pow(10,i):1,r=Number.prototype.toPrecision.call(t*l,i),a=(o=r.indexOf("e"))>-1?Number(r.slice(o+1)):(o=r.indexOf("."))>-1?o-1:r.length-1;s&&(a-=i),r=r.slice(0,r.indexOf("e")>-1?o:r.length).replace(".","")}if(a>=n)return r+$.call(Array(a-n+1+1),"0");if(a===n-1)return r;if(a>=0?r=r.slice(0,a+1)+"."+r.slice(a+1):a<0&&(r="0."+$.call(Array(1-(a+1)),"0")+r),r.indexOf(".")>=0&&i>e){for(var h=i-e;h>0&&"0"===r.charAt(r.length-1);)r=r.slice(0,-1),h--;"."===r.charAt(r.length-1)&&(r=r.slice(0,-1))}return r}function b(t,e,i,n){var r,a=Number.prototype.toFixed.call(t,n),o=a.split(".")[0].length,s=n-i,l=(r=a.indexOf("e"))>-1?a.slice(r+1):0;for(l&&(a=a.slice(0,r).replace(".",""),a+=$.call(Array(l-(a.length-1)+1),"0")+"."+$.call(Array(n+1),"0"),o=a.length);s>0&&"0"===a.slice(-1);)a=a.slice(0,-1),s--;if("."===a.slice(-1)&&(a=a.slice(0,-1)),o<e)var h=$.call(Array(e-o+1),"0");return(h||"")+a}function C(){var e=arguments[0],i=arguments[1];return this&&this!==t?w(H(this),e,i):new t.DateTimeFormat(e,i)}function w(t,e,i){var n=N(t),r=F();if(!0===n["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");z(t,"__getInternalProperties",{value:function(){if(arguments[0]===J)return n}}),n["[[initializedIntlObject]]"]=!0;var o=a(e),i=S(i,"any","date"),s=new I,l=p(i,"localeMatcher","string",new P("lookup","best fit"),"best fit");s["[[localeMatcher]]"]=l;var c=K.DateTimeFormat,u=c["[[localeData]]"],d=h(c["[[availableLocales]]"],o,s,c["[[relevantExtensionKeys]]"],u);n["[[locale]]"]=d["[[locale]]"],n["[[calendar]]"]=d["[[ca]]"],n["[[numberingSystem]]"]=d["[[nu]]"],n["[[dataLocale]]"]=d["[[dataLocale]]"];var f=d["[[dataLocale]]"],m=i.timeZone;if(m!==undefined&&"UTC"!==(m=L(m)))throw new RangeError("timeZone is not supported.");n["[[timeZone]]"]=m,s=new I;for(var g in ht)if(V.call(ht,g)){var v=p(i,g,"string",ht[g]);s["[["+g+"]]"]=v}var y,x=u[f],b=x.formats,l=p(i,"formatMatcher","string",new P("basic","best fit"),"best fit");y="basic"===l?T(s,b):D(s,b);for(var g in ht)if(V.call(ht,g)&&V.call(y,g)){var C=y[g];n["[["+g+"]]"]=C}var w,M=p(i,"hour12","boolean");if(n["[[hour]]"])if(M=M===undefined?x.hour12:M,
n["[[hour12]]"]=M,!0===M){var k=x.hourNo0;n["[[hourNo0]]"]=k,w=y.pattern12}else w=y.pattern;else w=y.pattern;return n["[[pattern]]"]=w,n["[[boundFormat]]"]=undefined,n["[[initializedDateTimeFormat]]"]=!0,r.exp.test(r.input),t}function S(t,e,i){t=t===undefined?null:new I(H(t));var n=W,t=n(t),r=!0;return"date"!==e&&"any"!==e||t.weekday===undefined&&t.year===undefined&&t.month===undefined&&t.day===undefined||(r=!1),"time"!==e&&"any"!==e||t.hour===undefined&&t.minute===undefined&&t.second===undefined||(r=!1),!r||"date"!==i&&"all"!==i||(t.year=t.month=t.day="numeric"),!r||"time"!==i&&"all"!==i||(t.hour=t.minute=t.second="numeric"),t}function T(t,e){for(var i,n=120,r=20,a=8,o=6,s=6,l=3,h=-Infinity,c=0,u=e.length;c<u;){var d=e[c],p=0;for(var f in ht)if(V.call(ht,f)){var m=t["[["+f+"]]"],g=V.call(d,f)?d[f]:undefined;if(m===undefined&&g!==undefined)p-=r;else if(m!==undefined&&g===undefined)p-=n;else{var v=["2-digit","numeric","narrow","short","long"],y=j.call(v,m),x=j.call(v,g),b=Math.max(Math.min(x-y,2),-2);2===b?p-=o:1===b?p-=l:-1===b?p-=s:-2===b&&(p-=a)}}p>h&&(h=p,i=d),c++}return i}function D(t,e){return T(t,e)}function M(e,i){if(!isFinite(i))throw new RangeError("Invalid valid date passed to format");var n=e.__getInternalProperties(J),r=F(),a=n["[[locale]]"],o=new t.NumberFormat([a],{useGrouping:!1}),s=new t.NumberFormat([a],{minimumIntegerDigits:2,useGrouping:!1}),l=k(i,n["[[calendar]]"],n["[[timeZone]]"]),h=n["[[pattern]]"],c=n["[[dataLocale]]"],u=K.DateTimeFormat["[[localeData]]"][c].calendars,d=n["[[calendar]]"];for(var p in ht)if(V.call(n,"[["+p+"]]")){var f,m,g=n["[["+p+"]]"],v=l["[["+p+"]]"];if("year"===p&&v<=0?v=1-v:"month"===p?v++:"hour"===p&&!0===n["[[hour12]]"]&&(v%=12,f=v!==l["[["+p+"]]"],0===v&&!0===n["[[hourNo0]]"]&&(v=12)),"numeric"===g)m=y(o,v);else if("2-digit"===g)m=y(s,v),m.length>2&&(m=m.slice(-2));else if(g in tt)switch(p){case"month":m=A(u,d,"months",g,l["[["+p+"]]"]);break;case"weekday":try{m=A(u,d,"days",g,l["[["+p+"]]"])}catch(t){throw new Error("Could not find weekday data for locale "+a)}break;case"timeZoneName":m="";break;default:m=l["[["+p+"]]"]}h=h.replace("{"+p+"}",m)}return!0===n["[[hour12]]"]&&(m=A(u,d,"dayPeriods",f?"pm":"am"),h=h.replace("{ampm}",m)),r.exp.test(r.input),h}function k(t){var e=new Date(t);return new I({"[[weekday]]":e.getDay(),"[[era]]":+(e.getFullYear>=0),"[[year]]":e.getFullYear(),"[[month]]":e.getMonth(),"[[day]]":e.getDate(),"[[hour]]":e.getHours(),"[[minute]]":e.getMinutes(),"[[second]]":e.getSeconds(),"[[inDST]]":!1})}function _(i){if(!e(i.locale))throw new Error("Object passed doesn't identify itself with a valid language tag");if(!i.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var n,r=[i.locale],a=i.locale.split("-");for(a.length>2&&4==a[1].length&&Y.call(r,a[0]+"-"+a[2]);n=G.call(r);)Y.call(K.NumberFormat["[[availableLocales]]"],n),K.NumberFormat["[[localeData]]"][n]=i.number,i.date&&(i.date.nu=i.number.nu,Y.call(K.DateTimeFormat["[[availableLocales]]"],n),K.DateTimeFormat["[[localeData]]"][n]=i.date);O===undefined&&(O=i.locale),et||(g(t.NumberFormat.prototype),et=!0),i.date&&!it&&(w(t.DateTimeFormat.prototype),it=!0)}function E(t){if(!V.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var e=F(),i=arguments[1],n=this["[[availableLocales]]"],r=a(t);return e.exp.test(e.input),d(n,r,i)}function A(t,e,i,n,r){var a=t[e]&&t[e][i]?t[e][i]:t.gregory[i],o={narrow:["short","long"],"short":["long","narrow"],"long":["short","narrow"]},s=V.call(a,n)?a[n]:V.call(a,o[n][0])?a[o[n][0]]:a[o[n][1]];return null!=r?s[r]:s}function I(t){for(var e in t)(t instanceof I||V.call(t,e))&&z(this,e,{value:t[e],enumerable:!0,writable:!0,configurable:!0})}function P(){z(this,"length",{writable:!0,value:0}),arguments.length&&Y.apply(this,q.call(arguments))}function F(){var t=RegExp.lastMatch,e={input:RegExp.input},i=/[.?*+^$[\]\\(){}|-]/g,n=new P,r={};")"==t&&(t="\\)");for(var a=1;a<=9;a++)r["$"+a]=RegExp["$"+a];for(var a=1;a<=9;a++){var o=r["$"+a];t=o?t.replace(o,"("+o.replace(i,"\\$0")+")"):"()"+t,Y.call(n,t.slice(0,t.indexOf("(")+1)),t=t.slice(t.indexOf("(")+1)}return e.exp=new RegExp($.call(n,"")+t,RegExp.multiline?"m":""),e}function L(t){for(var e=t.length;e--;){var i=t.charAt(e);i>="a"&&i<="z"&&(t=t.slice(0,e)+i.toUpperCase()+t.slice(e+1))}return t}function H(t){if(null==t)throw new TypeError("Cannot convert null or undefined to object");return Object(t)}function N(t){return V.call(t,"__getInternalProperties")?t.__getInternalProperties(J):W(null)}var O,R,U,B,X,V=Object.prototype.hasOwnProperty,z=!window.isIE8&&Object.defineProperty||function(t,e,i){i.get&&t.__defineGetter__?t.__defineGetter__(e,i.get):(i.value||i.get)&&(t[e]=i.value||i.get)},j=Array.prototype.indexOf||function(t){var e=this;if(!e.length)return-1;for(var i=arguments[1]||0,n=e.length;i<n;i++)if(e[i]===t)return i},W=Object.create||function(t,e){function i(){}var n;i.prototype=t,n=new i;for(var r in e)V.call(e,r)&&z(n,r,e[r]);return n},q=Array.prototype.slice,Q=Array.prototype.concat,Y=Array.prototype.push,$=Array.prototype.join,G=Array.prototype.shift,Z=Function.prototype.bind||function(t){var e=this,i=q.call(arguments,1);return function(){e.apply(t,Q.call(i,q.call(arguments)))}},K=W(null),J=Math.random(),tt=W(null,{narrow:{},"short":{},"long":{}}),et=!1,it=!1,nt=/(?=(?!^)(?:\d{3})+(?!\d))/g,rt=/^[A-Z]{3}$/,at=/-u(?:-[0-9a-z]{2,8})+/gi,ot={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97","in":"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}},st={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:0,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};!function(){var t="[a-z]{3}(?:-[a-z]{3}){0,2}",e="(?:[a-z]{2,3}(?:-"+t+")?|[a-z]{4}|[a-z]{5,8})",i="[a-z]{4}",n="(?:[a-z]{2}|\\d{3})",r="(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3})",a="[0-9a-wy-z]",o=a+"(?:-[a-z0-9]{2,8})+",s="x(?:-[a-z0-9]{1,8})+",l="(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))",h="(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))",c="(?:"+l+"|"+h+")",u=e+"(?:-"+i+")?(?:-"+n+")?(?:-"+r+")*(?:-"+o+")*(?:-"+s+")?";R=RegExp("^(?:"+u+"|"+s+"|"+c+")$","i"),B=RegExp("^(?!x).*?-("+r+")-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),X=RegExp("^(?!x).*?-("+a+")-(?:\\w+-(?!x-))*\\1\\b","i"),U=RegExp("-"+o,"ig")}(),z(t,"NumberFormat",{configurable:!0,writable:!0,value:m}),z(t.NumberFormat,"prototype",{writable:!1}),K.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},z(t.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:Z.call(E,K.NumberFormat)}),z(t.NumberFormat.prototype,"format",{configurable:!0,get:function(){var t=null!=this&&"object"==typeof this&&N(this);if(!t||!t["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(t["[[boundFormat]]"]===undefined){var e=function(t){return y(this,Number(t))},i=Z.call(e,this);t["[[boundFormat]]"]=i}return t["[[boundFormat]]"]}});var lt={arab:["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],arabext:["\u06f0","\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9"],bali:["\u1b50","\u1b51","\u1b52","\u1b53","\u1b54","\u1b55","\u1b56","\u1b57","\u1b58","\u1b59"],beng:["\u09e6","\u09e7","\u09e8","\u09e9","\u09ea","\u09eb","\u09ec","\u09ed","\u09ee","\u09ef"],deva:["\u0966","\u0967","\u0968","\u0969","\u096a","\u096b","\u096c","\u096d","\u096e","\u096f"],fullwide:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19"],gujr:["\u0ae6","\u0ae7","\u0ae8","\u0ae9","\u0aea","\u0aeb","\u0aec","\u0aed","\u0aee","\u0aef"],guru:["\u0a66","\u0a67","\u0a68","\u0a69","\u0a6a","\u0a6b","\u0a6c","\u0a6d","\u0a6e","\u0a6f"],hanidec:["\u3007","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],khmr:["\u17e0","\u17e1","\u17e2","\u17e3","\u17e4","\u17e5","\u17e6","\u17e7","\u17e8","\u17e9"],knda:["\u0ce6","\u0ce7","\u0ce8","\u0ce9","\u0cea","\u0ceb","\u0cec","\u0ced","\u0cee","\u0cef"],laoo:["\u0ed0","\u0ed1","\u0ed2","\u0ed3","\u0ed4","\u0ed5","\u0ed6","\u0ed7","\u0ed8","\u0ed9"],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["\u1946","\u1947","\u1948","\u1949","\u194a","\u194b","\u194c","\u194d","\u194e","\u194f"],mlym:["\u0d66","\u0d67","\u0d68","\u0d69","\u0d6a","\u0d6b","\u0d6c","\u0d6d","\u0d6e","\u0d6f"],mong:["\u1810","\u1811","\u1812","\u1813","\u1814","\u1815","\u1816","\u1817","\u1818","\u1819"],mymr:["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049"],orya:["\u0b66","\u0b67","\u0b68","\u0b69","\u0b6a","\u0b6b","\u0b6c","\u0b6d","\u0b6e","\u0b6f"],tamldec:["\u0be6","\u0be7","\u0be8","\u0be9","\u0bea","\u0beb","\u0bec","\u0bed","\u0bee","\u0bef"],telu:["\u0c66","\u0c67","\u0c68","\u0c69","\u0c6a","\u0c6b","\u0c6c","\u0c6d","\u0c6e","\u0c6f"],thai:["\u0e50","\u0e51","\u0e52","\u0e53","\u0e54","\u0e55","\u0e56","\u0e57","\u0e58","\u0e59"],tibt:["\u0f20","\u0f21","\u0f22","\u0f23","\u0f24","\u0f25","\u0f26","\u0f27","\u0f28","\u0f29"]};z(t.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var t,e=new I,i=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],n=null!=this&&"object"==typeof this&&N(this);if(!n||!n["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var r=0,a=i.length;r<a;r++)V.call(n,t="[["+i[r]+"]]")&&(e[i[r]]={value:n[t],writable:!0,configurable:!0,enumerable:!0});return W({},e)}}),z(t,"DateTimeFormat",{configurable:!0,writable:!0,value:C}),z(C,"prototype",{writable:!1});var ht={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};return K.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},z(t.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:Z.call(E,K.DateTimeFormat)}),z(t.DateTimeFormat.prototype,"format",{configurable:!0,get:function(){var t=null!=this&&"object"==typeof this&&N(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(t["[[boundFormat]]"]===undefined){var e=function(){return M(this,Number(0===arguments.length?Date.now():arguments[0]))},i=Z.call(e,this);t["[[boundFormat]]"]=i}return t["[[boundFormat]]"]}}),z(t.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var t,e=new I,i=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","pattern"],n=null!=this&&"object"==typeof this&&N(this);if(!n||!n["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var r=0,a=i.length;r<a;r++)V.call(n,t="[["+i[r]+"]]")&&(e[i[r]]={value:n[t],writable:!0,configurable:!0,enumerable:!0});return W({},e)}}),z(Number.prototype,"toLocaleStringIntl",{writable:!0,configurable:!0,value:function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleStringIntl()");return y(new m(arguments[0],arguments[1]),this)}}),z(Date.prototype,"toLocaleStringIntl",{writable:!0,configurable:!0,value:function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleStringIntl()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1],i=S(i,"any","all");return M(new C(e,i),t)}}),z(Date.prototype,"toLocaleDateString",{writable:!0,configurable:!0,value:function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1],i=S(i,"date","date");return M(new C(e,i),t)}}),z(Date.prototype,"toLocaleTimeString",{writable:!0,configurable:!0,value:function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1],i=S(i,"time","time");return M(new C(e,i),t)}}),z(t,"__addLocaleData",{value:_}),"undefined"!=typeof window&&(window.IntlLocaleData=K),I.prototype=W(null),P.prototype=W(null),t}({});return t.Intl||(t.Intl=e),{Intl:e}}),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for iscroll.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
return function(e,i,n){function r(t,e){this.wrapper="string"==typeof t?i.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in e)this.options[n]=e[n];this.translateZ=this.options.HWCompositing&&l.hasPerspective?" translateZ(0)":"",this.options.useTransition=l.hasTransition&&this.options.useTransition,this.options.useTransform=l.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?l.ease[this.options.bounceEasing]||l.ease.circular:this.options.bounceEasing,this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function a(t,e,n){var r=i.createElement("div"),a=i.createElement("div");return!0===n&&(r.style.cssText="position:absolute;z-index:9999"),a.className="iScrollIndicator","h"==t?(!0===n&&(r.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",a.style.height="100%"),r.className="iScrollHorizontalScrollbar"):(!0===n&&(r.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",a.style.width="100%"),r.className="iScrollVerticalScrollbar"),r.style.cssText+=";overflow:hidden",e||(r.style.pointerEvents="none"),r.appendChild(a),r}function o(t,n){this.wrapper="string"==typeof n.el?i.querySelector(n.el):n.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=t,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var r in n)this.options[r]=n[r];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(l.addEvent(this.indicator,"touchstart",this),l.addEvent(e,"touchend",this)),this.options.disablePointer||(l.addEvent(this.indicator,l.prefixPointerEvent("pointerdown"),this),l.addEvent(e,l.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(l.addEvent(this.indicator,"mousedown",this),l.addEvent(e,"mouseup",this))),this.options.fade&&(this.wrapperStyle[l.style.transform]=this.scroller.translateZ,this.wrapperStyle[l.style.transitionDuration]=l.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var s=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},l=function(){function t(t){return!1!==o&&(""===o?t:o+t.charAt(0).toUpperCase()+t.substr(1))}var r={},a=i.createElement("div").style,o=function(){for(var t=["t","webkitT","MozT","msT","OT"],e=0,i=t.length;e<i;e++)if(t[e]+"ransform"in a)return t[e].substr(0,t[e].length-1);return!1}();r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(t,e){for(var i in e)t[i]=e[i]},r.addEvent=function(t,e,i,n){t.addEventListener(e,i,!!n)},r.removeEvent=function(t,e,i,n){t.removeEventListener(e,i,!!n)},r.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},r.momentum=function(t,e,i,r,a,o){var s,l,h=t-e,c=n.abs(h)/i;return o=o===undefined?6e-4:o,s=t+c*c/(2*o)*(h<0?-1:1),l=c/o,s<r?(s=a?r-a/2.5*(c/8):r,h=n.abs(s-t),l=h/c):s>0&&(s=a?a/2.5*(c/8):0,h=n.abs(t)+s,l=h/c),{destination:n.round(s),duration:l}};var s=t("transform");return r.extend(r,{hasTransform:!1!==s,hasPerspective:t("perspective")in a,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:t("transition")in a}),r.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),r.extend(r.style={},{transform:s,transitionTimingFunction:t("transitionTimingFunction"),transitionDuration:t("transitionDuration"),transitionDelay:t("transitionDelay"),transformOrigin:t("transformOrigin")}),r.hasClass=function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},r.addClass=function(t,e){if(!r.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},r.removeClass=function(t,e){if(r.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},r.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},r.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return n.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22;return 0===t?0:1==t?1:.4*n.pow(2,-10*t)*n.sin((t-e/4)*(2*n.PI)/e)+1}}}),r.tap=function(t,e){var n=i.createEvent("Event");n.initEvent(e,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)},r.click=function(t){var e,n=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(e=i.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,n.screenX,n.screenY,n.clientX,n.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,n.dispatchEvent(e))},r}();/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
r.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel=!0,this.wrapper.style.overflow="hidden",this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==l.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||l.eventType[t.type]===this.initiated)){!this.options.preventDefault||l.isBadAndroid||l.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,i=t.touches?t.touches[0]:t;this.initiated=l.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=l.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(n.round(e.x),n.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&l.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,i,r,a,o=t.touches?t.touches[0]:t,s=o.pageX-this.pointX,h=o.pageY-this.pointY,c=l.getTime();if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=s,this.distY+=h,r=n.abs(this.distX),a=n.abs(this.distY),!(c-this.endTime>300&&r<10&&a<10)){if(this.directionLocked||this.options.freeScroll||(r>a+this.options.directionLockThreshold?this.directionLocked="h":a>=r+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);s=0}s=this.hasHorizontalScroll?s:0,h=this.hasVerticalScroll?h:0,e=this.x+s,i=this.y+h,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+s/3:e>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+h/3:i>0?0:this.maxScrollY),this.directionX=s>0?-1:s<0?1:0,this.directionY=h>0?-1:h<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,i),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(this.enabled&&l.eventType[t.type]===this.initiated){this.options.preventDefault&&!l.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,i,r=(t.changedTouches&&t.changedTouches[0],l.getTime()-this.startTime),a=n.round(this.x),o=n.round(this.y),s=n.abs(a-this.startX),h=n.abs(o-this.startY),c=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=l.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(a,o),!this.moved)return this.options.tap&&l.tap(t,this.options.tap),this.options.click&&l.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&r<200&&s<100&&h<100)return void this._execEvent("flick");if(this.options.momentum&&r<300&&(e=this.hasHorizontalScroll?l.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:a,duration:0},i=this.hasVerticalScroll?l.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:o,duration:0},a=e.destination,o=i.destination,c=n.max(e.duration,i.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(a,o);this.currentPage=d,c=this.options.snapSpeed||n.max(n.max(n.min(n.abs(a-d.x),1e3),n.min(n.abs(o-d.y),1e3)),300),a=d.x,o=d.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}if(a!=this.x||o!=this.y)return(a>0||a<this.maxScrollX||o>0||o<this.maxScrollY)&&(u=l.ease.quadratic),void this.scrollTo(a,o,c,u);this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(e!=this.x||i!=this.y)&&(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=l.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;e<i;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,n){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,n)},scrollTo:function(t,e,i,n){n=n||l.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&n.style?(this._transitionTimingFunction(n.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,n.fn)},scrollToElement:function(t,e,i,r,a){if(t=t.nodeType?t:this.scroller.querySelector(t)){var o=l.offset(t);o.left-=this.wrapperOffset.left,o.top-=this.wrapperOffset.top,!0===i&&(i=n.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===r&&(r=n.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),o.left-=i||0,o.top-=r||0,o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left,o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top,e=e===undefined||null===e||"auto"===e?n.max(n.abs(this.x-o.left),n.abs(this.y-o.top)):e,this.scrollTo(o.left,o.top,e,a)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[l.style.transitionDuration]=t+"ms",!t&&l.isBadAndroid&&(this.scrollerStyle[l.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[l.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[l.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=n.round(t),e=n.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(t){var i=t?l.removeEvent:l.addEvent,n=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),l.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,l.prefixPointerEvent("pointerdown"),this),i(n,l.prefixPointerEvent("pointermove"),this),i(n,l.prefixPointerEvent("pointercancel"),this),i(n,l.prefixPointerEvent("pointerup"),this)),l.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,n=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[l.style.transform].split(")")[0].split(", "),t=+(n[12]||n[4]),i=+(n[13]||n[5])):(t=+n.left.replace(/[^-\d.]/g,""),i=+n.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_initIndicators:function(){function t(t){for(var e=s.indicators.length;e--;)t.call(s.indicators[e])}var e,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,r=[],s=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:a("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),r.push(e)),this.options.scrollX&&(e={el:a("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),r.push(e))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var l=r.length;l--;)this.indicators.push(new o(this,r[l]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){l.addEvent(this.wrapper,"wheel",this),l.addEvent(this.wrapper,"mousewheel",this),l.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){l.removeEvent(this.wrapper,"wheel",this),l.removeEvent(this.wrapper,"mousewheel",this),l.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,i,r,a,o=this;if(this.wheelTimeout===undefined&&o._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){o._execEvent("scrollEnd"),o.wheelTimeout=undefined},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,i=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,i=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=i,i=0),this.options.snap)return r=this.currentPage.pageX,a=this.currentPage.pageY,e>0?r--:e<0&&r++,i>0?a--:i<0&&a++,void this.goToPage(r,a);r=this.x+n.round(this.hasHorizontalScroll?e:0),a=this.y+n.round(this.hasVerticalScroll?i:0),r>0?r=0:r<this.maxScrollX&&(r=this.maxScrollX),a>0?a=0:a<this.maxScrollY&&(a=this.maxScrollY),this.scrollTo(r,a,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,i,r,a,o,s=0,l=0,h=0,c=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(i=n.round(c/2),r=n.round(u/2);h>-this.scrollerWidth;){for(this.pages[s]=[],t=0,a=0;a>-this.scrollerHeight;)this.pages[s][t]={x:n.max(h,this.maxScrollX),y:n.max(a,this.maxScrollY),width:c,height:u,cx:h-i,cy:a-r},a-=u,t++;h-=c,s++}else for(o=this.options.snap,t=o.length,e=-1;s<t;s++)(0===s||o[s].offsetLeft<=o[s-1].offsetLeft)&&(l=0,e++),this.pages[l]||(this.pages[l]=[]),h=n.max(-o[s].offsetLeft,this.maxScrollX),a=n.max(-o[s].offsetTop,this.maxScrollY),i=h-n.round(o[s].offsetWidth/2),r=a-n.round(o[s].offsetHeight/2),this.pages[l][e]={x:h,y:a,width:o[s].offsetWidth,height:o[s].offsetHeight,cx:i,cy:r},h>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.x-this.startX),1e3),n.min(n.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,r=this.pages.length,a=0;if(n.abs(t-this.absStartX)<this.snapThresholdX&&n.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);i<r;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(r=this.pages[i].length;a<r;a++)if(e>=this.pages[0][a].cy){e=this.pages[0][a].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,i<0?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),a==this.currentPage.pageY&&(a+=this.directionY,a<0?a=0:a>=this.pages[0].length&&(a=this.pages[0].length-1),e=this.pages[0][a].y),{x:t,y:e,pageX:i,pageY:a}},goToPage:function(t,e,i,r){r=r||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);var a=this.pages[t][e].x,o=this.pages[t][e].y;i=i===undefined?this.options.snapSpeed||n.max(n.max(n.min(n.abs(a-this.x),1e3),n.min(n.abs(o-this.y),1e3)),300):i,this.currentPage={x:a,y:o,pageX:t,pageY:e},this.scrollTo(a,o,i,r)},next:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,t,e)},prev:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,t,e)},_initKeys:function(){var t,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(t in this.options.keyBindings)"string"==typeof this.options.keyBindings[t]&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in i)this.options.keyBindings[t]=this.options.keyBindings[t]||i[t];l.addEvent(e,"keydown",this),this.on("destroy",function(){l.removeEvent(e,"keydown",this)})},_key:function(t){if(this.enabled){var e,i=this.options.snap,r=i?this.currentPage.pageX:this.x,a=i?this.currentPage.pageY:this.y,o=l.getTime(),s=this.keyTime||0,h=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(n.round(e.x),n.round(e.y)),this.isInTransition=!1),this.keyAcceleration=o-s<200?n.min(this.keyAcceleration+h,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?r+=i?1:this.wrapperWidth:a+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?r-=i?1:this.wrapperWidth:a-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:r=i?this.pages.length-1:this.maxScrollX,a=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:r=0,a=0;break;case this.options.keyBindings.left:r+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:a+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:r-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:a-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(r,a);r>0?(r=0,this.keyAcceleration=0):r<this.maxScrollX&&(r=this.maxScrollX,this.keyAcceleration=0),a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollY&&(a=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(r,a,0),this.keyTime=o}},_animate:function(t,e,i,n){function r(){var d,p,f,m=l.getTime();if(m>=u)return a.isAnimating=!1,a._translate(t,e),void(a.resetPosition(a.options.bounceTime)||a._execEvent("scrollEnd"));m=(m-c)/i,f=n(m),d=(t-o)*f+o,p=(e-h)*f+h,a._translate(d,p),a.isAnimating&&s(r),3==a.options.probeType&&a._execEvent("scroll")}var a=this,o=this.x,h=this.y,c=l.getTime(),u=c+i;this.isAnimating=!0,r()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},o.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(l.removeEvent(this.indicator,"touchstart",this),l.removeEvent(this.indicator,l.prefixPointerEvent("pointerdown"),this),l.removeEvent(this.indicator,"mousedown",this),l.removeEvent(e,"touchmove",this),l.removeEvent(e,l.prefixPointerEvent("pointermove"),this),l.removeEvent(e,"mousemove",this),l.removeEvent(e,"touchend",this),l.removeEvent(e,l.prefixPointerEvent("pointerup"),this),l.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=l.getTime(),this.options.disableTouch||l.addEvent(e,"touchmove",this),this.options.disablePointer||l.addEvent(e,l.prefixPointerEvent("pointermove"),this),this.options.disableMouse||l.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var e,i,n,r,a=t.touches?t.touches[0]:t,o=l.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=a.pageX-this.lastPointX,this.lastPointX=a.pageX,i=a.pageY-this.lastPointY,this.lastPointY=a.pageY,n=this.x+e,r=this.y+i,this._pos(n,r),1==this.scroller.options.probeType&&o-this.startTime>300?(this.startTime=o,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),l.removeEvent(e,"touchmove",this),l.removeEvent(e,l.prefixPointerEvent("pointermove"),this),l.removeEvent(e,"mousemove",this),this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),r=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.scroller.x-i.x),1e3),n.min(n.abs(this.scroller.y-i.y),1e3)),300);this.scroller.x==i.x&&this.scroller.y==i.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=i,this.scroller.scrollTo(i.x,i.y,r,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[l.style.transitionDuration]=t+"ms",!t&&l.isBadAndroid&&(this.indicatorStyle[l.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[l.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(l.addClass(this.wrapper,"iScrollBothScrollbars"),l.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(l.removeClass(this.wrapper,"iScrollBothScrollbars"),l.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=n.max(n.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=n.max(n.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&n.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&n.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=n.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=n.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=n.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=n.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[l.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?n.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?n.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,n=t?0:300;t=t?"1":"0",this.wrapperStyle[l.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),n)}}},r.utils=l,t.IScroll5=r}(window,document,Math),t}),/*!
 * Object.observe polyfill - v0.2.4
 * by Massimo Artizzu (MaxArt2501)
 * 
 * https://github.com/MaxArt2501/object-observe
 * 
 * Licensed under the MIT License
 * See LICENSE for details
 */
Object.observe||function(t,e,i){"use strict";var n,r,a=["add","update","delete","reconfigure","setPrototype","preventExtensions"],o=e.isArray||function(t){return function(e){return"[object Array]"===t.call(e)}}(t.prototype.toString),s=e.prototype.indexOf?e.indexOf||function(t,i,n){return e.prototype.indexOf.call(t,i,n)}:function(t,e,i){for(var n=i||0;n<t.length;n++)if(t[n]===e)return n;return-1},l="undefined"!=typeof i.Map&&Map.prototype.forEach?function(){return new Map}:function(){var t=[],e=[];return{size:0,has:function(e){return s(t,e)>-1},get:function(i){return e[s(t,i)]},set:function(i,n){var r=s(t,i);-1===r?(t.push(i),e.push(n),this.size++):e[r]=n},"delete":function(i){var n=s(t,i);n>-1&&(t.splice(n,1),e.splice(n,1),this.size--)},forEach:function(i){for(var n=0;n<t.length;n++)i.call(arguments[1],e[n],t[n],this)}}},h=t.getOwnPropertyNames?function(){var e=t.getOwnPropertyNames;try{arguments.callee}catch(n){var i=(e(s).join(" ")+" ").replace(/prototype |length |name /g,"").slice(0,-1).split(" ");i.length&&(e=function(e){var n=t.getOwnPropertyNames(e);if("function"==typeof e)for(var r,a=0;a<i.length;)(r=s(n,i[a++]))>-1&&n.splice(r,1);return n})}return e}():function(e){var i,n,r=[];if("hasOwnProperty"in e)for(i in e)e.hasOwnProperty(i)&&r.push(i);else{n=t.hasOwnProperty;for(i in e)n.call(e,i)&&r.push(i)}return o(e)&&r.push("length"),r},c=t.getPrototypeOf,u=t.defineProperties&&t.getOwnPropertyDescriptor,d=i.requestAnimationFrame||i.webkitRequestAnimationFrame||function(){var t=+new Date,e=t;return function(i){return setTimeout(function(){i((e=+new Date)-t)},17)}}(),p=function(t,e,i){var r=n.get(t);r?x(t,r,e,i):(r=f(t),x(t,r,e,i),1===n.size&&d(g))},f=function(e,i){var r,a=h(e),o=[],s=0,i={handlers:l(),frozen:!!t.isFrozen&&t.isFrozen(e),extensible:!t.isExtensible||t.isExtensible(e),proto:c&&c(e),properties:a,values:o,notifier:y(e,i)};if(u)for(r=i.descriptors=[];s<a.length;)r[s]=u(e,a[s]),o[s]=e[a[s++]];else for(;s<a.length;)o[s]=e[a[s++]];return n.set(e,i),i},m=function(){var e=u?function(t,e,i,n,r){var a=e.properties[i],o=t[a],s=e.values[i],l=e.descriptors[i];"value"in r&&(s===o?0===s&&1/s!=1/o:s===s||o===o)&&(b(t,e,{name:a,type:"update",object:t,oldValue:s},n),e.values[i]=o),!l.configurable||r.configurable&&r.writable===l.writable&&r.enumerable===l.enumerable&&r.get===l.get&&r.set===l.set||(b(t,e,{name:a,type:"reconfigure",object:t,oldValue:s},n),e.descriptors[i]=r)}:function(t,e,i,n){var r=e.properties[i],a=t[r],o=e.values[i];(o===a?0===o&&1/o!=1/a:o===o||a===a)&&(b(t,e,{name:r,type:"update",object:t,oldValue:o},n),e.values[i]=a)},i=u?function(t,i,n,r,a){for(var o,s=i.length;n&&s--;)null!==i[s]&&(o=u(t,i[s]),n--,o?e(t,r,s,a,o):(b(t,r,{name:i[s],type:"delete",object:t,oldValue:r.values[s]},a),r.properties.splice(s,1),r.values.splice(s,1),r.descriptors.splice(s,1)))}:function(t,e,i,n,r){for(var a=e.length;i&&a--;)null!==e[a]&&(b(t,n,{name:e[a],type:"delete",object:t,oldValue:n.values[a]},r),n.properties.splice(a,1),n.values.splice(a,1),i--)};return function(n,r,a){if(n.handlers.size&&!n.frozen){var o,l,d,p,f,m,g,v,y=n.values,x=n.descriptors,C=0;if(n.extensible)if(o=n.properties.slice(),l=o.length,d=h(r),x){for(;C<d.length;)f=d[C++],p=s(o,f),v=u(r,f),-1===p?(b(r,n,{name:f,type:"add",object:r},a),n.properties.push(f),y.push(r[f]),x.push(v)):(o[p]=null,l--,e(r,n,p,a,v));i(r,o,l,n,a),t.isExtensible(r)||(n.extensible=!1,b(r,n,{type:"preventExtensions",object:r},a),n.frozen=t.isFrozen(r))}else{for(;C<d.length;)f=d[C++],p=s(o,f),m=r[f],-1===p?(b(r,n,{name:f,type:"add",object:r},a),n.properties.push(f),y.push(m)):(o[p]=null,l--,e(r,n,p,a));i(r,o,l,n,a)}else if(!n.frozen){for(;C<o.length;C++)f=o[C],e(r,n,C,a,u(r,f));t.isFrozen(r)&&(n.frozen=!0)}c&&(g=c(r))!==n.proto&&(b(r,n,{type:"setPrototype",name:"__proto__",object:r,oldValue:n.proto}),n.proto=g)}}}(),g=function(){n.size&&(n.forEach(m),r.forEach(v),d(g))},v=function(t,e){t.changeRecords.length&&(e(t.changeRecords),t.changeRecords=[])},y=function(t,e){return arguments.length<2&&(e=n.get(t)),e&&e.notifier||{notify:function(e){e.type;var i=n.get(t);if(i){var r,a={object:t};for(r in e)"object"!==r&&(a[r]=e[r]);b(t,i,a)}},performChange:function(e,i){if("string"!=typeof e)throw new TypeError("Invalid non-string changeType");if("function"!=typeof i)throw new TypeError("Cannot perform non-function");var r,a,o=n.get(t),s=i.call(arguments[2]);if(o&&m(o,t,e),o&&s&&"object"==typeof s){a={object:t,type:e};for(r in s)"object"!==r&&"type"!==r&&(a[r]=s[r]);b(t,o,a)}}}},x=function(t,e,i,n){var a=r.get(i);a||r.set(i,a={observed:l(),changeRecords:[]}),a.observed.set(t,{acceptList:n.slice(),data:e}),e.handlers.set(i,a)},b=function(t,e,i,n){e.handlers.forEach(function(e){var r=e.observed.get(t).acceptList;("string"!=typeof n||-1===s(r,n))&&s(r,i.type)>-1&&e.changeRecords.push(i)})};n=l(),r=l(),t.observe=function(e,i,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object.observe cannot observe non-object");if("function"!=typeof i)throw new TypeError("Object.observe cannot deliver to non-function");if(t.isFrozen&&t.isFrozen(i))throw new TypeError("Object.observe cannot deliver to a frozen function object");if(void 0===n)n=a;else if(!n||"object"!=typeof n)throw new TypeError("Third argument to Object.observe must be an array of strings.");return p(e,i,n),e},t.unobserve=function(t,e){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!=typeof e)throw new TypeError("Object.unobserve cannot deliver to non-function");var i,a=r.get(e);return a&&(i=a.observed.get(t))&&(a.observed.forEach(function(t,e){m(t.data,e)}),d(function(){v(a,e)}),1===a.observed.size&&a.observed.has(t)?r["delete"](e):a.observed["delete"](t),1===i.data.handlers.size?n["delete"](t):i.data.handlers["delete"](e)),t},t.getNotifier=function(e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object.getNotifier cannot getNotifier non-object");return t.isFrozen&&t.isFrozen(e)?null:y(e)},t.deliverChangeRecords=function(t){if("function"!=typeof t)throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var e=r.get(t);e&&(e.observed.forEach(function(t,e){m(t.data,e)}),v(e,t))}}(Object,Array,this),function t(e,i,n){function r(o,s){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return r(i||t)},c,c.exports,t,e,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e){"use strict";function i(t){t.fn.perfectScrollbar=function(t){return this.each(function(){if("object"==typeof t||void 0===t){var e=t;r.get(this)||n.initialize(this,e)}else{var i=t;"update"===i?n.update(this):"destroy"===i&&n.destroy(this)}})}}var n=t("../main"),r=t("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],i);else{var a=window.jQuery?window.jQuery:window.$;void 0!==a&&i(a)}e.exports=i},{"../main":7,"../plugin/instances":18}],2:[function(t,e,i){"use strict";function n(t,e){var i=t.className.split(" ");i.indexOf(e)<0&&i.push(e),t.className=i.join(" ")}function r(t,e){var i=t.className.split(" "),n=i.indexOf(e);n>=0&&i.splice(n,1),t.className=i.join(" ")}i.add=function(t,e){t.classList?t.classList.add(e):n(t,e)},i.remove=function(t,e){t.classList?t.classList.remove(e):r(t,e)},i.list=function(t){return t.classList?Array.prototype.slice.apply(t.classList):t.className.split(" ")}},{}],3:[function(t,e){"use strict";function i(t,e){return window.getComputedStyle(t)[e]}function n(t,e,i){return"number"==typeof i&&(i=i.toString()+"px"),t.style[e]=i,t}function r(t,e){for(var i in e){var n=e[i];"number"==typeof n&&(n=n.toString()+"px"),t.style[i]=n}return t}var a={};a.e=function(t,e){var i=document.createElement(t);return i.className=e,i},a.appendTo=function(t,e){return e.appendChild(t),t},a.css=function(t,e,a){return"object"==typeof e?r(t,e):void 0===a?i(t,e):n(t,e,a)},a.matches=function(t,e){return"undefined"!=typeof t.matches?t.matches(e):"undefined"!=typeof t.matchesSelector?t.matchesSelector(e):"undefined"!=typeof t.webkitMatchesSelector?t.webkitMatchesSelector(e):"undefined"!=typeof t.mozMatchesSelector?t.mozMatchesSelector(e):"undefined"!=typeof t.msMatchesSelector?t.msMatchesSelector(e):void 0},a.remove=function(t){"undefined"!=typeof t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},a.queryChildren=function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return a.matches(t,e)})},e.exports=a},{}],4:[function(t,e){"use strict";var i=function(t){this.element=t,this.events={}};i.prototype.bind=function(t,e){"undefined"==typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},i.prototype.unbind=function(t,e){var i=void 0!==e;this.events[t]=this.events[t].filter(function(n){return!(!i||n===e)||(this.element.removeEventListener(t,n,!1),!1)},this)},i.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return void 0===e&&(e=new i(t),this.eventElements.push(e)),e},n.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},n.prototype.unbind=function(t,e,i){this.eventElement(t).unbind(e,i)},n.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},n.prototype.once=function(t,e,i){var n=this.eventElement(t),r=function(t){n.unbind(e,r),i(t)};n.bind(e,r)},e.exports=n},{}],5:[function(t,e){"use strict";e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],6:[function(t,e,i){"use strict";var n=t("./class"),r=t("./dom"),a=i.toInt=function(t){return parseInt(t,10)||0},o=i.clone=function(t){if(null===t)return null;if(t.constructor===Array)return t.map(o);if("object"==typeof t){var e={};for(var i in t)e[i]=o(t[i]);return e}return t};i.extend=function(t,e){var i=o(t);for(var n in e)i[n]=o(e[n]);return i},i.isEditable=function(t){return r.matches(t,"input,[contenteditable]")||r.matches(t,"select,[contenteditable]")||r.matches(t,"textarea,[contenteditable]")||r.matches(t,"button,[contenteditable]")},i.removePsClasses=function(t){for(var e=n.list(t),i=0;i<e.length;i++){var r=e[i];0===r.indexOf("ps-")&&n.remove(t,r)}},i.outerWidth=function(t){return a(r.css(t,"width"))+a(r.css(t,"paddingLeft"))+a(r.css(t,"paddingRight"))+a(r.css(t,"borderLeftWidth"))+a(r.css(t,"borderRightWidth"))},i.startScrolling=function(t,e){n.add(t,"ps-in-scrolling"),void 0!==e?n.add(t,"ps-"+e):(n.add(t,"ps-x"),n.add(t,"ps-y"))},i.stopScrolling=function(t,e){n.remove(t,"ps-in-scrolling"),void 0!==e?n.remove(t,"ps-"+e):(n.remove(t,"ps-x"),n.remove(t,"ps-y"))},i.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(t,e){"use strict";var i=t("./plugin/destroy"),n=t("./plugin/initialize"),r=t("./plugin/update");e.exports={initialize:n,update:r,destroy:i}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(t,e){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(t,e){"use strict";var i=t("../lib/helper"),n=t("../lib/dom"),r=t("./instances");e.exports=function(t){var e=r.get(t);e&&(e.event.unbindAll(),n.remove(e.scrollbarX),n.remove(e.scrollbarY),n.remove(e.scrollbarXRail),n.remove(e.scrollbarYRail),i.removePsClasses(t),r.remove(t))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(t,e){"use strict";function i(t,e){function i(t){return t.getBoundingClientRect()}var r=function(t){t.stopPropagation()};e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarY,"click",r),e.event.bind(e.scrollbarYRail,"click",function(r){var s=n.toInt(e.scrollbarYHeight/2),l=e.railYRatio*(r.pageY-window.pageYOffset-i(e.scrollbarYRail).top-s),h=e.railYRatio*(e.railYHeight-e.scrollbarYHeight),c=l/h;c<0?c=0:c>1&&(c=1),o(t,"top",(e.contentHeight-e.containerHeight)*c),a(t),r.stopPropagation()}),e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarX,"click",r),e.event.bind(e.scrollbarXRail,"click",function(r){var s=n.toInt(e.scrollbarXWidth/2),l=e.railXRatio*(r.pageX-window.pageXOffset-i(e.scrollbarXRail).left-s),h=e.railXRatio*(e.railXWidth-e.scrollbarXWidth),c=l/h;c<0?c=0:c>1&&(c=1),o(t,"left",(e.contentWidth-e.containerWidth)*c-e.negativeScrollAdjustment),a(t),r.stopPropagation()})}var n=t("../../lib/helper"),r=t("../instances"),a=t("../update-geometry"),o=t("../update-scroll");e.exports=function(t){i(t,r.get(t))}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(t,e){"use strict";function i(t,e){function i(i){var a=n+i*e.railXRatio,o=Math.max(0,e.scrollbarXRail.getBoundingClientRect().left)+e.railXRatio*(e.railXWidth-e.scrollbarXWidth);e.scrollbarXLeft=a<0?0:a>o?o:a;var s=r.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.railXRatio*e.scrollbarXWidth))-e.negativeScrollAdjustment;l(t,"left",s)}var n=null,o=null,h=function(e){i(e.pageX-o),s(t),e.stopPropagation(),e.preventDefault()},c=function(){r.stopScrolling(t,"x"),e.event.unbind(e.ownerDocument,"mousemove",h)};e.event.bind(e.scrollbarX,"mousedown",function(i){o=i.pageX,n=r.toInt(a.css(e.scrollbarX,"left"))*e.railXRatio,r.startScrolling(t,"x"),e.event.bind(e.ownerDocument,"mousemove",h),e.event.once(e.ownerDocument,"mouseup",c),i.stopPropagation(),i.preventDefault()})}function n(t,e){function i(i){var a=n+i*e.railYRatio,o=Math.max(0,e.scrollbarYRail.getBoundingClientRect().top)+e.railYRatio*(e.railYHeight-e.scrollbarYHeight);e.scrollbarYTop=a<0?0:a>o?o:a;var s=r.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.railYRatio*e.scrollbarYHeight));l(t,"top",s)}var n=null,o=null,h=function(e){i(e.pageY-o),s(t),e.stopPropagation(),e.preventDefault()},c=function(){r.stopScrolling(t,"y"),e.event.unbind(e.ownerDocument,"mousemove",h)};e.event.bind(e.scrollbarY,"mousedown",function(i){o=i.pageY,n=r.toInt(a.css(e.scrollbarY,"top"))*e.railYRatio,r.startScrolling(t,"y"),e.event.bind(e.ownerDocument,"mousemove",h),e.event.once(e.ownerDocument,"mouseup",c),i.stopPropagation(),i.preventDefault()})}var r=t("../../lib/helper"),a=t("../../lib/dom"),o=t("../instances"),s=t("../update-geometry"),l=t("../update-scroll");e.exports=function(t){var e=o.get(t);i(t,e),n(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(t,e){"use strict";function i(t,e){function i(i,n){var r=t.scrollTop;if(0===i){if(!e.scrollbarYActive)return!1;if(0===r&&n>0||r>=e.contentHeight-e.containerHeight&&n<0)return!e.settings.wheelPropagation}var a=t.scrollLeft;if(0===n){if(!e.scrollbarXActive)return!1;if(0===a&&i<0||a>=e.contentWidth-e.containerWidth&&i>0)return!e.settings.wheelPropagation}return!0}var a=!1;e.event.bind(t,"mouseenter",function(){a=!0}),e.event.bind(t,"mouseleave",function(){a=!1});var l=!1;e.event.bind(e.ownerDocument,"keydown",function(h){if(!(h.isDefaultPrevented&&h.isDefaultPrevented()||h.defaultPrevented)){var c=r.matches(e.scrollbarX,":focus")||r.matches(e.scrollbarY,":focus");if(a||c){var u=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(u){if("IFRAME"===u.tagName)u=u.contentDocument.activeElement;else for(;u.shadowRoot;)u=u.shadowRoot.activeElement;if(n.isEditable(u))return}var d=0,p=0;switch(h.which){case 37:d=-30;break;case 38:p=30;break;case 39:d=30;break;case 40:p=-30;break;case 33:p=90;break;case 32:p=h.shiftKey?90:-90;break;case 34:p=-90;break;case 35:p=h.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:p=h.ctrlKey?t.scrollTop:e.containerHeight;break;default:return}s(t,"top",t.scrollTop-p),s(t,"left",t.scrollLeft+d),o(t),l=i(d,p),l&&h.preventDefault()}}})}var n=t("../../lib/helper"),r=t("../../lib/dom"),a=t("../instances"),o=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){i(t,a.get(t))}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(t,e){"use strict";function i(t,e){function i(i,n){var r=t.scrollTop;if(0===i){if(!e.scrollbarYActive)return!1;if(0===r&&n>0||r>=e.contentHeight-e.containerHeight&&n<0)return!e.settings.wheelPropagation}var a=t.scrollLeft;if(0===n){if(!e.scrollbarXActive)return!1;if(0===a&&i<0||a>=e.contentWidth-e.containerWidth&&i>0)return!e.settings.wheelPropagation}return!0}function n(t){var e=t.deltaX,i=-1*t.deltaY;return void 0!==e&&void 0!==i||(e=-1*t.wheelDeltaX/6,i=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,i*=10),e!==e&&i!==i&&(e=0,i=t.wheelDelta),[e,i]}function o(e,i){var n=t.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(n){if("TEXTAREA"!==n.tagName&&!window.getComputedStyle(n).overflow.match(/(scroll|auto)/))return!1;var r=n.scrollHeight-n.clientHeight;if(r>0&&!(0===n.scrollTop&&i>0||n.scrollTop===r&&i<0))return!0;var a=n.scrollLeft-n.clientWidth;if(a>0&&!(0===n.scrollLeft&&e<0||n.scrollLeft===a&&e>0))return!0}return!1}function s(s){var h=n(s),c=h[0],u=h[1];o(c,u)||(l=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(u?a(t,"top",t.scrollTop-u*e.settings.wheelSpeed):a(t,"top",t.scrollTop+c*e.settings.wheelSpeed),l=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(c?a(t,"left",t.scrollLeft+c*e.settings.wheelSpeed):a(t,"left",t.scrollLeft-u*e.settings.wheelSpeed),l=!0):(a(t,"top",t.scrollTop-u*e.settings.wheelSpeed),a(t,"left",t.scrollLeft+c*e.settings.wheelSpeed)),r(t),(l=l||i(c,u))&&(s.stopPropagation(),s.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?e.event.bind(t,"wheel",s):"undefined"!=typeof window.onmousewheel&&e.event.bind(t,"mousewheel",s)}var n=t("../instances"),r=t("../update-geometry"),a=t("../update-scroll");e.exports=function(t){i(t,n.get(t))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(t,e){"use strict";function i(t,e){e.event.bind(t,"scroll",function(){r(t)})}var n=t("../instances"),r=t("../update-geometry");e.exports=function(t){i(t,n.get(t))}},{"../instances":18,"../update-geometry":19}],15:[function(t,e){"use strict";function i(t,e){function i(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function s(){h||(h=setInterval(function(){if(!r.get(t))return void clearInterval(h);o(t,"top",t.scrollTop+c.top),o(t,"left",t.scrollLeft+c.left),a(t)},50))}function l(){h&&(clearInterval(h),h=null),n.stopScrolling(t)}var h=null,c={top:0,left:0},u=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(i())?u=!0:(u=!1,l())}),e.event.bind(window,"mouseup",function(){u&&(u=!1,l())}),e.event.bind(window,"mousemove",function(e){if(u){var i={x:e.pageX,y:e.pageY},r={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};i.x<r.left+3?(c.left=-5,n.startScrolling(t,"x")):i.x>r.right-3?(c.left=5,n.startScrolling(t,"x")):c.left=0,i.y<r.top+3?(r.top+3-i.y<5?c.top=-5:c.top=-20,n.startScrolling(t,"y")):i.y>r.bottom-3?(i.y-r.bottom+3<5?c.top=5:c.top=20,n.startScrolling(t,"y")):c.top=0,0===c.top&&0===c.left?l():s()}})}var n=t("../../lib/helper"),r=t("../instances"),a=t("../update-geometry"),o=t("../update-scroll");e.exports=function(t){i(t,r.get(t))}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(t,e){"use strict";function i(t,e,i,n){function s(i,n){var r=t.scrollTop,a=t.scrollLeft,o=Math.abs(i),s=Math.abs(n);if(s>o){if(n<0&&r===e.contentHeight-e.containerHeight||n>0&&0===r)return!e.settings.swipePropagation}else if(o>s&&(i<0&&a===e.contentWidth-e.containerWidth||i>0&&0===a))return!e.settings.swipePropagation;return!0}function l(e,i){o(t,"top",t.scrollTop-i),o(t,"left",t.scrollLeft-e),a(t)}function h(){b=!0}function c(){b=!1}function u(t){return t.targetTouches?t.targetTouches[0]:t}function d(t){return!(!t.targetTouches||1!==t.targetTouches.length)||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE)}function p(t){if(d(t)){C=!0;var e=u(t);g.pageX=e.pageX,g.pageY=e.pageY,v=(new Date).getTime(),null!==x&&clearInterval(x),t.stopPropagation()}}function f(t){if(!C&&e.settings.swipePropagation&&p(t),!b&&C&&d(t)){var i=u(t),n={pageX:i.pageX,pageY:i.pageY},r=n.pageX-g.pageX,a=n.pageY-g.pageY;l(r,a),g=n;var o=(new Date).getTime(),h=o-v;h>0&&(y.x=r/h,y.y=a/h,v=o),s(r,a)&&(t.stopPropagation(),t.preventDefault())}}function m(){!b&&C&&(C=!1,clearInterval(x),x=setInterval(function(){return r.get(t)?Math.abs(y.x)<.01&&Math.abs(y.y)<.01?void clearInterval(x):(l(30*y.x,30*y.y),y.x*=.8,void(y.y*=.8)):void clearInterval(x)},10))}var g={},v=0,y={},x=null,b=!1,C=!1;i&&(e.event.bind(window,"touchstart",h),e.event.bind(window,"touchend",c),e.event.bind(t,"touchstart",p),e.event.bind(t,"touchmove",f),e.event.bind(t,"touchend",m)),n&&(window.PointerEvent?(e.event.bind(window,"pointerdown",h),e.event.bind(window,"pointerup",c),e.event.bind(t,"pointerdown",p),e.event.bind(t,"pointermove",f),e.event.bind(t,"pointerup",m)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",h),e.event.bind(window,"MSPointerUp",c),e.event.bind(t,"MSPointerDown",p),e.event.bind(t,"MSPointerMove",f),e.event.bind(t,"MSPointerUp",m)))}var n=t("../../lib/helper"),r=t("../instances"),a=t("../update-geometry"),o=t("../update-scroll");e.exports=function(t){if(n.env.supportsTouch||n.env.supportsIePointer){i(t,r.get(t),n.env.supportsTouch,n.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(t,e){"use strict";var i=t("../lib/helper"),n=t("../lib/class"),r=t("./instances"),a=t("./update-geometry"),o={"click-rail":t("./handler/click-rail"),"drag-scrollbar":t("./handler/drag-scrollbar"),keyboard:t("./handler/keyboard"),wheel:t("./handler/mouse-wheel"),touch:t("./handler/touch"),selection:t("./handler/selection")},s=t("./handler/native-scroll");e.exports=function(t,e){e="object"==typeof e?e:{},n.add(t,"ps-container");var l=r.add(t);l.settings=i.extend(l.settings,e),n.add(t,"ps-theme-"+l.settings.theme),l.settings.handlers.forEach(function(e){o[e](t)}),s(t),a(t)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(t,e,i){"use strict";function n(t){function e(){l.add(t,"ps-focus")}function i(){l.remove(t,"ps-focus")}var n=this;n.settings=s.clone(h),n.containerWidth=null,n.containerHeight=null,n.contentWidth=null,n.contentHeight=null,n.isRtl="rtl"===c.css(t,"direction"),n.isNegativeScroll=function(){var e=t.scrollLeft,i=null;return t.scrollLeft=-1,i=t.scrollLeft<0,t.scrollLeft=e,i}(),n.negativeScrollAdjustment=n.isNegativeScroll?t.scrollWidth-t.clientWidth:0,n.event=new u,n.ownerDocument=t.ownerDocument||document,n.scrollbarXRail=c.appendTo(c.e("div","ps-scrollbar-x-rail"),t),n.scrollbarX=c.appendTo(c.e("div","ps-scrollbar-x"),n.scrollbarXRail),n.scrollbarX.setAttribute("tabindex",0),n.event.bind(n.scrollbarX,"focus",e),n.event.bind(n.scrollbarX,"blur",i),n.scrollbarXActive=null,n.scrollbarXWidth=null,n.scrollbarXLeft=null,n.scrollbarXBottom=s.toInt(c.css(n.scrollbarXRail,"bottom")),n.isScrollbarXUsingBottom=n.scrollbarXBottom===n.scrollbarXBottom,n.scrollbarXTop=n.isScrollbarXUsingBottom?null:s.toInt(c.css(n.scrollbarXRail,"top")),n.railBorderXWidth=s.toInt(c.css(n.scrollbarXRail,"borderLeftWidth"))+s.toInt(c.css(n.scrollbarXRail,"borderRightWidth")),c.css(n.scrollbarXRail,"display","block"),n.railXMarginWidth=s.toInt(c.css(n.scrollbarXRail,"marginLeft"))+s.toInt(c.css(n.scrollbarXRail,"marginRight")),c.css(n.scrollbarXRail,"display",""),n.railXWidth=null,n.railXRatio=null,n.scrollbarYRail=c.appendTo(c.e("div","ps-scrollbar-y-rail"),t),n.scrollbarY=c.appendTo(c.e("div","ps-scrollbar-y"),n.scrollbarYRail),n.scrollbarY.setAttribute("tabindex",0),n.event.bind(n.scrollbarY,"focus",e),n.event.bind(n.scrollbarY,"blur",i),n.scrollbarYActive=null,n.scrollbarYHeight=null,n.scrollbarYTop=null,n.scrollbarYRight=s.toInt(c.css(n.scrollbarYRail,"right")),n.isScrollbarYUsingRight=n.scrollbarYRight===n.scrollbarYRight,n.scrollbarYLeft=n.isScrollbarYUsingRight?null:s.toInt(c.css(n.scrollbarYRail,"left")),n.scrollbarYOuterWidth=n.isRtl?s.outerWidth(n.scrollbarY):null,n.railBorderYWidth=s.toInt(c.css(n.scrollbarYRail,"borderTopWidth"))+s.toInt(c.css(n.scrollbarYRail,"borderBottomWidth")),c.css(n.scrollbarYRail,"display","block"),n.railYMarginHeight=s.toInt(c.css(n.scrollbarYRail,"marginTop"))+s.toInt(c.css(n.scrollbarYRail,"marginBottom")),c.css(n.scrollbarYRail,"display",""),n.railYHeight=null,n.railYRatio=null}function r(t){return t.getAttribute("data-ps-id")}function a(t,e){t.setAttribute("data-ps-id",e)}function o(t){t.removeAttribute("data-ps-id")}var s=t("../lib/helper"),l=t("../lib/class"),h=t("./default-setting"),c=t("../lib/dom"),u=t("../lib/event-manager"),d=t("../lib/guid"),p={};i.add=function(t){var e=d();return a(t,e),p[e]=new n(t),p[e]},i.remove=function(t){delete p[r(t)],o(t)},i.get=function(t){return p[r(t)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(t,e){"use strict";function i(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function n(t,e){var i={width:e.railXWidth};e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:i.left=t.scrollLeft,e.isScrollbarXUsingBottom?i.bottom=e.scrollbarXBottom-t.scrollTop:i.top=e.scrollbarXTop+t.scrollTop,o.css(e.scrollbarXRail,i);var n={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?n.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:n.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:n.left=e.scrollbarYLeft+t.scrollLeft,o.css(e.scrollbarYRail,n),o.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),o.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var r=t("../lib/helper"),a=t("../lib/class"),o=t("../lib/dom"),s=t("./instances"),l=t("./update-scroll");e.exports=function(t){var e=s.get(t);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight;var h;t.contains(e.scrollbarXRail)||(h=o.queryChildren(t,".ps-scrollbar-x-rail"),h.length>0&&h.forEach(function(t){o.remove(t)}),o.appendTo(e.scrollbarXRail,t)),t.contains(e.scrollbarYRail)||(h=o.queryChildren(t,".ps-scrollbar-y-rail"),h.length>0&&h.forEach(function(t){o.remove(t)}),o.appendTo(e.scrollbarYRail,t)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=i(e,r.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=r.toInt((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=i(e,r.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=r.toInt(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),n(t,e),e.scrollbarXActive?a.add(t,"ps-active-x"):(a.remove(t,"ps-active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,l(t,"left",0)),e.scrollbarYActive?a.add(t,"ps-active-y"):(a.remove(t,"ps-active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,l(t,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(t,e){"use strict";var i,n,r=t("./instances"),a=document.createEvent("Event"),o=document.createEvent("Event"),s=document.createEvent("Event"),l=document.createEvent("Event"),h=document.createEvent("Event"),c=document.createEvent("Event"),u=document.createEvent("Event"),d=document.createEvent("Event"),p=document.createEvent("Event"),f=document.createEvent("Event");a.initEvent("ps-scroll-up",!0,!0),o.initEvent("ps-scroll-down",!0,!0),s.initEvent("ps-scroll-left",!0,!0),l.initEvent("ps-scroll-right",!0,!0),h.initEvent("ps-scroll-y",!0,!0),c.initEvent("ps-scroll-x",!0,!0),u.initEvent("ps-x-reach-start",!0,!0),d.initEvent("ps-x-reach-end",!0,!0),p.initEvent("ps-y-reach-start",!0,!0),f.initEvent("ps-y-reach-end",!0,!0),e.exports=function(t,e,m){if(void 0===t)throw"You must provide an element to the update-scroll function";if(void 0===e)throw"You must provide an axis to the update-scroll function";if(void 0===m)throw"You must provide a value to the update-scroll function";"top"===e&&m<=0&&(t.scrollTop=m=0,t.dispatchEvent(p)),"left"===e&&m<=0&&(t.scrollLeft=m=0,t.dispatchEvent(u));var g=r.get(t);"top"===e&&m>=g.contentHeight-g.containerHeight&&(m=g.contentHeight-g.containerHeight,m-t.scrollTop<=1?m=t.scrollTop:t.scrollTop=m,t.dispatchEvent(f)),"left"===e&&m>=g.contentWidth-g.containerWidth&&(m=g.contentWidth-g.containerWidth,m-t.scrollLeft<=1?m=t.scrollLeft:t.scrollLeft=m,t.dispatchEvent(d)),i||(i=t.scrollTop),n||(n=t.scrollLeft),"top"===e&&m<i&&t.dispatchEvent(a),"top"===e&&m>i&&t.dispatchEvent(o),"left"===e&&m<n&&t.dispatchEvent(s),"left"===e&&m>n&&t.dispatchEvent(l),"top"===e&&(t.scrollTop=i=m,t.dispatchEvent(h)),"left"===e&&(t.scrollLeft=n=m,t.dispatchEvent(c))}},{"./instances":18}],21:[function(t,e){"use strict";var i=t("../lib/helper"),n=t("../lib/dom"),r=t("./instances"),a=t("./update-geometry"),o=t("./update-scroll");e.exports=function(t){var e=r.get(t);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,n.css(e.scrollbarXRail,"display","block"),n.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=i.toInt(n.css(e.scrollbarXRail,"marginLeft"))+i.toInt(n.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=i.toInt(n.css(e.scrollbarYRail,"marginTop"))+i.toInt(n.css(e.scrollbarYRail,"marginBottom")),n.css(e.scrollbarXRail,"display","none"),n.css(e.scrollbarYRail,"display","none"),a(t),o(t,"top",t.scrollTop),o(t,"left",t.scrollLeft),n.css(e.scrollbarXRail,"display",""),n.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]),function(t){"use strict";if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("./chartiq"));else if("function"==typeof define&&define.amd)define(["chartiq"],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Only CommonJS, RequireJS, and <script> tags supported for splines.js.");var e="undefined"!=typeof window?window:self;t(e)}}(function(t){return t.SplinePlotter||(t.SplinePlotter={}),t.SplinePlotter.plotSpline=function(t,e,i){function n(i){var n=t[i],r=t[i+1],a=t[i+2],o=t[i+3],s=t[i+4],l=t[i+5];if(isNaN(n)||isNaN(a)||isNaN(s)||isNaN(r)||isNaN(o)||isNaN(l))return null;var h=Math.sqrt(Math.pow(a-n,2)+Math.pow(o-r,2)),c=Math.sqrt(Math.pow(s-a,2)+Math.pow(l-o,2)),u=e*h/(h+c),d=e-u;return[a+u*(n-s),o+u*(r-l),a-d*(n-s),o-d*(r-l)]}for(var r=[],a=t.length,o=0;o<a-4;o+=2)r=r.concat(n(o));if(null!==r){for(i.quadraticCurveTo(r[0],r[1],t[2],t[3]),
o=2;o<t.length-5;o+=2)i.bezierCurveTo(r[2*o-2],r[2*o-1],r[2*o],r[2*o+1],t[o+2],t[o+3]);i.quadraticCurveTo(r[2*a-10],r[2*a-9],t[a-4],t[a-3])}},t}),function(){window.WebComponents=window.WebComponents||{flags:{}};var t="webcomponents-lite.js",e=document.querySelector('script[src*="'+t+'"]'),i={};if(!i.noOpts){if(location.search.slice(1).split("&").forEach(function(t){var e,n=t.split("=");n[0]&&(e=n[0].match(/wc-(.+)/))&&(i[e[1]]=n[1]||!0)}),e)for(var n,r=0;n=e.attributes[r];r++)"src"!==n.name&&(i[n.name]=n.value||!0);if(i.log&&i.log.split){var a=i.log.split(",");i.log={},a.forEach(function(t){i.log[t]=!0})}else i.log={}}i.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=i.register),WebComponents.flags=i}(),function(t){"use strict";function e(t){return void 0!==u[t]}function i(){s.call(this),this._isInvalid=!0}function n(t){return""==t&&i.call(this),t.toLowerCase()}function r(t){var e=t.charCodeAt(0);return e>32&&127>e&&-1==[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function a(t){var e=t.charCodeAt(0);return e>32&&127>e&&-1==[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}function o(t,o,s){function l(t){x.push(t)}var h=o||"scheme start",c=0,g="",v=!1,y=!1,x=[];t:for(;(t[c-1]!=p||0==c)&&!this._isInvalid;){var b=t[c];switch(h){case"scheme start":if(!b||!f.test(b)){if(o){l("Invalid scheme.");break t}g="",h="no scheme";continue}g+=b.toLowerCase(),h="scheme";break;case"scheme":if(b&&m.test(b))g+=b.toLowerCase();else{if(":"!=b){if(o){if(p==b)break t;l("Code point not allowed in scheme: "+b);break t}g="",c=0,h="no scheme";continue}if(this._scheme=g,g="",o)break t;e(this._scheme)&&(this._isRelative=!0),h="file"==this._scheme?"relative":this._isRelative&&s&&s._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==b?(this._query="?",h="query"):"#"==b?(this._fragment="#",h="fragment"):p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._schemeData+=r(b));break;case"no scheme":if(s&&e(s._scheme)){h="relative";continue}l("Missing scheme."),i.call(this);break;case"relative or authority":if("/"!=b||"/"!=t[c+1]){l("Expected /, got: "+b),h="relative";continue}h="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=s._scheme),p==b){this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._username=s._username,this._password=s._password;break t}if("/"==b||"\\"==b)"\\"==b&&l("\\ is an invalid code point."),h="relative slash";else if("?"==b)this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query="?",this._username=s._username,this._password=s._password,h="query";else{if("#"!=b){var C=t[c+1],w=t[c+2];("file"!=this._scheme||!f.test(b)||":"!=C&&"|"!=C||p!=w&&"/"!=w&&"\\"!=w&&"?"!=w&&"#"!=w)&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password,this._path=s._path.slice(),this._path.pop()),h="relative path";continue}this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._fragment="#",this._username=s._username,this._password=s._password,h="fragment"}break;case"relative slash":if("/"!=b&&"\\"!=b){"file"!=this._scheme&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password),h="relative path";continue}"\\"==b&&l("\\ is an invalid code point."),h="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=b){l("Expected '/', got: "+b),h="authority ignore slashes";continue}h="authority second slash";break;case"authority second slash":if(h="authority ignore slashes","/"!=b){l("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!=b&&"\\"!=b){h="authority";continue}l("Expected authority, got: "+b);break;case"authority":if("@"==b){v&&(l("@ already seen."),g+="%40"),v=!0;for(var S=0;S<g.length;S++){var T=g[S];if("\t"!=T&&"\n"!=T&&"\r"!=T)if(":"!=T||null!==this._password){var D=r(T);null!==this._password?this._password+=D:this._username+=D}else this._password="";else l("Invalid whitespace in authority.")}g=""}else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){c-=g.length,g="",h="host";continue}g+=b}break;case"file host":if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){2!=g.length||!f.test(g[0])||":"!=g[1]&&"|"!=g[1]?0==g.length?h="relative path start":(this._host=n.call(this,g),g="",h="relative path start"):h="relative path";continue}"\t"==b||"\n"==b||"\r"==b?l("Invalid whitespace in file host."):g+=b;break;case"host":case"hostname":if(":"!=b||y){if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){if(this._host=n.call(this,g),g="",h="relative path start",o)break t;continue}"\t"!=b&&"\n"!=b&&"\r"!=b?("["==b?y=!0:"]"==b&&(y=!1),g+=b):l("Invalid code point in host/hostname: "+b)}else if(this._host=n.call(this,g),g="",h="port","hostname"==o)break t;break;case"port":if(/[0-9]/.test(b))g+=b;else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b||o){if(""!=g){var M=parseInt(g,10);M!=u[this._scheme]&&(this._port=M+""),g=""}if(o)break t;h="relative path start";continue}"\t"==b||"\n"==b||"\r"==b?l("Invalid code point in port: "+b):i.call(this)}break;case"relative path start":if("\\"==b&&l("'\\' not allowed in path."),h="relative path","/"!=b&&"\\"!=b)continue;break;case"relative path":if(p!=b&&"/"!=b&&"\\"!=b&&(o||"?"!=b&&"#"!=b))"\t"!=b&&"\n"!=b&&"\r"!=b&&(g+=r(b));else{"\\"==b&&l("\\ not allowed in relative path.");var k;(k=d[g.toLowerCase()])&&(g=k),".."==g?(this._path.pop(),"/"!=b&&"\\"!=b&&this._path.push("")):"."==g&&"/"!=b&&"\\"!=b?this._path.push(""):"."!=g&&("file"==this._scheme&&0==this._path.length&&2==g.length&&f.test(g[0])&&"|"==g[1]&&(g=g[0]+":"),this._path.push(g)),g="","?"==b?(this._query="?",h="query"):"#"==b&&(this._fragment="#",h="fragment")}break;case"query":o||"#"!=b?p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._query+=a(b)):(this._fragment="#",h="fragment");break;case"fragment":p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._fragment+=b)}c++}}function s(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function l(t,e){void 0===e||e instanceof l||(e=new l(String(e))),this._url=t,s.call(this);var i=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");o.call(this,i,null,e)}var h=!1;if(!t.forceJURL)try{var c=new URL("b","http://a");c.pathname="c%20d",h="http://a/c%20d"===c.href}catch(t){}if(!h){var u=Object.create(null);u.ftp=21,u.file=0,u.gopher=70,u.http=80,u.https=443,u.ws=80,u.wss=443;var d=Object.create(null);d["%2e"]=".",d[".%2e"]="..",d["%2e."]="..",d["%2e%2e"]="..";var p=void 0,f=/[a-zA-Z]/,m=/[a-zA-Z0-9\+\-\.]/;l.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""==this._username&&null==this._password||(t=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){s.call(this),o.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||o.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&o.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&o.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&o.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],o.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"==t[0]&&(t=t.slice(1)),o.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"==t[0]&&(t=t.slice(1)),o.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return t=this.host,t?this._scheme+"://"+t:""}};var g=t.URL;g&&(l.createObjectURL=function(){return g.createObjectURL.apply(g,arguments)},l.revokeObjectURL=function(t){g.revokeObjectURL(t)}),t.URL=l}}(self),"undefined"==typeof WeakMap&&function(){var t=Object.defineProperty,e=Date.now()%1e9,i=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"};i.prototype={set:function(e,i){var n=e[this.name];return n&&n[0]===e?n[1]=i:t(e,this.name,{value:[e,i],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=i}(),function(t){function e(t){b.push(t),x||(x=!0,m(n))}function i(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function n(){x=!1;var t=b;b=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var i=t.takeRecords();r(t),i.length&&(t.callback_(i,t),e=!0)}),e&&n()}function r(t){t.nodes_.forEach(function(e){var i=g.get(e);i&&i.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function a(t,e){for(var i=t;i;i=i.parentNode){var n=g.get(i);if(n)for(var r=0;r<n.length;r++){var a=n[r],o=a.options;if(i===t||o.subtree){var s=e(o);s&&a.enqueue(s)}}}}function o(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++C}function s(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function l(t){var e=new s(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function h(t,e){return w=new s(t,e)}function c(t){return S||(S=l(w),S.oldValue=t,S)}function u(){w=S=void 0}function d(t){return t===S||t===w}function p(t,e){return t===e?t:S&&d(t)?S:null}function f(t,e,i){this.observer=t,this.target=e,this.options=i,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var m,g=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],y=String(Math.random());window.addEventListener("message",function(t){if(t.data===y){var e=v;v=[],e.forEach(function(t){t()})}}),m=function(t){v.push(t),window.postMessage(y,"*")}}var x=!1,b=[],C=0;o.prototype={observe:function(t,e){if(t=i(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=g.get(t);n||g.set(t,n=[]);for(var r,a=0;a<n.length;a++)if(n[a].observer===this){r=n[a],r.removeListeners(),r.options=e;break}r||(r=new f(this,t,e),n.push(r),this.nodes_.push(t)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=g.get(t),i=0;i<e.length;i++){var n=e[i];if(n.observer===this){n.removeListeners(),e.splice(i,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var w,S;f.prototype={enqueue:function(t){var i=this.observer.records_,n=i.length;if(i.length>0){var r=i[n-1],a=p(r,t);if(a)return void(i[n-1]=a)}else e(this.observer);i[n]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=g.get(t);e||g.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=g.get(t),i=0;i<e.length;i++)if(e[i]===this){e.splice(i,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,n=t.target,r=new h("attributes",n);r.attributeName=e,r.attributeNamespace=i;var o=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;a(n,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(i)?void 0:t.attributeOldValue?c(o):r});break;case"DOMCharacterDataModified":var n=t.target,r=h("characterData",n),o=t.prevValue;a(n,function(t){return t.characterData?t.characterDataOldValue?c(o):r:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var s,l,d=t.target;"DOMNodeInserted"===t.type?(s=[d],l=[]):(s=[],l=[d]);var p=d.previousSibling,f=d.nextSibling,r=h("childList",t.target.parentNode);r.addedNodes=s,r.removedNodes=l,r.previousSibling=p,r.nextSibling=f,a(t.relatedNode,function(t){return t.childList?r:void 0})}u()}},t.JsMutationObserver=o,t.MutationObserver||(t.MutationObserver=o,o._isPolyfilled=!0)}}(self),function(){function t(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"\xa0":return"&nbsp;"}}function e(e){return e.replace(u,t)}var i="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&function(){var t=document.importNode;document.importNode=function(){var e=t.apply(document,arguments);if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var i=document.createDocumentFragment();return i.appendChild(e),i}return e}}();var n=function(){if(!i){var t=document.createElement("template"),e=document.createElement("template");e.content.appendChild(document.createElement("div")),t.content.appendChild(e);var n=t.cloneNode(!0);return 0===n.content.childNodes.length||0===n.content.firstChild.content.childNodes.length}}(),r="template",a=function(){};if(i){var o=document.implementation.createHTMLDocument("template"),s=!0,l=document.createElement("style");l.textContent=r+"{display:none;}";var h=document.head;h.insertBefore(l,h.firstElementChild),a.prototype=Object.create(HTMLElement.prototype),a.decorate=function(t){if(!t.content){t.content=o.createDocumentFragment();for(var i;i=t.firstChild;)t.content.appendChild(i);if(t.cloneNode=function(t){return a.cloneNode(this,t)},s)try{Object.defineProperty(t,"innerHTML",{get:function(){for(var t="",i=this.content.firstChild;i;i=i.nextSibling)t+=i.outerHTML||e(i.data);return t},set:function(t){for(o.body.innerHTML=t,a.bootstrap(o);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;o.body.firstChild;)this.content.appendChild(o.body.firstChild)},configurable:!0})}catch(t){s=!1}a.bootstrap(t.content)}},a.bootstrap=function(t){for(var e,i=t.querySelectorAll(r),n=0,o=i.length;o>n&&(e=i[n]);n++)a.decorate(e)},document.addEventListener("DOMContentLoaded",function(){a.bootstrap(document)});var c=document.createElement;document.createElement=function(){"use strict";var t=c.apply(document,arguments);return"template"===t.localName&&a.decorate(t),t};var u=/[&\u00A0<>]/g}if(i||n){var d=Node.prototype.cloneNode;a.cloneNode=function(t,e){var i=d.call(t,!1);return this.decorate&&this.decorate(i),e&&(i.content.appendChild(d.call(t.content,!0)),this.fixClonedDom(i.content,t.content)),i},a.fixClonedDom=function(t,e){if(e.querySelectorAll)for(var i,n,a=e.querySelectorAll(r),o=t.querySelectorAll(r),s=0,l=o.length;l>s;s++)n=a[s],i=o[s],this.decorate&&this.decorate(n),i.parentNode.replaceChild(n.cloneNode(!0),i)};var p=document.importNode;Node.prototype.cloneNode=function(t){var e=d.call(this,t);return t&&a.fixClonedDom(e,this),e},document.importNode=function(t,e){if(t.localName===r)return a.cloneNode(t,e);var i=p.call(document,t,e);return e&&a.fixClonedDom(i,t),i},n&&(HTMLTemplateElement.prototype.cloneNode=function(t){return a.cloneNode(this,t)})}i&&(window.HTMLTemplateElement=a)}(),function(){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}if(window.requestAnimationFrame||(window.requestAnimationFrame=function(){var t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?function(e){return t(function(){e(performance.now())})}:function(t){return window.setTimeout(t,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}}()),!function(){var t=document.createEvent("Event");return t.initEvent("foo",!0,!0),t.preventDefault(),t.defaultPrevented}()){var e=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(e.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var i=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||i&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),i},window.CustomEvent.prototype=window.Event.prototype),!window.Event||i&&"function"!=typeof window.Event){var n=window.Event;window.Event=function(t,e){e=e||{};var i=document.createEvent("Event");return i.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),i},window.Event.prototype=n.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(t){function e(t,e){e=e||f,n(function(){a(t,e)},e)}function i(t){return"complete"===t.readyState||t.readyState===v}function n(t,e){if(i(e))t&&t();else{var r=function(){"complete"!==e.readyState&&e.readyState!==v||(e.removeEventListener(y,r),n(t,e))};e.addEventListener(y,r)}}function r(t){t.target.__loaded=!0}function a(t,e){function i(){l==h&&t&&t({allImports:s,loadedImports:c,errorImports:u})}function n(t){r(t),c.push(this),l++,i()}function a(){u.push(this),l++,i()}var s=e.querySelectorAll("link[rel=import]"),l=0,h=s.length,c=[],u=[];if(h)for(var d,p=0;h>p&&(d=s[p]);p++)o(d)?(c.push(this),l++,i()):(d.addEventListener("load",n),d.addEventListener("error",a));else i()}function o(t){return u?t.__loaded||t["import"]&&"loading"!==t["import"].readyState:t.__importParsed}function s(t){for(var e,i=0,n=t.length;n>i&&(e=t[i]);i++)l(e)&&h(e)}function l(t){return"link"===t.localName&&"import"===t.rel}function h(t){t["import"]?r({target:t}):(t.addEventListener("load",r),t.addEventListener("error",r))}var c="import",u=Boolean(c in document.createElement("link")),d=Boolean(window.ShadowDOMPolyfill),p=function(t){return d?window.ShadowDOMPolyfill.wrapIfNeeded(t):t},f=p(document),m={get:function(){var t=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return p(t)},configurable:!0};Object.defineProperty(document,"_currentScript",m),Object.defineProperty(f,"_currentScript",m);var g=/Trident/.test(navigator.userAgent),v=g?"complete":"interactive",y="readystatechange";u&&(new MutationObserver(function(t){for(var e,i=0,n=t.length;n>i&&(e=t[i]);i++)e.addedNodes&&s(e.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var t,e=document.querySelectorAll("link[rel=import]"),i=0,n=e.length;n>i&&(t=e[i]);i++)h(t)}()),e(function(t){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var e=f.createEvent("CustomEvent");e.initCustomEvent("HTMLImportsLoaded",!0,!0,t),f.dispatchEvent(e)}),t.IMPORT_LINK_TYPE=c,t.useNative=u,t.rootDocument=f,t.whenReady=e,t.isIE=g}(window.HTMLImports),function(t){var e=[],i=function(t){e.push(t)},n=function(){e.forEach(function(e){e(t)})};t.addModule=i,t.initializeModules=n}(window.HTMLImports),window.HTMLImports.addModule(function(t){var e=/(url\()([^)]*)(\))/g,i=/(@import[\s]+(?!url\())([^;]*)(;)/g,n={resolveUrlsInStyle:function(t,e){var i=t.ownerDocument,n=i.createElement("a");return t.textContent=this.resolveUrlsInCssText(t.textContent,e,n),t},resolveUrlsInCssText:function(t,n,r){var a=this.replaceUrls(t,r,n,e);return a=this.replaceUrls(a,r,n,i)},replaceUrls:function(t,e,i,n){return t.replace(n,function(t,n,r,a){var o=r.replace(/["']/g,"");return i&&(o=new URL(o,i).href),e.href=o,o=e.href,n+"'"+o+"'"+a})}};t.path=n}),window.HTMLImports.addModule(function(t){var e={async:!0,ok:function(t){return t.status>=200&&t.status<300||304===t.status||0===t.status},load:function(i,n,r){var a=new XMLHttpRequest;return(t.flags.debug||t.flags.bust)&&(i+="?"+Math.random()),a.open("GET",i,e.async),a.addEventListener("readystatechange",function(){if(4===a.readyState){var t=null;try{var i=a.getResponseHeader("Location");i&&(t="/"===i.substr(0,1)?location.origin+i:i)}catch(t){console.error(t.message)}n.call(r,!e.ok(a)&&a,a.response||a.responseText,t)}}),a.send(),a},loadDocument:function(t,e,i){this.load(t,e,i).responseType="document"}};t.xhr=e}),window.HTMLImports.addModule(function(t){var e=t.xhr,i=t.flags,n=function(t,e){this.cache={},this.onload=t,this.oncomplete=e,this.inflight=0,this.pending={}};n.prototype={addNodes:function(t){this.inflight+=t.length;for(var e,i=0,n=t.length;n>i&&(e=t[i]);i++)this.require(e);this.checkDone()},addNode:function(t){this.inflight++,this.require(t),this.checkDone()},require:function(t){var e=t.src||t.href;t.__nodeUrl=e,this.dedupe(e,t)||this.fetch(e,t)},dedupe:function(t,e){return this.pending[t]?(this.pending[t].push(e),!0):this.cache[t]?(this.onload(t,e,this.cache[t]),this.tail(),!0):(this.pending[t]=[e],!1)},fetch:function(t,n){if(i.load&&console.log("fetch",t,n),t)if(t.match(/^data:/)){var r=t.split(","),a=r[0],o=r[1];o=a.indexOf(";base64")>-1?atob(o):decodeURIComponent(o),setTimeout(function(){this.receive(t,n,null,o)}.bind(this),0)}else{var s=function(e,i,r){this.receive(t,n,e,i,r)}.bind(this);e.load(t,s)}else setTimeout(function(){this.receive(t,n,{error:"href must be specified"},null)}.bind(this),0)},receive:function(t,e,i,n,r){this.cache[t]=n;for(var a,o=this.pending[t],s=0,l=o.length;l>s&&(a=o[s]);s++)this.onload(t,a,n,i,r),this.tail();this.pending[t]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},t.Loader=n}),window.HTMLImports.addModule(function(t){var e=function(t){this.addCallback=t,this.mo=new MutationObserver(this.handler.bind(this))};e.prototype={handler:function(t){for(var e,i=0,n=t.length;n>i&&(e=t[i]);i++)"childList"===e.type&&e.addedNodes.length&&this.addedNodes(e.addedNodes)},addedNodes:function(t){this.addCallback&&this.addCallback(t);for(var e,i=0,n=t.length;n>i&&(e=t[i]);i++)e.children&&e.children.length&&this.addedNodes(e.children)},observe:function(t){this.mo.observe(t,{childList:!0,subtree:!0})}},t.Observer=e}),window.HTMLImports.addModule(function(t){function e(t){return"link"===t.localName&&t.rel===c}function i(t){var e=n(t);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(e)}function n(t){return t.textContent+r(t)}function r(t){var e=t.ownerDocument;e.__importedScripts=e.__importedScripts||0;var i=t.ownerDocument.baseURI,n=e.__importedScripts?"-"+e.__importedScripts:"";return e.__importedScripts++,"\n//# sourceURL="+i+n+".js\n"}function a(t){var e=t.ownerDocument.createElement("style");return e.textContent=t.textContent,o.resolveUrlsInStyle(e),e}var o=t.path,s=t.rootDocument,l=t.flags,h=t.isIE,c=t.IMPORT_LINK_TYPE,u="link[rel="+c+"]",d={documentSelectors:u,importsSelectors:[u,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var t=this.nextToParse();t&&this.parse(t)},parse:function(t){if(this.isParsed(t))return void(l.parse&&console.log("[%s] is already parsed",t.localName));var e=this[this.map[t.localName]];e&&(this.markParsing(t),e.call(this,t))},parseDynamic:function(t,e){this.dynamicElements.push(t),e||this.parseNext()},markParsing:function(t){l.parse&&console.log("parsing",t),this.parsingElement=t},markParsingComplete:function(t){t.__importParsed=!0,this.markDynamicParsingComplete(t),t.__importElement&&(t.__importElement.__importParsed=!0,this.markDynamicParsingComplete(t.__importElement)),this.parsingElement=null,l.parse&&console.log("completed",t)},markDynamicParsingComplete:function(t){var e=this.dynamicElements.indexOf(t);e>=0&&this.dynamicElements.splice(e,1)},parseImport:function(t){if(t["import"]=t.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(t),t["import"]&&(t["import"].__importParsed=!0),this.markParsingComplete(t),t.__resource&&!t.__error?t.dispatchEvent(new CustomEvent("load",{bubbles:!1})):t.dispatchEvent(new CustomEvent("error",{bubbles:!1})),t.__pending)for(var e;t.__pending.length;)(e=t.__pending.shift())&&e({target:t});this.parseNext()},parseLink:function(t){e(t)?this.parseImport(t):(t.href=t.href,this.parseGeneric(t))},parseStyle:function(t){var e=t;t=a(t),e.__appliedElement=t,t.__importElement=e,this.parseGeneric(t)},parseGeneric:function(t){this.trackElement(t),this.addElementToDocument(t)},rootImportForElement:function(t){for(var e=t;e.ownerDocument.__importLink;)e=e.ownerDocument.__importLink;return e},addElementToDocument:function(t){var e=this.rootImportForElement(t.__importElement||t);e.parentNode.insertBefore(t,e)},trackElement:function(t,e){var i=this,n=function(r){t.removeEventListener("load",n),t.removeEventListener("error",n),e&&e(r),i.markParsingComplete(t),i.parseNext()};if(t.addEventListener("load",n),t.addEventListener("error",n),h&&"style"===t.localName){var r=!1;if(-1==t.textContent.indexOf("@import"))r=!0;else if(t.sheet){r=!0;for(var a,o=t.sheet.cssRules,s=o?o.length:0,l=0;s>l&&(a=o[l]);l++)a.type===CSSRule.IMPORT_RULE&&(r=r&&Boolean(a.styleSheet))}r&&setTimeout(function(){t.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(e){var n=document.createElement("script");n.__importElement=e,n.src=e.src?e.src:i(e),t.currentScript=e,this.trackElement(n,function(){n.parentNode&&n.parentNode.removeChild(n),t.currentScript=null}),this.addElementToDocument(n)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(s)||this.nextToParseDynamic())},nextToParseInDoc:function(t,i){if(t&&this._mayParse.indexOf(t)<0){this._mayParse.push(t);for(var n,r=t.querySelectorAll(this.parseSelectorsForNode(t)),a=0,o=r.length;o>a&&(n=r[a]);a++)if(!this.isParsed(n))return this.hasResource(n)?e(n)?this.nextToParseInDoc(n.__doc,n):n:void 0}return i},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(t){return(t.ownerDocument||t)===s?this.documentSelectors:this.importsSelectors},isParsed:function(t){return t.__importParsed},needsDynamicParsing:function(t){return this.dynamicElements.indexOf(t)>=0},hasResource:function(t){return!e(t)||void 0!==t.__doc}};t.parser=d,t.IMPORT_SELECTOR=u}),window.HTMLImports.addModule(function(t){function e(t){return i(t,o)}function i(t,e){return"link"===t.localName&&t.getAttribute("rel")===e}function n(t){return!!Object.getOwnPropertyDescriptor(t,"baseURI")}function r(t,e){var i=document.implementation.createHTMLDocument(o);i._URL=e;var r=i.createElement("base");r.setAttribute("href",e),i.baseURI||n(i)||Object.defineProperty(i,"baseURI",{value:e});var a=i.createElement("meta");return a.setAttribute("charset","utf-8"),i.head.appendChild(a),i.head.appendChild(r),i.body.innerHTML=t,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(i),i}var a=t.flags,o=t.IMPORT_LINK_TYPE,s=t.IMPORT_SELECTOR,l=t.rootDocument,h=t.Loader,c=t.Observer,u=t.parser,d={documents:{},documentPreloadSelectors:s,importsPreloadSelectors:[s].join(","),loadNode:function(t){p.addNode(t)},loadSubtree:function(t){var e=this.marshalNodes(t);p.addNodes(e)},marshalNodes:function(t){return t.querySelectorAll(this.loadSelectorsForNode(t))},loadSelectorsForNode:function(t){return(t.ownerDocument||t)===l?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(t,i,n,o,s){if(a.load&&console.log("loaded",t,i),i.__resource=n,i.__error=o,e(i)){var l=this.documents[t];void 0===l&&(l=o?null:r(n,s||t),l&&(l.__importLink=i,this.bootDocument(l)),this.documents[t]=l),i.__doc=l}u.parseNext()},bootDocument:function(t){this.loadSubtree(t),this.observer.observe(t),u.parseNext()},loadedAll:function(){u.parseNext()}},p=new h(d.loaded.bind(d),d.loadedAll.bind(d));if(d.observer=new c,!document.baseURI){var f={get:function(){var t=document.querySelector("base");return t?t.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",f),Object.defineProperty(l,"baseURI",f)}t.importer=d,t.importLoader=p}),window.HTMLImports.addModule(function(t){var e=t.parser,i=t.importer,n={added:function(t){for(var n,r,a,o,s=0,l=t.length;l>s&&(o=t[s]);s++)n||(n=o.ownerDocument,r=e.isParsed(n)),a=this.shouldLoadNode(o),a&&i.loadNode(o),this.shouldParseNode(o)&&r&&e.parseDynamic(o,a)},shouldLoadNode:function(t){return 1===t.nodeType&&r.call(t,i.loadSelectorsForNode(t))},shouldParseNode:function(t){return 1===t.nodeType&&r.call(t,e.parseSelectorsForNode(t))}};i.observer.addCallback=n.added.bind(n);var r=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(t){function e(){window.HTMLImports.importer.bootDocument(n)}var i=t.initializeModules;if(t.isIE,!t.useNative){i();var n=t.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?e():document.addEventListener("DOMContentLoaded",e)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(t){var e=t.flags,i=[],n=function(t){i.push(t)},r=function(){i.forEach(function(e){e(t)})};t.addModule=n,t.initializeModules=r,t.hasNative=Boolean(document.registerElement),t.isIE=/Trident/.test(navigator.userAgent),t.useNative=!e.register&&t.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(t){function e(t,e){i(t,function(t){return!!e(t)||void n(t,e)}),n(t,e)}function i(t,e,n){var r=t.firstElementChild;if(!r)for(r=t.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)!0!==e(r,n)&&i(r,e,n),r=r.nextElementSibling;return null}function n(t,i){for(var n=t.shadowRoot;n;)e(n,i),n=n.olderShadowRoot}function r(t,e){a(t,e,[])}function a(t,e,i){if(t=window.wrap(t),!(i.indexOf(t)>=0)){i.push(t);for(var n,r=t.querySelectorAll("link[rel="+o+"]"),s=0,l=r.length;l>s&&(n=r[s]);s++)n["import"]&&a(n["import"],e,i);e(t)}}var o=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=r,t.forSubtree=e}),window.CustomElements.addModule(function(t){function e(t,e){return i(t,e)||n(t,e)}function i(e,i){return!!t.upgrade(e,i)||void(i&&o(e))}function n(t,e){x(t,function(t){return!!i(t,e)||void 0})}function r(t){S.push(t),w||(w=!0,setTimeout(a))}function a(){w=!1;for(var t,e=S,i=0,n=e.length;n>i&&(t=e[i]);i++)t();S=[]}function o(t){C?r(function(){s(t)}):s(t)}function s(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function l(t){h(t),x(t,function(t){h(t)})}function h(t){C?r(function(){c(t)}):c(t)}function c(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function u(t){for(var e=t,i=window.wrap(document);e;){if(e==i)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}function d(t){if(t.shadowRoot&&!t.shadowRoot.__watched){y.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)m(e),e=e.olderShadowRoot}}function p(t,i){if(y.dom){var n=i[0]
;if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var r=n.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var a=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";a=a.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",i.length,a||"")}var o=u(t);i.forEach(function(t){"childList"===t.type&&(T(t.addedNodes,function(t){t.localName&&e(t,o)}),T(t.removedNodes,function(t){t.localName&&l(t)}))}),y.dom&&console.groupEnd()}function f(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(p(t,e.takeRecords()),a())}function m(t){if(!t.__observer){var e=new MutationObserver(p.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function g(t){t=window.wrap(t),y.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),e(t,t===window.wrap(document)),m(t),y.dom&&console.groupEnd()}function v(t){b(t,g)}var y=t.flags,x=t.forSubtree,b=t.forDocumentTree,C=window.MutationObserver._isPolyfilled&&y["throttle-attached"];t.hasPolyfillMutations=C,t.hasThrottledAttached=C;var w=!1,S=[],T=Array.prototype.forEach.call.bind(Array.prototype.forEach),D=Element.prototype.createShadowRoot;D&&(Element.prototype.createShadowRoot=function(){var t=D.call(this);return window.CustomElements.watchShadow(this),t}),t.watchShadow=d,t.upgradeDocumentTree=v,t.upgradeDocument=g,t.upgradeSubtree=n,t.upgradeAll=e,t.attached=o,t.takeRecords=f}),window.CustomElements.addModule(function(t){function e(e,n){if("template"===e.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e),!e.__upgraded__&&e.nodeType===Node.ELEMENT_NODE){var r=e.getAttribute("is"),a=t.getRegisteredDefinition(e.localName)||t.getRegisteredDefinition(r);if(a&&(r&&a.tag==e.localName||!r&&!a["extends"]))return i(e,a,n)}}function i(e,i,r){return o.upgrade&&console.group("upgrade:",e.localName),i.is&&e.setAttribute("is",i.is),n(e,i),e.__upgraded__=!0,a(e),r&&t.attached(e),t.upgradeSubtree(e,r),o.upgrade&&console.groupEnd(),e}function n(t,e){Object.__proto__?t.__proto__=e.prototype:(r(t,e.prototype,e["native"]),t.__proto__=e.prototype)}function r(t,e,i){for(var n={},r=e;r!==i&&r!==HTMLElement.prototype;){for(var a,o=Object.getOwnPropertyNames(r),s=0;a=o[s];s++)n[a]||(Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a)),n[a]=1);r=Object.getPrototypeOf(r)}}function a(t){t.createdCallback&&t.createdCallback()}var o=t.flags;t.upgrade=e,t.upgradeWithDefinition=i,t.implementPrototype=n}),window.CustomElements.addModule(function(t){function e(e,n){var l=n||{};if(!e)throw new Error("document.registerElement: first argument `name` must not be empty");if(e.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(e)+"'.");if(r(e))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(e)+"'. The type name is invalid.");if(h(e))throw new Error("DuplicateDefinitionError: a type with name '"+String(e)+"' is already registered");return l.prototype||(l.prototype=Object.create(HTMLElement.prototype)),l.__name=e.toLowerCase(),l["extends"]&&(l["extends"]=l["extends"].toLowerCase()),l.lifecycle=l.lifecycle||{},l.ancestry=a(l["extends"]),o(l),s(l),i(l.prototype),c(l.__name,l),l.ctor=u(l),l.ctor.prototype=l.prototype,l.prototype.constructor=l.ctor,t.ready&&g(document),l.ctor}function i(t){if(!t.setAttribute._polyfilled){var e=t.setAttribute;t.setAttribute=function(t,i){n.call(this,t,i,e)};var i=t.removeAttribute;t.removeAttribute=function(t){n.call(this,t,null,i)},t.setAttribute._polyfilled=!0}}function n(t,e,i){t=t.toLowerCase();var n=this.getAttribute(t);i.apply(this,arguments);var r=this.getAttribute(t);this.attributeChangedCallback&&r!==n&&this.attributeChangedCallback(t,n,r)}function r(t){for(var e=0;e<C.length;e++)if(t===C[e])return!0}function a(t){var e=h(t);return e?a(e["extends"]).concat([e]):[]}function o(t){for(var e,i=t["extends"],n=0;e=t.ancestry[n];n++)i=e.is&&e.tag;t.tag=i||t.__name,i&&(t.is=t.__name)}function s(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var i=document.createElement(t.tag);e=Object.getPrototypeOf(i)}for(var n,r=t.prototype,a=!1;r;)r==e&&(a=!0),n=Object.getPrototypeOf(r),n&&(r.__proto__=n),r=n;a||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t["native"]=e}}function l(t){return y(T(t.tag),t)}function h(t){return t?w[t.toLowerCase()]:void 0}function c(t,e){w[t]=e}function u(t){return function(){return l(t)}}function d(t,e,i){return t===S?p(e,i):D(t,e)}function p(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var i=h(e||t);if(i){if(t==i.tag&&e==i.is)return new i.ctor;if(!e&&!i.is)return new i.ctor}var n;return e?(n=p(t),n.setAttribute("is",e),n):(n=T(t),t.indexOf("-")>=0&&x(n,HTMLElement),n)}function f(t,e){var i=t[e];t[e]=function(){var t=i.apply(this,arguments);return v(t),t}}var m,g=(t.isIE,t.upgradeDocumentTree),v=t.upgradeAll,y=t.upgradeWithDefinition,x=t.implementPrototype,b=t.useNative,C=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],w={},S="http://www.w3.org/1999/xhtml",T=document.createElement.bind(document),D=document.createElementNS.bind(document);m=Object.__proto__||b?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var i=t;i;){if(i===e.prototype)return!0;i=i.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),document.registerElement=e,document.createElement=p,document.createElementNS=d,t.registry=w,t["instanceof"]=m,t.reservedTagList=C,t.getRegisteredDefinition=h,document.register=document.registerElement}),function(t){function e(){a(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var i=t.useNative,n=t.initializeModules;if(t.isIE,i){var r=function(){};t.watchShadow=r,t.upgrade=r,t.upgradeAll=r,t.upgradeDocumentTree=r,t.upgradeSubtree=r,t.takeRecords=r,t["instanceof"]=function(t,e){return t instanceof e}}else n();var a=t.upgradeDocumentTree,o=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t["import"]&&o(wrap(t["import"]))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)}else e()}(window.CustomElements),function(){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var e=document.querySelector("head");e.insertBefore(t,e.firstChild)}(window.WebComponents),function(){}.call(this);